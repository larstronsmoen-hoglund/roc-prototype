function t_(R,A){for(var B=0;B<A.length;B++){const P=A[B];if(typeof P!="string"&&!Array.isArray(P)){for(const D in P)if(D!=="default"&&!(D in R)){const X=Object.getOwnPropertyDescriptor(P,D);X&&Object.defineProperty(R,D,X.get?X:{enumerable:!0,get:()=>P[D]})}}}return Object.freeze(Object.defineProperty(R,Symbol.toStringTag,{value:"Module"}))}(function(){const A=document.createElement("link").relList;if(A&&A.supports&&A.supports("modulepreload"))return;for(const D of document.querySelectorAll('link[rel="modulepreload"]'))P(D);new MutationObserver(D=>{for(const X of D)if(X.type==="childList")for(const M of X.addedNodes)M.tagName==="LINK"&&M.rel==="modulepreload"&&P(M)}).observe(document,{childList:!0,subtree:!0});function B(D){const X={};return D.integrity&&(X.integrity=D.integrity),D.referrerPolicy&&(X.referrerPolicy=D.referrerPolicy),D.crossOrigin==="use-credentials"?X.credentials="include":D.crossOrigin==="anonymous"?X.credentials="omit":X.credentials="same-origin",X}function P(D){if(D.ep)return;D.ep=!0;const X=B(D);fetch(D.href,X)}})();function m1(R){return R&&R.__esModule&&Object.prototype.hasOwnProperty.call(R,"default")?R.default:R}var Tg={exports:{}},wf={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zg;function i_(){if(Zg)return wf;Zg=1;var R=Symbol.for("react.transitional.element"),A=Symbol.for("react.fragment");function B(P,D,X){var M=null;if(X!==void 0&&(M=""+X),D.key!==void 0&&(M=""+D.key),"key"in D){X={};for(var d in D)d!=="key"&&(X[d]=D[d])}else X=D;return D=X.ref,{$$typeof:R,type:P,key:M,ref:D!==void 0?D:null,props:X}}return wf.Fragment=A,wf.jsx=B,wf.jsxs=B,wf}var Hg;function r_(){return Hg||(Hg=1,Tg.exports=i_()),Tg.exports}var Bi=r_(),Mg={exports:{}},ti={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Gg;function a_(){if(Gg)return ti;Gg=1;var R=Symbol.for("react.transitional.element"),A=Symbol.for("react.portal"),B=Symbol.for("react.fragment"),P=Symbol.for("react.strict_mode"),D=Symbol.for("react.profiler"),X=Symbol.for("react.consumer"),M=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),ye=Symbol.for("react.suspense"),ke=Symbol.for("react.memo"),ot=Symbol.for("react.lazy"),Je=Symbol.for("react.activity"),xt=Symbol.iterator;function Ot(me){return me===null||typeof me!="object"?null:(me=xt&&me[xt]||me["@@iterator"],typeof me=="function"?me:null)}var dt={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Ce=Object.assign,aa={};function dr(me,Ue,at){this.props=me,this.context=Ue,this.refs=aa,this.updater=at||dt}dr.prototype.isReactComponent={},dr.prototype.setState=function(me,Ue){if(typeof me!="object"&&typeof me!="function"&&me!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,me,Ue,"setState")},dr.prototype.forceUpdate=function(me){this.updater.enqueueForceUpdate(this,me,"forceUpdate")};function _i(){}_i.prototype=dr.prototype;function oi(me,Ue,at){this.props=me,this.context=Ue,this.refs=aa,this.updater=at||dt}var na=oi.prototype=new _i;na.constructor=oi,Ce(na,dr.prototype),na.isPureReactComponent=!0;var _a=Array.isArray;function ki(){}var ii={H:null,A:null,T:null,S:null},Mr=Object.prototype.hasOwnProperty;function va(me,Ue,at){var ft=at.ref;return{$$typeof:R,type:me,key:Ue,ref:ft!==void 0?ft:null,props:at}}function ln(me,Ue){return va(me.type,Ue,me.props)}function oa(me){return typeof me=="object"&&me!==null&&me.$$typeof===R}function Gi(me){var Ue={"=":"=0",":":"=2"};return"$"+me.replace(/[=:]/g,function(at){return Ue[at]})}var Jn=/\/+/g;function Pa(me,Ue){return typeof me=="object"&&me!==null&&me.key!=null?Gi(""+me.key):Ue.toString(36)}function Ar(me){switch(me.status){case"fulfilled":return me.value;case"rejected":throw me.reason;default:switch(typeof me.status=="string"?me.then(ki,ki):(me.status="pending",me.then(function(Ue){me.status==="pending"&&(me.status="fulfilled",me.value=Ue)},function(Ue){me.status==="pending"&&(me.status="rejected",me.reason=Ue)})),me.status){case"fulfilled":return me.value;case"rejected":throw me.reason}}throw me}function je(me,Ue,at,ft,Dt){var Et=typeof me;(Et==="undefined"||Et==="boolean")&&(me=null);var si=!1;if(me===null)si=!0;else switch(Et){case"bigint":case"string":case"number":si=!0;break;case"object":switch(me.$$typeof){case R:case A:si=!0;break;case ot:return si=me._init,je(si(me._payload),Ue,at,ft,Dt)}}if(si)return Dt=Dt(me),si=ft===""?"."+Pa(me,0):ft,_a(Dt)?(at="",si!=null&&(at=si.replace(Jn,"$&/")+"/"),je(Dt,Ue,at,"",function(bo){return bo})):Dt!=null&&(oa(Dt)&&(Dt=ln(Dt,at+(Dt.key==null||me&&me.key===Dt.key?"":(""+Dt.key).replace(Jn,"$&/")+"/")+si)),Ue.push(Dt)),1;si=0;var Oi=ft===""?".":ft+":";if(_a(me))for(var mi=0;mi<me.length;mi++)ft=me[mi],Et=Oi+Pa(ft,mi),si+=je(ft,Ue,at,Et,Dt);else if(mi=Ot(me),typeof mi=="function")for(me=mi.call(me),mi=0;!(ft=me.next()).done;)ft=ft.value,Et=Oi+Pa(ft,mi++),si+=je(ft,Ue,at,Et,Dt);else if(Et==="object"){if(typeof me.then=="function")return je(Ar(me),Ue,at,ft,Dt);throw Ue=String(me),Error("Objects are not valid as a React child (found: "+(Ue==="[object Object]"?"object with keys {"+Object.keys(me).join(", ")+"}":Ue)+"). If you meant to render a collection of children, use an array instead.")}return si}function nt(me,Ue,at){if(me==null)return me;var ft=[],Dt=0;return je(me,ft,"","",function(Et){return Ue.call(at,Et,Dt++)}),ft}function zt(me){if(me._status===-1){var Ue=me._result;Ue=Ue(),Ue.then(function(at){(me._status===0||me._status===-1)&&(me._status=1,me._result=at)},function(at){(me._status===0||me._status===-1)&&(me._status=2,me._result=at)}),me._status===-1&&(me._status=0,me._result=Ue)}if(me._status===1)return me._result.default;throw me._result}var wt=typeof reportError=="function"?reportError:function(me){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Ue=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof me=="object"&&me!==null&&typeof me.message=="string"?String(me.message):String(me),error:me});if(!window.dispatchEvent(Ue))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",me);return}console.error(me)},vi={map:nt,forEach:function(me,Ue,at){nt(me,function(){Ue.apply(this,arguments)},at)},count:function(me){var Ue=0;return nt(me,function(){Ue++}),Ue},toArray:function(me){return nt(me,function(Ue){return Ue})||[]},only:function(me){if(!oa(me))throw Error("React.Children.only expected to receive a single React element child.");return me}};return ti.Activity=Je,ti.Children=vi,ti.Component=dr,ti.Fragment=B,ti.Profiler=D,ti.PureComponent=oi,ti.StrictMode=P,ti.Suspense=ye,ti.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=ii,ti.__COMPILER_RUNTIME={__proto__:null,c:function(me){return ii.H.useMemoCache(me)}},ti.cache=function(me){return function(){return me.apply(null,arguments)}},ti.cacheSignal=function(){return null},ti.cloneElement=function(me,Ue,at){if(me==null)throw Error("The argument must be a React element, but you passed "+me+".");var ft=Ce({},me.props),Dt=me.key;if(Ue!=null)for(Et in Ue.key!==void 0&&(Dt=""+Ue.key),Ue)!Mr.call(Ue,Et)||Et==="key"||Et==="__self"||Et==="__source"||Et==="ref"&&Ue.ref===void 0||(ft[Et]=Ue[Et]);var Et=arguments.length-2;if(Et===1)ft.children=at;else if(1<Et){for(var si=Array(Et),Oi=0;Oi<Et;Oi++)si[Oi]=arguments[Oi+2];ft.children=si}return va(me.type,Dt,ft)},ti.createContext=function(me){return me={$$typeof:M,_currentValue:me,_currentValue2:me,_threadCount:0,Provider:null,Consumer:null},me.Provider=me,me.Consumer={$$typeof:X,_context:me},me},ti.createElement=function(me,Ue,at){var ft,Dt={},Et=null;if(Ue!=null)for(ft in Ue.key!==void 0&&(Et=""+Ue.key),Ue)Mr.call(Ue,ft)&&ft!=="key"&&ft!=="__self"&&ft!=="__source"&&(Dt[ft]=Ue[ft]);var si=arguments.length-2;if(si===1)Dt.children=at;else if(1<si){for(var Oi=Array(si),mi=0;mi<si;mi++)Oi[mi]=arguments[mi+2];Dt.children=Oi}if(me&&me.defaultProps)for(ft in si=me.defaultProps,si)Dt[ft]===void 0&&(Dt[ft]=si[ft]);return va(me,Et,Dt)},ti.createRef=function(){return{current:null}},ti.forwardRef=function(me){return{$$typeof:d,render:me}},ti.isValidElement=oa,ti.lazy=function(me){return{$$typeof:ot,_payload:{_status:-1,_result:me},_init:zt}},ti.memo=function(me,Ue){return{$$typeof:ke,type:me,compare:Ue===void 0?null:Ue}},ti.startTransition=function(me){var Ue=ii.T,at={};ii.T=at;try{var ft=me(),Dt=ii.S;Dt!==null&&Dt(at,ft),typeof ft=="object"&&ft!==null&&typeof ft.then=="function"&&ft.then(ki,wt)}catch(Et){wt(Et)}finally{Ue!==null&&at.types!==null&&(Ue.types=at.types),ii.T=Ue}},ti.unstable_useCacheRefresh=function(){return ii.H.useCacheRefresh()},ti.use=function(me){return ii.H.use(me)},ti.useActionState=function(me,Ue,at){return ii.H.useActionState(me,Ue,at)},ti.useCallback=function(me,Ue){return ii.H.useCallback(me,Ue)},ti.useContext=function(me){return ii.H.useContext(me)},ti.useDebugValue=function(){},ti.useDeferredValue=function(me,Ue){return ii.H.useDeferredValue(me,Ue)},ti.useEffect=function(me,Ue){return ii.H.useEffect(me,Ue)},ti.useEffectEvent=function(me){return ii.H.useEffectEvent(me)},ti.useId=function(){return ii.H.useId()},ti.useImperativeHandle=function(me,Ue,at){return ii.H.useImperativeHandle(me,Ue,at)},ti.useInsertionEffect=function(me,Ue){return ii.H.useInsertionEffect(me,Ue)},ti.useLayoutEffect=function(me,Ue){return ii.H.useLayoutEffect(me,Ue)},ti.useMemo=function(me,Ue){return ii.H.useMemo(me,Ue)},ti.useOptimistic=function(me,Ue){return ii.H.useOptimistic(me,Ue)},ti.useReducer=function(me,Ue,at){return ii.H.useReducer(me,Ue,at)},ti.useRef=function(me){return ii.H.useRef(me)},ti.useState=function(me){return ii.H.useState(me)},ti.useSyncExternalStore=function(me,Ue,at){return ii.H.useSyncExternalStore(me,Ue,at)},ti.useTransition=function(){return ii.H.useTransition()},ti.version="19.2.0",ti}var qg;function Ig(){return qg||(qg=1,Mg.exports=a_()),Mg.exports}var Fa=Ig();const n_=m1(Fa),Wo=t_({__proto__:null,default:n_},[Fa]);var Ag={exports:{}},Cf={},Eg={exports:{}},zg={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xg;function o_(){return Xg||(Xg=1,(function(R){function A(je,nt){var zt=je.length;je.push(nt);e:for(;0<zt;){var wt=zt-1>>>1,vi=je[wt];if(0<D(vi,nt))je[wt]=nt,je[zt]=vi,zt=wt;else break e}}function B(je){return je.length===0?null:je[0]}function P(je){if(je.length===0)return null;var nt=je[0],zt=je.pop();if(zt!==nt){je[0]=zt;e:for(var wt=0,vi=je.length,me=vi>>>1;wt<me;){var Ue=2*(wt+1)-1,at=je[Ue],ft=Ue+1,Dt=je[ft];if(0>D(at,zt))ft<vi&&0>D(Dt,at)?(je[wt]=Dt,je[ft]=zt,wt=ft):(je[wt]=at,je[Ue]=zt,wt=Ue);else if(ft<vi&&0>D(Dt,zt))je[wt]=Dt,je[ft]=zt,wt=ft;else break e}}return nt}function D(je,nt){var zt=je.sortIndex-nt.sortIndex;return zt!==0?zt:je.id-nt.id}if(R.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var X=performance;R.unstable_now=function(){return X.now()}}else{var M=Date,d=M.now();R.unstable_now=function(){return M.now()-d}}var ye=[],ke=[],ot=1,Je=null,xt=3,Ot=!1,dt=!1,Ce=!1,aa=!1,dr=typeof setTimeout=="function"?setTimeout:null,_i=typeof clearTimeout=="function"?clearTimeout:null,oi=typeof setImmediate<"u"?setImmediate:null;function na(je){for(var nt=B(ke);nt!==null;){if(nt.callback===null)P(ke);else if(nt.startTime<=je)P(ke),nt.sortIndex=nt.expirationTime,A(ye,nt);else break;nt=B(ke)}}function _a(je){if(Ce=!1,na(je),!dt)if(B(ye)!==null)dt=!0,ki||(ki=!0,Gi());else{var nt=B(ke);nt!==null&&Ar(_a,nt.startTime-je)}}var ki=!1,ii=-1,Mr=5,va=-1;function ln(){return aa?!0:!(R.unstable_now()-va<Mr)}function oa(){if(aa=!1,ki){var je=R.unstable_now();va=je;var nt=!0;try{e:{dt=!1,Ce&&(Ce=!1,_i(ii),ii=-1),Ot=!0;var zt=xt;try{t:{for(na(je),Je=B(ye);Je!==null&&!(Je.expirationTime>je&&ln());){var wt=Je.callback;if(typeof wt=="function"){Je.callback=null,xt=Je.priorityLevel;var vi=wt(Je.expirationTime<=je);if(je=R.unstable_now(),typeof vi=="function"){Je.callback=vi,na(je),nt=!0;break t}Je===B(ye)&&P(ye),na(je)}else P(ye);Je=B(ye)}if(Je!==null)nt=!0;else{var me=B(ke);me!==null&&Ar(_a,me.startTime-je),nt=!1}}break e}finally{Je=null,xt=zt,Ot=!1}nt=void 0}}finally{nt?Gi():ki=!1}}}var Gi;if(typeof oi=="function")Gi=function(){oi(oa)};else if(typeof MessageChannel<"u"){var Jn=new MessageChannel,Pa=Jn.port2;Jn.port1.onmessage=oa,Gi=function(){Pa.postMessage(null)}}else Gi=function(){dr(oa,0)};function Ar(je,nt){ii=dr(function(){je(R.unstable_now())},nt)}R.unstable_IdlePriority=5,R.unstable_ImmediatePriority=1,R.unstable_LowPriority=4,R.unstable_NormalPriority=3,R.unstable_Profiling=null,R.unstable_UserBlockingPriority=2,R.unstable_cancelCallback=function(je){je.callback=null},R.unstable_forceFrameRate=function(je){0>je||125<je?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Mr=0<je?Math.floor(1e3/je):5},R.unstable_getCurrentPriorityLevel=function(){return xt},R.unstable_next=function(je){switch(xt){case 1:case 2:case 3:var nt=3;break;default:nt=xt}var zt=xt;xt=nt;try{return je()}finally{xt=zt}},R.unstable_requestPaint=function(){aa=!0},R.unstable_runWithPriority=function(je,nt){switch(je){case 1:case 2:case 3:case 4:case 5:break;default:je=3}var zt=xt;xt=je;try{return nt()}finally{xt=zt}},R.unstable_scheduleCallback=function(je,nt,zt){var wt=R.unstable_now();switch(typeof zt=="object"&&zt!==null?(zt=zt.delay,zt=typeof zt=="number"&&0<zt?wt+zt:wt):zt=wt,je){case 1:var vi=-1;break;case 2:vi=250;break;case 5:vi=1073741823;break;case 4:vi=1e4;break;default:vi=5e3}return vi=zt+vi,je={id:ot++,callback:nt,priorityLevel:je,startTime:zt,expirationTime:vi,sortIndex:-1},zt>wt?(je.sortIndex=zt,A(ke,je),B(ye)===null&&je===B(ke)&&(Ce?(_i(ii),ii=-1):Ce=!0,Ar(_a,zt-wt))):(je.sortIndex=vi,A(ye,je),dt||Ot||(dt=!0,ki||(ki=!0,Gi()))),je},R.unstable_shouldYield=ln,R.unstable_wrapCallback=function(je){var nt=xt;return function(){var zt=xt;xt=nt;try{return je.apply(this,arguments)}finally{xt=zt}}}})(zg)),zg}var Yg;function s_(){return Yg||(Yg=1,Eg.exports=o_()),Eg.exports}var Pg={exports:{}},Mn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Qg;function l_(){if(Qg)return Mn;Qg=1;var R=Ig();function A(ye){var ke="https://react.dev/errors/"+ye;if(1<arguments.length){ke+="?args[]="+encodeURIComponent(arguments[1]);for(var ot=2;ot<arguments.length;ot++)ke+="&args[]="+encodeURIComponent(arguments[ot])}return"Minified React error #"+ye+"; visit "+ke+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function B(){}var P={d:{f:B,r:function(){throw Error(A(522))},D:B,C:B,L:B,m:B,X:B,S:B,M:B},p:0,findDOMNode:null},D=Symbol.for("react.portal");function X(ye,ke,ot){var Je=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:D,key:Je==null?null:""+Je,children:ye,containerInfo:ke,implementation:ot}}var M=R.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(ye,ke){if(ye==="font")return"";if(typeof ke=="string")return ke==="use-credentials"?ke:""}return Mn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=P,Mn.createPortal=function(ye,ke){var ot=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ke||ke.nodeType!==1&&ke.nodeType!==9&&ke.nodeType!==11)throw Error(A(299));return X(ye,ke,null,ot)},Mn.flushSync=function(ye){var ke=M.T,ot=P.p;try{if(M.T=null,P.p=2,ye)return ye()}finally{M.T=ke,P.p=ot,P.d.f()}},Mn.preconnect=function(ye,ke){typeof ye=="string"&&(ke?(ke=ke.crossOrigin,ke=typeof ke=="string"?ke==="use-credentials"?ke:"":void 0):ke=null,P.d.C(ye,ke))},Mn.prefetchDNS=function(ye){typeof ye=="string"&&P.d.D(ye)},Mn.preinit=function(ye,ke){if(typeof ye=="string"&&ke&&typeof ke.as=="string"){var ot=ke.as,Je=d(ot,ke.crossOrigin),xt=typeof ke.integrity=="string"?ke.integrity:void 0,Ot=typeof ke.fetchPriority=="string"?ke.fetchPriority:void 0;ot==="style"?P.d.S(ye,typeof ke.precedence=="string"?ke.precedence:void 0,{crossOrigin:Je,integrity:xt,fetchPriority:Ot}):ot==="script"&&P.d.X(ye,{crossOrigin:Je,integrity:xt,fetchPriority:Ot,nonce:typeof ke.nonce=="string"?ke.nonce:void 0})}},Mn.preinitModule=function(ye,ke){if(typeof ye=="string")if(typeof ke=="object"&&ke!==null){if(ke.as==null||ke.as==="script"){var ot=d(ke.as,ke.crossOrigin);P.d.M(ye,{crossOrigin:ot,integrity:typeof ke.integrity=="string"?ke.integrity:void 0,nonce:typeof ke.nonce=="string"?ke.nonce:void 0})}}else ke==null&&P.d.M(ye)},Mn.preload=function(ye,ke){if(typeof ye=="string"&&typeof ke=="object"&&ke!==null&&typeof ke.as=="string"){var ot=ke.as,Je=d(ot,ke.crossOrigin);P.d.L(ye,ot,{crossOrigin:Je,integrity:typeof ke.integrity=="string"?ke.integrity:void 0,nonce:typeof ke.nonce=="string"?ke.nonce:void 0,type:typeof ke.type=="string"?ke.type:void 0,fetchPriority:typeof ke.fetchPriority=="string"?ke.fetchPriority:void 0,referrerPolicy:typeof ke.referrerPolicy=="string"?ke.referrerPolicy:void 0,imageSrcSet:typeof ke.imageSrcSet=="string"?ke.imageSrcSet:void 0,imageSizes:typeof ke.imageSizes=="string"?ke.imageSizes:void 0,media:typeof ke.media=="string"?ke.media:void 0})}},Mn.preloadModule=function(ye,ke){if(typeof ye=="string")if(ke){var ot=d(ke.as,ke.crossOrigin);P.d.m(ye,{as:typeof ke.as=="string"&&ke.as!=="script"?ke.as:void 0,crossOrigin:ot,integrity:typeof ke.integrity=="string"?ke.integrity:void 0})}else P.d.m(ye)},Mn.requestFormReset=function(ye){P.d.r(ye)},Mn.unstable_batchedUpdates=function(ye,ke){return ye(ke)},Mn.useFormState=function(ye,ke,ot){return M.H.useFormState(ye,ke,ot)},Mn.useFormStatus=function(){return M.H.useHostTransitionStatus()},Mn.version="19.2.0",Mn}var Kg;function c_(){if(Kg)return Pg.exports;Kg=1;function R(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(R)}catch(A){console.error(A)}}return R(),Pg.exports=l_(),Pg.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Wg;function u_(){if(Wg)return Cf;Wg=1;var R=s_(),A=Ig(),B=c_();function P(i){var o="https://react.dev/errors/"+i;if(1<arguments.length){o+="?args[]="+encodeURIComponent(arguments[1]);for(var c=2;c<arguments.length;c++)o+="&args[]="+encodeURIComponent(arguments[c])}return"Minified React error #"+i+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function D(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function X(i){var o=i,c=i;if(i.alternate)for(;o.return;)o=o.return;else{i=o;do o=i,(o.flags&4098)!==0&&(c=o.return),i=o.return;while(i)}return o.tag===3?c:null}function M(i){if(i.tag===13){var o=i.memoizedState;if(o===null&&(i=i.alternate,i!==null&&(o=i.memoizedState)),o!==null)return o.dehydrated}return null}function d(i){if(i.tag===31){var o=i.memoizedState;if(o===null&&(i=i.alternate,i!==null&&(o=i.memoizedState)),o!==null)return o.dehydrated}return null}function ye(i){if(X(i)!==i)throw Error(P(188))}function ke(i){var o=i.alternate;if(!o){if(o=X(i),o===null)throw Error(P(188));return o!==i?null:i}for(var c=i,f=o;;){var x=c.return;if(x===null)break;var S=x.alternate;if(S===null){if(f=x.return,f!==null){c=f;continue}break}if(x.child===S.child){for(S=x.child;S;){if(S===c)return ye(x),i;if(S===f)return ye(x),o;S=S.sibling}throw Error(P(188))}if(c.return!==f.return)c=x,f=S;else{for(var j=!1,q=x.child;q;){if(q===c){j=!0,c=x,f=S;break}if(q===f){j=!0,f=x,c=S;break}q=q.sibling}if(!j){for(q=S.child;q;){if(q===c){j=!0,c=S,f=x;break}if(q===f){j=!0,f=S,c=x;break}q=q.sibling}if(!j)throw Error(P(189))}}if(c.alternate!==f)throw Error(P(190))}if(c.tag!==3)throw Error(P(188));return c.stateNode.current===c?i:o}function ot(i){var o=i.tag;if(o===5||o===26||o===27||o===6)return i;for(i=i.child;i!==null;){if(o=ot(i),o!==null)return o;i=i.sibling}return null}var Je=Object.assign,xt=Symbol.for("react.element"),Ot=Symbol.for("react.transitional.element"),dt=Symbol.for("react.portal"),Ce=Symbol.for("react.fragment"),aa=Symbol.for("react.strict_mode"),dr=Symbol.for("react.profiler"),_i=Symbol.for("react.consumer"),oi=Symbol.for("react.context"),na=Symbol.for("react.forward_ref"),_a=Symbol.for("react.suspense"),ki=Symbol.for("react.suspense_list"),ii=Symbol.for("react.memo"),Mr=Symbol.for("react.lazy"),va=Symbol.for("react.activity"),ln=Symbol.for("react.memo_cache_sentinel"),oa=Symbol.iterator;function Gi(i){return i===null||typeof i!="object"?null:(i=oa&&i[oa]||i["@@iterator"],typeof i=="function"?i:null)}var Jn=Symbol.for("react.client.reference");function Pa(i){if(i==null)return null;if(typeof i=="function")return i.$$typeof===Jn?null:i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case Ce:return"Fragment";case dr:return"Profiler";case aa:return"StrictMode";case _a:return"Suspense";case ki:return"SuspenseList";case va:return"Activity"}if(typeof i=="object")switch(i.$$typeof){case dt:return"Portal";case oi:return i.displayName||"Context";case _i:return(i._context.displayName||"Context")+".Consumer";case na:var o=i.render;return i=i.displayName,i||(i=o.displayName||o.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case ii:return o=i.displayName||null,o!==null?o:Pa(i.type)||"Memo";case Mr:o=i._payload,i=i._init;try{return Pa(i(o))}catch{}}return null}var Ar=Array.isArray,je=A.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,nt=B.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,zt={pending:!1,data:null,method:null,action:null},wt=[],vi=-1;function me(i){return{current:i}}function Ue(i){0>vi||(i.current=wt[vi],wt[vi]=null,vi--)}function at(i,o){vi++,wt[vi]=i.current,i.current=o}var ft=me(null),Dt=me(null),Et=me(null),si=me(null);function Oi(i,o){switch(at(Et,o),at(Dt,i),at(ft,null),o.nodeType){case 9:case 11:i=(i=o.documentElement)&&(i=i.namespaceURI)?df(i):0;break;default:if(i=o.tagName,o=o.namespaceURI)o=df(o),i=bl(o,i);else switch(i){case"svg":i=1;break;case"math":i=2;break;default:i=0}}Ue(ft),at(ft,i)}function mi(){Ue(ft),Ue(Dt),Ue(Et)}function bo(i){i.memoizedState!==null&&at(si,i);var o=ft.current,c=bl(o,i.type);o!==c&&(at(Dt,i),at(ft,c))}function es(i){Dt.current===i&&(Ue(ft),Ue(Dt)),si.current===i&&(Ue(si),Le._currentValue=zt)}var ya,ts;function ji(i){if(ya===void 0)try{throw Error()}catch(c){var o=c.stack.trim().match(/\n( *(at )?)/);ya=o&&o[1]||"",ts=-1<c.stack.indexOf(`
    at`)?" (<anonymous>)":-1<c.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ya+i+ts}var Di=!1;function An(i,o){if(!i||Di)return"";Di=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var f={DetermineComponentFrameRoot:function(){try{if(o){var qe=function(){throw Error()};if(Object.defineProperty(qe.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(qe,[])}catch(Be){var Re=Be}Reflect.construct(i,[],qe)}else{try{qe.call()}catch(Be){Re=Be}i.call(qe.prototype)}}else{try{throw Error()}catch(Be){Re=Be}(qe=i())&&typeof qe.catch=="function"&&qe.catch(function(){})}}catch(Be){if(Be&&Re&&typeof Be.stack=="string")return[Be.stack,Re.stack]}return[null,null]}};f.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var x=Object.getOwnPropertyDescriptor(f.DetermineComponentFrameRoot,"name");x&&x.configurable&&Object.defineProperty(f.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var S=f.DetermineComponentFrameRoot(),j=S[0],q=S[1];if(j&&q){var he=j.split(`
`),Pe=q.split(`
`);for(x=f=0;f<he.length&&!he[f].includes("DetermineComponentFrameRoot");)f++;for(;x<Pe.length&&!Pe[x].includes("DetermineComponentFrameRoot");)x++;if(f===he.length||x===Pe.length)for(f=he.length-1,x=Pe.length-1;1<=f&&0<=x&&he[f]!==Pe[x];)x--;for(;1<=f&&0<=x;f--,x--)if(he[f]!==Pe[x]){if(f!==1||x!==1)do if(f--,x--,0>x||he[f]!==Pe[x]){var $e=`
`+he[f].replace(" at new "," at ");return i.displayName&&$e.includes("<anonymous>")&&($e=$e.replace("<anonymous>",i.displayName)),$e}while(1<=f&&0<=x);break}}}finally{Di=!1,Error.prepareStackTrace=c}return(c=i?i.displayName||i.name:"")?ji(c):""}function Vs(i,o){switch(i.tag){case 26:case 27:case 5:return ji(i.type);case 16:return ji("Lazy");case 13:return i.child!==o&&o!==null?ji("Suspense Fallback"):ji("Suspense");case 19:return ji("SuspenseList");case 0:case 15:return An(i.type,!1);case 11:return An(i.type.render,!1);case 1:return An(i.type,!0);case 31:return ji("Activity");default:return""}}function xo(i){try{var o="",c=null;do o+=Vs(i,c),c=i,i=i.return;while(i);return o}catch(f){return`
Error generating stack: `+f.message+`
`+f.stack}}var En=Object.prototype.hasOwnProperty,is=R.unstable_scheduleCallback,zn=R.unstable_cancelCallback,rs=R.unstable_shouldYield,eo=R.unstable_requestPaint,Zr=R.unstable_now,Tl=R.unstable_getCurrentPriorityLevel,Na=R.unstable_ImmediatePriority,pc=R.unstable_UserBlockingPriority,wo=R.unstable_NormalPriority,Co=R.unstable_LowPriority,pe=R.unstable_IdlePriority,U=R.log,Z=R.unstable_setDisableYieldValue,Y=null,re=null;function se(i){if(typeof U=="function"&&Z(i),re&&typeof re.setStrictMode=="function")try{re.setStrictMode(Y,i)}catch{}}var de=Math.clz32?Math.clz32:De,Me=Math.log,ve=Math.LN2;function De(i){return i>>>=0,i===0?32:31-(Me(i)/ve|0)|0}var Ze=256,Oe=262144,pt=4194304;function be(i){var o=i&42;if(o!==0)return o;switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return i&261888;case 262144:case 524288:case 1048576:case 2097152:return i&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return i&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return i}}function qt(i,o,c){var f=i.pendingLanes;if(f===0)return 0;var x=0,S=i.suspendedLanes,j=i.pingedLanes;i=i.warmLanes;var q=f&134217727;return q!==0?(f=q&~S,f!==0?x=be(f):(j&=q,j!==0?x=be(j):c||(c=q&~i,c!==0&&(x=be(c))))):(q=f&~S,q!==0?x=be(q):j!==0?x=be(j):c||(c=f&~i,c!==0&&(x=be(c)))),x===0?0:o!==0&&o!==x&&(o&S)===0&&(S=x&-x,c=o&-o,S>=c||S===32&&(c&4194048)!==0)?o:x}function Mi(i,o){return(i.pendingLanes&~(i.suspendedLanes&~i.pingedLanes)&o)===0}function gt(i,o){switch(i){case 1:case 2:case 4:case 8:case 64:return o+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Yt(){var i=pt;return pt<<=1,(pt&62914560)===0&&(pt=4194304),i}function ci(i){for(var o=[],c=0;31>c;c++)o.push(i);return o}function or(i,o){i.pendingLanes|=o,o!==268435456&&(i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0)}function Rr(i,o,c,f,x,S){var j=i.pendingLanes;i.pendingLanes=c,i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0,i.expiredLanes&=c,i.entangledLanes&=c,i.errorRecoveryDisabledLanes&=c,i.shellSuspendCounter=0;var q=i.entanglements,he=i.expirationTimes,Pe=i.hiddenUpdates;for(c=j&~c;0<c;){var $e=31-de(c),qe=1<<$e;q[$e]=0,he[$e]=-1;var Re=Pe[$e];if(Re!==null)for(Pe[$e]=null,$e=0;$e<Re.length;$e++){var Be=Re[$e];Be!==null&&(Be.lane&=-536870913)}c&=~qe}f!==0&&Hr(i,f,0),S!==0&&x===0&&i.tag!==0&&(i.suspendedLanes|=S&~(j&~o))}function Hr(i,o,c){i.pendingLanes|=o,i.suspendedLanes&=~o;var f=31-de(o);i.entangledLanes|=o,i.entanglements[f]=i.entanglements[f]|1073741824|c&261930}function sr(i,o){var c=i.entangledLanes|=o;for(i=i.entanglements;c;){var f=31-de(c),x=1<<f;x&o|i[f]&o&&(i[f]|=o),c&=~x}}function qi(i,o){var c=o&-o;return c=(c&42)!==0?1:lr(c),(c&(i.suspendedLanes|o))!==0?0:c}function lr(i){switch(i){case 2:i=1;break;case 8:i=4;break;case 32:i=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:i=128;break;case 268435456:i=134217728;break;default:i=0}return i}function Fe(i){return i&=-i,2<i?8<i?(i&134217727)!==0?32:268435456:8:2}function er(){var i=nt.p;return i!==0?i:(i=window.event,i===void 0?32:ra(i.type))}function sa(i,o){var c=nt.p;try{return nt.p=i,o()}finally{nt.p=c}}var ka=Math.random().toString(36).slice(2),yi="__reactFiber$"+ka,Xe="__reactProps$"+ka,Lt="__reactContainer$"+ka,Ft="__reactEvents$"+ka,cn="__reactListeners$"+ka,fc="__reactHandles$"+ka,to="__reactResources$"+ka,Mt="__reactMarker$"+ka;function So(i){delete i[yi],delete i[Xe],delete i[Ft],delete i[cn],delete i[fc]}function Pn(i){var o=i[yi];if(o)return o;for(var c=i.parentNode;c;){if(o=c[Lt]||c[yi]){if(c=o.alternate,o.child!==null||c!==null&&c.child!==null)for(i=cp(i);i!==null;){if(c=i[yi])return c;i=cp(i)}return o}i=c,c=i.parentNode}return null}function kn(i){if(i=i[yi]||i[Lt]){var o=i.tag;if(o===5||o===6||o===13||o===31||o===26||o===27||o===3)return i}return null}function To(i){var o=i.tag;if(o===5||o===26||o===27||o===6)return i.stateNode;throw Error(P(33))}function un(i){var o=i[to];return o||(o=i[to]={hoistableStyles:new Map,hoistableScripts:new Map}),o}function pr(i){i[Mt]=!0}var io=new Set,la={};function jt(i,o){Ml(i,o),Ml(i+"Capture",o)}function Ml(i,o){for(la[i]=o,i=0;i<o.length;i++)io.add(o[i])}var Al=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),as={},Mo={};function ns(i){return En.call(Mo,i)?!0:En.call(as,i)?!1:Al.test(i)?Mo[i]=!0:(as[i]=!0,!1)}function mc(i,o,c){if(ns(o))if(c===null)i.removeAttribute(o);else{switch(typeof c){case"undefined":case"function":case"symbol":i.removeAttribute(o);return;case"boolean":var f=o.toLowerCase().slice(0,5);if(f!=="data-"&&f!=="aria-"){i.removeAttribute(o);return}}i.setAttribute(o,""+c)}}function El(i,o,c){if(c===null)i.removeAttribute(o);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(o);return}i.setAttribute(o,""+c)}}function ro(i,o,c,f){if(f===null)i.removeAttribute(c);else{switch(typeof f){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(c);return}i.setAttributeNS(o,c,""+f)}}function Gr(i){switch(typeof i){case"bigint":case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function sh(i){var o=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function wp(i,o,c){var f=Object.getOwnPropertyDescriptor(i.constructor.prototype,o);if(!i.hasOwnProperty(o)&&typeof f<"u"&&typeof f.get=="function"&&typeof f.set=="function"){var x=f.get,S=f.set;return Object.defineProperty(i,o,{configurable:!0,get:function(){return x.call(this)},set:function(j){c=""+j,S.call(this,j)}}),Object.defineProperty(i,o,{enumerable:f.enumerable}),{getValue:function(){return c},setValue:function(j){c=""+j},stopTracking:function(){i._valueTracker=null,delete i[o]}}}}function lh(i){if(!i._valueTracker){var o=sh(i)?"checked":"value";i._valueTracker=wp(i,o,""+i[o])}}function pd(i){if(!i)return!1;var o=i._valueTracker;if(!o)return!0;var c=o.getValue(),f="";return i&&(f=sh(i)?i.checked?"true":"false":i.value),i=f,i!==c?(o.setValue(i),!0):!1}function gc(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}var fd=/[\n"\\]/g;function Da(i){return i.replace(fd,function(o){return"\\"+o.charCodeAt(0).toString(16)+" "})}function zl(i,o,c,f,x,S,j,q){i.name="",j!=null&&typeof j!="function"&&typeof j!="symbol"&&typeof j!="boolean"?i.type=j:i.removeAttribute("type"),o!=null?j==="number"?(o===0&&i.value===""||i.value!=o)&&(i.value=""+Gr(o)):i.value!==""+Gr(o)&&(i.value=""+Gr(o)):j!=="submit"&&j!=="reset"||i.removeAttribute("value"),o!=null?_c(i,j,Gr(o)):c!=null?_c(i,j,Gr(c)):f!=null&&i.removeAttribute("value"),x==null&&S!=null&&(i.defaultChecked=!!S),x!=null&&(i.checked=x&&typeof x!="function"&&typeof x!="symbol"),q!=null&&typeof q!="function"&&typeof q!="symbol"&&typeof q!="boolean"?i.name=""+Gr(q):i.removeAttribute("name")}function $s(i,o,c,f,x,S,j,q){if(S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"&&(i.type=S),o!=null||c!=null){if(!(S!=="submit"&&S!=="reset"||o!=null)){lh(i);return}c=c!=null?""+Gr(c):"",o=o!=null?""+Gr(o):c,q||o===i.value||(i.value=o),i.defaultValue=o}f=f??x,f=typeof f!="function"&&typeof f!="symbol"&&!!f,i.checked=q?i.checked:!!f,i.defaultChecked=!!f,j!=null&&typeof j!="function"&&typeof j!="symbol"&&typeof j!="boolean"&&(i.name=j),lh(i)}function _c(i,o,c){o==="number"&&gc(i.ownerDocument)===i||i.defaultValue===""+c||(i.defaultValue=""+c)}function os(i,o,c,f){if(i=i.options,o){o={};for(var x=0;x<c.length;x++)o["$"+c[x]]=!0;for(c=0;c<i.length;c++)x=o.hasOwnProperty("$"+i[c].value),i[c].selected!==x&&(i[c].selected=x),x&&f&&(i[c].defaultSelected=!0)}else{for(c=""+Gr(c),o=null,x=0;x<i.length;x++){if(i[x].value===c){i[x].selected=!0,f&&(i[x].defaultSelected=!0);return}o!==null||i[x].disabled||(o=i[x])}o!==null&&(o.selected=!0)}}function Pl(i,o,c){if(o!=null&&(o=""+Gr(o),o!==i.value&&(i.value=o),c==null)){i.defaultValue!==o&&(i.defaultValue=o);return}i.defaultValue=c!=null?""+Gr(c):""}function kl(i,o,c,f){if(o==null){if(f!=null){if(c!=null)throw Error(P(92));if(Ar(f)){if(1<f.length)throw Error(P(93));f=f[0]}c=f}c==null&&(c=""),o=c}c=Gr(o),i.defaultValue=c,f=i.textContent,f===c&&f!==""&&f!==null&&(i.value=f),lh(i)}function Ao(i,o){if(o){var c=i.firstChild;if(c&&c===i.lastChild&&c.nodeType===3){c.nodeValue=o;return}}i.textContent=o}var md=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function ss(i,o,c){var f=o.indexOf("--")===0;c==null||typeof c=="boolean"||c===""?f?i.setProperty(o,""):o==="float"?i.cssFloat="":i[o]="":f?i.setProperty(o,c):typeof c!="number"||c===0||md.has(o)?o==="float"?i.cssFloat=c:i[o]=(""+c).trim():i[o]=c+"px"}function lu(i,o,c){if(o!=null&&typeof o!="object")throw Error(P(62));if(i=i.style,c!=null){for(var f in c)!c.hasOwnProperty(f)||o!=null&&o.hasOwnProperty(f)||(f.indexOf("--")===0?i.setProperty(f,""):f==="float"?i.cssFloat="":i[f]="");for(var x in o)f=o[x],o.hasOwnProperty(x)&&c[x]!==f&&ss(i,x,f)}else for(var S in o)o.hasOwnProperty(S)&&ss(i,S,o[S])}function hn(i){if(i.indexOf("-")===-1)return!1;switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Xt=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Dn=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function It(i){return Dn.test(""+i)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":i}function dn(){}var cu=null;function Fs(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var fr=null,cr=null;function Kr(i){var o=kn(i);if(o&&(i=o.stateNode)){var c=i[Xe]||null;e:switch(i=o.stateNode,o.type){case"input":if(zl(i,c.value,c.defaultValue,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name),o=c.name,c.type==="radio"&&o!=null){for(c=i;c.parentNode;)c=c.parentNode;for(c=c.querySelectorAll('input[name="'+Da(""+o)+'"][type="radio"]'),o=0;o<c.length;o++){var f=c[o];if(f!==i&&f.form===i.form){var x=f[Xe]||null;if(!x)throw Error(P(90));zl(f,x.value,x.defaultValue,x.defaultValue,x.checked,x.defaultChecked,x.type,x.name)}}for(o=0;o<c.length;o++)f=c[o],f.form===i.form&&pd(f)}break e;case"textarea":Pl(i,c.value,c.defaultValue);break e;case"select":o=c.value,o!=null&&os(i,!!c.multiple,o,!1)}}}var yr=!1;function Vi(i,o,c){if(yr)return i(o,c);yr=!0;try{var f=i(o);return f}finally{if(yr=!1,(fr!==null||cr!==null)&&(Hd(),fr&&(o=fr,i=cr,cr=fr=null,Kr(o),i)))for(o=0;o<i.length;o++)Kr(i[o])}}function vc(i,o){var c=i.stateNode;if(c===null)return null;var f=c[Xe]||null;if(f===null)return null;c=f[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(f=!f.disabled)||(i=i.type,f=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!f;break e;default:i=!1}if(i)return null;if(c&&typeof c!="function")throw Error(P(231,o,typeof c));return c}var Qi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Br=!1;if(Qi)try{var qr={};Object.defineProperty(qr,"passive",{get:function(){Br=!0}}),window.addEventListener("test",qr,qr),window.removeEventListener("test",qr,qr)}catch{Br=!1}var ao=null,ls=null,$i=null;function Ci(){if($i)return $i;var i,o=ls,c=o.length,f,x="value"in ao?ao.value:ao.textContent,S=x.length;for(i=0;i<c&&o[i]===x[i];i++);var j=c-i;for(f=1;f<=j&&o[c-f]===x[S-f];f++);return $i=x.slice(i,1<f?1-f:void 0)}function pn(i){var o=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&o===13&&(i=13)):i=o,i===10&&(i=13),32<=i||i===13?i:0}function Kt(){return!0}function St(){return!1}function Wr(i){function o(c,f,x,S,j){this._reactName=c,this._targetInst=x,this.type=f,this.nativeEvent=S,this.target=j,this.currentTarget=null;for(var q in i)i.hasOwnProperty(q)&&(c=i[q],this[q]=c?c(S):S[q]);return this.isDefaultPrevented=(S.defaultPrevented!=null?S.defaultPrevented:S.returnValue===!1)?Kt:St,this.isPropagationStopped=St,this}return Je(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var c=this.nativeEvent;c&&(c.preventDefault?c.preventDefault():typeof c.returnValue!="unknown"&&(c.returnValue=!1),this.isDefaultPrevented=Kt)},stopPropagation:function(){var c=this.nativeEvent;c&&(c.stopPropagation?c.stopPropagation():typeof c.cancelBubble!="unknown"&&(c.cancelBubble=!0),this.isPropagationStopped=Kt)},persist:function(){},isPersistent:Kt}),o}var Vt={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Dl=Wr(Vt),La=Je({},Vt,{view:0,detail:0}),Ll=Wr(La),Eo,Ns,zo,Us=Je({},La,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Rl,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==zo&&(zo&&i.type==="mousemove"?(Eo=i.screenX-zo.screenX,Ns=i.screenY-zo.screenY):Ns=Eo=0,zo=i),Eo)},movementY:function(i){return"movementY"in i?i.movementY:Ns}}),yc=Wr(Us),uu=Je({},Us,{dataTransfer:0}),hu=Wr(uu),Ln=Je({},La,{relatedTarget:0}),br=Wr(Ln),cs=Je({},Vt,{animationName:0,elapsedTime:0,pseudoElement:0}),gd=Wr(cs),Il=Je({},Vt,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),Or=Wr(Il),_d=Je({},Vt,{data:0}),du=Wr(_d),ba={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ch={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},xa={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Zs(i){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(i):(i=xa[i])?!!o[i]:!1}function Rl(){return Zs}var vd=Je({},La,{key:function(i){if(i.key){var o=ba[i.key]||i.key;if(o!=="Unidentified")return o}return i.type==="keypress"?(i=pn(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?ch[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Rl,charCode:function(i){return i.type==="keypress"?pn(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?pn(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),Hs=Wr(vd),pu=Je({},Us,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),bc=Wr(pu),In=Je({},La,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Rl}),yd=Wr(In),fu=Je({},Vt,{propertyName:0,elapsedTime:0,pseudoElement:0}),Cp=Wr(fu),Bl=Je({},Us,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),uh=Wr(Bl),mu=Je({},Vt,{newState:0,oldState:0}),hh=Wr(mu),dh=[9,13,27,32],wa=Qi&&"CompositionEvent"in window,xc=null;Qi&&"documentMode"in document&&(xc=document.documentMode);var gu=Qi&&"TextEvent"in window&&!xc,Gs=Qi&&(!wa||xc&&8<xc&&11>=xc),Ol=" ",ph=!1;function wc(i,o){switch(i){case"keyup":return dh.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function bd(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var Rn=!1;function Sp(i,o){switch(i){case"compositionend":return bd(o);case"keypress":return o.which!==32?null:(ph=!0,Ol);case"textInput":return i=o.data,i===Ol&&ph?null:i;default:return null}}function xd(i,o){if(Rn)return i==="compositionend"||!wa&&wc(i,o)?(i=Ci(),$i=ls=ao=null,Rn=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return Gs&&o.locale!=="ko"?null:o.data;default:return null}}var wd={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function _u(i){var o=i&&i.nodeName&&i.nodeName.toLowerCase();return o==="input"?!!wd[i.type]:o==="textarea"}function Cc(i,o,c,f){fr?cr?cr.push(f):cr=[f]:fr=f,o=td(o,"onChange"),0<o.length&&(c=new Dl("onChange","change",null,c,f),i.push({event:c,listeners:o}))}var jl=null,Vl=null;function Cd(i){dm(i,0)}function Sc(i){var o=To(i);if(pd(o))return i}function Bn(i,o){if(i==="change")return o}var fh=!1;if(Qi){var vu;if(Qi){var qs="oninput"in document;if(!qs){var Sd=document.createElement("div");Sd.setAttribute("oninput","return;"),qs=typeof Sd.oninput=="function"}vu=qs}else vu=!1;fh=vu&&(!document.documentMode||9<document.documentMode)}function Xs(){jl&&(jl.detachEvent("onpropertychange",mh),Vl=jl=null)}function mh(i){if(i.propertyName==="value"&&Sc(Vl)){var o=[];Cc(o,Vl,i,Fs(i)),Vi(Cd,o)}}function Tp(i,o,c){i==="focusin"?(Xs(),jl=o,Vl=c,jl.attachEvent("onpropertychange",mh)):i==="focusout"&&Xs()}function Td(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return Sc(Vl)}function gh(i,o){if(i==="click")return Sc(o)}function _h(i,o){if(i==="input"||i==="change")return Sc(o)}function vh(i,o){return i===o&&(i!==0||1/i===1/o)||i!==i&&o!==o}var Ia=typeof Object.is=="function"?Object.is:vh;function us(i,o){if(Ia(i,o))return!0;if(typeof i!="object"||i===null||typeof o!="object"||o===null)return!1;var c=Object.keys(i),f=Object.keys(o);if(c.length!==f.length)return!1;for(f=0;f<c.length;f++){var x=c[f];if(!En.call(o,x)||!Ia(i[x],o[x]))return!1}return!0}function On(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function yu(i,o){var c=On(i);i=0;for(var f;c;){if(c.nodeType===3){if(f=i+c.textContent.length,i<=o&&f>=o)return{node:c,offset:o-i};i=f}e:{for(;c;){if(c.nextSibling){c=c.nextSibling;break e}c=c.parentNode}c=void 0}c=On(c)}}function bu(i,o){return i&&o?i===o?!0:i&&i.nodeType===3?!1:o&&o.nodeType===3?bu(i,o.parentNode):"contains"in i?i.contains(o):i.compareDocumentPosition?!!(i.compareDocumentPosition(o)&16):!1:!1}function xu(i){i=i!=null&&i.ownerDocument!=null&&i.ownerDocument.defaultView!=null?i.ownerDocument.defaultView:window;for(var o=gc(i.document);o instanceof i.HTMLIFrameElement;){try{var c=typeof o.contentWindow.location.href=="string"}catch{c=!1}if(c)i=o.contentWindow;else break;o=gc(i.document)}return o}function wu(i){var o=i&&i.nodeName&&i.nodeName.toLowerCase();return o&&(o==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||o==="textarea"||i.contentEditable==="true")}var di=Qi&&"documentMode"in document&&11>=document.documentMode,fn=null,Tc=null,Mc=null,yh=!1;function Md(i,o,c){var f=c.window===c?c.document:c.nodeType===9?c:c.ownerDocument;yh||fn==null||fn!==gc(f)||(f=fn,"selectionStart"in f&&wu(f)?f={start:f.selectionStart,end:f.selectionEnd}:(f=(f.ownerDocument&&f.ownerDocument.defaultView||window).getSelection(),f={anchorNode:f.anchorNode,anchorOffset:f.anchorOffset,focusNode:f.focusNode,focusOffset:f.focusOffset}),Mc&&us(Mc,f)||(Mc=f,f=td(Tc,"onSelect"),0<f.length&&(o=new Dl("onSelect","select",null,o,c),i.push({event:o,listeners:f}),o.target=fn)))}function Ys(i,o){var c={};return c[i.toLowerCase()]=o.toLowerCase(),c["Webkit"+i]="webkit"+o,c["Moz"+i]="moz"+o,c}var Qs={animationend:Ys("Animation","AnimationEnd"),animationiteration:Ys("Animation","AnimationIteration"),animationstart:Ys("Animation","AnimationStart"),transitionrun:Ys("Transition","TransitionRun"),transitionstart:Ys("Transition","TransitionStart"),transitioncancel:Ys("Transition","TransitionCancel"),transitionend:Ys("Transition","TransitionEnd")},bh={},xh={};Qi&&(xh=document.createElement("div").style,"AnimationEvent"in window||(delete Qs.animationend.animation,delete Qs.animationiteration.animation,delete Qs.animationstart.animation),"TransitionEvent"in window||delete Qs.transitionend.transition);function no(i){if(bh[i])return bh[i];if(!Qs[i])return i;var o=Qs[i],c;for(c in o)if(o.hasOwnProperty(c)&&c in xh)return bh[i]=o[c];return i}var Ac=no("animationend"),Ec=no("animationiteration"),Cu=no("animationstart"),Ks=no("transitionrun"),zc=no("transitionstart"),$l=no("transitioncancel"),Ua=no("transitionend"),wh=new Map,Su="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Su.push("scrollEnd");function Za(i,o){wh.set(i,o),jt(o,[i])}var oo=typeof reportError=="function"?reportError:function(i){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var o=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof i=="object"&&i!==null&&typeof i.message=="string"?String(i.message):String(i),error:i});if(!window.dispatchEvent(o))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",i);return}console.error(i)},Ca=[],Po=0,Ws=0;function Js(){for(var i=Po,o=Ws=Po=0;o<i;){var c=Ca[o];Ca[o++]=null;var f=Ca[o];Ca[o++]=null;var x=Ca[o];Ca[o++]=null;var S=Ca[o];if(Ca[o++]=null,f!==null&&x!==null){var j=f.pending;j===null?x.next=x:(x.next=j.next,j.next=x),f.pending=x}S!==0&&Ch(c,x,S)}}function Pc(i,o,c,f){Ca[Po++]=i,Ca[Po++]=o,Ca[Po++]=c,Ca[Po++]=f,Ws|=f,i.lanes|=f,i=i.alternate,i!==null&&(i.lanes|=f)}function hs(i,o,c,f){return Pc(i,o,c,f),Fl(i)}function mn(i,o){return Pc(i,null,null,o),Fl(i)}function Ch(i,o,c){i.lanes|=c;var f=i.alternate;f!==null&&(f.lanes|=c);for(var x=!1,S=i.return;S!==null;)S.childLanes|=c,f=S.alternate,f!==null&&(f.childLanes|=c),S.tag===22&&(i=S.stateNode,i===null||i._visibility&1||(x=!0)),i=S,S=S.return;return i.tag===3?(S=i.stateNode,x&&o!==null&&(x=31-de(c),i=S.hiddenUpdates,f=i[x],f===null?i[x]=[o]:f.push(o),o.lane=c|536870912),S):null}function Fl(i){if(50<gr)throw gr=0,qh=null,Error(P(185));for(var o=i.return;o!==null;)i=o,o=i.return;return i.tag===3?i.stateNode:null}var Nt={};function Nl(i,o,c,f){this.tag=i,this.key=c,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=f,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ha(i,o,c,f){return new Nl(i,o,c,f)}function Tu(i){return i=i.prototype,!(!i||!i.isReactComponent)}function Ga(i,o){var c=i.alternate;return c===null?(c=Ha(i.tag,o,i.key,i.mode),c.elementType=i.elementType,c.type=i.type,c.stateNode=i.stateNode,c.alternate=i,i.alternate=c):(c.pendingProps=o,c.type=i.type,c.flags=0,c.subtreeFlags=0,c.deletions=null),c.flags=i.flags&65011712,c.childLanes=i.childLanes,c.lanes=i.lanes,c.child=i.child,c.memoizedProps=i.memoizedProps,c.memoizedState=i.memoizedState,c.updateQueue=i.updateQueue,o=i.dependencies,c.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},c.sibling=i.sibling,c.index=i.index,c.ref=i.ref,c.refCleanup=i.refCleanup,c}function Sh(i,o){i.flags&=65011714;var c=i.alternate;return c===null?(i.childLanes=0,i.lanes=o,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=c.childLanes,i.lanes=c.lanes,i.child=c.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=c.memoizedProps,i.memoizedState=c.memoizedState,i.updateQueue=c.updateQueue,i.type=c.type,o=c.dependencies,i.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),i}function Mu(i,o,c,f,x,S){var j=0;if(f=i,typeof i=="function")Tu(i)&&(j=1);else if(typeof i=="string")j=$(i,c,ft.current)?26:i==="html"||i==="head"||i==="body"?27:5;else e:switch(i){case va:return i=Ha(31,c,o,x),i.elementType=va,i.lanes=S,i;case Ce:return ds(c.children,x,S,o);case aa:j=8,x|=24;break;case dr:return i=Ha(12,c,o,x|2),i.elementType=dr,i.lanes=S,i;case _a:return i=Ha(13,c,o,x),i.elementType=_a,i.lanes=S,i;case ki:return i=Ha(19,c,o,x),i.elementType=ki,i.lanes=S,i;default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case oi:j=10;break e;case _i:j=9;break e;case na:j=11;break e;case ii:j=14;break e;case Mr:j=16,f=null;break e}j=29,c=Error(P(130,i===null?"null":typeof i,"")),f=null}return o=Ha(j,c,o,x),o.elementType=i,o.type=f,o.lanes=S,o}function ds(i,o,c,f){return i=Ha(7,i,f,o),i.lanes=c,i}function Ul(i,o,c){return i=Ha(6,i,null,o),i.lanes=c,i}function kc(i){var o=Ha(18,null,null,0);return o.stateNode=i,o}function Zl(i,o,c){return o=Ha(4,i.children!==null?i.children:[],i.key,o),o.lanes=c,o.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},o}var Dc=new WeakMap;function Sa(i,o){if(typeof i=="object"&&i!==null){var c=Dc.get(i);return c!==void 0?c:(o={value:i,source:o,stack:xo(o)},Dc.set(i,o),o)}return{value:i,source:o,stack:xo(o)}}var ps=[],el=0,fs=null,ko=0,Ta=[],Jr=0,jn=null,Vn=1,Ma="";function Do(i,o){ps[el++]=ko,ps[el++]=fs,fs=i,ko=o}function Th(i,o,c){Ta[Jr++]=Vn,Ta[Jr++]=Ma,Ta[Jr++]=jn,jn=i;var f=Vn;i=Ma;var x=32-de(f)-1;f&=~(1<<x),c+=1;var S=32-de(o)+x;if(30<S){var j=x-x%5;S=(f&(1<<j)-1).toString(32),f>>=j,x-=j,Vn=1<<32-de(o)+x|c<<x|f,Ma=S+i}else Vn=1<<S|c<<x|f,Ma=i}function Hl(i){i.return!==null&&(Do(i,1),Th(i,1,0))}function Lc(i){for(;i===fs;)fs=ps[--el],ps[el]=null,ko=ps[--el],ps[el]=null;for(;i===jn;)jn=Ta[--Jr],Ta[Jr]=null,Ma=Ta[--Jr],Ta[Jr]=null,Vn=Ta[--Jr],Ta[Jr]=null}function Au(i,o){Ta[Jr++]=Vn,Ta[Jr++]=Ma,Ta[Jr++]=jn,Vn=o.id,Ma=o.overflow,jn=i}var jr=null,Si=null,ri=!1,so=null,Aa=!1,Fi=Error(P(519));function Ra(i){var o=Error(P(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw _s(Sa(o,i)),Fi}function qa(i){var o=i.stateNode,c=i.type,f=i.memoizedProps;switch(o[yi]=i,o[Xe]=f,c){case"dialog":hi("cancel",o),hi("close",o);break;case"iframe":case"object":case"embed":hi("load",o);break;case"video":case"audio":for(c=0;c<Jh.length;c++)hi(Jh[c],o);break;case"source":hi("error",o);break;case"img":case"image":case"link":hi("error",o),hi("load",o);break;case"details":hi("toggle",o);break;case"input":hi("invalid",o),$s(o,f.value,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name,!0);break;case"select":hi("invalid",o);break;case"textarea":hi("invalid",o),kl(o,f.value,f.defaultValue,f.children)}c=f.children,typeof c!="string"&&typeof c!="number"&&typeof c!="bigint"||o.textContent===""+c||f.suppressHydrationWarning===!0||uf(o.textContent,c)?(f.popover!=null&&(hi("beforetoggle",o),hi("toggle",o)),f.onScroll!=null&&hi("scroll",o),f.onScrollEnd!=null&&hi("scrollend",o),f.onClick!=null&&(o.onclick=dn),o=!0):o=!1,o||Ra(i,!0)}function Eu(i){for(jr=i.return;jr;)switch(jr.tag){case 5:case 31:case 13:Aa=!1;return;case 27:case 3:Aa=!0;return;default:jr=jr.return}}function Lo(i){if(i!==jr)return!1;if(!ri)return Eu(i),ri=!0,!1;var o=i.tag,c;if((c=o!==3&&o!==27)&&((c=o===5)&&(c=i.type,c=!(c!=="form"&&c!=="button")||np(i.type,i.memoizedProps)),c=!c),c&&Si&&Ra(i),Eu(i),o===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(P(317));Si=gf(i)}else if(o===31){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(P(317));Si=gf(i)}else o===27?(o=Si,Xo(i.type)?(i=lp,lp=null,Si=i):Si=o):Si=jr?wn(i.stateNode.nextSibling):null;return!0}function ms(){Si=jr=null,ri=!1}function gs(){var i=so;return i!==null&&(en===null?en=i:en.push.apply(en,i),so=null),i}function _s(i){so===null?so=[i]:so.push(i)}var vs=me(null),gn=null,lo=null;function co(i,o,c){at(vs,o._currentValue),o._currentValue=c}function $n(i){i._currentValue=vs.current,Ue(vs)}function zu(i,o,c){for(;i!==null;){var f=i.alternate;if((i.childLanes&o)!==o?(i.childLanes|=o,f!==null&&(f.childLanes|=o)):f!==null&&(f.childLanes&o)!==o&&(f.childLanes|=o),i===c)break;i=i.return}}function Ic(i,o,c,f){var x=i.child;for(x!==null&&(x.return=i);x!==null;){var S=x.dependencies;if(S!==null){var j=x.child;S=S.firstContext;e:for(;S!==null;){var q=S;S=x;for(var he=0;he<o.length;he++)if(q.context===o[he]){S.lanes|=c,q=S.alternate,q!==null&&(q.lanes|=c),zu(S.return,c,i),f||(j=null);break e}S=q.next}}else if(x.tag===18){if(j=x.return,j===null)throw Error(P(341));j.lanes|=c,S=j.alternate,S!==null&&(S.lanes|=c),zu(j,c,i),j=null}else j=x.child;if(j!==null)j.return=x;else for(j=x;j!==null;){if(j===i){j=null;break}if(x=j.sibling,x!==null){x.return=j.return,j=x;break}j=j.return}x=j}}function Xa(i,o,c,f){i=null;for(var x=o,S=!1;x!==null;){if(!S){if((x.flags&524288)!==0)S=!0;else if((x.flags&262144)!==0)break}if(x.tag===10){var j=x.alternate;if(j===null)throw Error(P(387));if(j=j.memoizedProps,j!==null){var q=x.type;Ia(x.pendingProps.value,j.value)||(i!==null?i.push(q):i=[q])}}else if(x===si.current){if(j=x.alternate,j===null)throw Error(P(387));j.memoizedState.memoizedState!==x.memoizedState.memoizedState&&(i!==null?i.push(Le):i=[Le])}x=x.return}i!==null&&Ic(o,i,c,f),o.flags|=262144}function Io(i){for(i=i.firstContext;i!==null;){if(!Ia(i.context._currentValue,i.memoizedValue))return!0;i=i.next}return!1}function ys(i){gn=i,lo=null,i=i.dependencies,i!==null&&(i.firstContext=null)}function Xr(i){return Mh(gn,i)}function Rc(i,o){return gn===null&&ys(i),Mh(i,o)}function Mh(i,o){var c=o._currentValue;if(o={context:o,memoizedValue:c,next:null},lo===null){if(i===null)throw Error(P(308));lo=o,i.dependencies={lanes:0,firstContext:o},i.flags|=524288}else lo=lo.next=o;return c}var Ad=typeof AbortController<"u"?AbortController:function(){var i=[],o=this.signal={aborted:!1,addEventListener:function(c,f){i.push(f)}};this.abort=function(){o.aborted=!0,i.forEach(function(c){return c()})}},Ed=R.unstable_scheduleCallback,Gl=R.unstable_NormalPriority,Ni={$$typeof:oi,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function ca(){return{controller:new Ad,data:new Map,refCount:0}}function Er(i){i.refCount--,i.refCount===0&&Ed(Gl,function(){i.controller.abort()})}var ua=null,Pu=0,ha=0,Ea=null;function zd(i,o){if(ua===null){var c=ua=[];Pu=0,ha=oc(),Ea={status:"pending",value:void 0,then:function(f){c.push(f)}}}return Pu++,o.then(ku,ku),o}function ku(){if(--Pu===0&&ua!==null){Ea!==null&&(Ea.status="fulfilled");var i=ua;ua=null,ha=0,Ea=null;for(var o=0;o<i.length;o++)(0,i[o])()}}function Mp(i,o){var c=[],f={status:"pending",value:null,reason:null,then:function(x){c.push(x)}};return i.then(function(){f.status="fulfilled",f.value=o;for(var x=0;x<c.length;x++)(0,c[x])(o)},function(x){for(f.status="rejected",f.reason=x,x=0;x<c.length;x++)(0,c[x])(void 0)}),f}var Du=je.S;je.S=function(i,o){im=Zr(),typeof o=="object"&&o!==null&&typeof o.then=="function"&&zd(i,o),Du!==null&&Du(i,o)};var bs=me(null);function Fn(){var i=bs.current;return i!==null?i:Hi.pooledCache}function _n(i,o){o===null?at(bs,bs.current):at(bs,o.pool)}function st(){var i=Fn();return i===null?null:{parent:Ni._currentValue,pool:i}}var tl=Error(P(460)),Ro=Error(P(474)),Bc=Error(P(542)),xs={then:function(){}};function Bo(i){return i=i.status,i==="fulfilled"||i==="rejected"}function Lu(i,o,c){switch(c=i[c],c===void 0?i.push(o):c!==o&&(o.then(dn,dn),o=c),o.status){case"fulfilled":return o.value;case"rejected":throw i=o.reason,Oc(i),i;default:if(typeof o.status=="string")o.then(dn,dn);else{if(i=Hi,i!==null&&100<i.shellSuspendCounter)throw Error(P(482));i=o,i.status="pending",i.then(function(f){if(o.status==="pending"){var x=o;x.status="fulfilled",x.value=f}},function(f){if(o.status==="pending"){var x=o;x.status="rejected",x.reason=f}})}switch(o.status){case"fulfilled":return o.value;case"rejected":throw i=o.reason,Oc(i),i}throw vn=o,tl}}function $t(i){try{var o=i._init;return o(i._payload)}catch(c){throw c!==null&&typeof c=="object"&&typeof c.then=="function"?(vn=c,tl):c}}var vn=null;function Ah(){if(vn===null)throw Error(P(459));var i=vn;return vn=null,i}function Oc(i){if(i===tl||i===Bc)throw Error(P(483))}var il=null,ql=0;function rl(i){var o=ql;return ql+=1,il===null&&(il=[]),Lu(il,i,o)}function ws(i,o){o=o.props.ref,i.ref=o!==void 0?o:null}function jc(i,o){throw o.$$typeof===xt?Error(P(525)):(i=Object.prototype.toString.call(o),Error(P(31,i==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":i)))}function Eh(i){function o(xe,ge){if(i){var ze=xe.deletions;ze===null?(xe.deletions=[ge],xe.flags|=16):ze.push(ge)}}function c(xe,ge){if(!i)return null;for(;ge!==null;)o(xe,ge),ge=ge.sibling;return null}function f(xe){for(var ge=new Map;xe!==null;)xe.key!==null?ge.set(xe.key,xe):ge.set(xe.index,xe),xe=xe.sibling;return ge}function x(xe,ge){return xe=Ga(xe,ge),xe.index=0,xe.sibling=null,xe}function S(xe,ge,ze){return xe.index=ze,i?(ze=xe.alternate,ze!==null?(ze=ze.index,ze<ge?(xe.flags|=67108866,ge):ze):(xe.flags|=67108866,ge)):(xe.flags|=1048576,ge)}function j(xe){return i&&xe.alternate===null&&(xe.flags|=67108866),xe}function q(xe,ge,ze,He){return ge===null||ge.tag!==6?(ge=Ul(ze,xe.mode,He),ge.return=xe,ge):(ge=x(ge,ze),ge.return=xe,ge)}function he(xe,ge,ze,He){var At=ze.type;return At===Ce?$e(xe,ge,ze.props.children,He,ze.key):ge!==null&&(ge.elementType===At||typeof At=="object"&&At!==null&&At.$$typeof===Mr&&$t(At)===ge.type)?(ge=x(ge,ze.props),ws(ge,ze),ge.return=xe,ge):(ge=Mu(ze.type,ze.key,ze.props,null,xe.mode,He),ws(ge,ze),ge.return=xe,ge)}function Pe(xe,ge,ze,He){return ge===null||ge.tag!==4||ge.stateNode.containerInfo!==ze.containerInfo||ge.stateNode.implementation!==ze.implementation?(ge=Zl(ze,xe.mode,He),ge.return=xe,ge):(ge=x(ge,ze.children||[]),ge.return=xe,ge)}function $e(xe,ge,ze,He,At){return ge===null||ge.tag!==7?(ge=ds(ze,xe.mode,He,At),ge.return=xe,ge):(ge=x(ge,ze),ge.return=xe,ge)}function qe(xe,ge,ze){if(typeof ge=="string"&&ge!==""||typeof ge=="number"||typeof ge=="bigint")return ge=Ul(""+ge,xe.mode,ze),ge.return=xe,ge;if(typeof ge=="object"&&ge!==null){switch(ge.$$typeof){case Ot:return ze=Mu(ge.type,ge.key,ge.props,null,xe.mode,ze),ws(ze,ge),ze.return=xe,ze;case dt:return ge=Zl(ge,xe.mode,ze),ge.return=xe,ge;case Mr:return ge=$t(ge),qe(xe,ge,ze)}if(Ar(ge)||Gi(ge))return ge=ds(ge,xe.mode,ze,null),ge.return=xe,ge;if(typeof ge.then=="function")return qe(xe,rl(ge),ze);if(ge.$$typeof===oi)return qe(xe,Rc(xe,ge),ze);jc(xe,ge)}return null}function Re(xe,ge,ze,He){var At=ge!==null?ge.key:null;if(typeof ze=="string"&&ze!==""||typeof ze=="number"||typeof ze=="bigint")return At!==null?null:q(xe,ge,""+ze,He);if(typeof ze=="object"&&ze!==null){switch(ze.$$typeof){case Ot:return ze.key===At?he(xe,ge,ze,He):null;case dt:return ze.key===At?Pe(xe,ge,ze,He):null;case Mr:return ze=$t(ze),Re(xe,ge,ze,He)}if(Ar(ze)||Gi(ze))return At!==null?null:$e(xe,ge,ze,He,null);if(typeof ze.then=="function")return Re(xe,ge,rl(ze),He);if(ze.$$typeof===oi)return Re(xe,ge,Rc(xe,ze),He);jc(xe,ze)}return null}function Be(xe,ge,ze,He,At){if(typeof He=="string"&&He!==""||typeof He=="number"||typeof He=="bigint")return xe=xe.get(ze)||null,q(ge,xe,""+He,At);if(typeof He=="object"&&He!==null){switch(He.$$typeof){case Ot:return xe=xe.get(He.key===null?ze:He.key)||null,he(ge,xe,He,At);case dt:return xe=xe.get(He.key===null?ze:He.key)||null,Pe(ge,xe,He,At);case Mr:return He=$t(He),Be(xe,ge,ze,He,At)}if(Ar(He)||Gi(He))return xe=xe.get(ze)||null,$e(ge,xe,He,At,null);if(typeof He.then=="function")return Be(xe,ge,ze,rl(He),At);if(He.$$typeof===oi)return Be(xe,ge,ze,Rc(ge,He),At);jc(ge,He)}return null}function _t(xe,ge,ze,He){for(var At=null,Ti=null,ct=ge,kt=ge=0,Jt=null;ct!==null&&kt<ze.length;kt++){ct.index>kt?(Jt=ct,ct=null):Jt=ct.sibling;var ei=Re(xe,ct,ze[kt],He);if(ei===null){ct===null&&(ct=Jt);break}i&&ct&&ei.alternate===null&&o(xe,ct),ge=S(ei,ge,kt),Ti===null?At=ei:Ti.sibling=ei,Ti=ei,ct=Jt}if(kt===ze.length)return c(xe,ct),ri&&Do(xe,kt),At;if(ct===null){for(;kt<ze.length;kt++)ct=qe(xe,ze[kt],He),ct!==null&&(ge=S(ct,ge,kt),Ti===null?At=ct:Ti.sibling=ct,Ti=ct);return ri&&Do(xe,kt),At}for(ct=f(ct);kt<ze.length;kt++)Jt=Be(ct,xe,kt,ze[kt],He),Jt!==null&&(i&&Jt.alternate!==null&&ct.delete(Jt.key===null?kt:Jt.key),ge=S(Jt,ge,kt),Ti===null?At=Jt:Ti.sibling=Jt,Ti=Jt);return i&&ct.forEach(function(Tn){return o(xe,Tn)}),ri&&Do(xe,kt),At}function Rt(xe,ge,ze,He){if(ze==null)throw Error(P(151));for(var At=null,Ti=null,ct=ge,kt=ge=0,Jt=null,ei=ze.next();ct!==null&&!ei.done;kt++,ei=ze.next()){ct.index>kt?(Jt=ct,ct=null):Jt=ct.sibling;var Tn=Re(xe,ct,ei.value,He);if(Tn===null){ct===null&&(ct=Jt);break}i&&ct&&Tn.alternate===null&&o(xe,ct),ge=S(Tn,ge,kt),Ti===null?At=Tn:Ti.sibling=Tn,Ti=Tn,ct=Jt}if(ei.done)return c(xe,ct),ri&&Do(xe,kt),At;if(ct===null){for(;!ei.done;kt++,ei=ze.next())ei=qe(xe,ei.value,He),ei!==null&&(ge=S(ei,ge,kt),Ti===null?At=ei:Ti.sibling=ei,Ti=ei);return ri&&Do(xe,kt),At}for(ct=f(ct);!ei.done;kt++,ei=ze.next())ei=Be(ct,xe,kt,ei.value,He),ei!==null&&(i&&ei.alternate!==null&&ct.delete(ei.key===null?kt:ei.key),ge=S(ei,ge,kt),Ti===null?At=ei:Ti.sibling=ei,Ti=ei);return i&&ct.forEach(function(Os){return o(xe,Os)}),ri&&Do(xe,kt),At}function Yi(xe,ge,ze,He){if(typeof ze=="object"&&ze!==null&&ze.type===Ce&&ze.key===null&&(ze=ze.props.children),typeof ze=="object"&&ze!==null){switch(ze.$$typeof){case Ot:e:{for(var At=ze.key;ge!==null;){if(ge.key===At){if(At=ze.type,At===Ce){if(ge.tag===7){c(xe,ge.sibling),He=x(ge,ze.props.children),He.return=xe,xe=He;break e}}else if(ge.elementType===At||typeof At=="object"&&At!==null&&At.$$typeof===Mr&&$t(At)===ge.type){c(xe,ge.sibling),He=x(ge,ze.props),ws(He,ze),He.return=xe,xe=He;break e}c(xe,ge);break}else o(xe,ge);ge=ge.sibling}ze.type===Ce?(He=ds(ze.props.children,xe.mode,He,ze.key),He.return=xe,xe=He):(He=Mu(ze.type,ze.key,ze.props,null,xe.mode,He),ws(He,ze),He.return=xe,xe=He)}return j(xe);case dt:e:{for(At=ze.key;ge!==null;){if(ge.key===At)if(ge.tag===4&&ge.stateNode.containerInfo===ze.containerInfo&&ge.stateNode.implementation===ze.implementation){c(xe,ge.sibling),He=x(ge,ze.children||[]),He.return=xe,xe=He;break e}else{c(xe,ge);break}else o(xe,ge);ge=ge.sibling}He=Zl(ze,xe.mode,He),He.return=xe,xe=He}return j(xe);case Mr:return ze=$t(ze),Yi(xe,ge,ze,He)}if(Ar(ze))return _t(xe,ge,ze,He);if(Gi(ze)){if(At=Gi(ze),typeof At!="function")throw Error(P(150));return ze=At.call(ze),Rt(xe,ge,ze,He)}if(typeof ze.then=="function")return Yi(xe,ge,rl(ze),He);if(ze.$$typeof===oi)return Yi(xe,ge,Rc(xe,ze),He);jc(xe,ze)}return typeof ze=="string"&&ze!==""||typeof ze=="number"||typeof ze=="bigint"?(ze=""+ze,ge!==null&&ge.tag===6?(c(xe,ge.sibling),He=x(ge,ze),He.return=xe,xe=He):(c(xe,ge),He=Ul(ze,xe.mode,He),He.return=xe,xe=He),j(xe)):c(xe,ge)}return function(xe,ge,ze,He){try{ql=0;var At=Yi(xe,ge,ze,He);return il=null,At}catch(ct){if(ct===tl||ct===Bc)throw ct;var Ti=Ha(29,ct,null,xe.mode);return Ti.lanes=He,Ti.return=xe,Ti}finally{}}}var Cs=Eh(!0),zh=Eh(!1),Ss=!1;function Nn(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function bi(i,o){i=i.updateQueue,o.updateQueue===i&&(o.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,callbacks:null})}function Ts(i){return{lane:i,tag:0,payload:null,callback:null,next:null}}function Un(i,o,c){var f=i.updateQueue;if(f===null)return null;if(f=f.shared,(fi&2)!==0){var x=f.pending;return x===null?o.next=o:(o.next=x.next,x.next=o),f.pending=o,o=Fl(i),Ch(i,null,c),o}return Pc(i,f,o,c),Fl(i)}function Ms(i,o,c){if(o=o.updateQueue,o!==null&&(o=o.shared,(c&4194048)!==0)){var f=o.lanes;f&=i.pendingLanes,c|=f,o.lanes=c,sr(i,c)}}function Vc(i,o){var c=i.updateQueue,f=i.alternate;if(f!==null&&(f=f.updateQueue,c===f)){var x=null,S=null;if(c=c.firstBaseUpdate,c!==null){do{var j={lane:c.lane,tag:c.tag,payload:c.payload,callback:null,next:null};S===null?x=S=j:S=S.next=j,c=c.next}while(c!==null);S===null?x=S=o:S=S.next=o}else x=S=o;c={baseState:f.baseState,firstBaseUpdate:x,lastBaseUpdate:S,shared:f.shared,callbacks:f.callbacks},i.updateQueue=c;return}i=c.lastBaseUpdate,i===null?c.firstBaseUpdate=o:i.next=o,c.lastBaseUpdate=o}var $c=!1;function al(){if($c){var i=Ea;if(i!==null)throw i}}function As(i,o,c,f){$c=!1;var x=i.updateQueue;Ss=!1;var S=x.firstBaseUpdate,j=x.lastBaseUpdate,q=x.shared.pending;if(q!==null){x.shared.pending=null;var he=q,Pe=he.next;he.next=null,j===null?S=Pe:j.next=Pe,j=he;var $e=i.alternate;$e!==null&&($e=$e.updateQueue,q=$e.lastBaseUpdate,q!==j&&(q===null?$e.firstBaseUpdate=Pe:q.next=Pe,$e.lastBaseUpdate=he))}if(S!==null){var qe=x.baseState;j=0,$e=Pe=he=null,q=S;do{var Re=q.lane&-536870913,Be=Re!==q.lane;if(Be?(pi&Re)===Re:(f&Re)===Re){Re!==0&&Re===ha&&($c=!0),$e!==null&&($e=$e.next={lane:0,tag:q.tag,payload:q.payload,callback:null,next:null});e:{var _t=i,Rt=q;Re=o;var Yi=c;switch(Rt.tag){case 1:if(_t=Rt.payload,typeof _t=="function"){qe=_t.call(Yi,qe,Re);break e}qe=_t;break e;case 3:_t.flags=_t.flags&-65537|128;case 0:if(_t=Rt.payload,Re=typeof _t=="function"?_t.call(Yi,qe,Re):_t,Re==null)break e;qe=Je({},qe,Re);break e;case 2:Ss=!0}}Re=q.callback,Re!==null&&(i.flags|=64,Be&&(i.flags|=8192),Be=x.callbacks,Be===null?x.callbacks=[Re]:Be.push(Re))}else Be={lane:Re,tag:q.tag,payload:q.payload,callback:q.callback,next:null},$e===null?(Pe=$e=Be,he=qe):$e=$e.next=Be,j|=Re;if(q=q.next,q===null){if(q=x.shared.pending,q===null)break;Be=q,q=Be.next,Be.next=null,x.lastBaseUpdate=Be,x.shared.pending=null}}while(!0);$e===null&&(he=qe),x.baseState=he,x.firstBaseUpdate=Pe,x.lastBaseUpdate=$e,S===null&&(x.shared.lanes=0),rc|=j,i.lanes=j,i.memoizedState=qe}}function Zn(i,o){if(typeof i!="function")throw Error(P(191,i));i.call(o)}function nl(i,o){var c=i.callbacks;if(c!==null)for(i.callbacks=null,i=0;i<c.length;i++)Zn(c[i],o)}var ut=me(null),yt=me(0);function ol(i,o){i=Ds,at(yt,i),at(ut,o),Ds=i|o.baseLanes}function Fc(){at(yt,Ds),at(ut,ut.current)}function sl(){Ds=yt.current,Ue(ut),Ue(yt)}var Ui=me(null),Ya=null;function Yr(i){var o=i.alternate;at(Ki,Ki.current&1),at(Ui,i),Ya===null&&(o===null||ut.current!==null||o.memoizedState!==null)&&(Ya=i)}function Iu(i){at(Ki,Ki.current),at(Ui,i),Ya===null&&(Ya=i)}function Pd(i){i.tag===22?(at(Ki,Ki.current),at(Ui,i),Ya===null&&(Ya=i)):Qa()}function Qa(){at(Ki,Ki.current),at(Ui,Ui.current)}function Ka(i){Ue(Ui),Ya===i&&(Ya=null),Ue(Ki)}var Ki=me(0);function Zi(i){for(var o=i;o!==null;){if(o.tag===13){var c=o.memoizedState;if(c!==null&&(c=c.dehydrated,c===null||mf(c)||lc(c)))return o}else if(o.tag===19&&(o.memoizedProps.revealOrder==="forwards"||o.memoizedProps.revealOrder==="backwards"||o.memoizedProps.revealOrder==="unstable_legacy-backwards"||o.memoizedProps.revealOrder==="together")){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===i)break;for(;o.sibling===null;){if(o.return===null||o.return===i)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}var xi=0,Qt=null,gi=null,Ai=null,ll=!1,uo=!1,ho=!1,po=0,cl=0,Hn=null,ul=0;function tr(){throw Error(P(321))}function Xl(i,o){if(o===null)return!1;for(var c=0;c<o.length&&c<i.length;c++)if(!Ia(i[c],o[c]))return!1;return!0}function Oo(i,o,c,f,x,S){return xi=S,Qt=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,je.H=i===null||i.memoizedState===null?Uo:mo,ho=!1,S=c(f,x),ho=!1,uo&&(S=Bu(o,c,f,x)),Ru(i),S}function Ru(i){je.H=Ql;var o=gi!==null&&gi.next!==null;if(xi=0,Ai=gi=Qt=null,ll=!1,cl=0,Hn=null,o)throw Error(P(300));i===null||$r||(i=i.dependencies,i!==null&&Io(i)&&($r=!0))}function Bu(i,o,c,f){Qt=i;var x=0;do{if(uo&&(Hn=null),cl=0,uo=!1,25<=x)throw Error(P(301));if(x+=1,Ai=gi=null,i.updateQueue!=null){var S=i.updateQueue;S.lastEffect=null,S.events=null,S.stores=null,S.memoCache!=null&&(S.memoCache.index=0)}je.H=kh,S=o(c,f)}while(uo);return S}function Ou(){var i=je.H,o=i.useState()[0];return o=typeof o.then=="function"?g(o):o,i=i.useState()[0],(gi!==null?gi.memoizedState:null)!==i&&(Qt.flags|=1024),o}function Yl(){var i=po!==0;return po=0,i}function p(i,o,c){o.updateQueue=i.updateQueue,o.flags&=-2053,i.lanes&=~c}function e(i){if(ll){for(i=i.memoizedState;i!==null;){var o=i.queue;o!==null&&(o.pending=null),i=i.next}ll=!1}xi=0,Ai=gi=Qt=null,uo=!1,cl=po=0,Hn=null}function n(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ai===null?Qt.memoizedState=Ai=i:Ai=Ai.next=i,Ai}function l(){if(gi===null){var i=Qt.alternate;i=i!==null?i.memoizedState:null}else i=gi.next;var o=Ai===null?Qt.memoizedState:Ai.next;if(o!==null)Ai=o,gi=i;else{if(i===null)throw Qt.alternate===null?Error(P(467)):Error(P(310));gi=i,i={memoizedState:gi.memoizedState,baseState:gi.baseState,baseQueue:gi.baseQueue,queue:gi.queue,next:null},Ai===null?Qt.memoizedState=Ai=i:Ai=Ai.next=i}return Ai}function h(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function g(i){var o=cl;return cl+=1,Hn===null&&(Hn=[]),i=Lu(Hn,i,o),o=Qt,(Ai===null?o.memoizedState:Ai.next)===null&&(o=o.alternate,je.H=o===null||o.memoizedState===null?Uo:mo),i}function v(i){if(i!==null&&typeof i=="object"){if(typeof i.then=="function")return g(i);if(i.$$typeof===oi)return Xr(i)}throw Error(P(438,String(i)))}function w(i){var o=null,c=Qt.updateQueue;if(c!==null&&(o=c.memoCache),o==null){var f=Qt.alternate;f!==null&&(f=f.updateQueue,f!==null&&(f=f.memoCache,f!=null&&(o={data:f.data.map(function(x){return x.slice()}),index:0})))}if(o==null&&(o={data:[],index:0}),c===null&&(c=h(),Qt.updateQueue=c),c.memoCache=o,c=o.data[o.index],c===void 0)for(c=o.data[o.index]=Array(i),f=0;f<i;f++)c[f]=ln;return o.index++,c}function C(i,o){return typeof o=="function"?o(i):o}function z(i){var o=l();return k(o,gi,i)}function k(i,o,c){var f=i.queue;if(f===null)throw Error(P(311));f.lastRenderedReducer=c;var x=i.baseQueue,S=f.pending;if(S!==null){if(x!==null){var j=x.next;x.next=S.next,S.next=j}o.baseQueue=x=S,f.pending=null}if(S=i.baseState,x===null)i.memoizedState=S;else{o=x.next;var q=j=null,he=null,Pe=o,$e=!1;do{var qe=Pe.lane&-536870913;if(qe!==Pe.lane?(pi&qe)===qe:(xi&qe)===qe){var Re=Pe.revertLane;if(Re===0)he!==null&&(he=he.next={lane:0,revertLane:0,gesture:null,action:Pe.action,hasEagerState:Pe.hasEagerState,eagerState:Pe.eagerState,next:null}),qe===ha&&($e=!0);else if((xi&Re)===Re){Pe=Pe.next,Re===ha&&($e=!0);continue}else qe={lane:0,revertLane:Pe.revertLane,gesture:null,action:Pe.action,hasEagerState:Pe.hasEagerState,eagerState:Pe.eagerState,next:null},he===null?(q=he=qe,j=S):he=he.next=qe,Qt.lanes|=Re,rc|=Re;qe=Pe.action,ho&&c(S,qe),S=Pe.hasEagerState?Pe.eagerState:c(S,qe)}else Re={lane:qe,revertLane:Pe.revertLane,gesture:Pe.gesture,action:Pe.action,hasEagerState:Pe.hasEagerState,eagerState:Pe.eagerState,next:null},he===null?(q=he=Re,j=S):he=he.next=Re,Qt.lanes|=qe,rc|=qe;Pe=Pe.next}while(Pe!==null&&Pe!==o);if(he===null?j=S:he.next=q,!Ia(S,i.memoizedState)&&($r=!0,$e&&(c=Ea,c!==null)))throw c;i.memoizedState=S,i.baseState=j,i.baseQueue=he,f.lastRenderedState=S}return x===null&&(f.lanes=0),[i.memoizedState,f.dispatch]}function O(i){var o=l(),c=o.queue;if(c===null)throw Error(P(311));c.lastRenderedReducer=i;var f=c.dispatch,x=c.pending,S=o.memoizedState;if(x!==null){c.pending=null;var j=x=x.next;do S=i(S,j.action),j=j.next;while(j!==x);Ia(S,o.memoizedState)||($r=!0),o.memoizedState=S,o.baseQueue===null&&(o.baseState=S),c.lastRenderedState=S}return[S,f]}function I(i,o,c){var f=Qt,x=l(),S=ri;if(S){if(c===void 0)throw Error(P(407));c=c()}else c=o();var j=!Ia((gi||x).memoizedState,c);if(j&&(x.memoizedState=c,$r=!0),x=x.queue,Ut(K.bind(null,f,x,i),[i]),x.getSnapshot!==o||j||Ai!==null&&Ai.memoizedState.tag&1){if(f.flags|=2048,lt(9,{destroy:void 0},H.bind(null,f,x,c,o),null),Hi===null)throw Error(P(349));S||(xi&127)!==0||F(f,o,c)}return c}function F(i,o,c){i.flags|=16384,i={getSnapshot:o,value:c},o=Qt.updateQueue,o===null?(o=h(),Qt.updateQueue=o,o.stores=[i]):(c=o.stores,c===null?o.stores=[i]:c.push(i))}function H(i,o,c,f){o.value=c,o.getSnapshot=f,W(o)&&J(i)}function K(i,o,c){return c(function(){W(o)&&J(i)})}function W(i){var o=i.getSnapshot;i=i.value;try{var c=o();return!Ia(i,c)}catch{return!0}}function J(i){var o=mn(i,2);o!==null&&ja(o,i,2)}function ie(i){var o=n();if(typeof i=="function"){var c=i;if(i=c(),ho){se(!0);try{c()}finally{se(!1)}}}return o.memoizedState=o.baseState=i,o.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:C,lastRenderedState:i},o}function oe(i,o,c,f){return i.baseState=c,k(i,gi,typeof f=="function"?f:C)}function te(i,o,c,f,x){if(Oa(i))throw Error(P(485));if(i=o.action,i!==null){var S={payload:x,action:i,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(j){S.listeners.push(j)}};je.T!==null?c(!0):S.isTransition=!1,f(S),c=o.pending,c===null?(S.next=o.pending=S,le(o,S)):(S.next=c.next,o.pending=c.next=S)}}function le(i,o){var c=o.action,f=o.payload,x=i.state;if(o.isTransition){var S=je.T,j={};je.T=j;try{var q=c(x,f),he=je.S;he!==null&&he(j,q),ue(i,o,q)}catch(Pe){fe(i,o,Pe)}finally{S!==null&&j.types!==null&&(S.types=j.types),je.T=S}}else try{S=c(x,f),ue(i,o,S)}catch(Pe){fe(i,o,Pe)}}function ue(i,o,c){c!==null&&typeof c=="object"&&typeof c.then=="function"?c.then(function(f){ae(i,o,f)},function(f){return fe(i,o,f)}):ae(i,o,c)}function ae(i,o,c){o.status="fulfilled",o.value=c,Ae(o),i.state=c,o=i.pending,o!==null&&(c=o.next,c===o?i.pending=null:(c=c.next,o.next=c,le(i,c)))}function fe(i,o,c){var f=i.pending;if(i.pending=null,f!==null){f=f.next;do o.status="rejected",o.reason=c,Ae(o),o=o.next;while(o!==f)}i.action=null}function Ae(i){i=i.listeners;for(var o=0;o<i.length;o++)(0,i[o])()}function we(i,o){return o}function Se(i,o){if(ri){var c=Hi.formState;if(c!==null){e:{var f=Qt;if(ri){if(Si){t:{for(var x=Si,S=Aa;x.nodeType!==8;){if(!S){x=null;break t}if(x=wn(x.nextSibling),x===null){x=null;break t}}S=x.data,x=S==="F!"||S==="F"?x:null}if(x){Si=wn(x.nextSibling),f=x.data==="F!";break e}}Ra(f)}f=!1}f&&(o=c[0])}}return c=n(),c.memoizedState=c.baseState=o,f={pending:null,lanes:0,dispatch:null,lastRenderedReducer:we,lastRenderedState:o},c.queue=f,c=hr.bind(null,Qt,f),f.dispatch=c,f=ie(!1),S=qn.bind(null,Qt,!1,f.queue),f=n(),x={state:o,dispatch:null,action:i,pending:null},f.queue=x,c=te.bind(null,Qt,x,S,c),x.dispatch=c,f.memoizedState=i,[o,c,!1]}function Ee(i){var o=l();return Qe(o,gi,i)}function Qe(i,o,c){if(o=k(i,o,we)[0],i=z(C)[0],typeof o=="object"&&o!==null&&typeof o.then=="function")try{var f=g(o)}catch(j){throw j===tl?Bc:j}else f=o;o=l();var x=o.queue,S=x.dispatch;return c!==o.memoizedState&&(Qt.flags|=2048,lt(9,{destroy:void 0},Ke.bind(null,x,c),null)),[f,S,i]}function Ke(i,o){i.action=o}function Ne(i){var o=l(),c=gi;if(c!==null)return Qe(o,c,i);l(),o=o.memoizedState,c=l();var f=c.queue.dispatch;return c.memoizedState=i,[o,f,!1]}function lt(i,o,c,f){return i={tag:i,create:c,deps:f,inst:o,next:null},o=Qt.updateQueue,o===null&&(o=h(),Qt.updateQueue=o),c=o.lastEffect,c===null?o.lastEffect=i.next=i:(f=c.next,c.next=i,i.next=f,o.lastEffect=i),i}function Tt(){return l().memoizedState}function li(i,o,c,f){var x=n();Qt.flags|=i,x.memoizedState=lt(1|o,{destroy:void 0},c,f===void 0?null:f)}function Ei(i,o,c,f){var x=l();f=f===void 0?null:f;var S=x.memoizedState.inst;gi!==null&&f!==null&&Xl(f,gi.memoizedState.deps)?x.memoizedState=lt(o,S,c,f):(Qt.flags|=i,x.memoizedState=lt(1|o,S,c,f))}function Li(i,o){li(8390656,8,i,o)}function Ut(i,o){Ei(2048,8,i,o)}function Ii(i){Qt.flags|=4;var o=Qt.updateQueue;if(o===null)o=h(),Qt.updateQueue=o,o.events=[i];else{var c=o.events;c===null?o.events=[i]:c.push(i)}}function zr(i){var o=l().memoizedState;return Ii({ref:o,nextImpl:i}),function(){if((fi&2)!==0)throw Error(P(440));return o.impl.apply(void 0,arguments)}}function Wi(i,o){return Ei(4,2,i,o)}function Vr(i,o){return Ei(4,4,i,o)}function ur(i,o){if(typeof o=="function"){i=i();var c=o(i);return function(){typeof c=="function"?c():o(null)}}if(o!=null)return i=i(),o.current=i,function(){o.current=null}}function mr(i,o,c){c=c!=null?c.concat([i]):null,Ei(4,4,ur.bind(null,o,i),c)}function Pr(){}function jo(i,o){var c=l();o=o===void 0?null:o;var f=c.memoizedState;return o!==null&&Xl(o,f[1])?f[0]:(c.memoizedState=[i,o],i)}function Vo(i,o){var c=l();o=o===void 0?null:o;var f=c.memoizedState;if(o!==null&&Xl(o,f[1]))return f[0];if(f=i(),ho){se(!0);try{i()}finally{se(!1)}}return c.memoizedState=[f,o],f}function $o(i,o,c){return c===void 0||(xi&1073741824)!==0&&(pi&261930)===0?i.memoizedState=o:(i.memoizedState=c,i=Hp(),Qt.lanes|=i,rc|=i,c)}function Fo(i,o,c,f){return Ia(c,o)?c:ut.current!==null?(i=$o(i,c,f),Ia(i,o)||($r=!0),i):(xi&42)===0||(xi&1073741824)!==0&&(pi&261930)===0?($r=!0,i.memoizedState=c):(i=Hp(),Qt.lanes|=i,rc|=i,o)}function Es(i,o,c,f,x){var S=nt.p;nt.p=S!==0&&8>S?S:8;var j=je.T,q={};je.T=q,qn(i,!1,o,c);try{var he=x(),Pe=je.S;if(Pe!==null&&Pe(q,he),he!==null&&typeof he=="object"&&typeof he.then=="function"){var $e=Mp(he,f);Gn(i,o,$e,xn(i))}else Gn(i,o,f,xn(i))}catch(qe){Gn(i,o,{then:function(){},status:"rejected",reason:qe},xn())}finally{nt.p=S,j!==null&&q.types!==null&&(j.types=q.types),je.T=j}}function Nc(){}function fo(i,o,c,f){if(i.tag!==5)throw Error(P(476));var x=da(i).queue;Es(i,x,o,zt,c===null?Nc:function(){return ea(i),c(f)})}function da(i){var o=i.memoizedState;if(o!==null)return o;o={memoizedState:zt,baseState:zt,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:C,lastRenderedState:zt},next:null};var c={};return o.next={memoizedState:c,baseState:c,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:C,lastRenderedState:c},next:null},i.memoizedState=o,i=i.alternate,i!==null&&(i.memoizedState=o),o}function ea(i){var o=da(i);o.next===null&&(o=i.alternate.memoizedState),Gn(i,o.next.queue,{},xn())}function yn(){return Xr(Le)}function hl(){return l().memoizedState}function xr(){return l().memoizedState}function Qr(i){for(var o=i.return;o!==null;){switch(o.tag){case 24:case 3:var c=xn();i=Ts(c);var f=Un(o,i,c);f!==null&&(ja(f,o,c),Ms(f,o,c)),o={cache:ca()},i.payload=o;return}o=o.return}}function Ba(i,o,c){var f=xn();c={lane:f,revertLane:0,gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},Oa(i)?No(o,c):(c=hs(i,o,c,f),c!==null&&(ja(c,i,f),Ph(c,o,f)))}function hr(i,o,c){var f=xn();Gn(i,o,c,f)}function Gn(i,o,c,f){var x={lane:f,revertLane:0,gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null};if(Oa(i))No(o,x);else{var S=i.alternate;if(i.lanes===0&&(S===null||S.lanes===0)&&(S=o.lastRenderedReducer,S!==null))try{var j=o.lastRenderedState,q=S(j,c);if(x.hasEagerState=!0,x.eagerState=q,Ia(q,j))return Pc(i,o,x,0),Hi===null&&Js(),!1}catch{}finally{}if(c=hs(i,o,x,f),c!==null)return ja(c,i,f),Ph(c,o,f),!0}return!1}function qn(i,o,c,f){if(f={lane:2,revertLane:oc(),gesture:null,action:f,hasEagerState:!1,eagerState:null,next:null},Oa(i)){if(o)throw Error(P(479))}else o=hs(i,c,f,2),o!==null&&ja(o,i,2)}function Oa(i){var o=i.alternate;return i===Qt||o!==null&&o===Qt}function No(i,o){uo=ll=!0;var c=i.pending;c===null?o.next=o:(o.next=c.next,c.next=o),i.pending=o}function Ph(i,o,c){if((c&4194048)!==0){var f=o.lanes;f&=i.pendingLanes,c|=f,o.lanes=c,sr(i,c)}}var Ql={readContext:Xr,use:v,useCallback:tr,useContext:tr,useEffect:tr,useImperativeHandle:tr,useLayoutEffect:tr,useInsertionEffect:tr,useMemo:tr,useReducer:tr,useRef:tr,useState:tr,useDebugValue:tr,useDeferredValue:tr,useTransition:tr,useSyncExternalStore:tr,useId:tr,useHostTransitionStatus:tr,useFormState:tr,useActionState:tr,useOptimistic:tr,useMemoCache:tr,useCacheRefresh:tr};Ql.useEffectEvent=tr;var Uo={readContext:Xr,use:v,useCallback:function(i,o){return n().memoizedState=[i,o===void 0?null:o],i},useContext:Xr,useEffect:Li,useImperativeHandle:function(i,o,c){c=c!=null?c.concat([i]):null,li(4194308,4,ur.bind(null,o,i),c)},useLayoutEffect:function(i,o){return li(4194308,4,i,o)},useInsertionEffect:function(i,o){li(4,2,i,o)},useMemo:function(i,o){var c=n();o=o===void 0?null:o;var f=i();if(ho){se(!0);try{i()}finally{se(!1)}}return c.memoizedState=[f,o],f},useReducer:function(i,o,c){var f=n();if(c!==void 0){var x=c(o);if(ho){se(!0);try{c(o)}finally{se(!1)}}}else x=o;return f.memoizedState=f.baseState=x,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:x},f.queue=i,i=i.dispatch=Ba.bind(null,Qt,i),[f.memoizedState,i]},useRef:function(i){var o=n();return i={current:i},o.memoizedState=i},useState:function(i){i=ie(i);var o=i.queue,c=hr.bind(null,Qt,o);return o.dispatch=c,[i.memoizedState,c]},useDebugValue:Pr,useDeferredValue:function(i,o){var c=n();return $o(c,i,o)},useTransition:function(){var i=ie(!1);return i=Es.bind(null,Qt,i.queue,!0,!1),n().memoizedState=i,[!1,i]},useSyncExternalStore:function(i,o,c){var f=Qt,x=n();if(ri){if(c===void 0)throw Error(P(407));c=c()}else{if(c=o(),Hi===null)throw Error(P(349));(pi&127)!==0||F(f,o,c)}x.memoizedState=c;var S={value:c,getSnapshot:o};return x.queue=S,Li(K.bind(null,f,S,i),[i]),f.flags|=2048,lt(9,{destroy:void 0},H.bind(null,f,S,c,o),null),c},useId:function(){var i=n(),o=Hi.identifierPrefix;if(ri){var c=Ma,f=Vn;c=(f&~(1<<32-de(f)-1)).toString(32)+c,o="_"+o+"R_"+c,c=po++,0<c&&(o+="H"+c.toString(32)),o+="_"}else c=ul++,o="_"+o+"r_"+c.toString(32)+"_";return i.memoizedState=o},useHostTransitionStatus:yn,useFormState:Se,useActionState:Se,useOptimistic:function(i){var o=n();o.memoizedState=o.baseState=i;var c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return o.queue=c,o=qn.bind(null,Qt,!0,c),c.dispatch=o,[i,o]},useMemoCache:w,useCacheRefresh:function(){return n().memoizedState=Qr.bind(null,Qt)},useEffectEvent:function(i){var o=n(),c={impl:i};return o.memoizedState=c,function(){if((fi&2)!==0)throw Error(P(440));return c.impl.apply(void 0,arguments)}}},mo={readContext:Xr,use:v,useCallback:jo,useContext:Xr,useEffect:Ut,useImperativeHandle:mr,useInsertionEffect:Wi,useLayoutEffect:Vr,useMemo:Vo,useReducer:z,useRef:Tt,useState:function(){return z(C)},useDebugValue:Pr,useDeferredValue:function(i,o){var c=l();return Fo(c,gi.memoizedState,i,o)},useTransition:function(){var i=z(C)[0],o=l().memoizedState;return[typeof i=="boolean"?i:g(i),o]},useSyncExternalStore:I,useId:hl,useHostTransitionStatus:yn,useFormState:Ee,useActionState:Ee,useOptimistic:function(i,o){var c=l();return oe(c,gi,i,o)},useMemoCache:w,useCacheRefresh:xr};mo.useEffectEvent=zr;var kh={readContext:Xr,use:v,useCallback:jo,useContext:Xr,useEffect:Ut,useImperativeHandle:mr,useInsertionEffect:Wi,useLayoutEffect:Vr,useMemo:Vo,useReducer:O,useRef:Tt,useState:function(){return O(C)},useDebugValue:Pr,useDeferredValue:function(i,o){var c=l();return gi===null?$o(c,i,o):Fo(c,gi.memoizedState,i,o)},useTransition:function(){var i=O(C)[0],o=l().memoizedState;return[typeof i=="boolean"?i:g(i),o]},useSyncExternalStore:I,useId:hl,useHostTransitionStatus:yn,useFormState:Ne,useActionState:Ne,useOptimistic:function(i,o){var c=l();return gi!==null?oe(c,gi,i,o):(c.baseState=i,[i,c.queue.dispatch])},useMemoCache:w,useCacheRefresh:xr};kh.useEffectEvent=zr;function Uc(i,o,c,f){o=i.memoizedState,c=c(f,o),c=c==null?o:Je({},o,c),i.memoizedState=c,i.lanes===0&&(i.updateQueue.baseState=c)}var dl={enqueueSetState:function(i,o,c){i=i._reactInternals;var f=xn(),x=Ts(f);x.payload=o,c!=null&&(x.callback=c),o=Un(i,x,f),o!==null&&(ja(o,i,f),Ms(o,i,f))},enqueueReplaceState:function(i,o,c){i=i._reactInternals;var f=xn(),x=Ts(f);x.tag=1,x.payload=o,c!=null&&(x.callback=c),o=Un(i,x,f),o!==null&&(ja(o,i,f),Ms(o,i,f))},enqueueForceUpdate:function(i,o){i=i._reactInternals;var c=xn(),f=Ts(c);f.tag=2,o!=null&&(f.callback=o),o=Un(i,f,c),o!==null&&(ja(o,i,c),Ms(o,i,c))}};function ju(i,o,c,f,x,S,j){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(f,S,j):o.prototype&&o.prototype.isPureReactComponent?!us(c,f)||!us(x,S):!0}function go(i,o,c,f){i=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(c,f),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(c,f),o.state!==i&&dl.enqueueReplaceState(o,o.state,null)}function Xn(i,o){var c=o;if("ref"in o){c={};for(var f in o)f!=="ref"&&(c[f]=o[f])}if(i=i.defaultProps){c===o&&(c=Je({},c));for(var x in i)c[x]===void 0&&(c[x]=i[x])}return c}function Ap(i){oo(i)}function Vf(i){console.error(i)}function kd(i){oo(i)}function Dh(i,o){try{var c=i.onUncaughtError;c(o.value,{componentStack:o.stack})}catch(f){setTimeout(function(){throw f})}}function Lh(i,o,c){try{var f=i.onCaughtError;f(c.value,{componentStack:c.stack,errorBoundary:o.tag===1?o.stateNode:null})}catch(x){setTimeout(function(){throw x})}}function Dd(i,o,c){return c=Ts(c),c.tag=3,c.payload={element:null},c.callback=function(){Dh(i,o)},c}function $f(i){return i=Ts(i),i.tag=3,i}function Ld(i,o,c,f){var x=c.type.getDerivedStateFromError;if(typeof x=="function"){var S=f.value;i.payload=function(){return x(S)},i.callback=function(){Lh(o,c,f)}}var j=c.stateNode;j!==null&&typeof j.componentDidCatch=="function"&&(i.callback=function(){Lh(o,c,f),typeof x!="function"&&(_l===null?_l=new Set([this]):_l.add(this));var q=f.stack;this.componentDidCatch(f.value,{componentStack:q!==null?q:""})})}function cg(i,o,c,f,x){if(c.flags|=32768,f!==null&&typeof f=="object"&&typeof f.then=="function"){if(o=c.alternate,o!==null&&Xa(o,c,x,!0),c=Ui.current,c!==null){switch(c.tag){case 31:case 13:return Ya===null?Gd():c.alternate===null&&kr===0&&(kr=3),c.flags&=-257,c.flags|=65536,c.lanes=x,f===xs?c.flags|=16384:(o=c.updateQueue,o===null?c.updateQueue=new Set([f]):o.add(f),Qh(i,f,x)),!1;case 22:return c.flags|=65536,f===xs?c.flags|=16384:(o=c.updateQueue,o===null?(o={transitions:null,markerInstances:null,retryQueue:new Set([f])},c.updateQueue=o):(c=o.retryQueue,c===null?o.retryQueue=new Set([f]):c.add(f)),Qh(i,f,x)),!1}throw Error(P(435,c.tag))}return Qh(i,f,x),Gd(),!1}if(ri)return o=Ui.current,o!==null?((o.flags&65536)===0&&(o.flags|=256),o.flags|=65536,o.lanes=x,f!==Fi&&(i=Error(P(422),{cause:f}),_s(Sa(i,c)))):(f!==Fi&&(o=Error(P(423),{cause:f}),_s(Sa(o,c))),i=i.current.alternate,i.flags|=65536,x&=-x,i.lanes|=x,f=Sa(f,c),x=Dd(i.stateNode,f,x),Vc(i,x),kr!==4&&(kr=2)),!1;var S=Error(P(520),{cause:f});if(S=Sa(S,c),Wc===null?Wc=[S]:Wc.push(S),kr!==4&&(kr=2),o===null)return!0;f=Sa(f,c),c=o;do{switch(c.tag){case 3:return c.flags|=65536,i=x&-x,c.lanes|=i,i=Dd(c.stateNode,f,i),Vc(c,i),!1;case 1:if(o=c.type,S=c.stateNode,(c.flags&128)===0&&(typeof o.getDerivedStateFromError=="function"||S!==null&&typeof S.componentDidCatch=="function"&&(_l===null||!_l.has(S))))return c.flags|=65536,x&=-x,c.lanes|=x,x=$f(x),Ld(x,i,c,f),Vc(c,x),!1}c=c.return}while(c!==null);return!1}var Ih=Error(P(461)),$r=!1;function pa(i,o,c,f){o.child=i===null?zh(o,null,c,f):Cs(o,i.child,c,f)}function Zc(i,o,c,f,x){c=c.render;var S=o.ref;if("ref"in f){var j={};for(var q in f)q!=="ref"&&(j[q]=f[q])}else j=f;return ys(o),f=Oo(i,o,c,j,S,x),q=Yl(),i!==null&&!$r?(p(i,o,x),Zo(i,o,x)):(ri&&q&&Hl(o),o.flags|=1,pa(i,o,f,x),o.child)}function Ff(i,o,c,f,x){if(i===null){var S=c.type;return typeof S=="function"&&!Tu(S)&&S.defaultProps===void 0&&c.compare===null?(o.tag=15,o.type=S,Hc(i,o,S,f,x)):(i=Mu(c.type,null,f,o,o.mode,x),i.ref=o.ref,i.return=o,o.child=i)}if(S=i.child,!Dp(i,x)){var j=S.memoizedProps;if(c=c.compare,c=c!==null?c:us,c(j,f)&&i.ref===o.ref)return Zo(i,o,x)}return o.flags|=1,i=Ga(S,f),i.ref=o.ref,i.return=o,o.child=i}function Hc(i,o,c,f,x){if(i!==null){var S=i.memoizedProps;if(us(S,f)&&i.ref===o.ref)if($r=!1,o.pendingProps=f=S,Dp(i,x))(i.flags&131072)!==0&&($r=!0);else return o.lanes=i.lanes,Zo(i,o,x)}return Oh(i,o,c,f,x)}function Rh(i,o,c,f){var x=f.children,S=i!==null?i.memoizedState:null;if(i===null&&o.stateNode===null&&(o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),f.mode==="hidden"){if((o.flags&128)!==0){if(S=S!==null?S.baseLanes|c:c,i!==null){for(f=o.child=i.child,x=0;f!==null;)x=x|f.lanes|f.childLanes,f=f.sibling;f=x&~S}else f=0,o.child=null;return Nf(i,o,S,c,f)}if((c&536870912)!==0)o.memoizedState={baseLanes:0,cachePool:null},i!==null&&_n(o,S!==null?S.cachePool:null),S!==null?ol(o,S):Fc(),Pd(o);else return f=o.lanes=536870912,Nf(i,o,S!==null?S.baseLanes|c:c,c,f)}else S!==null?(_n(o,S.cachePool),ol(o,S),Qa(),o.memoizedState=null):(i!==null&&_n(o,null),Fc(),Qa());return pa(i,o,x,c),o.child}function Kl(i,o){return i!==null&&i.tag===22||o.stateNode!==null||(o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),o.sibling}function Nf(i,o,c,f,x){var S=Fn();return S=S===null?null:{parent:Ni._currentValue,pool:S},o.memoizedState={baseLanes:c,cachePool:S},i!==null&&_n(o,null),Fc(),Pd(o),i!==null&&Xa(i,o,f,!0),o.childLanes=x,null}function Id(i,o){return o=Vh({mode:o.mode,children:o.children},i.mode),o.ref=i.ref,i.child=o,o.return=i,o}function Uf(i,o,c){return Cs(o,i.child,null,c),i=Id(o,o.pendingProps),i.flags|=2,Ka(o),o.memoizedState=null,i}function ug(i,o,c){var f=o.pendingProps,x=(o.flags&128)!==0;if(o.flags&=-129,i===null){if(ri){if(f.mode==="hidden")return i=Id(o,f),o.lanes=536870912,Kl(null,i);if(Iu(o),(i=Si)?(i=ym(i,Aa),i=i!==null&&i.data==="&"?i:null,i!==null&&(o.memoizedState={dehydrated:i,treeContext:jn!==null?{id:Vn,overflow:Ma}:null,retryLane:536870912,hydrationErrors:null},c=kc(i),c.return=o,o.child=c,jr=o,Si=null)):i=null,i===null)throw Ra(o);return o.lanes=536870912,null}return Id(o,f)}var S=i.memoizedState;if(S!==null){var j=S.dehydrated;if(Iu(o),x)if(o.flags&256)o.flags&=-257,o=Uf(i,o,c);else if(o.memoizedState!==null)o.child=i.child,o.flags|=128,o=null;else throw Error(P(558));else if($r||Xa(i,o,c,!1),x=(c&i.childLanes)!==0,$r||x){if(f=Hi,f!==null&&(j=qi(f,c),j!==0&&j!==S.retryLane))throw S.retryLane=j,mn(i,j),ja(f,i,j),Ih;Gd(),o=Uf(i,o,c)}else i=S.treeContext,Si=wn(j.nextSibling),jr=o,ri=!0,so=null,Aa=!1,i!==null&&Au(o,i),o=Id(o,f),o.flags|=4096;return o}return i=Ga(i.child,{mode:f.mode,children:f.children}),i.ref=o.ref,o.child=i,i.return=o,i}function Bh(i,o){var c=o.ref;if(c===null)i!==null&&i.ref!==null&&(o.flags|=4194816);else{if(typeof c!="function"&&typeof c!="object")throw Error(P(284));(i===null||i.ref!==c)&&(o.flags|=4194816)}}function Oh(i,o,c,f,x){return ys(o),c=Oo(i,o,c,f,void 0,x),f=Yl(),i!==null&&!$r?(p(i,o,x),Zo(i,o,x)):(ri&&f&&Hl(o),o.flags|=1,pa(i,o,c,x),o.child)}function Ep(i,o,c,f,x,S){return ys(o),o.updateQueue=null,c=Bu(o,f,c,x),Ru(i),f=Yl(),i!==null&&!$r?(p(i,o,S),Zo(i,o,S)):(ri&&f&&Hl(o),o.flags|=1,pa(i,o,c,S),o.child)}function zp(i,o,c,f,x){if(ys(o),o.stateNode===null){var S=Nt,j=c.contextType;typeof j=="object"&&j!==null&&(S=Xr(j)),S=new c(f,S),o.memoizedState=S.state!==null&&S.state!==void 0?S.state:null,S.updater=dl,o.stateNode=S,S._reactInternals=o,S=o.stateNode,S.props=f,S.state=o.memoizedState,S.refs={},Nn(o),j=c.contextType,S.context=typeof j=="object"&&j!==null?Xr(j):Nt,S.state=o.memoizedState,j=c.getDerivedStateFromProps,typeof j=="function"&&(Uc(o,c,j,f),S.state=o.memoizedState),typeof c.getDerivedStateFromProps=="function"||typeof S.getSnapshotBeforeUpdate=="function"||typeof S.UNSAFE_componentWillMount!="function"&&typeof S.componentWillMount!="function"||(j=S.state,typeof S.componentWillMount=="function"&&S.componentWillMount(),typeof S.UNSAFE_componentWillMount=="function"&&S.UNSAFE_componentWillMount(),j!==S.state&&dl.enqueueReplaceState(S,S.state,null),As(o,f,S,x),al(),S.state=o.memoizedState),typeof S.componentDidMount=="function"&&(o.flags|=4194308),f=!0}else if(i===null){S=o.stateNode;var q=o.memoizedProps,he=Xn(c,q);S.props=he;var Pe=S.context,$e=c.contextType;j=Nt,typeof $e=="object"&&$e!==null&&(j=Xr($e));var qe=c.getDerivedStateFromProps;$e=typeof qe=="function"||typeof S.getSnapshotBeforeUpdate=="function",q=o.pendingProps!==q,$e||typeof S.UNSAFE_componentWillReceiveProps!="function"&&typeof S.componentWillReceiveProps!="function"||(q||Pe!==j)&&go(o,S,f,j),Ss=!1;var Re=o.memoizedState;S.state=Re,As(o,f,S,x),al(),Pe=o.memoizedState,q||Re!==Pe||Ss?(typeof qe=="function"&&(Uc(o,c,qe,f),Pe=o.memoizedState),(he=Ss||ju(o,c,he,f,Re,Pe,j))?($e||typeof S.UNSAFE_componentWillMount!="function"&&typeof S.componentWillMount!="function"||(typeof S.componentWillMount=="function"&&S.componentWillMount(),typeof S.UNSAFE_componentWillMount=="function"&&S.UNSAFE_componentWillMount()),typeof S.componentDidMount=="function"&&(o.flags|=4194308)):(typeof S.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=f,o.memoizedState=Pe),S.props=f,S.state=Pe,S.context=j,f=he):(typeof S.componentDidMount=="function"&&(o.flags|=4194308),f=!1)}else{S=o.stateNode,bi(i,o),j=o.memoizedProps,$e=Xn(c,j),S.props=$e,qe=o.pendingProps,Re=S.context,Pe=c.contextType,he=Nt,typeof Pe=="object"&&Pe!==null&&(he=Xr(Pe)),q=c.getDerivedStateFromProps,(Pe=typeof q=="function"||typeof S.getSnapshotBeforeUpdate=="function")||typeof S.UNSAFE_componentWillReceiveProps!="function"&&typeof S.componentWillReceiveProps!="function"||(j!==qe||Re!==he)&&go(o,S,f,he),Ss=!1,Re=o.memoizedState,S.state=Re,As(o,f,S,x),al();var Be=o.memoizedState;j!==qe||Re!==Be||Ss||i!==null&&i.dependencies!==null&&Io(i.dependencies)?(typeof q=="function"&&(Uc(o,c,q,f),Be=o.memoizedState),($e=Ss||ju(o,c,$e,f,Re,Be,he)||i!==null&&i.dependencies!==null&&Io(i.dependencies))?(Pe||typeof S.UNSAFE_componentWillUpdate!="function"&&typeof S.componentWillUpdate!="function"||(typeof S.componentWillUpdate=="function"&&S.componentWillUpdate(f,Be,he),typeof S.UNSAFE_componentWillUpdate=="function"&&S.UNSAFE_componentWillUpdate(f,Be,he)),typeof S.componentDidUpdate=="function"&&(o.flags|=4),typeof S.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof S.componentDidUpdate!="function"||j===i.memoizedProps&&Re===i.memoizedState||(o.flags|=4),typeof S.getSnapshotBeforeUpdate!="function"||j===i.memoizedProps&&Re===i.memoizedState||(o.flags|=1024),o.memoizedProps=f,o.memoizedState=Be),S.props=f,S.state=Be,S.context=he,f=$e):(typeof S.componentDidUpdate!="function"||j===i.memoizedProps&&Re===i.memoizedState||(o.flags|=4),typeof S.getSnapshotBeforeUpdate!="function"||j===i.memoizedProps&&Re===i.memoizedState||(o.flags|=1024),f=!1)}return S=f,Bh(i,o),f=(o.flags&128)!==0,S||f?(S=o.stateNode,c=f&&typeof c.getDerivedStateFromError!="function"?null:S.render(),o.flags|=1,i!==null&&f?(o.child=Cs(o,i.child,null,x),o.child=Cs(o,null,c,x)):pa(i,o,c,x),o.memoizedState=S.state,i=o.child):i=Zo(i,o,x),i}function Zf(i,o,c,f){return ms(),o.flags|=256,pa(i,o,c,f),o.child}var Pp={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Rd(i){return{baseLanes:i,cachePool:st()}}function Bd(i,o,c){return i=i!==null?i.childLanes&~c:0,o&&(i|=Qn),i}function Hf(i,o,c){var f=o.pendingProps,x=!1,S=(o.flags&128)!==0,j;if((j=S)||(j=i!==null&&i.memoizedState===null?!1:(Ki.current&2)!==0),j&&(x=!0,o.flags&=-129),j=(o.flags&32)!==0,o.flags&=-33,i===null){if(ri){if(x?Yr(o):Qa(),(i=Si)?(i=ym(i,Aa),i=i!==null&&i.data!=="&"?i:null,i!==null&&(o.memoizedState={dehydrated:i,treeContext:jn!==null?{id:Vn,overflow:Ma}:null,retryLane:536870912,hydrationErrors:null},c=kc(i),c.return=o,o.child=c,jr=o,Si=null)):i=null,i===null)throw Ra(o);return lc(i)?o.lanes=32:o.lanes=536870912,null}var q=f.children;return f=f.fallback,x?(Qa(),x=o.mode,q=Vh({mode:"hidden",children:q},x),f=ds(f,x,c,null),q.return=o,f.return=o,q.sibling=f,o.child=q,f=o.child,f.memoizedState=Rd(c),f.childLanes=Bd(i,j,c),o.memoizedState=Pp,Kl(null,f)):(Yr(o),jh(o,q))}var he=i.memoizedState;if(he!==null&&(q=he.dehydrated,q!==null)){if(S)o.flags&256?(Yr(o),o.flags&=-257,o=$h(i,o,c)):o.memoizedState!==null?(Qa(),o.child=i.child,o.flags|=128,o=null):(Qa(),q=f.fallback,x=o.mode,f=Vh({mode:"visible",children:f.children},x),q=ds(q,x,c,null),q.flags|=2,f.return=o,q.return=o,f.sibling=q,o.child=f,Cs(o,i.child,null,c),f=o.child,f.memoizedState=Rd(c),f.childLanes=Bd(i,j,c),o.memoizedState=Pp,o=Kl(null,f));else if(Yr(o),lc(q)){if(j=q.nextSibling&&q.nextSibling.dataset,j)var Pe=j.dgst;j=Pe,f=Error(P(419)),f.stack="",f.digest=j,_s({value:f,source:null,stack:null}),o=$h(i,o,c)}else if($r||Xa(i,o,c,!1),j=(c&i.childLanes)!==0,$r||j){if(j=Hi,j!==null&&(f=qi(j,c),f!==0&&f!==he.retryLane))throw he.retryLane=f,mn(i,f),ja(j,i,f),Ih;mf(q)||Gd(),o=$h(i,o,c)}else mf(q)?(o.flags|=192,o.child=i.child,o=null):(i=he.treeContext,Si=wn(q.nextSibling),jr=o,ri=!0,so=null,Aa=!1,i!==null&&Au(o,i),o=jh(o,f.children),o.flags|=4096);return o}return x?(Qa(),q=f.fallback,x=o.mode,he=i.child,Pe=he.sibling,f=Ga(he,{mode:"hidden",children:f.children}),f.subtreeFlags=he.subtreeFlags&65011712,Pe!==null?q=Ga(Pe,q):(q=ds(q,x,c,null),q.flags|=2),q.return=o,f.return=o,f.sibling=q,o.child=f,Kl(null,f),f=o.child,q=i.child.memoizedState,q===null?q=Rd(c):(x=q.cachePool,x!==null?(he=Ni._currentValue,x=x.parent!==he?{parent:he,pool:he}:x):x=st(),q={baseLanes:q.baseLanes|c,cachePool:x}),f.memoizedState=q,f.childLanes=Bd(i,j,c),o.memoizedState=Pp,Kl(i.child,f)):(Yr(o),c=i.child,i=c.sibling,c=Ga(c,{mode:"visible",children:f.children}),c.return=o,c.sibling=null,i!==null&&(j=o.deletions,j===null?(o.deletions=[i],o.flags|=16):j.push(i)),o.child=c,o.memoizedState=null,c)}function jh(i,o){return o=Vh({mode:"visible",children:o},i.mode),o.return=i,i.child=o}function Vh(i,o){return i=Ha(22,i,null,o),i.lanes=0,i}function $h(i,o,c){return Cs(o,i.child,null,c),i=jh(o,o.pendingProps.children),i.flags|=2,o.memoizedState=null,i}function Vu(i,o,c){i.lanes|=o;var f=i.alternate;f!==null&&(f.lanes|=o),zu(i.return,o,c)}function za(i,o,c,f,x,S){var j=i.memoizedState;j===null?i.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:f,tail:c,tailMode:x,treeForkCount:S}:(j.isBackwards=o,j.rendering=null,j.renderingStartTime=0,j.last=f,j.tail=c,j.tailMode=x,j.treeForkCount=S)}function kp(i,o,c){var f=o.pendingProps,x=f.revealOrder,S=f.tail;f=f.children;var j=Ki.current,q=(j&2)!==0;if(q?(j=j&1|2,o.flags|=128):j&=1,at(Ki,j),pa(i,o,f,c),f=ri?ko:0,!q&&i!==null&&(i.flags&128)!==0)e:for(i=o.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&Vu(i,c,o);else if(i.tag===19)Vu(i,c,o);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===o)break e;for(;i.sibling===null;){if(i.return===null||i.return===o)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}switch(x){case"forwards":for(c=o.child,x=null;c!==null;)i=c.alternate,i!==null&&Zi(i)===null&&(x=c),c=c.sibling;c=x,c===null?(x=o.child,o.child=null):(x=c.sibling,c.sibling=null),za(o,!1,x,c,S,f);break;case"backwards":case"unstable_legacy-backwards":for(c=null,x=o.child,o.child=null;x!==null;){if(i=x.alternate,i!==null&&Zi(i)===null){o.child=x;break}i=x.sibling,x.sibling=c,c=x,x=i}za(o,!0,c,null,S,f);break;case"together":za(o,!1,null,null,void 0,f);break;default:o.memoizedState=null}return o.child}function Zo(i,o,c){if(i!==null&&(o.dependencies=i.dependencies),rc|=o.lanes,(c&o.childLanes)===0)if(i!==null){if(Xa(i,o,c,!1),(c&o.childLanes)===0)return null}else return null;if(i!==null&&o.child!==i.child)throw Error(P(153));if(o.child!==null){for(i=o.child,c=Ga(i,i.pendingProps),o.child=c,c.return=o;i.sibling!==null;)i=i.sibling,c=c.sibling=Ga(i,i.pendingProps),c.return=o;c.sibling=null}return o.child}function Dp(i,o){return(i.lanes&o)!==0?!0:(i=i.dependencies,!!(i!==null&&Io(i)))}function Gf(i,o,c){switch(o.tag){case 3:Oi(o,o.stateNode.containerInfo),co(o,Ni,i.memoizedState.cache),ms();break;case 27:case 5:bo(o);break;case 4:Oi(o,o.stateNode.containerInfo);break;case 10:co(o,o.type,o.memoizedProps.value);break;case 31:if(o.memoizedState!==null)return o.flags|=128,Iu(o),null;break;case 13:var f=o.memoizedState;if(f!==null)return f.dehydrated!==null?(Yr(o),o.flags|=128,null):(c&o.child.childLanes)!==0?Hf(i,o,c):(Yr(o),i=Zo(i,o,c),i!==null?i.sibling:null);Yr(o);break;case 19:var x=(i.flags&128)!==0;if(f=(c&o.childLanes)!==0,f||(Xa(i,o,c,!1),f=(c&o.childLanes)!==0),x){if(f)return kp(i,o,c);o.flags|=128}if(x=o.memoizedState,x!==null&&(x.rendering=null,x.tail=null,x.lastEffect=null),at(Ki,Ki.current),f)break;return null;case 22:return o.lanes=0,Rh(i,o,c,o.pendingProps);case 24:co(o,Ni,i.memoizedState.cache)}return Zo(i,o,c)}function qf(i,o,c){if(i!==null)if(i.memoizedProps!==o.pendingProps)$r=!0;else{if(!Dp(i,c)&&(o.flags&128)===0)return $r=!1,Gf(i,o,c);$r=(i.flags&131072)!==0}else $r=!1,ri&&(o.flags&1048576)!==0&&Th(o,ko,o.index);switch(o.lanes=0,o.tag){case 16:e:{var f=o.pendingProps;if(i=$t(o.elementType),o.type=i,typeof i=="function")Tu(i)?(f=Xn(i,f),o.tag=1,o=zp(null,o,i,f,c)):(o.tag=0,o=Oh(null,o,i,f,c));else{if(i!=null){var x=i.$$typeof;if(x===na){o.tag=11,o=Zc(null,o,i,f,c);break e}else if(x===ii){o.tag=14,o=Ff(null,o,i,f,c);break e}}throw o=Pa(i)||i,Error(P(306,o,""))}}return o;case 0:return Oh(i,o,o.type,o.pendingProps,c);case 1:return f=o.type,x=Xn(f,o.pendingProps),zp(i,o,f,x,c);case 3:e:{if(Oi(o,o.stateNode.containerInfo),i===null)throw Error(P(387));f=o.pendingProps;var S=o.memoizedState;x=S.element,bi(i,o),As(o,f,null,c);var j=o.memoizedState;if(f=j.cache,co(o,Ni,f),f!==S.cache&&Ic(o,[Ni],c,!0),al(),f=j.element,S.isDehydrated)if(S={element:f,isDehydrated:!1,cache:j.cache},o.updateQueue.baseState=S,o.memoizedState=S,o.flags&256){o=Zf(i,o,f,c);break e}else if(f!==x){x=Sa(Error(P(424)),o),_s(x),o=Zf(i,o,f,c);break e}else{switch(i=o.stateNode.containerInfo,i.nodeType){case 9:i=i.body;break;default:i=i.nodeName==="HTML"?i.ownerDocument.body:i}for(Si=wn(i.firstChild),jr=o,ri=!0,so=null,Aa=!0,c=zh(o,null,f,c),o.child=c;c;)c.flags=c.flags&-3|4096,c=c.sibling}else{if(ms(),f===x){o=Zo(i,o,c);break e}pa(i,o,f,c)}o=o.child}return o;case 26:return Bh(i,o),i===null?(c=Sm(o.type,null,o.pendingProps,null))?o.memoizedState=c:ri||(c=o.type,i=o.pendingProps,f=ap(Et.current).createElement(c),f[yi]=o,f[Xe]=i,Nr(f,c,i),pr(f),o.stateNode=f):o.memoizedState=Sm(o.type,i.memoizedProps,o.pendingProps,i.memoizedState),null;case 27:return bo(o),i===null&&ri&&(f=o.stateNode=bm(o.type,o.pendingProps,Et.current),jr=o,Aa=!0,x=Si,Xo(o.type)?(lp=x,Si=wn(f.firstChild)):Si=x),pa(i,o,o.pendingProps.children,c),Bh(i,o),i===null&&(o.flags|=4194304),o.child;case 5:return i===null&&ri&&((x=f=Si)&&(f=sp(f,o.type,o.pendingProps,Aa),f!==null?(o.stateNode=f,jr=o,Si=wn(f.firstChild),Aa=!1,x=!0):x=!1),x||Ra(o)),bo(o),x=o.type,S=o.pendingProps,j=i!==null?i.memoizedProps:null,f=S.children,np(x,S)?f=null:j!==null&&np(x,j)&&(o.flags|=32),o.memoizedState!==null&&(x=Oo(i,o,Ou,null,null,c),Le._currentValue=x),Bh(i,o),pa(i,o,f,c),o.child;case 6:return i===null&&ri&&((i=c=Si)&&(c=Sg(c,o.pendingProps,Aa),c!==null?(o.stateNode=c,jr=o,Si=null,i=!0):i=!1),i||Ra(o)),null;case 13:return Hf(i,o,c);case 4:return Oi(o,o.stateNode.containerInfo),f=o.pendingProps,i===null?o.child=Cs(o,null,f,c):pa(i,o,f,c),o.child;case 11:return Zc(i,o,o.type,o.pendingProps,c);case 7:return pa(i,o,o.pendingProps,c),o.child;case 8:return pa(i,o,o.pendingProps.children,c),o.child;case 12:return pa(i,o,o.pendingProps.children,c),o.child;case 10:return f=o.pendingProps,co(o,o.type,f.value),pa(i,o,f.children,c),o.child;case 9:return x=o.type._context,f=o.pendingProps.children,ys(o),x=Xr(x),f=f(x),o.flags|=1,pa(i,o,f,c),o.child;case 14:return Ff(i,o,o.type,o.pendingProps,c);case 15:return Hc(i,o,o.type,o.pendingProps,c);case 19:return kp(i,o,c);case 31:return ug(i,o,c);case 22:return Rh(i,o,c,o.pendingProps);case 24:return ys(o),f=Xr(Ni),i===null?(x=Fn(),x===null&&(x=Hi,S=ca(),x.pooledCache=S,S.refCount++,S!==null&&(x.pooledCacheLanes|=c),x=S),o.memoizedState={parent:f,cache:x},Nn(o),co(o,Ni,x)):((i.lanes&c)!==0&&(bi(i,o),As(o,null,null,c),al()),x=i.memoizedState,S=o.memoizedState,x.parent!==f?(x={parent:f,cache:f},o.memoizedState=x,o.lanes===0&&(o.memoizedState=o.updateQueue.baseState=x),co(o,Ni,f)):(f=S.cache,co(o,Ni,f),f!==x.cache&&Ic(o,[Ni],c,!0))),pa(i,o,o.pendingProps.children,c),o.child;case 29:throw o.pendingProps}throw Error(P(156,o.tag))}function pl(i){i.flags|=4}function Od(i,o,c,f,x){if((o=(i.mode&32)!==0)&&(o=!1),o){if(i.flags|=16777216,(x&335544128)===x)if(i.stateNode.complete)i.flags|=8192;else if(am())i.flags|=8192;else throw vn=xs,Ro}else i.flags&=-16777217}function Xf(i,o){if(o.type!=="stylesheet"||(o.state.loading&4)!==0)i.flags&=-16777217;else if(i.flags|=16777216,!N(o))if(am())i.flags|=8192;else throw vn=xs,Ro}function $u(i,o){o!==null&&(i.flags|=4),i.flags&16384&&(o=i.tag!==22?Yt():536870912,i.lanes|=o,Kc|=o)}function Fu(i,o){if(!ri)switch(i.tailMode){case"hidden":o=i.tail;for(var c=null;o!==null;)o.alternate!==null&&(c=o),o=o.sibling;c===null?i.tail=null:c.sibling=null;break;case"collapsed":c=i.tail;for(var f=null;c!==null;)c.alternate!==null&&(f=c),c=c.sibling;f===null?o||i.tail===null?i.tail=null:i.tail.sibling=null:f.sibling=null}}function ir(i){var o=i.alternate!==null&&i.alternate.child===i.child,c=0,f=0;if(o)for(var x=i.child;x!==null;)c|=x.lanes|x.childLanes,f|=x.subtreeFlags&65011712,f|=x.flags&65011712,x.return=i,x=x.sibling;else for(x=i.child;x!==null;)c|=x.lanes|x.childLanes,f|=x.subtreeFlags,f|=x.flags,x.return=i,x=x.sibling;return i.subtreeFlags|=f,i.childLanes=c,o}function hg(i,o,c){var f=o.pendingProps;switch(Lc(o),o.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ir(o),null;case 1:return ir(o),null;case 3:return c=o.stateNode,f=null,i!==null&&(f=i.memoizedState.cache),o.memoizedState.cache!==f&&(o.flags|=2048),$n(Ni),mi(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(i===null||i.child===null)&&(Lo(o)?pl(o):i===null||i.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,gs())),ir(o),null;case 26:var x=o.type,S=o.memoizedState;return i===null?(pl(o),S!==null?(ir(o),Xf(o,S)):(ir(o),Od(o,x,null,f,c))):S?S!==i.memoizedState?(pl(o),ir(o),Xf(o,S)):(ir(o),o.flags&=-16777217):(i=i.memoizedProps,i!==f&&pl(o),ir(o),Od(o,x,i,f,c)),null;case 27:if(es(o),c=Et.current,x=o.type,i!==null&&o.stateNode!=null)i.memoizedProps!==f&&pl(o);else{if(!f){if(o.stateNode===null)throw Error(P(166));return ir(o),null}i=ft.current,Lo(o)?qa(o):(i=bm(x,f,c),o.stateNode=i,pl(o))}return ir(o),null;case 5:if(es(o),x=o.type,i!==null&&o.stateNode!=null)i.memoizedProps!==f&&pl(o);else{if(!f){if(o.stateNode===null)throw Error(P(166));return ir(o),null}if(S=ft.current,Lo(o))qa(o);else{var j=ap(Et.current);switch(S){case 1:S=j.createElementNS("http://www.w3.org/2000/svg",x);break;case 2:S=j.createElementNS("http://www.w3.org/1998/Math/MathML",x);break;default:switch(x){case"svg":S=j.createElementNS("http://www.w3.org/2000/svg",x);break;case"math":S=j.createElementNS("http://www.w3.org/1998/Math/MathML",x);break;case"script":S=j.createElement("div"),S.innerHTML="<script><\/script>",S=S.removeChild(S.firstChild);break;case"select":S=typeof f.is=="string"?j.createElement("select",{is:f.is}):j.createElement("select"),f.multiple?S.multiple=!0:f.size&&(S.size=f.size);break;default:S=typeof f.is=="string"?j.createElement(x,{is:f.is}):j.createElement(x)}}S[yi]=o,S[Xe]=f;e:for(j=o.child;j!==null;){if(j.tag===5||j.tag===6)S.appendChild(j.stateNode);else if(j.tag!==4&&j.tag!==27&&j.child!==null){j.child.return=j,j=j.child;continue}if(j===o)break e;for(;j.sibling===null;){if(j.return===null||j.return===o)break e;j=j.return}j.sibling.return=j.return,j=j.sibling}o.stateNode=S;e:switch(Nr(S,x,f),x){case"button":case"input":case"select":case"textarea":f=!!f.autoFocus;break e;case"img":f=!0;break e;default:f=!1}f&&pl(o)}}return ir(o),Od(o,o.type,i===null?null:i.memoizedProps,o.pendingProps,c),null;case 6:if(i&&o.stateNode!=null)i.memoizedProps!==f&&pl(o);else{if(typeof f!="string"&&o.stateNode===null)throw Error(P(166));if(i=Et.current,Lo(o)){if(i=o.stateNode,c=o.memoizedProps,f=null,x=jr,x!==null)switch(x.tag){case 27:case 5:f=x.memoizedProps}i[yi]=o,i=!!(i.nodeValue===c||f!==null&&f.suppressHydrationWarning===!0||uf(i.nodeValue,c)),i||Ra(o,!0)}else i=ap(i).createTextNode(f),i[yi]=o,o.stateNode=i}return ir(o),null;case 31:if(c=o.memoizedState,i===null||i.memoizedState!==null){if(f=Lo(o),c!==null){if(i===null){if(!f)throw Error(P(318));if(i=o.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(P(557));i[yi]=o}else ms(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;ir(o),i=!1}else c=gs(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=c),i=!0;if(!i)return o.flags&256?(Ka(o),o):(Ka(o),null);if((o.flags&128)!==0)throw Error(P(558))}return ir(o),null;case 13:if(f=o.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(x=Lo(o),f!==null&&f.dehydrated!==null){if(i===null){if(!x)throw Error(P(318));if(x=o.memoizedState,x=x!==null?x.dehydrated:null,!x)throw Error(P(317));x[yi]=o}else ms(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;ir(o),x=!1}else x=gs(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=x),x=!0;if(!x)return o.flags&256?(Ka(o),o):(Ka(o),null)}return Ka(o),(o.flags&128)!==0?(o.lanes=c,o):(c=f!==null,i=i!==null&&i.memoizedState!==null,c&&(f=o.child,x=null,f.alternate!==null&&f.alternate.memoizedState!==null&&f.alternate.memoizedState.cachePool!==null&&(x=f.alternate.memoizedState.cachePool.pool),S=null,f.memoizedState!==null&&f.memoizedState.cachePool!==null&&(S=f.memoizedState.cachePool.pool),S!==x&&(f.flags|=2048)),c!==i&&c&&(o.child.flags|=8192),$u(o,o.updateQueue),ir(o),null);case 4:return mi(),i===null&&Jd(o.stateNode.containerInfo),ir(o),null;case 10:return $n(o.type),ir(o),null;case 19:if(Ue(Ki),f=o.memoizedState,f===null)return ir(o),null;if(x=(o.flags&128)!==0,S=f.rendering,S===null)if(x)Fu(f,!1);else{if(kr!==0||i!==null&&(i.flags&128)!==0)for(i=o.child;i!==null;){if(S=Zi(i),S!==null){for(o.flags|=128,Fu(f,!1),i=S.updateQueue,o.updateQueue=i,$u(o,i),o.subtreeFlags=0,i=c,c=o.child;c!==null;)Sh(c,i),c=c.sibling;return at(Ki,Ki.current&1|2),ri&&Do(o,f.treeForkCount),o.child}i=i.sibling}f.tail!==null&&Zr()>Jc&&(o.flags|=128,x=!0,Fu(f,!1),o.lanes=4194304)}else{if(!x)if(i=Zi(S),i!==null){if(o.flags|=128,x=!0,i=i.updateQueue,o.updateQueue=i,$u(o,i),Fu(f,!0),f.tail===null&&f.tailMode==="hidden"&&!S.alternate&&!ri)return ir(o),null}else 2*Zr()-f.renderingStartTime>Jc&&c!==536870912&&(o.flags|=128,x=!0,Fu(f,!1),o.lanes=4194304);f.isBackwards?(S.sibling=o.child,o.child=S):(i=f.last,i!==null?i.sibling=S:o.child=S,f.last=S)}return f.tail!==null?(i=f.tail,f.rendering=i,f.tail=i.sibling,f.renderingStartTime=Zr(),i.sibling=null,c=Ki.current,at(Ki,x?c&1|2:c&1),ri&&Do(o,f.treeForkCount),i):(ir(o),null);case 22:case 23:return Ka(o),sl(),f=o.memoizedState!==null,i!==null?i.memoizedState!==null!==f&&(o.flags|=8192):f&&(o.flags|=8192),f?(c&536870912)!==0&&(o.flags&128)===0&&(ir(o),o.subtreeFlags&6&&(o.flags|=8192)):ir(o),c=o.updateQueue,c!==null&&$u(o,c.retryQueue),c=null,i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(c=i.memoizedState.cachePool.pool),f=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(f=o.memoizedState.cachePool.pool),f!==c&&(o.flags|=2048),i!==null&&Ue(bs),null;case 24:return c=null,i!==null&&(c=i.memoizedState.cache),o.memoizedState.cache!==c&&(o.flags|=2048),$n(Ni),ir(o),null;case 25:return null;case 30:return null}throw Error(P(156,o.tag))}function dg(i,o){switch(Lc(o),o.tag){case 1:return i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 3:return $n(Ni),mi(),i=o.flags,(i&65536)!==0&&(i&128)===0?(o.flags=i&-65537|128,o):null;case 26:case 27:case 5:return es(o),null;case 31:if(o.memoizedState!==null){if(Ka(o),o.alternate===null)throw Error(P(340));ms()}return i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 13:if(Ka(o),i=o.memoizedState,i!==null&&i.dehydrated!==null){if(o.alternate===null)throw Error(P(340));ms()}return i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 19:return Ue(Ki),null;case 4:return mi(),null;case 10:return $n(o.type),null;case 22:case 23:return Ka(o),sl(),i!==null&&Ue(bs),i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 24:return $n(Ni),null;case 25:return null;default:return null}}function Yf(i,o){switch(Lc(o),o.tag){case 3:$n(Ni),mi();break;case 26:case 27:case 5:es(o);break;case 4:mi();break;case 31:o.memoizedState!==null&&Ka(o);break;case 13:Ka(o);break;case 19:Ue(Ki);break;case 10:$n(o.type);break;case 22:case 23:Ka(o),sl(),i!==null&&Ue(bs);break;case 24:$n(Ni)}}function Wl(i,o){try{var c=o.updateQueue,f=c!==null?c.lastEffect:null;if(f!==null){var x=f.next;c=x;do{if((c.tag&i)===i){f=void 0;var S=c.create,j=c.inst;f=S(),j.destroy=f}c=c.next}while(c!==x)}}catch(q){zi(o,o.return,q)}}function zs(i,o,c){try{var f=o.updateQueue,x=f!==null?f.lastEffect:null;if(x!==null){var S=x.next;f=S;do{if((f.tag&i)===i){var j=f.inst,q=j.destroy;if(q!==void 0){j.destroy=void 0,x=o;var he=c,Pe=q;try{Pe()}catch($e){zi(x,he,$e)}}}f=f.next}while(f!==S)}}catch($e){zi(o,o.return,$e)}}function Lp(i){var o=i.updateQueue;if(o!==null){var c=i.stateNode;try{nl(o,c)}catch(f){zi(i,i.return,f)}}}function Jl(i,o,c){c.props=Xn(i.type,i.memoizedProps),c.state=i.memoizedState;try{c.componentWillUnmount()}catch(f){zi(i,o,f)}}function fl(i,o){try{var c=i.ref;if(c!==null){switch(i.tag){case 26:case 27:case 5:var f=i.stateNode;break;case 30:f=i.stateNode;break;default:f=i.stateNode}typeof c=="function"?i.refCleanup=c(f):c.current=f}}catch(x){zi(i,o,x)}}function Ps(i,o){var c=i.ref,f=i.refCleanup;if(c!==null)if(typeof f=="function")try{f()}catch(x){zi(i,o,x)}finally{i.refCleanup=null,i=i.alternate,i!=null&&(i.refCleanup=null)}else if(typeof c=="function")try{c(null)}catch(x){zi(i,o,x)}else c.current=null}function Qf(i){var o=i.type,c=i.memoizedProps,f=i.stateNode;try{e:switch(o){case"button":case"input":case"select":case"textarea":c.autoFocus&&f.focus();break e;case"img":c.src?f.src=c.src:c.srcSet&&(f.srcset=c.srcSet)}}catch(x){zi(i,i.return,x)}}function Ip(i,o,c){try{var f=i.stateNode;iu(f,i.type,c,o),f[Xe]=o}catch(x){zi(i,i.return,x)}}function Kf(i){return i.tag===5||i.tag===3||i.tag===26||i.tag===27&&Xo(i.type)||i.tag===4}function Rp(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||Kf(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.tag===27&&Xo(i.type)||i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function Bp(i,o,c){var f=i.tag;if(f===5||f===6)i=i.stateNode,o?(c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c).insertBefore(i,o):(o=c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c,o.appendChild(i),c=c._reactRootContainer,c!=null||o.onclick!==null||(o.onclick=dn));else if(f!==4&&(f===27&&Xo(i.type)&&(c=i.stateNode,o=null),i=i.child,i!==null))for(Bp(i,o,c),i=i.sibling;i!==null;)Bp(i,o,c),i=i.sibling}function jd(i,o,c){var f=i.tag;if(f===5||f===6)i=i.stateNode,o?c.insertBefore(i,o):c.appendChild(i);else if(f!==4&&(f===27&&Xo(i.type)&&(c=i.stateNode),i=i.child,i!==null))for(jd(i,o,c),i=i.sibling;i!==null;)jd(i,o,c),i=i.sibling}function Vd(i){var o=i.stateNode,c=i.memoizedProps;try{for(var f=i.type,x=o.attributes;x.length;)o.removeAttributeNode(x[0]);Nr(o,f,c),o[yi]=i,o[Xe]=c}catch(S){zi(i,i.return,S)}}var ml=!1,Fr=!1,Gc=!1,Wf=typeof WeakSet=="function"?WeakSet:Set,ai=null;function Nu(i,o){if(i=i.containerInfo,ip=bt,i=xu(i),wu(i)){if("selectionStart"in i)var c={start:i.selectionStart,end:i.selectionEnd};else e:{c=(c=i.ownerDocument)&&c.defaultView||window;var f=c.getSelection&&c.getSelection();if(f&&f.rangeCount!==0){c=f.anchorNode;var x=f.anchorOffset,S=f.focusNode;f=f.focusOffset;try{c.nodeType,S.nodeType}catch{c=null;break e}var j=0,q=-1,he=-1,Pe=0,$e=0,qe=i,Re=null;t:for(;;){for(var Be;qe!==c||x!==0&&qe.nodeType!==3||(q=j+x),qe!==S||f!==0&&qe.nodeType!==3||(he=j+f),qe.nodeType===3&&(j+=qe.nodeValue.length),(Be=qe.firstChild)!==null;)Re=qe,qe=Be;for(;;){if(qe===i)break t;if(Re===c&&++Pe===x&&(q=j),Re===S&&++$e===f&&(he=j),(Be=qe.nextSibling)!==null)break;qe=Re,Re=qe.parentNode}qe=Be}c=q===-1||he===-1?null:{start:q,end:he}}else c=null}c=c||{start:0,end:0}}else c=null;for(rp={focusedElem:i,selectionRange:c},bt=!1,ai=o;ai!==null;)if(o=ai,i=o.child,(o.subtreeFlags&1028)!==0&&i!==null)i.return=o,ai=i;else for(;ai!==null;){switch(o=ai,S=o.alternate,i=o.flags,o.tag){case 0:if((i&4)!==0&&(i=o.updateQueue,i=i!==null?i.events:null,i!==null))for(c=0;c<i.length;c++)x=i[c],x.ref.impl=x.nextImpl;break;case 11:case 15:break;case 1:if((i&1024)!==0&&S!==null){i=void 0,c=o,x=S.memoizedProps,S=S.memoizedState,f=c.stateNode;try{var _t=Xn(c.type,x);i=f.getSnapshotBeforeUpdate(_t,S),f.__reactInternalSnapshotBeforeUpdate=i}catch(Rt){zi(c,c.return,Rt)}}break;case 3:if((i&1024)!==0){if(i=o.stateNode.containerInfo,c=i.nodeType,c===9)eh(i);else if(c===1)switch(i.nodeName){case"HEAD":case"HTML":case"BODY":eh(i);break;default:i.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((i&1024)!==0)throw Error(P(163))}if(i=o.sibling,i!==null){i.return=o.return,ai=i;break}ai=o.return}}function Op(i,o,c){var f=c.flags;switch(c.tag){case 0:case 11:case 15:gl(i,c),f&4&&Wl(5,c);break;case 1:if(gl(i,c),f&4)if(i=c.stateNode,o===null)try{i.componentDidMount()}catch(j){zi(c,c.return,j)}else{var x=Xn(c.type,o.memoizedProps);o=o.memoizedState;try{i.componentDidUpdate(x,o,i.__reactInternalSnapshotBeforeUpdate)}catch(j){zi(c,c.return,j)}}f&64&&Lp(c),f&512&&fl(c,c.return);break;case 3:if(gl(i,c),f&64&&(i=c.updateQueue,i!==null)){if(o=null,c.child!==null)switch(c.child.tag){case 27:case 5:o=c.child.stateNode;break;case 1:o=c.child.stateNode}try{nl(i,o)}catch(j){zi(c,c.return,j)}}break;case 27:o===null&&f&4&&Vd(c);case 26:case 5:gl(i,c),o===null&&f&4&&Qf(c),f&512&&fl(c,c.return);break;case 12:gl(i,c);break;case 31:gl(i,c),f&4&&Uu(i,c);break;case 13:gl(i,c),f&4&&$d(i,c),f&64&&(i=c.memoizedState,i!==null&&(i=i.dehydrated,i!==null&&(c=_g.bind(null,c),ma(i,c))));break;case 22:if(f=c.memoizedState!==null||ml,!f){o=o!==null&&o.memoizedState!==null||Fr,x=ml;var S=Fr;ml=f,(Fr=o)&&!S?Yn(i,c,(c.subtreeFlags&8772)!==0):gl(i,c),ml=x,Fr=S}break;case 30:break;default:gl(i,c)}}function Fh(i){var o=i.alternate;o!==null&&(i.alternate=null,Fh(o)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(o=i.stateNode,o!==null&&So(o)),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}var Ji=null,fa=!1;function ks(i,o,c){for(c=c.child;c!==null;)jp(i,o,c),c=c.sibling}function jp(i,o,c){if(re&&typeof re.onCommitFiberUnmount=="function")try{re.onCommitFiberUnmount(Y,c)}catch{}switch(c.tag){case 26:Fr||Ps(c,o),ks(i,o,c),c.memoizedState?c.memoizedState.count--:c.stateNode&&(c=c.stateNode,c.parentNode.removeChild(c));break;case 27:Fr||Ps(c,o);var f=Ji,x=fa;Xo(c.type)&&(Ji=c.stateNode,fa=!1),ks(i,o,c),th(c.stateNode),Ji=f,fa=x;break;case 5:Fr||Ps(c,o);case 6:if(f=Ji,x=fa,Ji=null,ks(i,o,c),Ji=f,fa=x,Ji!==null)if(fa)try{(Ji.nodeType===9?Ji.body:Ji.nodeName==="HTML"?Ji.ownerDocument.body:Ji).removeChild(c.stateNode)}catch(S){zi(c,o,S)}else try{Ji.removeChild(c.stateNode)}catch(S){zi(c,o,S)}break;case 18:Ji!==null&&(fa?(i=Ji,ff(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,c.stateNode),$a(i)):ff(Ji,c.stateNode));break;case 4:f=Ji,x=fa,Ji=c.stateNode.containerInfo,fa=!0,ks(i,o,c),Ji=f,fa=x;break;case 0:case 11:case 14:case 15:zs(2,c,o),Fr||zs(4,c,o),ks(i,o,c);break;case 1:Fr||(Ps(c,o),f=c.stateNode,typeof f.componentWillUnmount=="function"&&Jl(c,o,f)),ks(i,o,c);break;case 21:ks(i,o,c);break;case 22:Fr=(f=Fr)||c.memoizedState!==null,ks(i,o,c),Fr=f;break;default:ks(i,o,c)}}function Uu(i,o){if(o.memoizedState===null&&(i=o.alternate,i!==null&&(i=i.memoizedState,i!==null))){i=i.dehydrated;try{$a(i)}catch(c){zi(o,o.return,c)}}}function $d(i,o){if(o.memoizedState===null&&(i=o.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null))))try{$a(i)}catch(c){zi(o,o.return,c)}}function Zu(i){switch(i.tag){case 31:case 13:case 19:var o=i.stateNode;return o===null&&(o=i.stateNode=new Wf),o;case 22:return i=i.stateNode,o=i._retryCache,o===null&&(o=i._retryCache=new Wf),o;default:throw Error(P(435,i.tag))}}function qc(i,o){var c=Zu(i);o.forEach(function(f){if(!c.has(f)){c.add(f);var x=vg.bind(null,i,f);f.then(x,x)}})}function ta(i,o){var c=o.deletions;if(c!==null)for(var f=0;f<c.length;f++){var x=c[f],S=i,j=o,q=j;e:for(;q!==null;){switch(q.tag){case 27:if(Xo(q.type)){Ji=q.stateNode,fa=!1;break e}break;case 5:Ji=q.stateNode,fa=!1;break e;case 3:case 4:Ji=q.stateNode.containerInfo,fa=!0;break e}q=q.return}if(Ji===null)throw Error(P(160));jp(S,j,x),Ji=null,fa=!1,S=x.alternate,S!==null&&(S.return=null),x.return=null}if(o.subtreeFlags&13886)for(o=o.child;o!==null;)Jf(o,i),o=o.sibling}var Wa=null;function Jf(i,o){var c=i.alternate,f=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:ta(o,i),Ja(i),f&4&&(zs(3,i,i.return),Wl(3,i),zs(5,i,i.return));break;case 1:ta(o,i),Ja(i),f&512&&(Fr||c===null||Ps(c,c.return)),f&64&&ml&&(i=i.updateQueue,i!==null&&(f=i.callbacks,f!==null&&(c=i.shared.hiddenCallbacks,i.shared.hiddenCallbacks=c===null?f:c.concat(f))));break;case 26:var x=Wa;if(ta(o,i),Ja(i),f&512&&(Fr||c===null||Ps(c,c.return)),f&4){var S=c!==null?c.memoizedState:null;if(f=i.memoizedState,c===null)if(f===null)if(i.stateNode===null){e:{f=i.type,c=i.memoizedProps,x=x.ownerDocument||x;t:switch(f){case"title":S=x.getElementsByTagName("title")[0],(!S||S[Mt]||S[yi]||S.namespaceURI==="http://www.w3.org/2000/svg"||S.hasAttribute("itemprop"))&&(S=x.createElement(f),x.head.insertBefore(S,x.querySelector("head > title"))),Nr(S,f,c),S[yi]=i,pr(S),f=S;break e;case"link":var j=L("link","href",x).get(f+(c.href||""));if(j){for(var q=0;q<j.length;q++)if(S=j[q],S.getAttribute("href")===(c.href==null||c.href===""?null:c.href)&&S.getAttribute("rel")===(c.rel==null?null:c.rel)&&S.getAttribute("title")===(c.title==null?null:c.title)&&S.getAttribute("crossorigin")===(c.crossOrigin==null?null:c.crossOrigin)){j.splice(q,1);break t}}S=x.createElement(f),Nr(S,f,c),x.head.appendChild(S);break;case"meta":if(j=L("meta","content",x).get(f+(c.content||""))){for(q=0;q<j.length;q++)if(S=j[q],S.getAttribute("content")===(c.content==null?null:""+c.content)&&S.getAttribute("name")===(c.name==null?null:c.name)&&S.getAttribute("property")===(c.property==null?null:c.property)&&S.getAttribute("http-equiv")===(c.httpEquiv==null?null:c.httpEquiv)&&S.getAttribute("charset")===(c.charSet==null?null:c.charSet)){j.splice(q,1);break t}}S=x.createElement(f),Nr(S,f,c),x.head.appendChild(S);break;default:throw Error(P(468,f))}S[yi]=i,pr(S),f=S}i.stateNode=f}else V(x,i.type,i.stateNode);else i.stateNode=_(x,f,i.memoizedProps);else S!==f?(S===null?c.stateNode!==null&&(c=c.stateNode,c.parentNode.removeChild(c)):S.count--,f===null?V(x,i.type,i.stateNode):_(x,f,i.memoizedProps)):f===null&&i.stateNode!==null&&Ip(i,i.memoizedProps,c.memoizedProps)}break;case 27:ta(o,i),Ja(i),f&512&&(Fr||c===null||Ps(c,c.return)),c!==null&&f&4&&Ip(i,i.memoizedProps,c.memoizedProps);break;case 5:if(ta(o,i),Ja(i),f&512&&(Fr||c===null||Ps(c,c.return)),i.flags&32){x=i.stateNode;try{Ao(x,"")}catch(_t){zi(i,i.return,_t)}}f&4&&i.stateNode!=null&&(x=i.memoizedProps,Ip(i,x,c!==null?c.memoizedProps:x)),f&1024&&(Gc=!0);break;case 6:if(ta(o,i),Ja(i),f&4){if(i.stateNode===null)throw Error(P(162));f=i.memoizedProps,c=i.stateNode;try{c.nodeValue=f}catch(_t){zi(i,i.return,_t)}}break;case 3:if(E=null,x=Wa,Wa=ad(o.containerInfo),ta(o,i),Wa=x,Ja(i),f&4&&c!==null&&c.memoizedState.isDehydrated)try{$a(o.containerInfo)}catch(_t){zi(i,i.return,_t)}Gc&&(Gc=!1,ec(i));break;case 4:f=Wa,Wa=ad(i.stateNode.containerInfo),ta(o,i),Ja(i),Wa=f;break;case 12:ta(o,i),Ja(i);break;case 31:ta(o,i),Ja(i),f&4&&(f=i.updateQueue,f!==null&&(i.updateQueue=null,qc(i,f)));break;case 13:ta(o,i),Ja(i),i.child.flags&8192&&i.memoizedState!==null!=(c!==null&&c.memoizedState!==null)&&(Gh=Zr()),f&4&&(f=i.updateQueue,f!==null&&(i.updateQueue=null,qc(i,f)));break;case 22:x=i.memoizedState!==null;var he=c!==null&&c.memoizedState!==null,Pe=ml,$e=Fr;if(ml=Pe||x,Fr=$e||he,ta(o,i),Fr=$e,ml=Pe,Ja(i),f&8192)e:for(o=i.stateNode,o._visibility=x?o._visibility&-2:o._visibility|1,x&&(c===null||he||ml||Fr||tc(i)),c=null,o=i;;){if(o.tag===5||o.tag===26){if(c===null){he=c=o;try{if(S=he.stateNode,x)j=S.style,typeof j.setProperty=="function"?j.setProperty("display","none","important"):j.display="none";else{q=he.stateNode;var qe=he.memoizedProps.style,Re=qe!=null&&qe.hasOwnProperty("display")?qe.display:null;q.style.display=Re==null||typeof Re=="boolean"?"":(""+Re).trim()}}catch(_t){zi(he,he.return,_t)}}}else if(o.tag===6){if(c===null){he=o;try{he.stateNode.nodeValue=x?"":he.memoizedProps}catch(_t){zi(he,he.return,_t)}}}else if(o.tag===18){if(c===null){he=o;try{var Be=he.stateNode;x?rd(Be,!0):rd(he.stateNode,!1)}catch(_t){zi(he,he.return,_t)}}}else if((o.tag!==22&&o.tag!==23||o.memoizedState===null||o===i)&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===i)break e;for(;o.sibling===null;){if(o.return===null||o.return===i)break e;c===o&&(c=null),o=o.return}c===o&&(c=null),o.sibling.return=o.return,o=o.sibling}f&4&&(f=i.updateQueue,f!==null&&(c=f.retryQueue,c!==null&&(f.retryQueue=null,qc(i,c))));break;case 19:ta(o,i),Ja(i),f&4&&(f=i.updateQueue,f!==null&&(i.updateQueue=null,qc(i,f)));break;case 30:break;case 21:break;default:ta(o,i),Ja(i)}}function Ja(i){var o=i.flags;if(o&2){try{for(var c,f=i.return;f!==null;){if(Kf(f)){c=f;break}f=f.return}if(c==null)throw Error(P(160));switch(c.tag){case 27:var x=c.stateNode,S=Rp(i);jd(i,S,x);break;case 5:var j=c.stateNode;c.flags&32&&(Ao(j,""),c.flags&=-33);var q=Rp(i);jd(i,q,j);break;case 3:case 4:var he=c.stateNode.containerInfo,Pe=Rp(i);Bp(i,Pe,he);break;default:throw Error(P(161))}}catch($e){zi(i,i.return,$e)}i.flags&=-3}o&4096&&(i.flags&=-4097)}function ec(i){if(i.subtreeFlags&1024)for(i=i.child;i!==null;){var o=i;ec(o),o.tag===5&&o.flags&1024&&o.stateNode.reset(),i=i.sibling}}function gl(i,o){if(o.subtreeFlags&8772)for(o=o.child;o!==null;)Op(i,o.alternate,o),o=o.sibling}function tc(i){for(i=i.child;i!==null;){var o=i;switch(o.tag){case 0:case 11:case 14:case 15:zs(4,o,o.return),tc(o);break;case 1:Ps(o,o.return);var c=o.stateNode;typeof c.componentWillUnmount=="function"&&Jl(o,o.return,c),tc(o);break;case 27:th(o.stateNode);case 26:case 5:Ps(o,o.return),tc(o);break;case 22:o.memoizedState===null&&tc(o);break;case 30:tc(o);break;default:tc(o)}i=i.sibling}}function Yn(i,o,c){for(c=c&&(o.subtreeFlags&8772)!==0,o=o.child;o!==null;){var f=o.alternate,x=i,S=o,j=S.flags;switch(S.tag){case 0:case 11:case 15:Yn(x,S,c),Wl(4,S);break;case 1:if(Yn(x,S,c),f=S,x=f.stateNode,typeof x.componentDidMount=="function")try{x.componentDidMount()}catch(Pe){zi(f,f.return,Pe)}if(f=S,x=f.updateQueue,x!==null){var q=f.stateNode;try{var he=x.shared.hiddenCallbacks;if(he!==null)for(x.shared.hiddenCallbacks=null,x=0;x<he.length;x++)Zn(he[x],q)}catch(Pe){zi(f,f.return,Pe)}}c&&j&64&&Lp(S),fl(S,S.return);break;case 27:Vd(S);case 26:case 5:Yn(x,S,c),c&&f===null&&j&4&&Qf(S),fl(S,S.return);break;case 12:Yn(x,S,c);break;case 31:Yn(x,S,c),c&&j&4&&Uu(x,S);break;case 13:Yn(x,S,c),c&&j&4&&$d(x,S);break;case 22:S.memoizedState===null&&Yn(x,S,c),fl(S,S.return);break;case 30:break;default:Yn(x,S,c)}o=o.sibling}}function Nh(i,o){var c=null;i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(c=i.memoizedState.cachePool.pool),i=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(i=o.memoizedState.cachePool.pool),i!==c&&(i!=null&&i.refCount++,c!=null&&Er(c))}function Fd(i,o){i=null,o.alternate!==null&&(i=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==i&&(o.refCount++,i!=null&&Er(i))}function _o(i,o,c,f){if(o.subtreeFlags&10256)for(o=o.child;o!==null;)em(i,o,c,f),o=o.sibling}function em(i,o,c,f){var x=o.flags;switch(o.tag){case 0:case 11:case 15:_o(i,o,c,f),x&2048&&Wl(9,o);break;case 1:_o(i,o,c,f);break;case 3:_o(i,o,c,f),x&2048&&(i=null,o.alternate!==null&&(i=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==i&&(o.refCount++,i!=null&&Er(i)));break;case 12:if(x&2048){_o(i,o,c,f),i=o.stateNode;try{var S=o.memoizedProps,j=S.id,q=S.onPostCommit;typeof q=="function"&&q(j,o.alternate===null?"mount":"update",i.passiveEffectDuration,-0)}catch(he){zi(o,o.return,he)}}else _o(i,o,c,f);break;case 31:_o(i,o,c,f);break;case 13:_o(i,o,c,f);break;case 23:break;case 22:S=o.stateNode,j=o.alternate,o.memoizedState!==null?S._visibility&2?_o(i,o,c,f):Uh(i,o):S._visibility&2?_o(i,o,c,f):(S._visibility|=2,Hu(i,o,c,f,(o.subtreeFlags&10256)!==0||!1)),x&2048&&Nh(j,o);break;case 24:_o(i,o,c,f),x&2048&&Fd(o.alternate,o);break;default:_o(i,o,c,f)}}function Hu(i,o,c,f,x){for(x=x&&((o.subtreeFlags&10256)!==0||!1),o=o.child;o!==null;){var S=i,j=o,q=c,he=f,Pe=j.flags;switch(j.tag){case 0:case 11:case 15:Hu(S,j,q,he,x),Wl(8,j);break;case 23:break;case 22:var $e=j.stateNode;j.memoizedState!==null?$e._visibility&2?Hu(S,j,q,he,x):Uh(S,j):($e._visibility|=2,Hu(S,j,q,he,x)),x&&Pe&2048&&Nh(j.alternate,j);break;case 24:Hu(S,j,q,he,x),x&&Pe&2048&&Fd(j.alternate,j);break;default:Hu(S,j,q,he,x)}o=o.sibling}}function Uh(i,o){if(o.subtreeFlags&10256)for(o=o.child;o!==null;){var c=i,f=o,x=f.flags;switch(f.tag){case 22:Uh(c,f),x&2048&&Nh(f.alternate,f);break;case 24:Uh(c,f),x&2048&&Fd(f.alternate,f);break;default:Uh(c,f)}o=o.sibling}}var Zh=8192;function Gu(i,o,c){if(i.subtreeFlags&Zh)for(i=i.child;i!==null;)Xc(i,o,c),i=i.sibling}function Xc(i,o,c){switch(i.tag){case 26:Gu(i,o,c),i.flags&Zh&&i.memoizedState!==null&&G(c,Wa,i.memoizedState,i.memoizedProps);break;case 5:Gu(i,o,c);break;case 3:case 4:var f=Wa;Wa=ad(i.stateNode.containerInfo),Gu(i,o,c),Wa=f;break;case 22:i.memoizedState===null&&(f=i.alternate,f!==null&&f.memoizedState!==null?(f=Zh,Zh=16777216,Gu(i,o,c),Zh=f):Gu(i,o,c));break;default:Gu(i,o,c)}}function tm(i){var o=i.alternate;if(o!==null&&(i=o.child,i!==null)){o.child=null;do o=i.sibling,i.sibling=null,i=o;while(i!==null)}}function Hh(i){var o=i.deletions;if((i.flags&16)!==0){if(o!==null)for(var c=0;c<o.length;c++){var f=o[c];ai=f,$p(f,i)}tm(i)}if(i.subtreeFlags&10256)for(i=i.child;i!==null;)Vp(i),i=i.sibling}function Vp(i){switch(i.tag){case 0:case 11:case 15:Hh(i),i.flags&2048&&zs(9,i,i.return);break;case 3:Hh(i);break;case 12:Hh(i);break;case 22:var o=i.stateNode;i.memoizedState!==null&&o._visibility&2&&(i.return===null||i.return.tag!==13)?(o._visibility&=-3,Nd(i)):Hh(i);break;default:Hh(i)}}function Nd(i){var o=i.deletions;if((i.flags&16)!==0){if(o!==null)for(var c=0;c<o.length;c++){var f=o[c];ai=f,$p(f,i)}tm(i)}for(i=i.child;i!==null;){switch(o=i,o.tag){case 0:case 11:case 15:zs(8,o,o.return),Nd(o);break;case 22:c=o.stateNode,c._visibility&2&&(c._visibility&=-3,Nd(o));break;default:Nd(o)}i=i.sibling}}function $p(i,o){for(;ai!==null;){var c=ai;switch(c.tag){case 0:case 11:case 15:zs(8,c,o);break;case 23:case 22:if(c.memoizedState!==null&&c.memoizedState.cachePool!==null){var f=c.memoizedState.cachePool.pool;f!=null&&f.refCount++}break;case 24:Er(c.memoizedState.cache)}if(f=c.child,f!==null)f.return=c,ai=f;else e:for(c=i;ai!==null;){f=ai;var x=f.sibling,S=f.return;if(Fh(f),f===c){ai=null;break e}if(x!==null){x.return=S,ai=x;break e}ai=S}}}var pg={getCacheForType:function(i){var o=Xr(Ni),c=o.data.get(i);return c===void 0&&(c=i(),o.data.set(i,c)),c},cacheSignal:function(){return Xr(Ni).controller.signal}},Fp=typeof WeakMap=="function"?WeakMap:Map,fi=0,Hi=null,ui=null,pi=0,Ri=0,bn=null,ic=!1,qu=!1,Yc=!1,Ds=0,kr=0,rc=0,Qc=0,Np=0,Qn=0,Kc=0,Wc=null,en=null,Ud=!1,Gh=0,im=0,Jc=1/0,Zd=null,_l=null,ia=0,ac=null,Xu=null,Ls=0,Up=0,Zp=null,Yu=null,gr=0,qh=null;function xn(){return(fi&2)!==0&&pi!==0?pi&-pi:je.T!==null?oc():er()}function Hp(){if(Qn===0)if((pi&536870912)===0||ri){var i=Oe;Oe<<=1,(Oe&3932160)===0&&(Oe=262144),Qn=i}else Qn=536870912;return i=Ui.current,i!==null&&(i.flags|=32),Qn}function ja(i,o,c){(i===Hi&&(Ri===2||Ri===9)||i.cancelPendingCommit!==null)&&(Qu(i,0),nc(i,pi,Qn,!1)),or(i,c),((fi&2)===0||i!==Hi)&&(i===Hi&&((fi&2)===0&&(Qc|=c),kr===4&&nc(i,pi,Qn,!1)),Go(i))}function eu(i,o,c){if((fi&6)!==0)throw Error(P(327));var f=!c&&(o&127)===0&&(o&i.expiredLanes)===0||Mi(i,o),x=f?sm(i,o):Xp(i,o,!0),S=f;do{if(x===0){qu&&!f&&nc(i,o,0,!1);break}else{if(c=i.current.alternate,S&&!fg(c)){x=Xp(i,o,!1),S=!1;continue}if(x===2){if(S=o,i.errorRecoveryDisabledLanes&S)var j=0;else j=i.pendingLanes&-536870913,j=j!==0?j:j&536870912?536870912:0;if(j!==0){o=j;e:{var q=i;x=Wc;var he=q.current.memoizedState.isDehydrated;if(he&&(Qu(q,j).flags|=256),j=Xp(q,j,!1),j!==2){if(Yc&&!he){q.errorRecoveryDisabledLanes|=S,Qc|=S,x=4;break e}S=en,en=x,S!==null&&(en===null?en=S:en.push.apply(en,S))}x=j}if(S=!1,x!==2)continue}}if(x===1){Qu(i,0),nc(i,o,0,!0);break}e:{switch(f=i,S=x,S){case 0:case 1:throw Error(P(345));case 4:if((o&4194048)!==o)break;case 6:nc(f,o,Qn,!ic);break e;case 2:en=null;break;case 3:case 5:break;default:throw Error(P(329))}if((o&62914560)===o&&(x=Gh+300-Zr(),10<x)){if(nc(f,o,Qn,!ic),qt(f,0,!0)!==0)break e;Ls=o,f.timeoutHandle=pf(Gp.bind(null,f,c,en,Zd,Ud,o,Qn,Qc,Kc,ic,S,"Throttled",-0,0),x);break e}Gp(f,c,en,Zd,Ud,o,Qn,Qc,Kc,ic,S,null,-0,0)}}break}while(!0);Go(i)}function Gp(i,o,c,f,x,S,j,q,he,Pe,$e,qe,Re,Be){if(i.timeoutHandle=-1,qe=o.subtreeFlags,qe&8192||(qe&16785408)===16785408){qe={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:dn},Xc(o,S,qe);var _t=(S&62914560)===S?Gh-Zr():(S&4194048)===S?im-Zr():0;if(_t=ee(qe,_t),_t!==null){Ls=S,i.cancelPendingCommit=_t(Yh.bind(null,i,o,S,c,f,x,j,q,he,$e,qe,null,Re,Be)),nc(i,S,j,!Pe);return}}Yh(i,o,S,c,f,x,j,q,he)}function fg(i){for(var o=i;;){var c=o.tag;if((c===0||c===11||c===15)&&o.flags&16384&&(c=o.updateQueue,c!==null&&(c=c.stores,c!==null)))for(var f=0;f<c.length;f++){var x=c[f],S=x.getSnapshot;x=x.value;try{if(!Ia(S(),x))return!1}catch{return!1}}if(c=o.child,o.subtreeFlags&16384&&c!==null)c.return=o,o=c;else{if(o===i)break;for(;o.sibling===null;){if(o.return===null||o.return===i)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function nc(i,o,c,f){o&=~Np,o&=~Qc,i.suspendedLanes|=o,i.pingedLanes&=~o,f&&(i.warmLanes|=o),f=i.expirationTimes;for(var x=o;0<x;){var S=31-de(x),j=1<<S;f[S]=-1,x&=~j}c!==0&&Hr(i,c,o)}function Hd(){return(fi&6)===0?(tu(0),!1):!0}function qp(){if(ui!==null){if(Ri===0)var i=ui.return;else i=ui,lo=gn=null,e(i),il=null,ql=0,i=ui;for(;i!==null;)Yf(i.alternate,i),i=i.return;ui=null}}function Qu(i,o){var c=i.timeoutHandle;c!==-1&&(i.timeoutHandle=-1,Cg(c)),c=i.cancelPendingCommit,c!==null&&(i.cancelPendingCommit=null,c()),Ls=0,qp(),Hi=i,ui=c=Ga(i.current,null),pi=o,Ri=0,bn=null,ic=!1,qu=Mi(i,o),Yc=!1,Kc=Qn=Np=Qc=rc=kr=0,en=Wc=null,Ud=!1,(o&8)!==0&&(o|=o&32);var f=i.entangledLanes;if(f!==0)for(i=i.entanglements,f&=o;0<f;){var x=31-de(f),S=1<<x;o|=i[x],f&=~S}return Ds=o,Js(),c}function rm(i,o){Qt=null,je.H=Ql,o===tl||o===Bc?(o=Ah(),Ri=3):o===Ro?(o=Ah(),Ri=4):Ri=o===Ih?8:o!==null&&typeof o=="object"&&typeof o.then=="function"?6:1,bn=o,ui===null&&(kr=1,Dh(i,Sa(o,i.current)))}function am(){var i=Ui.current;return i===null?!0:(pi&4194048)===pi?Ya===null:(pi&62914560)===pi||(pi&536870912)!==0?i===Ya:!1}function nm(){var i=je.H;return je.H=Ql,i===null?Ql:i}function om(){var i=je.A;return je.A=pg,i}function Gd(){kr=4,ic||(pi&4194048)!==pi&&Ui.current!==null||(qu=!0),(rc&134217727)===0&&(Qc&134217727)===0||Hi===null||nc(Hi,pi,Qn,!1)}function Xp(i,o,c){var f=fi;fi|=2;var x=nm(),S=om();(Hi!==i||pi!==o)&&(Zd=null,Qu(i,o)),o=!1;var j=kr;e:do try{if(Ri!==0&&ui!==null){var q=ui,he=bn;switch(Ri){case 8:qp(),j=6;break e;case 3:case 2:case 9:case 6:Ui.current===null&&(o=!0);var Pe=Ri;if(Ri=0,bn=null,Is(i,q,he,Pe),c&&qu){j=0;break e}break;default:Pe=Ri,Ri=0,bn=null,Is(i,q,he,Pe)}}mg(),j=kr;break}catch($e){rm(i,$e)}while(!0);return o&&i.shellSuspendCounter++,lo=gn=null,fi=f,je.H=x,je.A=S,ui===null&&(Hi=null,pi=0,Js()),j}function mg(){for(;ui!==null;)Qp(ui)}function sm(i,o){var c=fi;fi|=2;var f=nm(),x=om();Hi!==i||pi!==o?(Zd=null,Jc=Zr()+500,Qu(i,o)):qu=Mi(i,o);e:do try{if(Ri!==0&&ui!==null){o=ui;var S=bn;t:switch(Ri){case 1:Ri=0,bn=null,Is(i,o,S,1);break;case 2:case 9:if(Bo(S)){Ri=0,bn=null,vl(o);break}o=function(){Ri!==2&&Ri!==9||Hi!==i||(Ri=7),Go(i)},S.then(o,o);break e;case 3:Ri=7;break e;case 4:Ri=5;break e;case 7:Bo(S)?(Ri=0,bn=null,vl(o)):(Ri=0,bn=null,Is(i,o,S,7));break;case 5:var j=null;switch(ui.tag){case 26:j=ui.memoizedState;case 5:case 27:var q=ui;if(j?N(j):q.stateNode.complete){Ri=0,bn=null;var he=q.sibling;if(he!==null)ui=he;else{var Pe=q.return;Pe!==null?(ui=Pe,yl(Pe)):ui=null}break t}}Ri=0,bn=null,Is(i,o,S,5);break;case 6:Ri=0,bn=null,Is(i,o,S,6);break;case 8:qp(),kr=6;break e;default:throw Error(P(462))}}Yp();break}catch($e){rm(i,$e)}while(!0);return lo=gn=null,je.H=f,je.A=x,fi=c,ui!==null?0:(Hi=null,pi=0,Js(),kr)}function Yp(){for(;ui!==null&&!rs();)Qp(ui)}function Qp(i){var o=qf(i.alternate,i,Ds);i.memoizedProps=i.pendingProps,o===null?yl(i):ui=o}function vl(i){var o=i,c=o.alternate;switch(o.tag){case 15:case 0:o=Ep(c,o,o.pendingProps,o.type,void 0,pi);break;case 11:o=Ep(c,o,o.pendingProps,o.type.render,o.ref,pi);break;case 5:e(o);default:Yf(c,o),o=ui=Sh(o,Ds),o=qf(c,o,Ds)}i.memoizedProps=i.pendingProps,o===null?yl(i):ui=o}function Is(i,o,c,f){lo=gn=null,e(o),il=null,ql=0;var x=o.return;try{if(cg(i,x,o,c,pi)){kr=1,Dh(i,Sa(c,i.current)),ui=null;return}}catch(S){if(x!==null)throw ui=x,S;kr=1,Dh(i,Sa(c,i.current)),ui=null;return}o.flags&32768?(ri||f===1?i=!0:qu||(pi&536870912)!==0?i=!1:(ic=i=!0,(f===2||f===9||f===3||f===6)&&(f=Ui.current,f!==null&&f.tag===13&&(f.flags|=16384))),Xh(o,i)):yl(o)}function yl(i){var o=i;do{if((o.flags&32768)!==0){Xh(o,ic);return}i=o.return;var c=hg(o.alternate,o,Ds);if(c!==null){ui=c;return}if(o=o.sibling,o!==null){ui=o;return}ui=o=i}while(o!==null);kr===0&&(kr=5)}function Xh(i,o){do{var c=dg(i.alternate,i);if(c!==null){c.flags&=32767,ui=c;return}if(c=i.return,c!==null&&(c.flags|=32768,c.subtreeFlags=0,c.deletions=null),!o&&(i=i.sibling,i!==null)){ui=i;return}ui=i=c}while(i!==null);kr=6,ui=null}function Yh(i,o,c,f,x,S,j,q,he){i.cancelPendingCommit=null;do qd();while(ia!==0);if((fi&6)!==0)throw Error(P(327));if(o!==null){if(o===i.current)throw Error(P(177));if(S=o.lanes|o.childLanes,S|=Ws,Rr(i,c,S,j,q,he),i===Hi&&(ui=Hi=null,pi=0),Xu=o,ac=i,Ls=c,Up=S,Zp=x,Yu=f,(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?(i.callbackNode=null,i.callbackPriority=0,yg(wo,function(){return Jp(),null})):(i.callbackNode=null,i.callbackPriority=0),f=(o.flags&13878)!==0,(o.subtreeFlags&13878)!==0||f){f=je.T,je.T=null,x=nt.p,nt.p=2,j=fi,fi|=4;try{Nu(i,o,c)}finally{fi=j,nt.p=x,je.T=f}}ia=1,lm(),cm(),Kp()}}function lm(){if(ia===1){ia=0;var i=ac,o=Xu,c=(o.flags&13878)!==0;if((o.subtreeFlags&13878)!==0||c){c=je.T,je.T=null;var f=nt.p;nt.p=2;var x=fi;fi|=4;try{Jf(o,i);var S=rp,j=xu(i.containerInfo),q=S.focusedElem,he=S.selectionRange;if(j!==q&&q&&q.ownerDocument&&bu(q.ownerDocument.documentElement,q)){if(he!==null&&wu(q)){var Pe=he.start,$e=he.end;if($e===void 0&&($e=Pe),"selectionStart"in q)q.selectionStart=Pe,q.selectionEnd=Math.min($e,q.value.length);else{var qe=q.ownerDocument||document,Re=qe&&qe.defaultView||window;if(Re.getSelection){var Be=Re.getSelection(),_t=q.textContent.length,Rt=Math.min(he.start,_t),Yi=he.end===void 0?Rt:Math.min(he.end,_t);!Be.extend&&Rt>Yi&&(j=Yi,Yi=Rt,Rt=j);var xe=yu(q,Rt),ge=yu(q,Yi);if(xe&&ge&&(Be.rangeCount!==1||Be.anchorNode!==xe.node||Be.anchorOffset!==xe.offset||Be.focusNode!==ge.node||Be.focusOffset!==ge.offset)){var ze=qe.createRange();ze.setStart(xe.node,xe.offset),Be.removeAllRanges(),Rt>Yi?(Be.addRange(ze),Be.extend(ge.node,ge.offset)):(ze.setEnd(ge.node,ge.offset),Be.addRange(ze))}}}}for(qe=[],Be=q;Be=Be.parentNode;)Be.nodeType===1&&qe.push({element:Be,left:Be.scrollLeft,top:Be.scrollTop});for(typeof q.focus=="function"&&q.focus(),q=0;q<qe.length;q++){var He=qe[q];He.element.scrollLeft=He.left,He.element.scrollTop=He.top}}bt=!!ip,rp=ip=null}finally{fi=x,nt.p=f,je.T=c}}i.current=o,ia=2}}function cm(){if(ia===2){ia=0;var i=ac,o=Xu,c=(o.flags&8772)!==0;if((o.subtreeFlags&8772)!==0||c){c=je.T,je.T=null;var f=nt.p;nt.p=2;var x=fi;fi|=4;try{Op(i,o.alternate,o)}finally{fi=x,nt.p=f,je.T=c}}ia=3}}function Kp(){if(ia===4||ia===3){ia=0,eo();var i=ac,o=Xu,c=Ls,f=Yu;(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?ia=5:(ia=0,Xu=ac=null,Wp(i,i.pendingLanes));var x=i.pendingLanes;if(x===0&&(_l=null),Fe(c),o=o.stateNode,re&&typeof re.onCommitFiberRoot=="function")try{re.onCommitFiberRoot(Y,o,void 0,(o.current.flags&128)===128)}catch{}if(f!==null){o=je.T,x=nt.p,nt.p=2,je.T=null;try{for(var S=i.onRecoverableError,j=0;j<f.length;j++){var q=f[j];S(q.value,{componentStack:q.stack})}}finally{je.T=o,nt.p=x}}(Ls&3)!==0&&qd(),Go(i),x=i.pendingLanes,(c&261930)!==0&&(x&42)!==0?i===qh?gr++:(gr=0,qh=i):gr=0,tu(0)}}function Wp(i,o){(i.pooledCacheLanes&=o)===0&&(o=i.pooledCache,o!=null&&(i.pooledCache=null,Er(o)))}function qd(){return lm(),cm(),Kp(),Jp()}function Jp(){if(ia!==5)return!1;var i=ac,o=Up;Up=0;var c=Fe(Ls),f=je.T,x=nt.p;try{nt.p=32>c?32:c,je.T=null,c=Zp,Zp=null;var S=ac,j=Ls;if(ia=0,Xu=ac=null,Ls=0,(fi&6)!==0)throw Error(P(331));var q=fi;if(fi|=4,Vp(S.current),em(S,S.current,j,c),fi=q,tu(0,!1),re&&typeof re.onPostCommitFiberRoot=="function")try{re.onPostCommitFiberRoot(Y,S)}catch{}return!0}finally{nt.p=x,je.T=f,Wp(i,o)}}function ef(i,o,c){o=Sa(c,o),o=Dd(i.stateNode,o,2),i=Un(i,o,2),i!==null&&(or(i,2),Go(i))}function zi(i,o,c){if(i.tag===3)ef(i,i,c);else for(;o!==null;){if(o.tag===3){ef(o,i,c);break}else if(o.tag===1){var f=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof f.componentDidCatch=="function"&&(_l===null||!_l.has(f))){i=Sa(c,i),c=$f(2),f=Un(o,c,2),f!==null&&(Ld(c,f,o,i),or(f,2),Go(f));break}}o=o.return}}function Qh(i,o,c){var f=i.pingCache;if(f===null){f=i.pingCache=new Fp;var x=new Set;f.set(o,x)}else x=f.get(o),x===void 0&&(x=new Set,f.set(o,x));x.has(c)||(Yc=!0,x.add(c),i=gg.bind(null,i,o,c),o.then(i,i))}function gg(i,o,c){var f=i.pingCache;f!==null&&f.delete(o),i.pingedLanes|=i.suspendedLanes&c,i.warmLanes&=~c,Hi===i&&(pi&c)===c&&(kr===4||kr===3&&(pi&62914560)===pi&&300>Zr()-Gh?(fi&2)===0&&Qu(i,0):Np|=c,Kc===pi&&(Kc=0)),Go(i)}function tf(i,o){o===0&&(o=Yt()),i=mn(i,o),i!==null&&(or(i,o),Go(i))}function _g(i){var o=i.memoizedState,c=0;o!==null&&(c=o.retryLane),tf(i,c)}function vg(i,o){var c=0;switch(i.tag){case 31:case 13:var f=i.stateNode,x=i.memoizedState;x!==null&&(c=x.retryLane);break;case 19:f=i.stateNode;break;case 22:f=i.stateNode._retryCache;break;default:throw Error(P(314))}f!==null&&f.delete(o),tf(i,c)}function yg(i,o){return is(i,o)}var Xd=null,Ku=null,Yd=!1,Kh=!1,Ho=!1,tn=0;function Go(i){i!==Ku&&i.next===null&&(Ku===null?Xd=Ku=i:Ku=Ku.next=i),Kh=!0,Yd||(Yd=!0,rf())}function tu(i,o){if(!Ho&&Kh){Ho=!0;do for(var c=!1,f=Xd;f!==null;){if(i!==0){var x=f.pendingLanes;if(x===0)var S=0;else{var j=f.suspendedLanes,q=f.pingedLanes;S=(1<<31-de(42|i)+1)-1,S&=x&~(j&~q),S=S&201326741?S&201326741|1:S?S|2:0}S!==0&&(c=!0,Kd(f,S))}else S=pi,S=qt(f,f===Hi?S:0,f.cancelPendingCommit!==null||f.timeoutHandle!==-1),(S&3)===0||Mi(f,S)||(c=!0,Kd(f,S));f=f.next}while(c);Ho=!1}}function bg(){Wh()}function Wh(){Kh=Yd=!1;var i=0;tn!==0&&mm()&&(i=tn);for(var o=Zr(),c=null,f=Xd;f!==null;){var x=f.next,S=Qd(f,o);S===0?(f.next=null,c===null?Xd=x:c.next=x,x===null&&(Ku=c)):(c=f,(i!==0||(S&3)!==0)&&(Kh=!0)),f=x}ia!==0&&ia!==5||tu(i),tn!==0&&(tn=0)}function Qd(i,o){for(var c=i.suspendedLanes,f=i.pingedLanes,x=i.expirationTimes,S=i.pendingLanes&-62914561;0<S;){var j=31-de(S),q=1<<j,he=x[j];he===-1?((q&c)===0||(q&f)!==0)&&(x[j]=gt(q,o)):he<=o&&(i.expiredLanes|=q),S&=~q}if(o=Hi,c=pi,c=qt(i,i===o?c:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),f=i.callbackNode,c===0||i===o&&(Ri===2||Ri===9)||i.cancelPendingCommit!==null)return f!==null&&f!==null&&zn(f),i.callbackNode=null,i.callbackPriority=0;if((c&3)===0||Mi(i,c)){if(o=c&-c,o===i.callbackPriority)return o;switch(f!==null&&zn(f),Fe(c)){case 2:case 8:c=pc;break;case 32:c=wo;break;case 268435456:c=pe;break;default:c=wo}return f=um.bind(null,i),c=is(c,f),i.callbackPriority=o,i.callbackNode=c,o}return f!==null&&f!==null&&zn(f),i.callbackPriority=2,i.callbackNode=null,2}function um(i,o){if(ia!==0&&ia!==5)return i.callbackNode=null,i.callbackPriority=0,null;var c=i.callbackNode;if(qd()&&i.callbackNode!==c)return null;var f=pi;return f=qt(i,i===Hi?f:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),f===0?null:(eu(i,f,o),Qd(i,Zr()),i.callbackNode!=null&&i.callbackNode===c?um.bind(null,i):null)}function Kd(i,o){if(qd())return null;eu(i,o,!0)}function rf(){_m(function(){(fi&6)!==0?is(Na,bg):Wh()})}function oc(){if(tn===0){var i=ha;i===0&&(i=Ze,Ze<<=1,(Ze&261888)===0&&(Ze=256)),tn=i}return tn}function af(i){return i==null||typeof i=="symbol"||typeof i=="boolean"?null:typeof i=="function"?i:It(""+i)}function nf(i,o){var c=o.ownerDocument.createElement("input");return c.name=o.name,c.value=o.value,i.id&&c.setAttribute("form",i.id),o.parentNode.insertBefore(c,o),i=new FormData(i),c.parentNode.removeChild(c),i}function of(i,o,c,f,x){if(o==="submit"&&c&&c.stateNode===x){var S=af((x[Xe]||null).action),j=f.submitter;j&&(o=(o=j[Xe]||null)?af(o.formAction):j.getAttribute("formAction"),o!==null&&(S=o,j=null));var q=new Dl("action","action",null,f,x);i.push({event:q,listeners:[{instance:null,listener:function(){if(f.defaultPrevented){if(tn!==0){var he=j?nf(x,j):new FormData(x);fo(c,{pending:!0,data:he,method:x.method,action:S},null,he)}}else typeof S=="function"&&(q.preventDefault(),he=j?nf(x,j):new FormData(x),fo(c,{pending:!0,data:he,method:x.method,action:S},S,he))},currentTarget:x}]})}}for(var Wd=0;Wd<Su.length;Wd++){var Wu=Su[Wd],hm=Wu.toLowerCase(),xg=Wu[0].toUpperCase()+Wu.slice(1);Za(hm,"on"+xg)}Za(Ac,"onAnimationEnd"),Za(Ec,"onAnimationIteration"),Za(Cu,"onAnimationStart"),Za("dblclick","onDoubleClick"),Za("focusin","onFocus"),Za("focusout","onBlur"),Za(Ks,"onTransitionRun"),Za(zc,"onTransitionStart"),Za($l,"onTransitionCancel"),Za(Ua,"onTransitionEnd"),Ml("onMouseEnter",["mouseout","mouseover"]),Ml("onMouseLeave",["mouseout","mouseover"]),Ml("onPointerEnter",["pointerout","pointerover"]),Ml("onPointerLeave",["pointerout","pointerover"]),jt("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),jt("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),jt("onBeforeInput",["compositionend","keypress","textInput","paste"]),jt("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),jt("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),jt("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Jh="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),wg=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Jh));function dm(i,o){o=(o&4)!==0;for(var c=0;c<i.length;c++){var f=i[c],x=f.event;f=f.listeners;e:{var S=void 0;if(o)for(var j=f.length-1;0<=j;j--){var q=f[j],he=q.instance,Pe=q.currentTarget;if(q=q.listener,he!==S&&x.isPropagationStopped())break e;S=q,x.currentTarget=Pe;try{S(x)}catch($e){oo($e)}x.currentTarget=null,S=he}else for(j=0;j<f.length;j++){if(q=f[j],he=q.instance,Pe=q.currentTarget,q=q.listener,he!==S&&x.isPropagationStopped())break e;S=q,x.currentTarget=Pe;try{S(x)}catch($e){oo($e)}x.currentTarget=null,S=he}}}}function hi(i,o){var c=o[Ft];c===void 0&&(c=o[Ft]=new Set);var f=i+"__bubble";c.has(f)||(sf(o,i,2,!1),c.add(f))}function ed(i,o,c){var f=0;o&&(f|=4),sf(c,i,f,o)}var qo="_reactListening"+Math.random().toString(36).slice(2);function Jd(i){if(!i[qo]){i[qo]=!0,io.forEach(function(c){c!=="selectionchange"&&(wg.has(c)||ed(c,!1,i),ed(c,!0,i))});var o=i.nodeType===9?i:i.ownerDocument;o===null||o[qo]||(o[qo]=!0,ed("selectionchange",!1,o))}}function sf(i,o,c,f){switch(ra(o)){case 2:var x=Pt;break;case 8:x=vt;break;default:x=ht}c=x.bind(null,o,c,i),x=void 0,!Br||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(x=!0),f?x!==void 0?i.addEventListener(o,c,{capture:!0,passive:x}):i.addEventListener(o,c,!0):x!==void 0?i.addEventListener(o,c,{passive:x}):i.addEventListener(o,c,!1)}function ep(i,o,c,f,x){var S=f;if((o&1)===0&&(o&2)===0&&f!==null)e:for(;;){if(f===null)return;var j=f.tag;if(j===3||j===4){var q=f.stateNode.containerInfo;if(q===x)break;if(j===4)for(j=f.return;j!==null;){var he=j.tag;if((he===3||he===4)&&j.stateNode.containerInfo===x)return;j=j.return}for(;q!==null;){if(j=Pn(q),j===null)return;if(he=j.tag,he===5||he===6||he===26||he===27){f=S=j;continue e}q=q.parentNode}}f=f.return}Vi(function(){var Pe=S,$e=Fs(c),qe=[];e:{var Re=wh.get(i);if(Re!==void 0){var Be=Dl,_t=i;switch(i){case"keypress":if(pn(c)===0)break e;case"keydown":case"keyup":Be=Hs;break;case"focusin":_t="focus",Be=br;break;case"focusout":_t="blur",Be=br;break;case"beforeblur":case"afterblur":Be=br;break;case"click":if(c.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Be=yc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Be=hu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Be=yd;break;case Ac:case Ec:case Cu:Be=gd;break;case Ua:Be=Cp;break;case"scroll":case"scrollend":Be=Ll;break;case"wheel":Be=uh;break;case"copy":case"cut":case"paste":Be=Or;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Be=bc;break;case"toggle":case"beforetoggle":Be=hh}var Rt=(o&4)!==0,Yi=!Rt&&(i==="scroll"||i==="scrollend"),xe=Rt?Re!==null?Re+"Capture":null:Re;Rt=[];for(var ge=Pe,ze;ge!==null;){var He=ge;if(ze=He.stateNode,He=He.tag,He!==5&&He!==26&&He!==27||ze===null||xe===null||(He=vc(ge,xe),He!=null&&Rt.push(Ju(ge,He,ze))),Yi)break;ge=ge.return}0<Rt.length&&(Re=new Be(Re,_t,null,c,$e),qe.push({event:Re,listeners:Rt}))}}if((o&7)===0){e:{if(Re=i==="mouseover"||i==="pointerover",Be=i==="mouseout"||i==="pointerout",Re&&c!==cu&&(_t=c.relatedTarget||c.fromElement)&&(Pn(_t)||_t[Lt]))break e;if((Be||Re)&&(Re=$e.window===$e?$e:(Re=$e.ownerDocument)?Re.defaultView||Re.parentWindow:window,Be?(_t=c.relatedTarget||c.toElement,Be=Pe,_t=_t?Pn(_t):null,_t!==null&&(Yi=X(_t),Rt=_t.tag,_t!==Yi||Rt!==5&&Rt!==27&&Rt!==6)&&(_t=null)):(Be=null,_t=Pe),Be!==_t)){if(Rt=yc,He="onMouseLeave",xe="onMouseEnter",ge="mouse",(i==="pointerout"||i==="pointerover")&&(Rt=bc,He="onPointerLeave",xe="onPointerEnter",ge="pointer"),Yi=Be==null?Re:To(Be),ze=_t==null?Re:To(_t),Re=new Rt(He,ge+"leave",Be,c,$e),Re.target=Yi,Re.relatedTarget=ze,He=null,Pn($e)===Pe&&(Rt=new Rt(xe,ge+"enter",_t,c,$e),Rt.target=ze,Rt.relatedTarget=Yi,He=Rt),Yi=He,Be&&_t)t:{for(Rt=lf,xe=Be,ge=_t,ze=0,He=xe;He;He=Rt(He))ze++;He=0;for(var At=ge;At;At=Rt(At))He++;for(;0<ze-He;)xe=Rt(xe),ze--;for(;0<He-ze;)ge=Rt(ge),He--;for(;ze--;){if(xe===ge||ge!==null&&xe===ge.alternate){Rt=xe;break t}xe=Rt(xe),ge=Rt(ge)}Rt=null}else Rt=null;Be!==null&&cf(qe,Re,Be,Rt,!1),_t!==null&&Yi!==null&&cf(qe,Yi,_t,Rt,!0)}}e:{if(Re=Pe?To(Pe):window,Be=Re.nodeName&&Re.nodeName.toLowerCase(),Be==="select"||Be==="input"&&Re.type==="file")var Ti=Bn;else if(_u(Re))if(fh)Ti=_h;else{Ti=Td;var ct=Tp}else Be=Re.nodeName,!Be||Be.toLowerCase()!=="input"||Re.type!=="checkbox"&&Re.type!=="radio"?Pe&&hn(Pe.elementType)&&(Ti=Bn):Ti=gh;if(Ti&&(Ti=Ti(i,Pe))){Cc(qe,Ti,c,$e);break e}ct&&ct(i,Re,Pe),i==="focusout"&&Pe&&Re.type==="number"&&Pe.memoizedProps.value!=null&&_c(Re,"number",Re.value)}switch(ct=Pe?To(Pe):window,i){case"focusin":(_u(ct)||ct.contentEditable==="true")&&(fn=ct,Tc=Pe,Mc=null);break;case"focusout":Mc=Tc=fn=null;break;case"mousedown":yh=!0;break;case"contextmenu":case"mouseup":case"dragend":yh=!1,Md(qe,c,$e);break;case"selectionchange":if(di)break;case"keydown":case"keyup":Md(qe,c,$e)}var kt;if(wa)e:{switch(i){case"compositionstart":var Jt="onCompositionStart";break e;case"compositionend":Jt="onCompositionEnd";break e;case"compositionupdate":Jt="onCompositionUpdate";break e}Jt=void 0}else Rn?wc(i,c)&&(Jt="onCompositionEnd"):i==="keydown"&&c.keyCode===229&&(Jt="onCompositionStart");Jt&&(Gs&&c.locale!=="ko"&&(Rn||Jt!=="onCompositionStart"?Jt==="onCompositionEnd"&&Rn&&(kt=Ci()):(ao=$e,ls="value"in ao?ao.value:ao.textContent,Rn=!0)),ct=td(Pe,Jt),0<ct.length&&(Jt=new du(Jt,i,null,c,$e),qe.push({event:Jt,listeners:ct}),kt?Jt.data=kt:(kt=bd(c),kt!==null&&(Jt.data=kt)))),(kt=gu?Sp(i,c):xd(i,c))&&(Jt=td(Pe,"onBeforeInput"),0<Jt.length&&(ct=new du("onBeforeInput","beforeinput",null,c,$e),qe.push({event:ct,listeners:Jt}),ct.data=kt)),of(qe,i,Pe,c,$e)}dm(qe,o)})}function Ju(i,o,c){return{instance:i,listener:o,currentTarget:c}}function td(i,o){for(var c=o+"Capture",f=[];i!==null;){var x=i,S=x.stateNode;if(x=x.tag,x!==5&&x!==26&&x!==27||S===null||(x=vc(i,c),x!=null&&f.unshift(Ju(i,x,S)),x=vc(i,o),x!=null&&f.push(Ju(i,x,S))),i.tag===3)return f;i=i.return}return[]}function lf(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5&&i.tag!==27);return i||null}function cf(i,o,c,f,x){for(var S=o._reactName,j=[];c!==null&&c!==f;){var q=c,he=q.alternate,Pe=q.stateNode;if(q=q.tag,he!==null&&he===f)break;q!==5&&q!==26&&q!==27||Pe===null||(he=Pe,x?(Pe=vc(c,S),Pe!=null&&j.unshift(Ju(c,Pe,he))):x||(Pe=vc(c,S),Pe!=null&&j.push(Ju(c,Pe,he)))),c=c.return}j.length!==0&&i.push({event:o,listeners:j})}var id=/\r\n?/g,pm=/\u0000|\uFFFD/g;function tp(i){return(typeof i=="string"?i:""+i).replace(id,`
`).replace(pm,"")}function uf(i,o){return o=tp(o),tp(i)===o}function ni(i,o,c,f,x,S){switch(c){case"children":typeof f=="string"?o==="body"||o==="textarea"&&f===""||Ao(i,f):(typeof f=="number"||typeof f=="bigint")&&o!=="body"&&Ao(i,""+f);break;case"className":El(i,"class",f);break;case"tabIndex":El(i,"tabindex",f);break;case"dir":case"role":case"viewBox":case"width":case"height":El(i,c,f);break;case"style":lu(i,f,S);break;case"data":if(o!=="object"){El(i,"data",f);break}case"src":case"href":if(f===""&&(o!=="a"||c!=="href")){i.removeAttribute(c);break}if(f==null||typeof f=="function"||typeof f=="symbol"||typeof f=="boolean"){i.removeAttribute(c);break}f=It(""+f),i.setAttribute(c,f);break;case"action":case"formAction":if(typeof f=="function"){i.setAttribute(c,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof S=="function"&&(c==="formAction"?(o!=="input"&&ni(i,o,"name",x.name,x,null),ni(i,o,"formEncType",x.formEncType,x,null),ni(i,o,"formMethod",x.formMethod,x,null),ni(i,o,"formTarget",x.formTarget,x,null)):(ni(i,o,"encType",x.encType,x,null),ni(i,o,"method",x.method,x,null),ni(i,o,"target",x.target,x,null)));if(f==null||typeof f=="symbol"||typeof f=="boolean"){i.removeAttribute(c);break}f=It(""+f),i.setAttribute(c,f);break;case"onClick":f!=null&&(i.onclick=dn);break;case"onScroll":f!=null&&hi("scroll",i);break;case"onScrollEnd":f!=null&&hi("scrollend",i);break;case"dangerouslySetInnerHTML":if(f!=null){if(typeof f!="object"||!("__html"in f))throw Error(P(61));if(c=f.__html,c!=null){if(x.children!=null)throw Error(P(60));i.innerHTML=c}}break;case"multiple":i.multiple=f&&typeof f!="function"&&typeof f!="symbol";break;case"muted":i.muted=f&&typeof f!="function"&&typeof f!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(f==null||typeof f=="function"||typeof f=="boolean"||typeof f=="symbol"){i.removeAttribute("xlink:href");break}c=It(""+f),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",c);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":f!=null&&typeof f!="function"&&typeof f!="symbol"?i.setAttribute(c,""+f):i.removeAttribute(c);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":f&&typeof f!="function"&&typeof f!="symbol"?i.setAttribute(c,""):i.removeAttribute(c);break;case"capture":case"download":f===!0?i.setAttribute(c,""):f!==!1&&f!=null&&typeof f!="function"&&typeof f!="symbol"?i.setAttribute(c,f):i.removeAttribute(c);break;case"cols":case"rows":case"size":case"span":f!=null&&typeof f!="function"&&typeof f!="symbol"&&!isNaN(f)&&1<=f?i.setAttribute(c,f):i.removeAttribute(c);break;case"rowSpan":case"start":f==null||typeof f=="function"||typeof f=="symbol"||isNaN(f)?i.removeAttribute(c):i.setAttribute(c,f);break;case"popover":hi("beforetoggle",i),hi("toggle",i),mc(i,"popover",f);break;case"xlinkActuate":ro(i,"http://www.w3.org/1999/xlink","xlink:actuate",f);break;case"xlinkArcrole":ro(i,"http://www.w3.org/1999/xlink","xlink:arcrole",f);break;case"xlinkRole":ro(i,"http://www.w3.org/1999/xlink","xlink:role",f);break;case"xlinkShow":ro(i,"http://www.w3.org/1999/xlink","xlink:show",f);break;case"xlinkTitle":ro(i,"http://www.w3.org/1999/xlink","xlink:title",f);break;case"xlinkType":ro(i,"http://www.w3.org/1999/xlink","xlink:type",f);break;case"xmlBase":ro(i,"http://www.w3.org/XML/1998/namespace","xml:base",f);break;case"xmlLang":ro(i,"http://www.w3.org/XML/1998/namespace","xml:lang",f);break;case"xmlSpace":ro(i,"http://www.w3.org/XML/1998/namespace","xml:space",f);break;case"is":mc(i,"is",f);break;case"innerText":case"textContent":break;default:(!(2<c.length)||c[0]!=="o"&&c[0]!=="O"||c[1]!=="n"&&c[1]!=="N")&&(c=Xt.get(c)||c,mc(i,c,f))}}function sc(i,o,c,f,x,S){switch(c){case"style":lu(i,f,S);break;case"dangerouslySetInnerHTML":if(f!=null){if(typeof f!="object"||!("__html"in f))throw Error(P(61));if(c=f.__html,c!=null){if(x.children!=null)throw Error(P(60));i.innerHTML=c}}break;case"children":typeof f=="string"?Ao(i,f):(typeof f=="number"||typeof f=="bigint")&&Ao(i,""+f);break;case"onScroll":f!=null&&hi("scroll",i);break;case"onScrollEnd":f!=null&&hi("scrollend",i);break;case"onClick":f!=null&&(i.onclick=dn);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!la.hasOwnProperty(c))e:{if(c[0]==="o"&&c[1]==="n"&&(x=c.endsWith("Capture"),o=c.slice(2,x?c.length-7:void 0),S=i[Xe]||null,S=S!=null?S[c]:null,typeof S=="function"&&i.removeEventListener(o,S,x),typeof f=="function")){typeof S!="function"&&S!==null&&(c in i?i[c]=null:i.hasAttribute(c)&&i.removeAttribute(c)),i.addEventListener(o,f,x);break e}c in i?i[c]=f:f===!0?i.setAttribute(c,""):mc(i,c,f)}}}function Nr(i,o,c){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":hi("error",i),hi("load",i);var f=!1,x=!1,S;for(S in c)if(c.hasOwnProperty(S)){var j=c[S];if(j!=null)switch(S){case"src":f=!0;break;case"srcSet":x=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(P(137,o));default:ni(i,o,S,j,c,null)}}x&&ni(i,o,"srcSet",c.srcSet,c,null),f&&ni(i,o,"src",c.src,c,null);return;case"input":hi("invalid",i);var q=S=j=x=null,he=null,Pe=null;for(f in c)if(c.hasOwnProperty(f)){var $e=c[f];if($e!=null)switch(f){case"name":x=$e;break;case"type":j=$e;break;case"checked":he=$e;break;case"defaultChecked":Pe=$e;break;case"value":S=$e;break;case"defaultValue":q=$e;break;case"children":case"dangerouslySetInnerHTML":if($e!=null)throw Error(P(137,o));break;default:ni(i,o,f,$e,c,null)}}$s(i,S,q,he,Pe,j,x,!1);return;case"select":hi("invalid",i),f=j=S=null;for(x in c)if(c.hasOwnProperty(x)&&(q=c[x],q!=null))switch(x){case"value":S=q;break;case"defaultValue":j=q;break;case"multiple":f=q;default:ni(i,o,x,q,c,null)}o=S,c=j,i.multiple=!!f,o!=null?os(i,!!f,o,!1):c!=null&&os(i,!!f,c,!0);return;case"textarea":hi("invalid",i),S=x=f=null;for(j in c)if(c.hasOwnProperty(j)&&(q=c[j],q!=null))switch(j){case"value":f=q;break;case"defaultValue":x=q;break;case"children":S=q;break;case"dangerouslySetInnerHTML":if(q!=null)throw Error(P(91));break;default:ni(i,o,j,q,c,null)}kl(i,f,x,S);return;case"option":for(he in c)if(c.hasOwnProperty(he)&&(f=c[he],f!=null))switch(he){case"selected":i.selected=f&&typeof f!="function"&&typeof f!="symbol";break;default:ni(i,o,he,f,c,null)}return;case"dialog":hi("beforetoggle",i),hi("toggle",i),hi("cancel",i),hi("close",i);break;case"iframe":case"object":hi("load",i);break;case"video":case"audio":for(f=0;f<Jh.length;f++)hi(Jh[f],i);break;case"image":hi("error",i),hi("load",i);break;case"details":hi("toggle",i);break;case"embed":case"source":case"link":hi("error",i),hi("load",i);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Pe in c)if(c.hasOwnProperty(Pe)&&(f=c[Pe],f!=null))switch(Pe){case"children":case"dangerouslySetInnerHTML":throw Error(P(137,o));default:ni(i,o,Pe,f,c,null)}return;default:if(hn(o)){for($e in c)c.hasOwnProperty($e)&&(f=c[$e],f!==void 0&&sc(i,o,$e,f,c,void 0));return}}for(q in c)c.hasOwnProperty(q)&&(f=c[q],f!=null&&ni(i,o,q,f,c,null))}function iu(i,o,c,f){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var x=null,S=null,j=null,q=null,he=null,Pe=null,$e=null;for(Be in c){var qe=c[Be];if(c.hasOwnProperty(Be)&&qe!=null)switch(Be){case"checked":break;case"value":break;case"defaultValue":he=qe;default:f.hasOwnProperty(Be)||ni(i,o,Be,null,f,qe)}}for(var Re in f){var Be=f[Re];if(qe=c[Re],f.hasOwnProperty(Re)&&(Be!=null||qe!=null))switch(Re){case"type":S=Be;break;case"name":x=Be;break;case"checked":Pe=Be;break;case"defaultChecked":$e=Be;break;case"value":j=Be;break;case"defaultValue":q=Be;break;case"children":case"dangerouslySetInnerHTML":if(Be!=null)throw Error(P(137,o));break;default:Be!==qe&&ni(i,o,Re,Be,f,qe)}}zl(i,j,q,he,Pe,$e,S,x);return;case"select":Be=j=q=Re=null;for(S in c)if(he=c[S],c.hasOwnProperty(S)&&he!=null)switch(S){case"value":break;case"multiple":Be=he;default:f.hasOwnProperty(S)||ni(i,o,S,null,f,he)}for(x in f)if(S=f[x],he=c[x],f.hasOwnProperty(x)&&(S!=null||he!=null))switch(x){case"value":Re=S;break;case"defaultValue":q=S;break;case"multiple":j=S;default:S!==he&&ni(i,o,x,S,f,he)}o=q,c=j,f=Be,Re!=null?os(i,!!c,Re,!1):!!f!=!!c&&(o!=null?os(i,!!c,o,!0):os(i,!!c,c?[]:"",!1));return;case"textarea":Be=Re=null;for(q in c)if(x=c[q],c.hasOwnProperty(q)&&x!=null&&!f.hasOwnProperty(q))switch(q){case"value":break;case"children":break;default:ni(i,o,q,null,f,x)}for(j in f)if(x=f[j],S=c[j],f.hasOwnProperty(j)&&(x!=null||S!=null))switch(j){case"value":Re=x;break;case"defaultValue":Be=x;break;case"children":break;case"dangerouslySetInnerHTML":if(x!=null)throw Error(P(91));break;default:x!==S&&ni(i,o,j,x,f,S)}Pl(i,Re,Be);return;case"option":for(var _t in c)if(Re=c[_t],c.hasOwnProperty(_t)&&Re!=null&&!f.hasOwnProperty(_t))switch(_t){case"selected":i.selected=!1;break;default:ni(i,o,_t,null,f,Re)}for(he in f)if(Re=f[he],Be=c[he],f.hasOwnProperty(he)&&Re!==Be&&(Re!=null||Be!=null))switch(he){case"selected":i.selected=Re&&typeof Re!="function"&&typeof Re!="symbol";break;default:ni(i,o,he,Re,f,Be)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Rt in c)Re=c[Rt],c.hasOwnProperty(Rt)&&Re!=null&&!f.hasOwnProperty(Rt)&&ni(i,o,Rt,null,f,Re);for(Pe in f)if(Re=f[Pe],Be=c[Pe],f.hasOwnProperty(Pe)&&Re!==Be&&(Re!=null||Be!=null))switch(Pe){case"children":case"dangerouslySetInnerHTML":if(Re!=null)throw Error(P(137,o));break;default:ni(i,o,Pe,Re,f,Be)}return;default:if(hn(o)){for(var Yi in c)Re=c[Yi],c.hasOwnProperty(Yi)&&Re!==void 0&&!f.hasOwnProperty(Yi)&&sc(i,o,Yi,void 0,f,Re);for($e in f)Re=f[$e],Be=c[$e],!f.hasOwnProperty($e)||Re===Be||Re===void 0&&Be===void 0||sc(i,o,$e,Re,f,Be);return}}for(var xe in c)Re=c[xe],c.hasOwnProperty(xe)&&Re!=null&&!f.hasOwnProperty(xe)&&ni(i,o,xe,null,f,Re);for(qe in f)Re=f[qe],Be=c[qe],!f.hasOwnProperty(qe)||Re===Be||Re==null&&Be==null||ni(i,o,qe,Re,f,Be)}function hf(i){switch(i){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function fm(){if(typeof performance.getEntriesByType=="function"){for(var i=0,o=0,c=performance.getEntriesByType("resource"),f=0;f<c.length;f++){var x=c[f],S=x.transferSize,j=x.initiatorType,q=x.duration;if(S&&q&&hf(j)){for(j=0,q=x.responseEnd,f+=1;f<c.length;f++){var he=c[f],Pe=he.startTime;if(Pe>q)break;var $e=he.transferSize,qe=he.initiatorType;$e&&hf(qe)&&(he=he.responseEnd,j+=$e*(he<q?1:(q-Pe)/(he-Pe)))}if(--f,o+=8*(S+j)/(x.duration/1e3),i++,10<i)break}}if(0<i)return o/i/1e6}return navigator.connection&&(i=navigator.connection.downlink,typeof i=="number")?i:5}var ip=null,rp=null;function ap(i){return i.nodeType===9?i:i.ownerDocument}function df(i){switch(i){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function bl(i,o){if(i===0)switch(o){case"svg":return 1;case"math":return 2;default:return 0}return i===1&&o==="foreignObject"?0:i}function np(i,o){return i==="textarea"||i==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.children=="bigint"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var op=null;function mm(){var i=window.event;return i&&i.type==="popstate"?i===op?!1:(op=i,!0):(op=null,!1)}var pf=typeof setTimeout=="function"?setTimeout:void 0,Cg=typeof clearTimeout=="function"?clearTimeout:void 0,gm=typeof Promise=="function"?Promise:void 0,_m=typeof queueMicrotask=="function"?queueMicrotask:typeof gm<"u"?function(i){return gm.resolve(null).then(i).catch(vm)}:pf;function vm(i){setTimeout(function(){throw i})}function Xo(i){return i==="head"}function ff(i,o){var c=o,f=0;do{var x=c.nextSibling;if(i.removeChild(c),x&&x.nodeType===8)if(c=x.data,c==="/$"||c==="/&"){if(f===0){i.removeChild(x),$a(o);return}f--}else if(c==="$"||c==="$?"||c==="$~"||c==="$!"||c==="&")f++;else if(c==="html")th(i.ownerDocument.documentElement);else if(c==="head"){c=i.ownerDocument.head,th(c);for(var S=c.firstChild;S;){var j=S.nextSibling,q=S.nodeName;S[Mt]||q==="SCRIPT"||q==="STYLE"||q==="LINK"&&S.rel.toLowerCase()==="stylesheet"||c.removeChild(S),S=j}}else c==="body"&&th(i.ownerDocument.body);c=x}while(c);$a(o)}function rd(i,o){var c=i;i=0;do{var f=c.nextSibling;if(c.nodeType===1?o?(c._stashedDisplay=c.style.display,c.style.display="none"):(c.style.display=c._stashedDisplay||"",c.getAttribute("style")===""&&c.removeAttribute("style")):c.nodeType===3&&(o?(c._stashedText=c.nodeValue,c.nodeValue=""):c.nodeValue=c._stashedText||""),f&&f.nodeType===8)if(c=f.data,c==="/$"){if(i===0)break;i--}else c!=="$"&&c!=="$?"&&c!=="$~"&&c!=="$!"||i++;c=f}while(c)}function eh(i){var o=i.firstChild;for(o&&o.nodeType===10&&(o=o.nextSibling);o;){var c=o;switch(o=o.nextSibling,c.nodeName){case"HTML":case"HEAD":case"BODY":eh(c),So(c);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(c.rel.toLowerCase()==="stylesheet")continue}i.removeChild(c)}}function sp(i,o,c,f){for(;i.nodeType===1;){var x=c;if(i.nodeName.toLowerCase()!==o.toLowerCase()){if(!f&&(i.nodeName!=="INPUT"||i.type!=="hidden"))break}else if(f){if(!i[Mt])switch(o){case"meta":if(!i.hasAttribute("itemprop"))break;return i;case"link":if(S=i.getAttribute("rel"),S==="stylesheet"&&i.hasAttribute("data-precedence"))break;if(S!==x.rel||i.getAttribute("href")!==(x.href==null||x.href===""?null:x.href)||i.getAttribute("crossorigin")!==(x.crossOrigin==null?null:x.crossOrigin)||i.getAttribute("title")!==(x.title==null?null:x.title))break;return i;case"style":if(i.hasAttribute("data-precedence"))break;return i;case"script":if(S=i.getAttribute("src"),(S!==(x.src==null?null:x.src)||i.getAttribute("type")!==(x.type==null?null:x.type)||i.getAttribute("crossorigin")!==(x.crossOrigin==null?null:x.crossOrigin))&&S&&i.hasAttribute("async")&&!i.hasAttribute("itemprop"))break;return i;default:return i}}else if(o==="input"&&i.type==="hidden"){var S=x.name==null?null:""+x.name;if(x.type==="hidden"&&i.getAttribute("name")===S)return i}else return i;if(i=wn(i.nextSibling),i===null)break}return null}function Sg(i,o,c){if(o==="")return null;for(;i.nodeType!==3;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!c||(i=wn(i.nextSibling),i===null))return null;return i}function ym(i,o){for(;i.nodeType!==8;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!o||(i=wn(i.nextSibling),i===null))return null;return i}function mf(i){return i.data==="$?"||i.data==="$~"}function lc(i){return i.data==="$!"||i.data==="$?"&&i.ownerDocument.readyState!=="loading"}function ma(i,o){var c=i.ownerDocument;if(i.data==="$~")i._reactRetry=o;else if(i.data!=="$?"||c.readyState!=="loading")o();else{var f=function(){o(),c.removeEventListener("DOMContentLoaded",f)};c.addEventListener("DOMContentLoaded",f),i._reactRetry=f}}function wn(i){for(;i!=null;i=i.nextSibling){var o=i.nodeType;if(o===1||o===3)break;if(o===8){if(o=i.data,o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"||o==="F!"||o==="F")break;if(o==="/$"||o==="/&")return null}}return i}var lp=null;function gf(i){i=i.nextSibling;for(var o=0;i;){if(i.nodeType===8){var c=i.data;if(c==="/$"||c==="/&"){if(o===0)return wn(i.nextSibling);o--}else c!=="$"&&c!=="$!"&&c!=="$?"&&c!=="$~"&&c!=="&"||o++}i=i.nextSibling}return null}function cp(i){i=i.previousSibling;for(var o=0;i;){if(i.nodeType===8){var c=i.data;if(c==="$"||c==="$!"||c==="$?"||c==="$~"||c==="&"){if(o===0)return i;o--}else c!=="/$"&&c!=="/&"||o++}i=i.previousSibling}return null}function bm(i,o,c){switch(o=ap(c),i){case"html":if(i=o.documentElement,!i)throw Error(P(452));return i;case"head":if(i=o.head,!i)throw Error(P(453));return i;case"body":if(i=o.body,!i)throw Error(P(454));return i;default:throw Error(P(451))}}function th(i){for(var o=i.attributes;o.length;)i.removeAttributeNode(o[0]);So(i)}var Kn=new Map,xm=new Set;function ad(i){return typeof i.getRootNode=="function"?i.getRootNode():i.nodeType===9?i:i.ownerDocument}var Yo=nt.d;nt.d={f:_f,r:wm,D:Cm,C:vf,L:hp,m:nd,X:bf,S:yf,M:xf};function _f(){var i=Yo.f(),o=Hd();return i||o}function wm(i){var o=kn(i);o!==null&&o.tag===5&&o.type==="form"?ea(o):Yo.r(i)}var Rs=typeof document>"u"?null:document;function up(i,o,c){var f=Rs;if(f&&typeof o=="string"&&o){var x=Da(o);x='link[rel="'+i+'"][href="'+x+'"]',typeof c=="string"&&(x+='[crossorigin="'+c+'"]'),xm.has(x)||(xm.add(x),i={rel:i,crossOrigin:c,href:o},f.querySelector(x)===null&&(o=f.createElement("link"),Nr(o,"link",i),pr(o),f.head.appendChild(o)))}}function Cm(i){Yo.D(i),up("dns-prefetch",i,null)}function vf(i,o){Yo.C(i,o),up("preconnect",i,o)}function hp(i,o,c){Yo.L(i,o,c);var f=Rs;if(f&&i&&o){var x='link[rel="preload"][as="'+Da(o)+'"]';o==="image"&&c&&c.imageSrcSet?(x+='[imagesrcset="'+Da(c.imageSrcSet)+'"]',typeof c.imageSizes=="string"&&(x+='[imagesizes="'+Da(c.imageSizes)+'"]')):x+='[href="'+Da(i)+'"]';var S=x;switch(o){case"style":S=a(i);break;case"script":S=u(i)}Kn.has(S)||(i=Je({rel:"preload",href:o==="image"&&c&&c.imageSrcSet?void 0:i,as:o},c),Kn.set(S,i),f.querySelector(x)!==null||o==="style"&&f.querySelector(t(S))||o==="script"&&f.querySelector(m(S))||(o=f.createElement("link"),Nr(o,"link",i),pr(o),f.head.appendChild(o)))}}function nd(i,o){Yo.m(i,o);var c=Rs;if(c&&i){var f=o&&typeof o.as=="string"?o.as:"script",x='link[rel="modulepreload"][as="'+Da(f)+'"][href="'+Da(i)+'"]',S=x;switch(f){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":S=u(i)}if(!Kn.has(S)&&(i=Je({rel:"modulepreload",href:i},o),Kn.set(S,i),c.querySelector(x)===null)){switch(f){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(c.querySelector(m(S)))return}f=c.createElement("link"),Nr(f,"link",i),pr(f),c.head.appendChild(f)}}}function yf(i,o,c){Yo.S(i,o,c);var f=Rs;if(f&&i){var x=un(f).hoistableStyles,S=a(i);o=o||"default";var j=x.get(S);if(!j){var q={loading:0,preload:null};if(j=f.querySelector(t(S)))q.loading=5;else{i=Je({rel:"stylesheet",href:i,"data-precedence":o},c),(c=Kn.get(S))&&b(i,c);var he=j=f.createElement("link");pr(he),Nr(he,"link",i),he._p=new Promise(function(Pe,$e){he.onload=Pe,he.onerror=$e}),he.addEventListener("load",function(){q.loading|=1}),he.addEventListener("error",function(){q.loading|=2}),q.loading|=4,y(j,o,f)}j={type:"stylesheet",instance:j,count:1,state:q},x.set(S,j)}}}function bf(i,o){Yo.X(i,o);var c=Rs;if(c&&i){var f=un(c).hoistableScripts,x=u(i),S=f.get(x);S||(S=c.querySelector(m(x)),S||(i=Je({src:i,async:!0},o),(o=Kn.get(x))&&T(i,o),S=c.createElement("script"),pr(S),Nr(S,"link",i),c.head.appendChild(S)),S={type:"script",instance:S,count:1,state:null},f.set(x,S))}}function xf(i,o){Yo.M(i,o);var c=Rs;if(c&&i){var f=un(c).hoistableScripts,x=u(i),S=f.get(x);S||(S=c.querySelector(m(x)),S||(i=Je({src:i,async:!0,type:"module"},o),(o=Kn.get(x))&&T(i,o),S=c.createElement("script"),pr(S),Nr(S,"link",i),c.head.appendChild(S)),S={type:"script",instance:S,count:1,state:null},f.set(x,S))}}function Sm(i,o,c,f){var x=(x=Et.current)?ad(x):null;if(!x)throw Error(P(446));switch(i){case"meta":case"title":return null;case"style":return typeof c.precedence=="string"&&typeof c.href=="string"?(o=a(c.href),c=un(x).hoistableStyles,f=c.get(o),f||(f={type:"style",instance:null,count:0,state:null},c.set(o,f)),f):{type:"void",instance:null,count:0,state:null};case"link":if(c.rel==="stylesheet"&&typeof c.href=="string"&&typeof c.precedence=="string"){i=a(c.href);var S=un(x).hoistableStyles,j=S.get(i);if(j||(x=x.ownerDocument||x,j={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},S.set(i,j),(S=x.querySelector(t(i)))&&!S._p&&(j.instance=S,j.state.loading=5),Kn.has(i)||(c={rel:"preload",as:"style",href:c.href,crossOrigin:c.crossOrigin,integrity:c.integrity,media:c.media,hrefLang:c.hrefLang,referrerPolicy:c.referrerPolicy},Kn.set(i,c),S||s(x,i,c,j.state))),o&&f===null)throw Error(P(528,""));return j}if(o&&f!==null)throw Error(P(529,""));return null;case"script":return o=c.async,c=c.src,typeof c=="string"&&o&&typeof o!="function"&&typeof o!="symbol"?(o=u(c),c=un(x).hoistableScripts,f=c.get(o),f||(f={type:"script",instance:null,count:0,state:null},c.set(o,f)),f):{type:"void",instance:null,count:0,state:null};default:throw Error(P(444,i))}}function a(i){return'href="'+Da(i)+'"'}function t(i){return'link[rel="stylesheet"]['+i+"]"}function r(i){return Je({},i,{"data-precedence":i.precedence,precedence:null})}function s(i,o,c,f){i.querySelector('link[rel="preload"][as="style"]['+o+"]")?f.loading=1:(o=i.createElement("link"),f.preload=o,o.addEventListener("load",function(){return f.loading|=1}),o.addEventListener("error",function(){return f.loading|=2}),Nr(o,"link",c),pr(o),i.head.appendChild(o))}function u(i){return'[src="'+Da(i)+'"]'}function m(i){return"script[async]"+i}function _(i,o,c){if(o.count++,o.instance===null)switch(o.type){case"style":var f=i.querySelector('style[data-href~="'+Da(c.href)+'"]');if(f)return o.instance=f,pr(f),f;var x=Je({},c,{"data-href":c.href,"data-precedence":c.precedence,href:null,precedence:null});return f=(i.ownerDocument||i).createElement("style"),pr(f),Nr(f,"style",x),y(f,c.precedence,i),o.instance=f;case"stylesheet":x=a(c.href);var S=i.querySelector(t(x));if(S)return o.state.loading|=4,o.instance=S,pr(S),S;f=r(c),(x=Kn.get(x))&&b(f,x),S=(i.ownerDocument||i).createElement("link"),pr(S);var j=S;return j._p=new Promise(function(q,he){j.onload=q,j.onerror=he}),Nr(S,"link",f),o.state.loading|=4,y(S,c.precedence,i),o.instance=S;case"script":return S=u(c.src),(x=i.querySelector(m(S)))?(o.instance=x,pr(x),x):(f=c,(x=Kn.get(S))&&(f=Je({},c),T(f,x)),i=i.ownerDocument||i,x=i.createElement("script"),pr(x),Nr(x,"link",f),i.head.appendChild(x),o.instance=x);case"void":return null;default:throw Error(P(443,o.type))}else o.type==="stylesheet"&&(o.state.loading&4)===0&&(f=o.instance,o.state.loading|=4,y(f,c.precedence,i));return o.instance}function y(i,o,c){for(var f=c.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),x=f.length?f[f.length-1]:null,S=x,j=0;j<f.length;j++){var q=f[j];if(q.dataset.precedence===o)S=q;else if(S!==x)break}S?S.parentNode.insertBefore(i,S.nextSibling):(o=c.nodeType===9?c.head:c,o.insertBefore(i,o.firstChild))}function b(i,o){i.crossOrigin==null&&(i.crossOrigin=o.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=o.referrerPolicy),i.title==null&&(i.title=o.title)}function T(i,o){i.crossOrigin==null&&(i.crossOrigin=o.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=o.referrerPolicy),i.integrity==null&&(i.integrity=o.integrity)}var E=null;function L(i,o,c){if(E===null){var f=new Map,x=E=new Map;x.set(c,f)}else x=E,f=x.get(c),f||(f=new Map,x.set(c,f));if(f.has(i))return f;for(f.set(i,null),c=c.getElementsByTagName(i),x=0;x<c.length;x++){var S=c[x];if(!(S[Mt]||S[yi]||i==="link"&&S.getAttribute("rel")==="stylesheet")&&S.namespaceURI!=="http://www.w3.org/2000/svg"){var j=S.getAttribute(o)||"";j=i+j;var q=f.get(j);q?q.push(S):f.set(j,[S])}}return f}function V(i,o,c){i=i.ownerDocument||i,i.head.insertBefore(c,o==="title"?i.querySelector("head > title"):null)}function $(i,o,c){if(c===1||o.itemProp!=null)return!1;switch(i){case"meta":case"title":return!0;case"style":if(typeof o.precedence!="string"||typeof o.href!="string"||o.href==="")break;return!0;case"link":if(typeof o.rel!="string"||typeof o.href!="string"||o.href===""||o.onLoad||o.onError)break;switch(o.rel){case"stylesheet":return i=o.disabled,typeof o.precedence=="string"&&i==null;default:return!0}case"script":if(o.async&&typeof o.async!="function"&&typeof o.async!="symbol"&&!o.onLoad&&!o.onError&&o.src&&typeof o.src=="string")return!0}return!1}function N(i){return!(i.type==="stylesheet"&&(i.state.loading&3)===0)}function G(i,o,c,f){if(c.type==="stylesheet"&&(typeof f.media!="string"||matchMedia(f.media).matches!==!1)&&(c.state.loading&4)===0){if(c.instance===null){var x=a(f.href),S=o.querySelector(t(x));if(S){o=S._p,o!==null&&typeof o=="object"&&typeof o.then=="function"&&(i.count++,i=_e.bind(i),o.then(i,i)),c.state.loading|=4,c.instance=S,pr(S);return}S=o.ownerDocument||o,f=r(f),(x=Kn.get(x))&&b(f,x),S=S.createElement("link"),pr(S);var j=S;j._p=new Promise(function(q,he){j.onload=q,j.onerror=he}),Nr(S,"link",f),c.instance=S}i.stylesheets===null&&(i.stylesheets=new Map),i.stylesheets.set(c,o),(o=c.state.preload)&&(c.state.loading&3)===0&&(i.count++,c=_e.bind(i),o.addEventListener("load",c),o.addEventListener("error",c))}}var Q=0;function ee(i,o){return i.stylesheets&&i.count===0&&ce(i,i.stylesheets),0<i.count||0<i.imgCount?function(c){var f=setTimeout(function(){if(i.stylesheets&&ce(i,i.stylesheets),i.unsuspend){var S=i.unsuspend;i.unsuspend=null,S()}},6e4+o);0<i.imgBytes&&Q===0&&(Q=62500*fm());var x=setTimeout(function(){if(i.waitingForImages=!1,i.count===0&&(i.stylesheets&&ce(i,i.stylesheets),i.unsuspend)){var S=i.unsuspend;i.unsuspend=null,S()}},(i.imgBytes>Q?50:800)+o);return i.unsuspend=c,function(){i.unsuspend=null,clearTimeout(f),clearTimeout(x)}}:null}function _e(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)ce(this,this.stylesheets);else if(this.unsuspend){var i=this.unsuspend;this.unsuspend=null,i()}}}var ne=null;function ce(i,o){i.stylesheets=null,i.unsuspend!==null&&(i.count++,ne=new Map,o.forEach(Te,i),ne=null,_e.call(i))}function Te(i,o){if(!(o.state.loading&4)){var c=ne.get(i);if(c)var f=c.get(null);else{c=new Map,ne.set(i,c);for(var x=i.querySelectorAll("link[data-precedence],style[data-precedence]"),S=0;S<x.length;S++){var j=x[S];(j.nodeName==="LINK"||j.getAttribute("media")!=="not all")&&(c.set(j.dataset.precedence,j),f=j)}f&&c.set(null,f)}x=o.instance,j=x.getAttribute("data-precedence"),S=c.get(j)||f,S===f&&c.set(null,x),c.set(j,x),this.count++,f=_e.bind(this),x.addEventListener("load",f),x.addEventListener("error",f),S?S.parentNode.insertBefore(x,S.nextSibling):(i=i.nodeType===9?i.head:i,i.insertBefore(x,i.firstChild)),o.state.loading|=4}}var Le={$$typeof:oi,Provider:null,Consumer:null,_currentValue:zt,_currentValue2:zt,_threadCount:0};function Ge(i,o,c,f,x,S,j,q,he){this.tag=1,this.containerInfo=i,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=ci(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ci(0),this.hiddenUpdates=ci(null),this.identifierPrefix=f,this.onUncaughtError=x,this.onCaughtError=S,this.onRecoverableError=j,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=he,this.incompleteTransitions=new Map}function rt(i,o,c,f,x,S,j,q,he,Pe,$e,qe){return i=new Ge(i,o,c,j,he,Pe,$e,qe,q),o=1,S===!0&&(o|=24),S=Ha(3,null,null,o),i.current=S,S.stateNode=i,o=ca(),o.refCount++,i.pooledCache=o,o.refCount++,S.memoizedState={element:f,isDehydrated:c,cache:o},Nn(S),i}function We(i){return i?(i=Nt,i):Nt}function tt(i,o,c,f,x,S){x=We(x),f.context===null?f.context=x:f.pendingContext=x,f=Ts(o),f.payload={element:c},S=S===void 0?null:S,S!==null&&(f.callback=S),c=Un(i,f,o),c!==null&&(ja(c,i,o),Ms(c,i,o))}function mt(i,o){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var c=i.retryLane;i.retryLane=c!==0&&c<o?c:o}}function et(i,o){mt(i,o),(i=i.alternate)&&mt(i,o)}function it(i){if(i.tag===13||i.tag===31){var o=mn(i,67108864);o!==null&&ja(o,i,67108864),et(i,67108864)}}function Ve(i){if(i.tag===13||i.tag===31){var o=xn();o=lr(o);var c=mn(i,o);c!==null&&ja(c,i,o),et(i,o)}}var bt=!0;function Pt(i,o,c,f){var x=je.T;je.T=null;var S=nt.p;try{nt.p=2,ht(i,o,c,f)}finally{nt.p=S,je.T=x}}function vt(i,o,c,f){var x=je.T;je.T=null;var S=nt.p;try{nt.p=8,ht(i,o,c,f)}finally{nt.p=S,je.T=x}}function ht(i,o,c,f){if(bt){var x=Wt(f);if(x===null)ep(i,o,f,Xi,c),Cn(i,f);else if(an(x,i,o,c,f))f.stopPropagation();else if(Cn(i,f),o&4&&-1<Va.indexOf(i)){for(;x!==null;){var S=kn(x);if(S!==null)switch(S.tag){case 3:if(S=S.stateNode,S.current.memoizedState.isDehydrated){var j=be(S.pendingLanes);if(j!==0){var q=S;for(q.pendingLanes|=2,q.entangledLanes|=2;j;){var he=1<<31-de(j);q.entanglements[1]|=he,j&=~he}Go(S),(fi&6)===0&&(Jc=Zr()+500,tu(0))}}break;case 31:case 13:q=mn(S,2),q!==null&&ja(q,S,2),Hd(),et(S,2)}if(S=Wt(f),S===null&&ep(i,o,f,Xi,c),S===x)break;x=S}x!==null&&f.stopPropagation()}else ep(i,o,f,null,c)}}function Wt(i){return i=Fs(i),wr(i)}var Xi=null;function wr(i){if(Xi=null,i=Pn(i),i!==null){var o=X(i);if(o===null)i=null;else{var c=o.tag;if(c===13){if(i=M(o),i!==null)return i;i=null}else if(c===31){if(i=d(o),i!==null)return i;i=null}else if(c===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;i=null}else o!==i&&(i=null)}}return Xi=i,null}function ra(i){switch(i){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Tl()){case Na:return 2;case pc:return 8;case wo:case Co:return 32;case pe:return 268435456;default:return 32}default:return 32}}var rn=!1,Dr=null,rr=null,wi=null,_r=new Map,Cr=new Map,ar=[],Va="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Cn(i,o){switch(i){case"focusin":case"focusout":Dr=null;break;case"dragenter":case"dragleave":rr=null;break;case"mouseover":case"mouseout":wi=null;break;case"pointerover":case"pointerout":_r.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":Cr.delete(o.pointerId)}}function vr(i,o,c,f,x,S){return i===null||i.nativeEvent!==S?(i={blockedOn:o,domEventName:c,eventSystemFlags:f,nativeEvent:S,targetContainers:[x]},o!==null&&(o=kn(o),o!==null&&it(o)),i):(i.eventSystemFlags|=f,o=i.targetContainers,x!==null&&o.indexOf(x)===-1&&o.push(x),i)}function an(i,o,c,f,x){switch(o){case"focusin":return Dr=vr(Dr,i,o,c,f,x),!0;case"dragenter":return rr=vr(rr,i,o,c,f,x),!0;case"mouseover":return wi=vr(wi,i,o,c,f,x),!0;case"pointerover":var S=x.pointerId;return _r.set(S,vr(_r.get(S)||null,i,o,c,f,x)),!0;case"gotpointercapture":return S=x.pointerId,Cr.set(S,vr(Cr.get(S)||null,i,o,c,f,x)),!0}return!1}function Lr(i){var o=Pn(i.target);if(o!==null){var c=X(o);if(c!==null){if(o=c.tag,o===13){if(o=M(c),o!==null){i.blockedOn=o,sa(i.priority,function(){Ve(c)});return}}else if(o===31){if(o=d(c),o!==null){i.blockedOn=o,sa(i.priority,function(){Ve(c)});return}}else if(o===3&&c.stateNode.current.memoizedState.isDehydrated){i.blockedOn=c.tag===3?c.stateNode.containerInfo:null;return}}}i.blockedOn=null}function Sr(i){if(i.blockedOn!==null)return!1;for(var o=i.targetContainers;0<o.length;){var c=Wt(i.nativeEvent);if(c===null){c=i.nativeEvent;var f=new c.constructor(c.type,c);cu=f,c.target.dispatchEvent(f),cu=null}else return o=kn(c),o!==null&&it(o),i.blockedOn=c,!1;o.shift()}return!0}function Ur(i,o,c){Sr(i)&&c.delete(o)}function Ir(){rn=!1,Dr!==null&&Sr(Dr)&&(Dr=null),rr!==null&&Sr(rr)&&(rr=null),wi!==null&&Sr(wi)&&(wi=null),_r.forEach(Ur),Cr.forEach(Ur)}function Pi(i,o){i.blockedOn===o&&(i.blockedOn=null,rn||(rn=!0,R.unstable_scheduleCallback(R.unstable_NormalPriority,Ir)))}var Sn=null;function ru(i){Sn!==i&&(Sn=i,R.unstable_scheduleCallback(R.unstable_NormalPriority,function(){Sn===i&&(Sn=null);for(var o=0;o<i.length;o+=3){var c=i[o],f=i[o+1],x=i[o+2];if(typeof f!="function"){if(wr(f||c)===null)continue;break}var S=kn(c);S!==null&&(i.splice(o,3),o-=3,fo(S,{pending:!0,data:x,method:c.method,action:f},f,x))}}))}function $a(i){function o(he){return Pi(he,i)}Dr!==null&&Pi(Dr,i),rr!==null&&Pi(rr,i),wi!==null&&Pi(wi,i),_r.forEach(o),Cr.forEach(o);for(var c=0;c<ar.length;c++){var f=ar[c];f.blockedOn===i&&(f.blockedOn=null)}for(;0<ar.length&&(c=ar[0],c.blockedOn===null);)Lr(c),c.blockedOn===null&&ar.shift();if(c=(i.ownerDocument||i).$$reactFormReplay,c!=null)for(f=0;f<c.length;f+=3){var x=c[f],S=c[f+1],j=x[Xe]||null;if(typeof S=="function")j||ru(c);else if(j){var q=null;if(S&&S.hasAttribute("formAction")){if(x=S,j=S[Xe]||null)q=j.formAction;else if(wr(x)!==null)continue}else q=j.action;typeof q=="function"?c[f+1]=q:(c.splice(f,3),f-=3),ru(c)}}}function Tm(){function i(S){S.canIntercept&&S.info==="react-transition"&&S.intercept({handler:function(){return new Promise(function(j){return x=j})},focusReset:"manual",scroll:"manual"})}function o(){x!==null&&(x(),x=null),f||setTimeout(c,20)}function c(){if(!f&&!navigation.transition){var S=navigation.currentEntry;S&&S.url!=null&&navigation.navigate(S.url,{state:S.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var f=!1,x=null;return navigation.addEventListener("navigate",i),navigation.addEventListener("navigatesuccess",o),navigation.addEventListener("navigateerror",o),setTimeout(c,100),function(){f=!0,navigation.removeEventListener("navigate",i),navigation.removeEventListener("navigatesuccess",o),navigation.removeEventListener("navigateerror",o),x!==null&&(x(),x=null)}}}function cc(i){this._internalRoot=i}Bs.prototype.render=cc.prototype.render=function(i){var o=this._internalRoot;if(o===null)throw Error(P(409));var c=o.current,f=xn();tt(c,f,i,o,null,null)},Bs.prototype.unmount=cc.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var o=i.containerInfo;tt(i.current,2,null,i,null,null),Hd(),o[Lt]=null}};function Bs(i){this._internalRoot=i}Bs.prototype.unstable_scheduleHydration=function(i){if(i){var o=er();i={blockedOn:null,target:i,priority:o};for(var c=0;c<ar.length&&o!==0&&o<ar[c].priority;c++);ar.splice(c,0,i),c===0&&Lr(i)}};var au=A.version;if(au!=="19.2.0")throw Error(P(527,au,"19.2.0"));nt.findDOMNode=function(i){var o=i._reactInternals;if(o===void 0)throw typeof i.render=="function"?Error(P(188)):(i=Object.keys(i).join(","),Error(P(268,i)));return i=ke(o),i=i!==null?ot(i):null,i=i===null?null:i.stateNode,i};var ih={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:je,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var xl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!xl.isDisabled&&xl.supportsFiber)try{Y=xl.inject(ih),re=xl}catch{}}return Cf.createRoot=function(i,o){if(!D(i))throw Error(P(299));var c=!1,f="",x=Ap,S=Vf,j=kd;return o!=null&&(o.unstable_strictMode===!0&&(c=!0),o.identifierPrefix!==void 0&&(f=o.identifierPrefix),o.onUncaughtError!==void 0&&(x=o.onUncaughtError),o.onCaughtError!==void 0&&(S=o.onCaughtError),o.onRecoverableError!==void 0&&(j=o.onRecoverableError)),o=rt(i,1,!1,null,null,c,f,null,x,S,j,Tm),i[Lt]=o.current,Jd(i),new cc(o)},Cf.hydrateRoot=function(i,o,c){if(!D(i))throw Error(P(299));var f=!1,x="",S=Ap,j=Vf,q=kd,he=null;return c!=null&&(c.unstable_strictMode===!0&&(f=!0),c.identifierPrefix!==void 0&&(x=c.identifierPrefix),c.onUncaughtError!==void 0&&(S=c.onUncaughtError),c.onCaughtError!==void 0&&(j=c.onCaughtError),c.onRecoverableError!==void 0&&(q=c.onRecoverableError),c.formState!==void 0&&(he=c.formState)),o=rt(i,1,!0,o,c??null,f,x,he,S,j,q,Tm),o.context=We(null),c=o.current,f=xn(),f=lr(f),x=Ts(f),x.callback=null,Un(c,x,f),c=f,o.current.lanes=c,or(o,c),Go(o),i[Lt]=o.current,Jd(i),new Bs(o)},Cf.version="19.2.0",Cf}var Jg;function h_(){if(Jg)return Ag.exports;Jg=1;function R(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(R)}catch(A){console.error(A)}}return R(),Ag.exports=u_(),Ag.exports}var d_=h_();/**
 * @license
 * Copyright 2018 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const p_=new Set(["children","localName","ref","style","className"]),e1=new WeakMap,t1=(R,A,B,P,D)=>{const X=D?.[A];X===void 0?(R[A]=B,B==null&&A in HTMLElement.prototype&&R.removeAttribute(A)):B!==P&&((M,d,ye)=>{let ke=e1.get(M);ke===void 0&&e1.set(M,ke=new Map);let ot=ke.get(d);ye!==void 0?ot===void 0?(ke.set(d,ot={handleEvent:ye}),M.addEventListener(d,ot)):ot.handleEvent=ye:ot!==void 0&&(ke.delete(d),M.removeEventListener(d,ot))})(R,X,B)},Jo=({react:R,tagName:A,elementClass:B,events:P,displayName:D})=>{const X=new Set(Object.keys(P??{})),M=R.forwardRef(((d,ye)=>{const ke=R.useRef(new Map),ot=R.useRef(null),Je={},xt={};for(const[Ot,dt]of Object.entries(d))p_.has(Ot)?Je[Ot==="className"?"class":Ot]=dt:X.has(Ot)||Ot in B.prototype?xt[Ot]=dt:Je[Ot]=dt;return R.useLayoutEffect((()=>{if(ot.current===null)return;const Ot=new Map;for(const dt in xt)t1(ot.current,dt,d[dt],ke.current.get(dt),P),ke.current.delete(dt),Ot.set(dt,d[dt]);for(const[dt,Ce]of ke.current)t1(ot.current,dt,void 0,Ce,P);ke.current=Ot})),R.useLayoutEffect((()=>{ot.current?.removeAttribute("defer-hydration")}),[]),Je.suppressHydrationWarning=!0,R.createElement(A,{...Je,ref:R.useCallback((Ot=>{ot.current=Ot,typeof ye=="function"?ye(Ot):ye!==null&&(ye.current=Ot)}),[ye])})}));return M.displayName=D??B.name,M};/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Am=globalThis,Rg=Am.ShadowRoot&&(Am.ShadyCSS===void 0||Am.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,Bg=Symbol(),i1=new WeakMap;let g1=class{constructor(A,B,P){if(this._$cssResult$=!0,P!==Bg)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=A,this.t=B}get styleSheet(){let A=this.o;const B=this.t;if(Rg&&A===void 0){const P=B!==void 0&&B.length===1;P&&(A=i1.get(B)),A===void 0&&((this.o=A=new CSSStyleSheet).replaceSync(this.cssText),P&&i1.set(B,A))}return A}toString(){return this.cssText}};const ga=R=>new g1(typeof R=="string"?R:R+"",void 0,Bg),Ht=(R,...A)=>{const B=R.length===1?R[0]:A.reduce(((P,D,X)=>P+(M=>{if(M._$cssResult$===!0)return M.cssText;if(typeof M=="number")return M;throw Error("Value passed to 'css' function must be a 'css' function result: "+M+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(D)+R[X+1]),R[0]);return new g1(B,R,Bg)},f_=(R,A)=>{if(Rg)R.adoptedStyleSheets=A.map((B=>B instanceof CSSStyleSheet?B:B.styleSheet));else for(const B of A){const P=document.createElement("style"),D=Am.litNonce;D!==void 0&&P.setAttribute("nonce",D),P.textContent=B.cssText,R.appendChild(P)}},r1=Rg?R=>R:R=>R instanceof CSSStyleSheet?(A=>{let B="";for(const P of A.cssRules)B+=P.cssText;return ga(B)})(R):R;/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const{is:m_,defineProperty:g_,getOwnPropertyDescriptor:__,getOwnPropertyNames:v_,getOwnPropertySymbols:y_,getPrototypeOf:b_}=Object,ng=globalThis,a1=ng.trustedTypes,x_=a1?a1.emptyScript:"",w_=ng.reactiveElementPolyfillSupport,Tf=(R,A)=>R,Pm={toAttribute(R,A){switch(A){case Boolean:R=R?x_:null;break;case Object:case Array:R=R==null?R:JSON.stringify(R)}return R},fromAttribute(R,A){let B=R;switch(A){case Boolean:B=R!==null;break;case Number:B=R===null?null:Number(R);break;case Object:case Array:try{B=JSON.parse(R)}catch{B=null}}return B}},Og=(R,A)=>!m_(R,A),n1={attribute:!0,type:String,converter:Pm,reflect:!1,useDefault:!1,hasChanged:Og};Symbol.metadata??=Symbol("metadata"),ng.litPropertyMetadata??=new WeakMap;let dp=class extends HTMLElement{static addInitializer(A){this._$Ei(),(this.l??=[]).push(A)}static get observedAttributes(){return this.finalize(),this._$Eh&&[...this._$Eh.keys()]}static createProperty(A,B=n1){if(B.state&&(B.attribute=!1),this._$Ei(),this.prototype.hasOwnProperty(A)&&((B=Object.create(B)).wrapped=!0),this.elementProperties.set(A,B),!B.noAccessor){const P=Symbol(),D=this.getPropertyDescriptor(A,P,B);D!==void 0&&g_(this.prototype,A,D)}}static getPropertyDescriptor(A,B,P){const{get:D,set:X}=__(this.prototype,A)??{get(){return this[B]},set(M){this[B]=M}};return{get:D,set(M){const d=D?.call(this);X?.call(this,M),this.requestUpdate(A,d,P)},configurable:!0,enumerable:!0}}static getPropertyOptions(A){return this.elementProperties.get(A)??n1}static _$Ei(){if(this.hasOwnProperty(Tf("elementProperties")))return;const A=b_(this);A.finalize(),A.l!==void 0&&(this.l=[...A.l]),this.elementProperties=new Map(A.elementProperties)}static finalize(){if(this.hasOwnProperty(Tf("finalized")))return;if(this.finalized=!0,this._$Ei(),this.hasOwnProperty(Tf("properties"))){const B=this.properties,P=[...v_(B),...y_(B)];for(const D of P)this.createProperty(D,B[D])}const A=this[Symbol.metadata];if(A!==null){const B=litPropertyMetadata.get(A);if(B!==void 0)for(const[P,D]of B)this.elementProperties.set(P,D)}this._$Eh=new Map;for(const[B,P]of this.elementProperties){const D=this._$Eu(B,P);D!==void 0&&this._$Eh.set(D,B)}this.elementStyles=this.finalizeStyles(this.styles)}static finalizeStyles(A){const B=[];if(Array.isArray(A)){const P=new Set(A.flat(1/0).reverse());for(const D of P)B.unshift(r1(D))}else A!==void 0&&B.push(r1(A));return B}static _$Eu(A,B){const P=B.attribute;return P===!1?void 0:typeof P=="string"?P:typeof A=="string"?A.toLowerCase():void 0}constructor(){super(),this._$Ep=void 0,this.isUpdatePending=!1,this.hasUpdated=!1,this._$Em=null,this._$Ev()}_$Ev(){this._$ES=new Promise((A=>this.enableUpdating=A)),this._$AL=new Map,this._$E_(),this.requestUpdate(),this.constructor.l?.forEach((A=>A(this)))}addController(A){(this._$EO??=new Set).add(A),this.renderRoot!==void 0&&this.isConnected&&A.hostConnected?.()}removeController(A){this._$EO?.delete(A)}_$E_(){const A=new Map,B=this.constructor.elementProperties;for(const P of B.keys())this.hasOwnProperty(P)&&(A.set(P,this[P]),delete this[P]);A.size>0&&(this._$Ep=A)}createRenderRoot(){const A=this.shadowRoot??this.attachShadow(this.constructor.shadowRootOptions);return f_(A,this.constructor.elementStyles),A}connectedCallback(){this.renderRoot??=this.createRenderRoot(),this.enableUpdating(!0),this._$EO?.forEach((A=>A.hostConnected?.()))}enableUpdating(A){}disconnectedCallback(){this._$EO?.forEach((A=>A.hostDisconnected?.()))}attributeChangedCallback(A,B,P){this._$AK(A,P)}_$ET(A,B){const P=this.constructor.elementProperties.get(A),D=this.constructor._$Eu(A,P);if(D!==void 0&&P.reflect===!0){const X=(P.converter?.toAttribute!==void 0?P.converter:Pm).toAttribute(B,P.type);this._$Em=A,X==null?this.removeAttribute(D):this.setAttribute(D,X),this._$Em=null}}_$AK(A,B){const P=this.constructor,D=P._$Eh.get(A);if(D!==void 0&&this._$Em!==D){const X=P.getPropertyOptions(D),M=typeof X.converter=="function"?{fromAttribute:X.converter}:X.converter?.fromAttribute!==void 0?X.converter:Pm;this._$Em=D;const d=M.fromAttribute(B,X.type);this[D]=d??this._$Ej?.get(D)??d,this._$Em=null}}requestUpdate(A,B,P){if(A!==void 0){const D=this.constructor,X=this[A];if(P??=D.getPropertyOptions(A),!((P.hasChanged??Og)(X,B)||P.useDefault&&P.reflect&&X===this._$Ej?.get(A)&&!this.hasAttribute(D._$Eu(A,P))))return;this.C(A,B,P)}this.isUpdatePending===!1&&(this._$ES=this._$EP())}C(A,B,{useDefault:P,reflect:D,wrapped:X},M){P&&!(this._$Ej??=new Map).has(A)&&(this._$Ej.set(A,M??B??this[A]),X!==!0||M!==void 0)||(this._$AL.has(A)||(this.hasUpdated||P||(B=void 0),this._$AL.set(A,B)),D===!0&&this._$Em!==A&&(this._$Eq??=new Set).add(A))}async _$EP(){this.isUpdatePending=!0;try{await this._$ES}catch(B){Promise.reject(B)}const A=this.scheduleUpdate();return A!=null&&await A,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){if(!this.isUpdatePending)return;if(!this.hasUpdated){if(this.renderRoot??=this.createRenderRoot(),this._$Ep){for(const[D,X]of this._$Ep)this[D]=X;this._$Ep=void 0}const P=this.constructor.elementProperties;if(P.size>0)for(const[D,X]of P){const{wrapped:M}=X,d=this[D];M!==!0||this._$AL.has(D)||d===void 0||this.C(D,void 0,X,d)}}let A=!1;const B=this._$AL;try{A=this.shouldUpdate(B),A?(this.willUpdate(B),this._$EO?.forEach((P=>P.hostUpdate?.())),this.update(B)):this._$EM()}catch(P){throw A=!1,this._$EM(),P}A&&this._$AE(B)}willUpdate(A){}_$AE(A){this._$EO?.forEach((B=>B.hostUpdated?.())),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(A)),this.updated(A)}_$EM(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$ES}shouldUpdate(A){return!0}update(A){this._$Eq&&=this._$Eq.forEach((B=>this._$ET(B,this[B]))),this._$EM()}updated(A){}firstUpdated(A){}};dp.elementStyles=[],dp.shadowRootOptions={mode:"open"},dp[Tf("elementProperties")]=new Map,dp[Tf("finalized")]=new Map,w_?.({ReactiveElement:dp}),(ng.reactiveElementVersions??=[]).push("2.1.1");/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const jg=globalThis,km=jg.trustedTypes,o1=km?km.createPolicy("lit-html",{createHTML:R=>R}):void 0,_1="$lit$",rh=`lit$${Math.random().toFixed(9).slice(2)}$`,v1="?"+rh,C_=`<${v1}>`,ld=document,Af=()=>ld.createComment(""),Ef=R=>R===null||typeof R!="object"&&typeof R!="function",Vg=Array.isArray,S_=R=>Vg(R)||typeof R?.[Symbol.iterator]=="function",kg=`[ 	
\f\r]`,Sf=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,s1=/-->/g,l1=/>/g,od=RegExp(`>|${kg}(?:([^\\s"'>=/]+)(${kg}*=${kg}*(?:[^ 	
\f\r"'\`<>=]|("|')|))|$)`,"g"),c1=/'/g,u1=/"/g,y1=/^(?:script|style|textarea|title)$/i,b1=R=>(A,...B)=>({_$litType$:R,strings:A,values:B}),Ye=b1(1),Ct=b1(2),cd=Symbol.for("lit-noChange"),Zt=Symbol.for("lit-nothing"),h1=new WeakMap,sd=ld.createTreeWalker(ld,129);function x1(R,A){if(!Vg(R)||!R.hasOwnProperty("raw"))throw Error("invalid template strings array");return o1!==void 0?o1.createHTML(A):A}const T_=(R,A)=>{const B=R.length-1,P=[];let D,X=A===2?"<svg>":A===3?"<math>":"",M=Sf;for(let d=0;d<B;d++){const ye=R[d];let ke,ot,Je=-1,xt=0;for(;xt<ye.length&&(M.lastIndex=xt,ot=M.exec(ye),ot!==null);)xt=M.lastIndex,M===Sf?ot[1]==="!--"?M=s1:ot[1]!==void 0?M=l1:ot[2]!==void 0?(y1.test(ot[2])&&(D=RegExp("</"+ot[2],"g")),M=od):ot[3]!==void 0&&(M=od):M===od?ot[0]===">"?(M=D??Sf,Je=-1):ot[1]===void 0?Je=-2:(Je=M.lastIndex-ot[2].length,ke=ot[1],M=ot[3]===void 0?od:ot[3]==='"'?u1:c1):M===u1||M===c1?M=od:M===s1||M===l1?M=Sf:(M=od,D=void 0);const Ot=M===od&&R[d+1].startsWith("/>")?" ":"";X+=M===Sf?ye+C_:Je>=0?(P.push(ke),ye.slice(0,Je)+_1+ye.slice(Je)+rh+Ot):ye+rh+(Je===-2?d:Ot)}return[x1(R,X+(R[B]||"<?>")+(A===2?"</svg>":A===3?"</math>":"")),P]};class zf{constructor({strings:A,_$litType$:B},P){let D;this.parts=[];let X=0,M=0;const d=A.length-1,ye=this.parts,[ke,ot]=T_(A,B);if(this.el=zf.createElement(ke,P),sd.currentNode=this.el.content,B===2||B===3){const Je=this.el.content.firstChild;Je.replaceWith(...Je.childNodes)}for(;(D=sd.nextNode())!==null&&ye.length<d;){if(D.nodeType===1){if(D.hasAttributes())for(const Je of D.getAttributeNames())if(Je.endsWith(_1)){const xt=ot[M++],Ot=D.getAttribute(Je).split(rh),dt=/([.?@])?(.*)/.exec(xt);ye.push({type:1,index:X,name:dt[2],strings:Ot,ctor:dt[1]==="."?A_:dt[1]==="?"?E_:dt[1]==="@"?z_:og}),D.removeAttribute(Je)}else Je.startsWith(rh)&&(ye.push({type:6,index:X}),D.removeAttribute(Je));if(y1.test(D.tagName)){const Je=D.textContent.split(rh),xt=Je.length-1;if(xt>0){D.textContent=km?km.emptyScript:"";for(let Ot=0;Ot<xt;Ot++)D.append(Je[Ot],Af()),sd.nextNode(),ye.push({type:2,index:++X});D.append(Je[xt],Af())}}}else if(D.nodeType===8)if(D.data===v1)ye.push({type:2,index:X});else{let Je=-1;for(;(Je=D.data.indexOf(rh,Je+1))!==-1;)ye.push({type:7,index:X}),Je+=rh.length-1}X++}}static createElement(A,B){const P=ld.createElement("template");return P.innerHTML=A,P}}function gp(R,A,B=R,P){if(A===cd)return A;let D=P!==void 0?B._$Co?.[P]:B._$Cl;const X=Ef(A)?void 0:A._$litDirective$;return D?.constructor!==X&&(D?._$AO?.(!1),X===void 0?D=void 0:(D=new X(R),D._$AT(R,B,P)),P!==void 0?(B._$Co??=[])[P]=D:B._$Cl=D),D!==void 0&&(A=gp(R,D._$AS(R,A.values),D,P)),A}class M_{constructor(A,B){this._$AV=[],this._$AN=void 0,this._$AD=A,this._$AM=B}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(A){const{el:{content:B},parts:P}=this._$AD,D=(A?.creationScope??ld).importNode(B,!0);sd.currentNode=D;let X=sd.nextNode(),M=0,d=0,ye=P[0];for(;ye!==void 0;){if(M===ye.index){let ke;ye.type===2?ke=new Of(X,X.nextSibling,this,A):ye.type===1?ke=new ye.ctor(X,ye.name,ye.strings,this,A):ye.type===6&&(ke=new P_(X,this,A)),this._$AV.push(ke),ye=P[++d]}M!==ye?.index&&(X=sd.nextNode(),M++)}return sd.currentNode=ld,D}p(A){let B=0;for(const P of this._$AV)P!==void 0&&(P.strings!==void 0?(P._$AI(A,P,B),B+=P.strings.length-2):P._$AI(A[B])),B++}}class Of{get _$AU(){return this._$AM?._$AU??this._$Cv}constructor(A,B,P,D){this.type=2,this._$AH=Zt,this._$AN=void 0,this._$AA=A,this._$AB=B,this._$AM=P,this.options=D,this._$Cv=D?.isConnected??!0}get parentNode(){let A=this._$AA.parentNode;const B=this._$AM;return B!==void 0&&A?.nodeType===11&&(A=B.parentNode),A}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(A,B=this){A=gp(this,A,B),Ef(A)?A===Zt||A==null||A===""?(this._$AH!==Zt&&this._$AR(),this._$AH=Zt):A!==this._$AH&&A!==cd&&this._(A):A._$litType$!==void 0?this.$(A):A.nodeType!==void 0?this.T(A):S_(A)?this.k(A):this._(A)}O(A){return this._$AA.parentNode.insertBefore(A,this._$AB)}T(A){this._$AH!==A&&(this._$AR(),this._$AH=this.O(A))}_(A){this._$AH!==Zt&&Ef(this._$AH)?this._$AA.nextSibling.data=A:this.T(ld.createTextNode(A)),this._$AH=A}$(A){const{values:B,_$litType$:P}=A,D=typeof P=="number"?this._$AC(A):(P.el===void 0&&(P.el=zf.createElement(x1(P.h,P.h[0]),this.options)),P);if(this._$AH?._$AD===D)this._$AH.p(B);else{const X=new M_(D,this),M=X.u(this.options);X.p(B),this.T(M),this._$AH=X}}_$AC(A){let B=h1.get(A.strings);return B===void 0&&h1.set(A.strings,B=new zf(A)),B}k(A){Vg(this._$AH)||(this._$AH=[],this._$AR());const B=this._$AH;let P,D=0;for(const X of A)D===B.length?B.push(P=new Of(this.O(Af()),this.O(Af()),this,this.options)):P=B[D],P._$AI(X),D++;D<B.length&&(this._$AR(P&&P._$AB.nextSibling,D),B.length=D)}_$AR(A=this._$AA.nextSibling,B){for(this._$AP?.(!1,!0,B);A!==this._$AB;){const P=A.nextSibling;A.remove(),A=P}}setConnected(A){this._$AM===void 0&&(this._$Cv=A,this._$AP?.(A))}}class og{get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}constructor(A,B,P,D,X){this.type=1,this._$AH=Zt,this._$AN=void 0,this.element=A,this.name=B,this._$AM=D,this.options=X,P.length>2||P[0]!==""||P[1]!==""?(this._$AH=Array(P.length-1).fill(new String),this.strings=P):this._$AH=Zt}_$AI(A,B=this,P,D){const X=this.strings;let M=!1;if(X===void 0)A=gp(this,A,B,0),M=!Ef(A)||A!==this._$AH&&A!==cd,M&&(this._$AH=A);else{const d=A;let ye,ke;for(A=X[0],ye=0;ye<X.length-1;ye++)ke=gp(this,d[P+ye],B,ye),ke===cd&&(ke=this._$AH[ye]),M||=!Ef(ke)||ke!==this._$AH[ye],ke===Zt?A=Zt:A!==Zt&&(A+=(ke??"")+X[ye+1]),this._$AH[ye]=ke}M&&!D&&this.j(A)}j(A){A===Zt?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,A??"")}}class A_ extends og{constructor(){super(...arguments),this.type=3}j(A){this.element[this.name]=A===Zt?void 0:A}}class E_ extends og{constructor(){super(...arguments),this.type=4}j(A){this.element.toggleAttribute(this.name,!!A&&A!==Zt)}}class z_ extends og{constructor(A,B,P,D,X){super(A,B,P,D,X),this.type=5}_$AI(A,B=this){if((A=gp(this,A,B,0)??Zt)===cd)return;const P=this._$AH,D=A===Zt&&P!==Zt||A.capture!==P.capture||A.once!==P.once||A.passive!==P.passive,X=A!==Zt&&(P===Zt||D);D&&this.element.removeEventListener(this.name,this,P),X&&this.element.addEventListener(this.name,this,A),this._$AH=A}handleEvent(A){typeof this._$AH=="function"?this._$AH.call(this.options?.host??this.element,A):this._$AH.handleEvent(A)}}class P_{constructor(A,B,P){this.element=A,this.type=6,this._$AN=void 0,this._$AM=B,this.options=P}get _$AU(){return this._$AM._$AU}_$AI(A){gp(this,A)}}const k_=jg.litHtmlPolyfillSupport;k_?.(zf,Of),(jg.litHtmlVersions??=[]).push("3.3.1");const D_=(R,A,B)=>{const P=B?.renderBefore??A;let D=P._$litPart$;if(D===void 0){const X=B?.renderBefore??null;P._$litPart$=D=new Of(A.insertBefore(Af(),X),X,void 0,B??{})}return D._$AI(R),D};/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const $g=globalThis;let Bt=class extends dp{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){const A=super.createRenderRoot();return this.renderOptions.renderBefore??=A.firstChild,A}update(A){const B=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(A),this._$Do=D_(B,this.renderRoot,this.renderOptions)}connectedCallback(){super.connectedCallback(),this._$Do?.setConnected(!0)}disconnectedCallback(){super.disconnectedCallback(),this._$Do?.setConnected(!1)}render(){return cd}};Bt._$litElement$=!0,Bt.finalized=!0,$g.litElementHydrateSupport?.({LitElement:Bt});const L_=$g.litElementPolyfillSupport;L_?.({LitElement:Bt});($g.litElementVersions??=[]).push("4.2.1");/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const I_={attribute:!0,type:String,converter:Pm,reflect:!1,hasChanged:Og},R_=(R=I_,A,B)=>{const{kind:P,metadata:D}=B;let X=globalThis.litPropertyMetadata.get(D);if(X===void 0&&globalThis.litPropertyMetadata.set(D,X=new Map),P==="setter"&&((R=Object.create(R)).wrapped=!0),X.set(B.name,R),P==="accessor"){const{name:M}=B;return{set(d){const ye=A.get.call(this);A.set.call(this,d),this.requestUpdate(M,ye,R)},init(d){return d!==void 0&&this.C(M,void 0,R,d),d}}}if(P==="setter"){const{name:M}=B;return function(d){const ye=this[M];A.call(this,d),this.requestUpdate(M,ye,R)}}throw Error("Unsupported decorator location: "+P)};function Ie(R){return(A,B)=>typeof B=="object"?R_(R,A,B):((P,D,X)=>{const M=D.hasOwnProperty(X);return D.constructor.createProperty(X,P),M?Object.getOwnPropertyDescriptor(D,X):void 0})(R,A,B)}/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const B_=(R,A,B)=>(B.configurable=!0,B.enumerable=!0,Reflect.decorate&&typeof A!="object"&&Object.defineProperty(R,A,B),B);/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */function O_(R){return(A,B)=>{const{slot:P,selector:D}=R??{},X="slot"+(P?`[name=${P}]`:":not([name])");return B_(A,B,{get(){const M=this.renderRoot?.querySelector(X),d=M?.assignedElements(R)??[];return D===void 0?d:d.filter((ye=>ye.matches(D)))}})}}/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const j_={ATTRIBUTE:1},V_=R=>(...A)=>({_$litDirective$:R,values:A});let $_=class{constructor(A){}get _$AU(){return this._$AM._$AU}_$AT(A,B,P){this._$Ct=A,this._$AM=B,this._$Ci=P}_$AS(A,B){return this.update(A,B)}update(A,B){return this.render(...B)}};/**
 * @license
 * Copyright 2018 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Wn=V_(class extends $_{constructor(R){if(super(R),R.type!==j_.ATTRIBUTE||R.name!=="class"||R.strings?.length>2)throw Error("`classMap()` can only be used in the `class` attribute and must be the only part in the attribute.")}render(R){return" "+Object.keys(R).filter((A=>R[A])).join(" ")+" "}update(R,[A]){if(this.st===void 0){this.st=new Set,R.strings!==void 0&&(this.nt=new Set(R.strings.join(" ").split(/\s/).filter((P=>P!==""))));for(const P in A)A[P]&&!this.nt?.has(P)&&this.st.add(P);return this.render(A)}const B=R.element.classList;for(const P of this.st)P in A||(B.remove(P),this.st.delete(P));for(const P in A){const D=!!A[P];D===this.st.has(P)||this.nt?.has(P)||(D?(B.add(P),this.st.add(P)):(B.remove(P),this.st.delete(P)))}return cd}}),F_=Ht`
          * {
            -webkit-tap-highlight-color: transparent;
          }

* {
  box-sizing: border-box;
}

.wrapper {
  height: var(--app-components-topbar-touch-target-size);
  padding: 0px var(--app-components-topbar-margin-global);
  user-select: none;

  width: 100%;
  display: flex;
  align-items: center;
  justify-content: space-between;
}

.wrapper:not(.inactive) {
    background: var(--container-global-color, #fcfcfc);
    box-shadow: var(--shadow-flat);
  }

.wrapper.tall {
    height: var(--app-components-topbar-touch-target-tall);
  }

.group {
  display: flex;
  align-items: center;
}

.group.right {
    justify-content: flex-end;
    flex-grow: 1;
  }

.settings .group.left > * {
    margin-right: 0;
    margin-left: 0;
  }

.group.left .title {
      padding-right: var(--app-components-topbar-label-spacing);
    }

.inactive .group.left {
    padding-left: var(--app-components-topbar-padding-left-small);
  }

.group.left .menu-button {
    margin-right: 0;
    margin-left: 0;
  }

.wide:is(.group.left .menu-button) {
      margin-left: 8px;
      margin-right: 8px;
    }

.group .app-icon {
    padding-right: var(--app-components-topbar-label-spacing);
    width: var(--app-components-topbar-icon-size);
    height: var(--app-components-topbar-icon-size);
    box-sizing: content-box;
    color: var(--element-neutral-color);
  }

.alert-container {
  display: flex;
  flex-grow: 1;
  gap: var(--app-components-topbar-label-spacing);
  align-items: center;
  justify-content: right;
}

.title {
  color: var(--element-active-color, #1a1a1a);
  /* UI/Body */
  font-feature-settings: 'liga' off, 'clig' off;
  font-family: var(--font-family-main);
  font-size: var(--global-typography-ui-body-font-size);
  font-style: normal;
  font-weight: var(--global-typography-ui-body-font-weight);
  line-height: var(--global-typography-ui-body-line-height);
  text-decoration: none;
}

.page-name {
  color: var(--element-active-color, #1a1a1a);
  /* UI/Body-Active */
  font-feature-settings: 'liga' off, 'clig' off;
  font-family: var(--font-family-main);
  font-size: var(--global-typography-ui-body-active-font-size);
  font-style: normal;
  font-weight: var(--font-weight-bold);
  line-height: var(--global-typography-ui-body-active-line-height);
}

.left-more-button {
  display: none;
}

.divider {
  width: 1px;
  height: var(--ui-components-divider-height-small);
  background: var(--border-divider-color);
}
`,N_=Ht`
          * {
            -webkit-tap-highlight-color: transparent;
          }

* {
  box-sizing: border-box;
}

.wrapper {
  background: transparent;
  position: relative;
  min-height: var(--ui-components-button-touch-target-size);
  min-width: var(--ui-components-button-touch-target-size);
  padding: 0;

  appearance: none;
  border: none;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
}

.wrapper .visible-wrapper {
    position: relative;
    height: var(--ui-components-icon-button-visual-target-size);
    width: var(--ui-components-icon-button-visual-target-size);
    border-radius: var(--ui-components-button-border-radius-top-left)
      var(--ui-components-button-border-radius-top-right)
      var(--ui-components-button-border-radius-bottom-right)
      var(--ui-components-button-border-radius-bottom-left);
    display: flex;
    align-items: center;
    justify-content: center;
  }

.wrapper.corner-left {
    align-items: flex-end;
    padding-right: 0;
  }

.wrapper.corner-left .visible-wrapper {
      width: calc(
        var(--ui-components-icon-button-visual-target-size) +
          var(--ui-components-icon-button-padding-right)
      );
      border-top-right-radius: 0;
      border-bottom-right-radius: 0;
    }

.wrapper.corner-right {
    align-items: flex-start;
    padding-left: 0;
  }

.wrapper.corner-right .visible-wrapper {
      width: calc(
        var(--ui-components-icon-button-visual-target-size) +
          var(--ui-components-icon-button-padding-left)
      );
      border-top-left-radius: 0;
      border-bottom-left-radius: 0;
    }

.wrapper.corner-left.corner-right .visible-wrapper {
      width: var(--ui-components-button-touch-target-size);
    }

.wrapper.wide .visible-wrapper {
    width: var(--ui-components-button-touch-target-size);
  }

.wrapper .icon {
    width: var(--ui-components-icon-button-icon-size);
    height: var(--ui-components-icon-button-icon-size);
  }

.wrapper .progress-spinner {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    display: flex;
    align-items: center;
    justify-content: center;
  }

.wrapper.has-label {
    padding: var(--ui-components-icon-button-padding-vertical) 0;
  }

.wrapper .label {
    font-feature-settings: 'liga' off, 'clig' off;
    font-family: var(--font-family-main);
    font-size: var(--global-typography-ui-label-font-size);
    font-style: normal;
    font-weight: var(--global-typography-ui-label-font-weight);
    line-height: var(--global-typography-ui-label-line-height);
  }

.wrapper.variant-normal {
            cursor: pointer;
}

.wrapper.variant-normal:focus {
            outline: none;
}

.wrapper.variant-normal .visible-wrapper {
            border-color: var(--normal-enabled-border-color);
            background-color: var(--normal-enabled-background-color);
            border-width: 1px;
            border-style: solid;
            cursor: pointer;
            --base-border-color: var(--normal-enabled-border-color);
            --base-background-color: var(--normal-enabled-background-color);
}

.wrapper.variant-normal.activated .visible-wrapper {
            border-color: var(--normal-activated-border-color);
            background-color: var(--normal-activated-background-color);
            --base-border-color: var(--normal-activated-border-color);
            --base-background-color: var(--normal-activated-background-color);
}

@media (hover:hover) {

.wrapper.variant-normal:hover .visible-wrapper {
                        border-color: color-mix(in srgb, var(--normal-hover-border-color) calc(var(--obc-can-hover) * 100%), var(--base-border-color));
                        background-color: color-mix(in srgb, var(--normal-hover-background-color) calc(var(--obc-can-hover) * 100%), var(--base-background-color));
            }
}

.wrapper.variant-normal:active .visible-wrapper {
            border-color: var(--normal-pressed-border-color);
            background-color: var(--normal-pressed-background-color);
}

.wrapper.variant-normal:focus-visible .visible-wrapper {
            outline-color: var(--border-focus-color);
            outline-width: var(--global-size-spacing-border-weight-focusframe);
            outline-style: solid;
            border-color: var(--container-global-color);
            z-index: 1;
}

.wrapper.variant-normal:disabled .visible-wrapper {
            border-color: var(--normal-disabled-border-color);
            background-color: var(--normal-disabled-background-color);
            cursor: not-allowed;
            color: var(--on-normal-disabled-color);
}

.wrapper.variant-normal.disabled .visible-wrapper {
            border-color: var(--normal-disabled-border-color);
            background-color: var(--normal-disabled-background-color);
            cursor: not-allowed;
            color: var(--on-normal-disabled-color);
}

.wrapper.variant-normal:disabled {
            cursor: not-allowed;
}

.wrapper.variant-normal.disabled {
            cursor: not-allowed;
}

.wrapper.variant-normal {
    color: var(--on-normal-neutral-color);
}

.wrapper.variant-normal.active-color {
      color: var(--on-normal-active-color);
    }

.wrapper.variant-normal.activated .visible-wrapper {
      border-color: var(--normal-pressed-border-color);
      background-color: var(--normal-pressed-background-color);
    }

.wrapper.variant-flat {
            cursor: pointer;
}

.wrapper.variant-flat:focus {
            outline: none;
}

.wrapper.variant-flat .visible-wrapper {
            border-color: var(--flat-enabled-border-color);
            background-color: var(--flat-enabled-background-color);
            border-width: 1px;
            border-style: solid;
            cursor: pointer;
            --base-border-color: var(--flat-enabled-border-color);
            --base-background-color: var(--flat-enabled-background-color);
}

.wrapper.variant-flat.activated .visible-wrapper {
            border-color: var(--flat-activated-border-color);
            background-color: var(--flat-activated-background-color);
            --base-border-color: var(--flat-activated-border-color);
            --base-background-color: var(--flat-activated-background-color);
}

@media (hover:hover) {

.wrapper.variant-flat:hover .visible-wrapper {
                        border-color: color-mix(in srgb, var(--flat-hover-border-color) calc(var(--obc-can-hover) * 100%), var(--base-border-color));
                        background-color: color-mix(in srgb, var(--flat-hover-background-color) calc(var(--obc-can-hover) * 100%), var(--base-background-color));
            }
}

.wrapper.variant-flat:active .visible-wrapper {
            border-color: var(--flat-pressed-border-color);
            background-color: var(--flat-pressed-background-color);
}

.wrapper.variant-flat:focus-visible .visible-wrapper {
            outline-color: var(--border-focus-color);
            outline-width: var(--global-size-spacing-border-weight-focusframe);
            outline-style: solid;
            border-color: var(--container-global-color);
            z-index: 1;
}

.wrapper.variant-flat:disabled .visible-wrapper {
            border-color: var(--flat-disabled-border-color);
            background-color: var(--flat-disabled-background-color);
            cursor: not-allowed;
            color: var(--on-flat-disabled-color);
}

.wrapper.variant-flat.disabled .visible-wrapper {
            border-color: var(--flat-disabled-border-color);
            background-color: var(--flat-disabled-background-color);
            cursor: not-allowed;
            color: var(--on-flat-disabled-color);
}

.wrapper.variant-flat:disabled {
            cursor: not-allowed;
}

.wrapper.variant-flat.disabled {
            cursor: not-allowed;
}

.wrapper.variant-flat {
    color: var(--on-flat-neutral-color);
}

.wrapper.variant-flat.active-color {
      color: var(--on-flat-active-color);
    }

.wrapper.variant-raised {
            cursor: pointer;
}

.wrapper.variant-raised:focus {
            outline: none;
}

.wrapper.variant-raised .visible-wrapper {
            border-color: var(--raised-enabled-border-color);
            background-color: var(--raised-enabled-background-color);
            border-width: 1px;
            border-style: solid;
            cursor: pointer;
            --base-border-color: var(--raised-enabled-border-color);
            --base-background-color: var(--raised-enabled-background-color);
}

.wrapper.variant-raised.activated .visible-wrapper {
            border-color: var(--raised-activated-border-color);
            background-color: var(--raised-activated-background-color);
            --base-border-color: var(--raised-activated-border-color);
            --base-background-color: var(--raised-activated-background-color);
}

@media (hover:hover) {

.wrapper.variant-raised:hover .visible-wrapper {
                        border-color: color-mix(in srgb, var(--raised-hover-border-color) calc(var(--obc-can-hover) * 100%), var(--base-border-color));
                        background-color: color-mix(in srgb, var(--raised-hover-background-color) calc(var(--obc-can-hover) * 100%), var(--base-background-color));
            }
}

.wrapper.variant-raised:active .visible-wrapper {
            border-color: var(--raised-pressed-border-color);
            background-color: var(--raised-pressed-background-color);
}

.wrapper.variant-raised:focus-visible .visible-wrapper {
            outline-color: var(--border-focus-color);
            outline-width: var(--global-size-spacing-border-weight-focusframe);
            outline-style: solid;
            border-color: var(--container-global-color);
            z-index: 1;
}

.wrapper.variant-raised:disabled .visible-wrapper {
            border-color: var(--raised-disabled-border-color);
            background-color: var(--raised-disabled-background-color);
            cursor: not-allowed;
            color: var(--on-raised-disabled-color);
}

.wrapper.variant-raised.disabled .visible-wrapper {
            border-color: var(--raised-disabled-border-color);
            background-color: var(--raised-disabled-background-color);
            cursor: not-allowed;
            color: var(--on-raised-disabled-color);
}

.wrapper.variant-raised:disabled {
            cursor: not-allowed;
}

.wrapper.variant-raised.disabled {
            cursor: not-allowed;
}

.wrapper.variant-raised {
    color: var(--on-raised-active-color);
}

.wrapper.variant-raised.active-color {
      color: var(--on-raised-active-color);
    }
`,Gt=R=>(A,B)=>{if(B!==void 0)B.addInitializer(()=>{customElements.get(R)||customElements.define(R,A)});else{if(customElements.get(R))return;customElements.define(R,A)}};var U_=Object.defineProperty,Z_=Object.getOwnPropertyDescriptor,dc=(R,A,B,P)=>{for(var D=P>1?void 0:P?Z_(A,B):A,X=R.length-1,M;X>=0;X--)(M=R[X])&&(D=(P?M(A,B,D):M(D))||D);return P&&D&&U_(A,B,D),D};let js=class extends Bt{constructor(){super(...arguments),this.variant="normal",this.activated=!1,this.cornerLeft=!1,this.cornerRight=!1,this.activeColor=!1,this.wide=!1,this.disabled=!1,this.progress=void 0,this.hasLabel=!1}get progressSpinner(){if(this.progress===void 0)return Zt;if(this.progress===100)return Ye`<div class="progress-spinner">
        <svg
          width="40"
          height="40"
          viewBox="0 0 40 40"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <circle
            cx="20"
            cy="20"
            r="18"
            stroke="#325B9A"
            stroke-width="4"
            fill="none"
          />
        </svg>
      </div>`;const R=this.progress*.95*3.6*Math.PI/180,A=20+18*Math.sin(R),B=20-18*Math.cos(R),P=R>Math.PI?1:0;return Ye`<div class="progress-spinner">
      <svg
        width="40"
        height="40"
        viewBox="0 0 40 40"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
      >
        <circle
          cx="20"
          cy="20"
          r="18"
          stroke="var(--container-backdrop-color)"
          stroke-width="4"
          fill="none"
        />
        <path
          d="M18 2 A18 18 0 ${P} 1 ${A} ${B}"
          stroke="var(--instrument-enhanced-secondary-color)"
          stroke-width="4"
          stroke-linecap="round"
        />
      </svg>
    </div>`}render(){return Ye`
      <button
        class=${Wn({wrapper:!0,["variant-"+this.variant]:!0,activated:this.activated,"corner-left":this.cornerLeft,"corner-right":this.cornerRight,"active-color":this.activeColor,"has-label":this.hasLabel,wide:this.wide,progress:this.progress!==void 0})}
        ?disabled=${this.disabled}
        part="wrapper"
      >
        ${this.progress!==void 0?this.progressSpinner:Zt}
        <div class="visible-wrapper" part="visible-wrapper">
          <div class="icon" part="icon">
            <slot></slot>
          </div>
        </div>
        ${this.hasLabel?Ye`<div class="label" part="label">
              <slot name="label"></slot>
            </div>`:Zt}
      </button>
    `}};js.styles=ga(N_);dc([Ie({type:String})],js.prototype,"variant",2);dc([Ie({type:Boolean})],js.prototype,"activated",2);dc([Ie({type:Boolean})],js.prototype,"cornerLeft",2);dc([Ie({type:Boolean})],js.prototype,"cornerRight",2);dc([Ie({type:Boolean})],js.prototype,"activeColor",2);dc([Ie({type:Boolean})],js.prototype,"wide",2);dc([Ie({type:Boolean})],js.prototype,"disabled",2);dc([Ie({type:Number})],js.prototype,"progress",2);dc([Ie({type:Boolean})],js.prototype,"hasLabel",2);js=dc([Gt("obc-icon-button")],js);const H_=Ht`
          * {
            -webkit-tap-highlight-color: transparent;
          }

:host {
  padding: 0;
}

* {
  box-sizing: border-box;
}

.clock {
  display: flex;
  align-items: center;
  color: var(--element-active-color, #1a1a1a);
  text-align: center;
  gap: var(--app-components-clock-digit-spacing);
  font-feature-settings: 'liga' off, 'clig' off;
  font-family: var(--font-family-main);
  font-size: var(--global-typography-ui-button-font-size);
  font-style: normal;
  font-weight: var(--global-typography-ui-button-font-weight);
  line-height: var(--global-typography-ui-button-line-height);
}

.blink {
  display: none;
}

@keyframes ticks {
  from {
    opacity: 1;
  }

  50% {
    opacity: 0;
  }

  to {
    opacity: 1;
  }
}

.ticks {
  width: var(--app-components-clock-colon-size);
  height: 100%;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  gap: var(--app-components-clock-colon-spacing);
}

.ticks.animate {
    animation: ticks 1s linear infinite;
  }

.blink .ticks {
    width: 16px;
    padding: 0;
  }

.ticks .tick {
    width: 100%;
    height: 100%;
    background-color: var(--element-active-color);
    width: calc(var(--app-components-clock-colon-size) + 1px);
    height: calc(var(--app-components-clock-colon-size) + 1px);
    border-radius: 100%;
  }

.blink-wrapper {
  display: none;
  height: var(--app-components-clock-touch-target);
  width: 24px;
  align-items: center;
  justify-content: center;
}

.timezone {
  color: var(--element-neutral-color);
  text-align: center;

  /* UI/Body */

  font-feature-settings: 'liga' off, 'clig' off;

  font-family: var(--font-family-main);

  font-size: var(--global-typography-ui-body-font-size);

  font-style: normal;

  font-weight: var(--global-typography-ui-body-font-weight);

  line-height: var(--global-typography-ui-body-line-height);

  text-decoration: none;
}

.date {
  color: var(--element-active-color);
  text-align: center;

  /* UI/Body */

  font-feature-settings: 'liga' off, 'clig' off;

  font-family: var(--font-family-main);

  font-size: var(--global-typography-ui-body-font-size);

  font-style: normal;

  font-weight: var(--global-typography-ui-body-font-weight);

  line-height: var(--global-typography-ui-body-line-height);

  text-decoration: none;
}

.wrapper {
  user-select: none;
  display: flex;
  align-items: center;
  padding: 0 var(--app-components-clock-margin-horizontal);
  appearance: none;
  border: none;
  background: none;
  height: var(--app-components-clock-touch-target);
}

.wrapper:not(.no-click) {
            cursor: pointer;
}

.wrapper:not(.no-click):focus {
            outline: none;
}

.wrapper:not(.no-click) .visible-wrapper {
            border-color: var(--flat-enabled-border-color);
            background-color: var(--flat-enabled-background-color);
            border-width: 1px;
            border-style: solid;
            cursor: pointer;
            --base-border-color: var(--flat-enabled-border-color);
            --base-background-color: var(--flat-enabled-background-color);
}

.wrapper.activated:not(.no-click) .visible-wrapper {
            border-color: var(--flat-activated-border-color);
            background-color: var(--flat-activated-background-color);
            --base-border-color: var(--flat-activated-border-color);
            --base-background-color: var(--flat-activated-background-color);
}

@media (hover:hover) {

.wrapper:not(.no-click):hover .visible-wrapper {
                        border-color: color-mix(in srgb, var(--flat-hover-border-color) calc(var(--obc-can-hover) * 100%), var(--base-border-color));
                        background-color: color-mix(in srgb, var(--flat-hover-background-color) calc(var(--obc-can-hover) * 100%), var(--base-background-color));
            }
}

.wrapper:not(.no-click):active .visible-wrapper {
            border-color: var(--flat-pressed-border-color);
            background-color: var(--flat-pressed-background-color);
}

.wrapper:not(.no-click):focus-visible .visible-wrapper {
            outline-color: var(--border-focus-color);
            outline-width: var(--global-size-spacing-border-weight-focusframe);
            outline-style: solid;
            border-color: var(--container-global-color);
            z-index: 1;
}

.wrapper:not(.no-click):disabled .visible-wrapper {
            border-color: var(--flat-disabled-border-color);
            background-color: var(--flat-disabled-background-color);
            cursor: not-allowed;
            color: var(--on-flat-disabled-color);
}

.wrapper.disabled:not(.no-click) .visible-wrapper {
            border-color: var(--flat-disabled-border-color);
            background-color: var(--flat-disabled-background-color);
            cursor: not-allowed;
            color: var(--on-flat-disabled-color);
}

.wrapper:not(.no-click):disabled {
            cursor: not-allowed;
}

.wrapper.disabled:not(.no-click) {
            cursor: not-allowed;
}

.wrapper.selected {
            cursor: pointer;
}

.wrapper.selected:focus {
            outline: none;
}

.wrapper.selected .visible-wrapper {
            border-color: var(--amplified-enabled-border-color);
            background-color: var(--amplified-enabled-background-color);
            border-width: 1px;
            border-style: solid;
            cursor: pointer;
            --base-border-color: var(--amplified-enabled-border-color);
            --base-background-color: var(--amplified-enabled-background-color);
}

.wrapper.selected.activated .visible-wrapper {
            border-color: var(--amplified-activated-border-color);
            background-color: var(--amplified-activated-background-color);
            --base-border-color: var(--amplified-activated-border-color);
            --base-background-color: var(--amplified-activated-background-color);
}

@media (hover:hover) {

.wrapper.selected:hover .visible-wrapper {
                        border-color: color-mix(in srgb, var(--amplified-hover-border-color) calc(var(--obc-can-hover) * 100%), var(--base-border-color));
                        background-color: color-mix(in srgb, var(--amplified-hover-background-color) calc(var(--obc-can-hover) * 100%), var(--base-background-color));
            }
}

.wrapper.selected:active .visible-wrapper {
            border-color: var(--amplified-pressed-border-color);
            background-color: var(--amplified-pressed-background-color);
}

.wrapper.selected:focus-visible .visible-wrapper {
            outline-color: var(--border-focus-color);
            outline-width: var(--global-size-spacing-border-weight-focusframe);
            outline-style: solid;
            border-color: var(--container-global-color);
            z-index: 1;
}

.wrapper.selected:disabled .visible-wrapper {
            border-color: var(--amplified-disabled-border-color);
            background-color: var(--amplified-disabled-background-color);
            cursor: not-allowed;
            color: var(--on-amplified-disabled-color);
}

.wrapper.selected.disabled .visible-wrapper {
            border-color: var(--amplified-disabled-border-color);
            background-color: var(--amplified-disabled-background-color);
            cursor: not-allowed;
            color: var(--on-amplified-disabled-color);
}

.wrapper.selected:disabled {
            cursor: not-allowed;
}

.wrapper.selected.disabled {
            cursor: not-allowed;
}

.wrapper.double {
    height: var(--app-components-clock-touch-target-size-double);
  }

.visible-wrapper {
  display: flex;
  align-items: center;
  border-radius: var(--app-components-clock-border-radius);
  padding: 0 var(--app-components-clock-padding-horizontal);
  height: var(--app-components-clock-visual-target);
  gap: var(--app-components-clock-label-spacing);
  border: 1px solid transparent;
}

.double .visible-wrapper {
    flex-direction: column;
    height: 48px;
    gap: 0;
  }

.divider {
  width: 1px;
  height: 16px;
  background-color: var(--border-divider-color);
}

.double .divider {
  display: none;
}

.row {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: var(--app-components-clock-label-spacing);
}
`;/**
 * @license
 * Copyright 2020 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const w1=Symbol.for(""),G_=R=>{if(R?.r===w1)return R?._$litStatic$},_p=(R,...A)=>({_$litStatic$:A.reduce(((B,P,D)=>B+(X=>{if(X._$litStatic$!==void 0)return X._$litStatic$;throw Error(`Value passed to 'literal' function must be a 'literal' result: ${X}. Use 'unsafeStatic' to pass non-literal values, but
            take care to ensure page security.`)})(P)+R[D+1]),R[0]),r:w1}),d1=new Map,q_=R=>(A,...B)=>{const P=B.length;let D,X;const M=[],d=[];let ye,ke=0,ot=!1;for(;ke<P;){for(ye=A[ke];ke<P&&(X=B[ke],(D=G_(X))!==void 0);)ye+=D+A[++ke],ot=!0;ke!==P&&d.push(X),M.push(ye),ke++}if(ke===P&&M.push(A[P]),ot){const Je=M.join("$$lit$$");(A=d1.get(Je))===void 0&&(M.raw=M,d1.set(Je,A=M)),B=d}return R(A,...B)},nn=q_(Ye);var X_=Object.defineProperty,Y_=Object.getOwnPropertyDescriptor,vo=(R,A,B,P)=>{for(var D=P>1?void 0:P?Y_(A,B):A,X=R.length-1,M;X>=0;X--)(M=R[X])&&(D=(P?M(A,B,D):M(D))||D);return P&&D&&X_(A,B,D),D};let on=class extends Bt{constructor(){super(...arguments),this.showSeconds=!1,this.showDate=!1,this.showTimezone=!1,this.timeZoneOffsetHours=0,this.noClick=!1,this.showYear=!1,this.showWeekday=!1,this.locale="en-GB",this.hour12=!1,this.selected=!1,this.double=!1,this.blinkOnlyBreakpointPx=0}get timezoneString(){return this.timeZoneOffsetHours===0?"UTC":this.timeZoneOffsetHours>0?`UTC+${this.timeZoneOffsetHours}`:`UTC-${-this.timeZoneOffsetHours}`}_dateString(A){const B={month:"short",day:"numeric",weekday:this.showWeekday?"short":void 0,year:this.showYear?"numeric":void 0,timeZone:"UTC"};return A.toLocaleDateString(this.locale,B).replace(/,/g,"").replace(/\./g,"")}_ampm(A){return this.hour12?A<12?" AM":" PM":""}render(){const A=new Date(this.date);A.setUTCHours(A.getUTCHours()+this.timeZoneOffsetHours);const B=A.getUTCHours(),P=A.getUTCMinutes(),D=this.hour12?B%12:B,X=D<10?`0${D}`:`${D}`,M=P<10?`0${P}`:`${P}`,d=A.getUTCSeconds(),ye=d<10?`0${d}`:`${d}`,ke=this._ampm(B),ot=this._dateString(A),Je=this.noClick?_p`div`:_p`button`,xt=nn`<div class="ticks ${this.showSeconds?"":"animate"}">
      <span class="tick"></span><span class="tick"></span>
    </div>`,Ot=`@media (max-width: ${this.blinkOnlyBreakpointPx}px )`,dt=nn`<div class="clock">
        ${X}${xt}${M}${this.showSeconds?nn`${xt}${ye}`:""}${ke}
      </div>

      ${this.showTimezone?nn`<div class="timezone">${this.timezoneString}</div>`:null}`;return nn`
      <style>
        ${Ot} {
          .wrapper {
            display: none !important;
          }
          .blink-wrapper {
            display: flex !important;
          }
        }
      </style>
      <${Je} class=${Wn({wrapper:!0,"no-click":this.noClick,selected:this.selected,double:this.double})}>
        <div class="visible-wrapper">
          ${this.double?nn`<div class="row">${dt}</div>`:dt}
        ${this.showDate?nn` <div class="divider"></div>
                <div class="date">${ot}</div>`:Zt}
        ${this.double?nn`</div>`:Zt}
        </div>
      </${Je}>
      <div class="blink-wrapper clock blink">
        <div class="ticks animate"><div class="tick"></div><div class="tick"></div></div>
      </div>
    `}};on.styles=ga(H_);vo([Ie({type:String})],on.prototype,"date",2);vo([Ie({type:Boolean})],on.prototype,"showSeconds",2);vo([Ie({type:Boolean})],on.prototype,"showDate",2);vo([Ie({type:Boolean})],on.prototype,"showTimezone",2);vo([Ie({type:Number})],on.prototype,"timeZoneOffsetHours",2);vo([Ie({type:Boolean})],on.prototype,"noClick",2);vo([Ie({type:Boolean})],on.prototype,"showYear",2);vo([Ie({type:Boolean})],on.prototype,"showWeekday",2);vo([Ie({type:String})],on.prototype,"locale",2);vo([Ie({type:Boolean})],on.prototype,"hour12",2);vo([Ie({type:Boolean})],on.prototype,"selected",2);vo([Ie({type:Boolean})],on.prototype,"double",2);vo([Ie({type:Number})],on.prototype,"blinkOnlyBreakpointPx",2);on=vo([Gt("obc-clock")],on);const Q_=Ht`
          * {
            -webkit-tap-highlight-color: transparent;
          }
:host {
    width: 1px;
    height: 24px;
    flex-shrink: 0;
    border-radius: 1px;
    background: var(--border-divider-color, rgba(0, 0, 0, 0.08));
}`;var K_=Object.getOwnPropertyDescriptor,W_=(R,A,B,P)=>{for(var D=P>1?void 0:P?K_(A,B):A,X=R.length-1,M;X>=0;X--)(M=R[X])&&(D=M(D)||D);return D};let Lg=class extends Bt{render(){return Ye``}};Lg.styles=ga(Q_);Lg=W_([Gt("obc-divider")],Lg);const J_=Ht`
          * {
            -webkit-tap-highlight-color: transparent;
          }

ol {
  padding: 0 var(--app-components-breadcrumbs-padding-horizontal);
  margin: 0;
  list-style-type: none;
  display: flex;
  user-select: none;
}

li {
  display: flex;
  align-items: center;
  color: var(--on-flat-neutral-color);
}

li .label-wrapper {
    color: var(--on-flat-neutral-color);
    /* UI/Body */
    font-feature-settings: 'liga' off, 'clig' off;
    font-family: var(--font-family-main);
    font-size: var(--global-typography-ui-body-font-size);
    font-style: normal;
    font-weight: var(--global-typography-ui-body-font-weight);
    line-height: var(--global-typography-ui-body-line-height);
    text-decoration: none;
    display: flex;
    align-items: center;
    justify-content: center;
    height: var(--app-components-breadcrumb-item-touch-target-size);
    margin: 0;
    padding: 0;
    border: none;
    background: none;
  }

:is(li .label-wrapper):not(.active) {
            cursor: pointer;
}

:is(li .label-wrapper):not(.active):focus {
            outline: none;
}

:is(li .label-wrapper):not(.active) .visible-wrapper {
            border-color: var(--flat-enabled-border-color);
            background-color: var(--flat-enabled-background-color);
            border-width: 1px;
            border-style: solid;
            cursor: pointer;
            --base-border-color: var(--flat-enabled-border-color);
            --base-background-color: var(--flat-enabled-background-color);
}

.activated:is(li .label-wrapper):not(.active) .visible-wrapper {
            border-color: var(--flat-activated-border-color);
            background-color: var(--flat-activated-background-color);
            --base-border-color: var(--flat-activated-border-color);
            --base-background-color: var(--flat-activated-background-color);
}

@media (hover:hover) {

:is(li .label-wrapper):not(.active):hover .visible-wrapper {
                        border-color: color-mix(in srgb, var(--flat-hover-border-color) calc(var(--obc-can-hover) * 100%), var(--base-border-color));
                        background-color: color-mix(in srgb, var(--flat-hover-background-color) calc(var(--obc-can-hover) * 100%), var(--base-background-color));
            }
}

:is(li .label-wrapper):not(.active):active .visible-wrapper {
            border-color: var(--flat-pressed-border-color);
            background-color: var(--flat-pressed-background-color);
}

:is(li .label-wrapper):not(.active):focus-visible .visible-wrapper {
            outline-color: var(--border-focus-color);
            outline-width: var(--global-size-spacing-border-weight-focusframe);
            outline-style: solid;
            border-color: var(--container-global-color);
            z-index: 1;
}

:is(li .label-wrapper):not(.active):disabled .visible-wrapper {
            border-color: var(--flat-disabled-border-color);
            background-color: var(--flat-disabled-background-color);
            cursor: not-allowed;
            color: var(--on-flat-disabled-color);
}

.disabled:is(li .label-wrapper):not(.active) .visible-wrapper {
            border-color: var(--flat-disabled-border-color);
            background-color: var(--flat-disabled-background-color);
            cursor: not-allowed;
            color: var(--on-flat-disabled-color);
}

:is(li .label-wrapper):not(.active):disabled {
            cursor: not-allowed;
}

.disabled:is(li .label-wrapper):not(.active) {
            cursor: not-allowed;
}

li .visible-wrapper {
    display: flex;
    height: var(--app-components-breadcrumb-item-visual-target-size);
    padding: 0 var(--app-components-breadcrumb-item-padding-horizontal);
    align-items: center;
    gap: var(--app-components-breadcrumb-item-label-spacing);
    border-radius: var(--app-components-breadcrumb-item-border-radius);
  }

li .active {
    /* UI/Body-Active */
    font-feature-settings: 'liga' off, 'clig' off;
    font-family: var(--font-family-main);
    font-size: var(--global-typography-ui-body-active-font-size);
    font-style: normal;
    font-weight: var(--font-weight-bold);
    line-height: var(--global-typography-ui-body-active-line-height);
    color: var(--on-flat-active-color);
  }

.divider {
  display: flex;
  align-items: center;
  justify-content: center;
  width: var(--app-components-breadcrumb-item-chevron-container-size);
}

.divider .icon {
    display: block;
    width: var(--app-components-breadcrumb-item-icon-size);
    height: var(--app-components-breadcrumb-item-icon-size);
    flex-shrink: 0;
  }
`;var ev=Object.defineProperty,tv=Object.getOwnPropertyDescriptor,C1=(R,A,B,P)=>{for(var D=P>1?void 0:P?tv(A,B):A,X=R.length-1,M;X>=0;X--)(M=R[X])&&(D=(P?M(A,B,D):M(D))||D);return P&&D&&ev(A,B,D),D};let Dm=class extends Bt{constructor(){super(...arguments),this.useCssColor=!1,this.icon=Ct`<svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
<path d="M8.59009 7.41L10.0001 6L16.0001 12L10.0001 18L8.59009 16.59L13.1701 12L8.59009 7.41Z" fill="currentColor"/>
</svg>
`,this.iconCss=Ct`<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M8.59009 7.41L10.0001 6L16.0001 12L10.0001 18L8.59009 16.59L13.1701 12L8.59009 7.41Z" style="fill: var(--element-active-color)"/>
</svg>
`}render(){return Ye`
      <div class="wrapper">${this.useCssColor?this.iconCss:this.icon}</div>
    `}};Dm.styles=Ht`
    .wrapper {
      height: 100%;
      width: 100%;
      line-height: 0;
    }
    .wrapper > * {
      height: 100%;
      width: 100%;
    }
  `;C1([Ie({type:Boolean})],Dm.prototype,"useCssColor",2);Dm=C1([Gt("obi-chevron-right-google")],Dm);var iv=Object.defineProperty,rv=Object.getOwnPropertyDescriptor,Fg=(R,A,B,P)=>{for(var D=P>1?void 0:P?rv(A,B):A,X=R.length-1,M;X>=0;X--)(M=R[X])&&(D=(P?M(A,B,D):M(D))||D);return P&&D&&iv(A,B,D),D};let Pf=class extends Bt{constructor(){super(...arguments),this.items=[],this.iconOnly=!1}render(){return Ye`
      <nav aria-label="Breadcrumb" class="breadcrumb">
        <ol>
          ${this.items.map((R,A)=>{const B=A===this.items.length-1;return Ye`
              <li>
                ${A>0?Ye`<span class="divider">
                      <obi-chevron-right-google class="icon">
                      </obi-chevron-right-google>
                    </span>`:Zt}
                ${B?Ye` <div class="label-wrapper active">
                      <div class="visible-wrapper">
                        ${R.icon?R.icon():Zt}
                        ${this.iconOnly&&!B?Zt:Ye`<span class="label">${R.label}</span>`}
                      </div>
                    </div>`:Ye` <button
                      role="link"
                      @click=${()=>this.handleClick(R)}
                      class="label-wrapper"
                    >
                      <div class="visible-wrapper">
                        ${R.icon?R.icon():Zt}
                        ${this.iconOnly&&!B?Zt:Ye`<span class="label">${R.label}</span>`}
                      </div>
                    </button>`}
              </li>
            `})}
        </ol>
      </nav>
    `}handleClick(R){this.dispatchEvent(new CustomEvent("breadcrumb-click",{detail:R}))}};Pf.styles=ga(J_);Fg([Ie({attribute:!1})],Pf.prototype,"items",2);Fg([Ie({attribute:!1})],Pf.prototype,"iconOnly",2);Pf=Fg([Gt("obc-breadcrumb")],Pf);var av=Object.defineProperty,nv=Object.getOwnPropertyDescriptor,S1=(R,A,B,P)=>{for(var D=P>1?void 0:P?nv(A,B):A,X=R.length-1,M;X>=0;X--)(M=R[X])&&(D=(P?M(A,B,D):M(D))||D);return P&&D&&av(A,B,D),D};let Lm=class extends Bt{constructor(){super(...arguments),this.useCssColor=!1,this.icon=Ct`<svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
<path d="M3 13H21V11H3V13Z" fill="currentColor"/>
<path d="M3 18H21V16H3V18Z" fill="currentColor"/>
<path d="M3 6V8H21V6H3Z" fill="currentColor"/>
</svg>
`,this.iconCss=Ct`<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M3 13H21V11H3V13Z" style="fill: var(--element-active-color)"/>
<path d="M3 18H21V16H3V18Z" style="fill: var(--element-active-color)"/>
<path d="M3 6V8H21V6H3Z" style="fill: var(--element-active-color)"/>
</svg>
`}render(){return Ye`
      <div class="wrapper">${this.useCssColor?this.iconCss:this.icon}</div>
    `}};Lm.styles=Ht`
    .wrapper {
      height: 100%;
      width: 100%;
      line-height: 0;
    }
    .wrapper > * {
      height: 100%;
      width: 100%;
    }
  `;S1([Ie({type:Boolean})],Lm.prototype,"useCssColor",2);Lm=S1([Gt("obi-menu-iec")],Lm);var ov=Object.defineProperty,sv=Object.getOwnPropertyDescriptor,T1=(R,A,B,P)=>{for(var D=P>1?void 0:P?sv(A,B):A,X=R.length-1,M;X>=0;X--)(M=R[X])&&(D=(P?M(A,B,D):M(D))||D);return P&&D&&ov(A,B,D),D};let Im=class extends Bt{constructor(){super(...arguments),this.useCssColor=!1,this.icon=Ct`<svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
<path d="M6 19H9V13H15V19H18V10L12 5.5L6 10V19ZM4 21V9L12 3L20 9V21H13V15H11V21H4Z" fill="currentColor"/>
</svg>
`,this.iconCss=Ct`<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M6 19H9V13H15V19H18V10L12 5.5L6 10V19ZM4 21V9L12 3L20 9V21H13V15H11V21H4Z" style="fill: var(--element-active-color)"/>
</svg>
`}render(){return Ye`
      <div class="wrapper">${this.useCssColor?this.iconCss:this.icon}</div>
    `}};Im.styles=Ht`
    .wrapper {
      height: 100%;
      width: 100%;
      line-height: 0;
    }
    .wrapper > * {
      height: 100%;
      width: 100%;
    }
  `;T1([Ie({type:Boolean})],Im.prototype,"useCssColor",2);Im=T1([Gt("obi-home")],Im);var lv=Object.defineProperty,cv=Object.getOwnPropertyDescriptor,M1=(R,A,B,P)=>{for(var D=P>1?void 0:P?cv(A,B):A,X=R.length-1,M;X>=0;X--)(M=R[X])&&(D=(P?M(A,B,D):M(D))||D);return P&&D&&lv(A,B,D),D};let Rm=class extends Bt{constructor(){super(...arguments),this.useCssColor=!1,this.icon=Ct`<svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
<path d="M19 6.41L17.59 5L12 10.59L6.41 5L5 6.41L10.59 12L5 17.59L6.41 19L12 13.41L17.59 19L19 17.59L13.41 12L19 6.41Z" fill="currentColor"/>
</svg>
`,this.iconCss=Ct`<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M19 6.41L17.59 5L12 10.59L6.41 5L5 6.41L10.59 12L5 17.59L6.41 19L12 13.41L17.59 19L19 17.59L13.41 12L19 6.41Z" style="fill: var(--element-active-color)"/>
</svg>
`}render(){return Ye`
      <div class="wrapper">${this.useCssColor?this.iconCss:this.icon}</div>
    `}};Rm.styles=Ht`
    .wrapper {
      height: 100%;
      width: 100%;
      line-height: 0;
    }
    .wrapper > * {
      height: 100%;
      width: 100%;
    }
  `;M1([Ie({type:Boolean})],Rm.prototype,"useCssColor",2);Rm=M1([Gt("obi-close-google")],Rm);var uv=Object.defineProperty,hv=Object.getOwnPropertyDescriptor,A1=(R,A,B,P)=>{for(var D=P>1?void 0:P?hv(A,B):A,X=R.length-1,M;X>=0;X--)(M=R[X])&&(D=(P?M(A,B,D):M(D))||D);return P&&D&&uv(A,B,D),D};let Bm=class extends Bt{constructor(){super(...arguments),this.useCssColor=!1,this.icon=Ct`<svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
<path d="M7.83 11H20V13H7.83L13.41 18.59L12 20L4 12L12 4L13.42 5.41L7.83 11Z" fill="currentColor"/>
</svg>
`,this.iconCss=Ct`<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M7.83 11H20V13H7.83L13.41 18.59L12 20L4 12L12 4L13.42 5.41L7.83 11Z" style="fill: var(--element-active-color)"/>
</svg>
`}render(){return Ye`
      <div class="wrapper">${this.useCssColor?this.iconCss:this.icon}</div>
    `}};Bm.styles=Ht`
    .wrapper {
      height: 100%;
      width: 100%;
      line-height: 0;
    }
    .wrapper > * {
      height: 100%;
      width: 100%;
    }
  `;A1([Ie({type:Boolean})],Bm.prototype,"useCssColor",2);Bm=A1([Gt("obi-arrow-left-google")],Bm);var dv=Object.defineProperty,pv=Object.getOwnPropertyDescriptor,E1=(R,A,B,P)=>{for(var D=P>1?void 0:P?pv(A,B):A,X=R.length-1,M;X>=0;X--)(M=R[X])&&(D=(P?M(A,B,D):M(D))||D);return P&&D&&dv(A,B,D),D};let Om=class extends Bt{constructor(){super(...arguments),this.useCssColor=!1,this.icon=Ct`<svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
<path d="M12 4L10.59 5.41L16.17 11H4V13H16.17L10.59 18.59L12 20L20 12L12 4Z" fill="currentColor"/>
</svg>
`,this.iconCss=Ct`<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M12 4L10.59 5.41L16.17 11H4V13H16.17L10.59 18.59L12 20L20 12L12 4Z" style="fill: var(--element-active-color)"/>
</svg>
`}render(){return Ye`
      <div class="wrapper">${this.useCssColor?this.iconCss:this.icon}</div>
    `}};Om.styles=Ht`
    .wrapper {
      height: 100%;
      width: 100%;
      line-height: 0;
    }
    .wrapper > * {
      height: 100%;
      width: 100%;
    }
  `;E1([Ie({type:Boolean})],Om.prototype,"useCssColor",2);Om=E1([Gt("obi-arrow-right-google")],Om);var fv=Object.defineProperty,mv=Object.getOwnPropertyDescriptor,z1=(R,A,B,P)=>{for(var D=P>1?void 0:P?mv(A,B):A,X=R.length-1,M;X>=0;X--)(M=R[X])&&(D=(P?M(A,B,D):M(D))||D);return P&&D&&fv(A,B,D),D};let jm=class extends Bt{constructor(){super(...arguments),this.useCssColor=!1,this.icon=Ct`<svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
<path fill-rule="evenodd" clip-rule="evenodd" d="M6.99976 11.9999C6.99976 10.6738 7.52654 9.40202 8.46422 8.46434C9.4019 7.52666 10.6737 6.99988 11.9998 6.99988C13.3258 6.99988 14.5976 7.52666 15.5353 8.46434L16.2424 9.17145L9.17133 16.2425L8.46422 15.5354C7.52654 14.5977 6.99976 13.326 6.99976 11.9999ZM9.87843 9.87856C9.31583 10.4412 8.99976 11.2042 8.99976 11.9999C8.99976 12.4516 9.10163 12.8928 9.29265 13.2928L13.2926 9.29277C12.8927 9.10175 12.4515 8.99988 11.9998 8.99988C11.2041 8.99988 10.441 9.31595 9.87843 9.87856Z" fill="currentColor"/>
<path d="M3.51447 19.0709L6.3429 16.2425L7.75711 17.6567L4.92869 20.4852L3.51447 19.0709Z" fill="currentColor"/>
<path d="M0.999756 10.9999H4.99976V12.9999H0.999756V10.9999Z" fill="currentColor"/>
<path d="M4.92874 3.51462L7.75717 6.34304L6.34295 7.75726L3.51453 4.92883L4.92874 3.51462Z" fill="currentColor"/>
<path d="M12.9998 0.999878V4.99988H10.9998V0.999878H12.9998Z" fill="currentColor"/>
<path d="M20.4851 4.92878L17.6567 7.75721L16.2425 6.343L19.0709 3.51457L20.4851 4.92878Z" fill="currentColor"/>
<path d="M20.1539 11C20.8 11 21.4154 11.088 22 11.253C19.5016 11.9515 17.6924 14.036 17.6924 16.5C17.6924 18.964 19.5016 21.0485 22 21.747C21.4154 21.912 20.8 22 20.1539 22C16.757 22 14 19.536 14 16.5C14 13.464 16.757 11 20.1539 11Z" fill="currentColor"/>
</svg>
`,this.iconCss=Ct`<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
<path fill-rule="evenodd" clip-rule="evenodd" d="M6.99976 11.9999C6.99976 10.6738 7.52654 9.40202 8.46422 8.46434C9.4019 7.52666 10.6737 6.99988 11.9998 6.99988C13.3258 6.99988 14.5976 7.52666 15.5353 8.46434L16.2424 9.17145L9.17133 16.2425L8.46422 15.5354C7.52654 14.5977 6.99976 13.326 6.99976 11.9999ZM9.87843 9.87856C9.31583 10.4412 8.99976 11.2042 8.99976 11.9999C8.99976 12.4516 9.10163 12.8928 9.29265 13.2928L13.2926 9.29277C12.8927 9.10175 12.4515 8.99988 11.9998 8.99988C11.2041 8.99988 10.441 9.31595 9.87843 9.87856Z" style="fill: var(--element-active-color)"/>
<path d="M3.51447 19.0709L6.3429 16.2425L7.75711 17.6567L4.92869 20.4852L3.51447 19.0709Z" style="fill: var(--element-active-color)"/>
<path d="M0.999756 10.9999H4.99976V12.9999H0.999756V10.9999Z" style="fill: var(--element-active-color)"/>
<path d="M4.92874 3.51462L7.75717 6.34304L6.34295 7.75726L3.51453 4.92883L4.92874 3.51462Z" style="fill: var(--element-active-color)"/>
<path d="M12.9998 0.999878V4.99988H10.9998V0.999878H12.9998Z" style="fill: var(--element-active-color)"/>
<path d="M20.4851 4.92878L17.6567 7.75721L16.2425 6.343L19.0709 3.51457L20.4851 4.92878Z" style="fill: var(--element-active-color)"/>
<path d="M20.1539 11C20.8 11 21.4154 11.088 22 11.253C19.5016 11.9515 17.6924 14.036 17.6924 16.5C17.6924 18.964 19.5016 21.0485 22 21.747C21.4154 21.912 20.8 22 20.1539 22C16.757 22 14 19.536 14 16.5C14 13.464 16.757 11 20.1539 11Z" style="fill: var(--element-active-color)"/>
</svg>
`}render(){return Ye`
      <div class="wrapper">${this.useCssColor?this.iconCss:this.icon}</div>
    `}};jm.styles=Ht`
    .wrapper {
      height: 100%;
      width: 100%;
      line-height: 0;
    }
    .wrapper > * {
      height: 100%;
      width: 100%;
    }
  `;z1([Ie({type:Boolean})],jm.prototype,"useCssColor",2);jm=z1([Gt("obi-palette-day-night-iec")],jm);var gv=Object.defineProperty,_v=Object.getOwnPropertyDescriptor,P1=(R,A,B,P)=>{for(var D=P>1?void 0:P?_v(A,B):A,X=R.length-1,M;X>=0;X--)(M=R[X])&&(D=(P?M(A,B,D):M(D))||D);return P&&D&&gv(A,B,D),D};let kf=class extends Bt{constructor(){super(...arguments),this.useCssColor=!1,this.icon=Ct`<svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
<path fill-rule="evenodd" clip-rule="evenodd" d="M4 8H8V4H4V8ZM10 20H14V16H10V20ZM4 20H8V16H4V20ZM4 14H8V10H4V14ZM10 14H14V10H10V14ZM16 4V8H20V4H16ZM10 8H14V4H10V8ZM16 14H20V10H16V14ZM16 20H20V16H16V20Z" fill="currentColor"/>
</svg>
`,this.iconCss=Ct`<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
<path fill-rule="evenodd" clip-rule="evenodd" d="M4 8H8V4H4V8ZM10 20H14V16H10V20ZM4 20H8V16H4V20ZM4 14H8V10H4V14ZM10 14H14V10H10V14ZM16 4V8H20V4H16ZM10 8H14V4H10V8ZM16 14H20V10H16V14ZM16 20H20V16H16V20Z" style="fill: var(--element-active-color)"/>
</svg>
`}render(){return Ye`
      <div class="wrapper">${this.useCssColor?this.iconCss:this.icon}</div>
    `}};kf.styles=Ht`
    .wrapper {
      height: 100%;
      width: 100%;
      line-height: 0;
    }
    .wrapper > * {
      height: 100%;
      width: 100%;
    }
  `;P1([Ie({type:Boolean})],kf.prototype,"useCssColor",2);kf=P1([Gt("obi-applications")],kf);var vv=Object.defineProperty,yv=Object.getOwnPropertyDescriptor,k1=(R,A,B,P)=>{for(var D=P>1?void 0:P?yv(A,B):A,X=R.length-1,M;X>=0;X--)(M=R[X])&&(D=(P?M(A,B,D):M(D))||D);return P&&D&&vv(A,B,D),D};let Vm=class extends Bt{constructor(){super(...arguments),this.useCssColor=!1,this.icon=Ct`<svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
<path d="M14 6C14 4.9 13.1 4 12 4C10.9 4 10 4.9 10 6C10 7.1 10.9 8 12 8C13.1 8 14 7.1 14 6Z" fill="currentColor"/>
<path d="M14 12C14 10.9 13.1 10 12 10C10.9 10 10 10.9 10 12C10 13.1 10.9 14 12 14C13.1 14 14 13.1 14 12Z" fill="currentColor"/>
<path d="M14 18C14 16.9 13.1 16 12 16C10.9 16 10 16.9 10 18C10 19.1 10.9 20 12 20C13.1 20 14 19.1 14 18Z" fill="currentColor"/>
</svg>
`,this.iconCss=Ct`<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M14 6C14 4.9 13.1 4 12 4C10.9 4 10 4.9 10 6C10 7.1 10.9 8 12 8C13.1 8 14 7.1 14 6Z" style="fill: var(--element-active-color)"/>
<path d="M14 12C14 10.9 13.1 10 12 10C10.9 10 10 10.9 10 12C10 13.1 10.9 14 12 14C13.1 14 14 13.1 14 12Z" style="fill: var(--element-active-color)"/>
<path d="M14 18C14 16.9 13.1 16 12 16C10.9 16 10 16.9 10 18C10 19.1 10.9 20 12 20C13.1 20 14 19.1 14 18Z" style="fill: var(--element-active-color)"/>
</svg>
`}render(){return Ye`
      <div class="wrapper">${this.useCssColor?this.iconCss:this.icon}</div>
    `}};Vm.styles=Ht`
    .wrapper {
      height: 100%;
      width: 100%;
      line-height: 0;
    }
    .wrapper > * {
      height: 100%;
      width: 100%;
    }
  `;k1([Ie({type:Boolean})],Vm.prototype,"useCssColor",2);Vm=k1([Gt("obi-more-vertical-google")],Vm);var bv=Object.defineProperty,xv=Object.getOwnPropertyDescriptor,D1=(R,A,B,P)=>{for(var D=P>1?void 0:P?xv(A,B):A,X=R.length-1,M;X>=0;X--)(M=R[X])&&(D=(P?M(A,B,D):M(D))||D);return P&&D&&bv(A,B,D),D};let $m=class extends Bt{constructor(){super(...arguments),this.useCssColor=!1,this.icon=Ct`<svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
<path d="M5.85 17.1C6.7 16.45 7.65 15.9375 8.7 15.5625C9.75 15.1875 10.85 15 12 15C13.15 15 14.25 15.1875 15.3 15.5625C16.35 15.9375 17.3 16.45 18.15 17.1C18.7333 16.4167 19.1875 15.6417 19.5125 14.775C19.8375 13.9083 20 12.9833 20 12C20 9.78333 19.2208 7.89583 17.6625 6.3375C16.1042 4.77917 14.2167 4 12 4C9.78333 4 7.89583 4.77917 6.3375 6.3375C4.77917 7.89583 4 9.78333 4 12C4 12.9833 4.1625 13.9083 4.4875 14.775C4.8125 15.6417 5.26667 16.4167 5.85 17.1ZM12 13C11.0167 13 10.1875 12.6625 9.5125 11.9875C8.8375 11.3125 8.5 10.4833 8.5 9.5C8.5 8.51667 8.8375 7.6875 9.5125 7.0125C10.1875 6.3375 11.0167 6 12 6C12.9833 6 13.8125 6.3375 14.4875 7.0125C15.1625 7.6875 15.5 8.51667 15.5 9.5C15.5 10.4833 15.1625 11.3125 14.4875 11.9875C13.8125 12.6625 12.9833 13 12 13ZM12 22C10.6167 22 9.31667 21.7375 8.1 21.2125C6.88333 20.6875 5.825 19.975 4.925 19.075C4.025 18.175 3.3125 17.1167 2.7875 15.9C2.2625 14.6833 2 13.3833 2 12C2 10.6167 2.2625 9.31667 2.7875 8.1C3.3125 6.88333 4.025 5.825 4.925 4.925C5.825 4.025 6.88333 3.3125 8.1 2.7875C9.31667 2.2625 10.6167 2 12 2C13.3833 2 14.6833 2.2625 15.9 2.7875C17.1167 3.3125 18.175 4.025 19.075 4.925C19.975 5.825 20.6875 6.88333 21.2125 8.1C21.7375 9.31667 22 10.6167 22 12C22 13.3833 21.7375 14.6833 21.2125 15.9C20.6875 17.1167 19.975 18.175 19.075 19.075C18.175 19.975 17.1167 20.6875 15.9 21.2125C14.6833 21.7375 13.3833 22 12 22Z" fill="currentColor"/>
</svg>
`,this.iconCss=Ct`<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M5.85 17.1C6.7 16.45 7.65 15.9375 8.7 15.5625C9.75 15.1875 10.85 15 12 15C13.15 15 14.25 15.1875 15.3 15.5625C16.35 15.9375 17.3 16.45 18.15 17.1C18.7333 16.4167 19.1875 15.6417 19.5125 14.775C19.8375 13.9083 20 12.9833 20 12C20 9.78333 19.2208 7.89583 17.6625 6.3375C16.1042 4.77917 14.2167 4 12 4C9.78333 4 7.89583 4.77917 6.3375 6.3375C4.77917 7.89583 4 9.78333 4 12C4 12.9833 4.1625 13.9083 4.4875 14.775C4.8125 15.6417 5.26667 16.4167 5.85 17.1ZM12 13C11.0167 13 10.1875 12.6625 9.5125 11.9875C8.8375 11.3125 8.5 10.4833 8.5 9.5C8.5 8.51667 8.8375 7.6875 9.5125 7.0125C10.1875 6.3375 11.0167 6 12 6C12.9833 6 13.8125 6.3375 14.4875 7.0125C15.1625 7.6875 15.5 8.51667 15.5 9.5C15.5 10.4833 15.1625 11.3125 14.4875 11.9875C13.8125 12.6625 12.9833 13 12 13ZM12 22C10.6167 22 9.31667 21.7375 8.1 21.2125C6.88333 20.6875 5.825 19.975 4.925 19.075C4.025 18.175 3.3125 17.1167 2.7875 15.9C2.2625 14.6833 2 13.3833 2 12C2 10.6167 2.2625 9.31667 2.7875 8.1C3.3125 6.88333 4.025 5.825 4.925 4.925C5.825 4.025 6.88333 3.3125 8.1 2.7875C9.31667 2.2625 10.6167 2 12 2C13.3833 2 14.6833 2.2625 15.9 2.7875C17.1167 3.3125 18.175 4.025 19.075 4.925C19.975 5.825 20.6875 6.88333 21.2125 8.1C21.7375 9.31667 22 10.6167 22 12C22 13.3833 21.7375 14.6833 21.2125 15.9C20.6875 17.1167 19.975 18.175 19.075 19.075C18.175 19.975 17.1167 20.6875 15.9 21.2125C14.6833 21.7375 13.3833 22 12 22Z" style="fill: var(--element-active-color)"/>
</svg>
`}render(){return Ye`
      <div class="wrapper">${this.useCssColor?this.iconCss:this.icon}</div>
    `}};$m.styles=Ht`
    .wrapper {
      height: 100%;
      width: 100%;
      line-height: 0;
    }
    .wrapper > * {
      height: 100%;
      width: 100%;
    }
  `;D1([Ie({type:Boolean})],$m.prototype,"useCssColor",2);$m=D1([Gt("obi-user")],$m);var wv=Object.defineProperty,Cv=Object.getOwnPropertyDescriptor,Tr=(R,A,B,P)=>{for(var D=P>1?void 0:P?Cv(A,B):A,X=R.length-1,M;X>=0;X--)(M=R[X])&&(D=(P?M(A,B,D):M(D))||D);return P&&D&&wv(A,B,D),D};let nr=class extends Bt{constructor(){super(...arguments),this.appTitle="App",this.pageName="Page",this.menuButtonIcon="menu",this.menuButtonActivated=!1,this.dimmingButtonActivated=!1,this.appsButtonActivated=!1,this.leftMoreButtonActivated=!1,this.userButtonActivated=!1,this.tall=!1,this.wideMenuButton=!1,this.showAppsButton=!1,this.showDimmingButton=!1,this.showUserButton=!1,this.showClock=!1,this.showDate=!1,this.showAppIcon=!1,this.inactive=!1,this.appButtonBreakpointPx=500,this.dimmingButtonBreakpointPx=500,this.appTitleBreakpointPx=500,this.userButtonBreakpointPx=500,this.appIconBreakpointPx=500,this.settings=!1,this.breadcrumbItems=[],this.leftButtonEvent=null,this.leftButtonTimeout=null,this.isLeftButtonDown=!1,this.isEmergencyBrightness=!1}dimmingButtonClicked(){this.dispatchEvent(new CustomEvent("dimming-button-clicked"))}appsButtonClicked(){this.dispatchEvent(new CustomEvent("apps-button-clicked"))}leftMoreButtonClicked(){this.dispatchEvent(new CustomEvent("left-more-button-clicked"))}userButtonClicked(){this.dispatchEvent(new CustomEvent("user-button-clicked"))}leftButtonDown(A){this.leftButtonEvent=A,this.isLeftButtonDown=!0,this.leftButtonTimeout=setTimeout(()=>{this.leftButtonEvent=null,this.dispatchEvent(new CustomEvent("emergency-brightness-start")),this.isEmergencyBrightness=!0},500)}leftButtonUp(){this.leftButtonEvent&&(this.dispatchEvent(this.leftButtonEvent),this.leftButtonEvent=null),this.leftButtonTimeout&&(clearTimeout(this.leftButtonTimeout),this.leftButtonTimeout=null),this.isEmergencyBrightness&&(this.dispatchEvent(new CustomEvent("emergency-brightness-stop")),this.isEmergencyBrightness=!1),this.isLeftButtonDown=!1}leftButtonLeave(){this.isLeftButtonDown&&(this.leftButtonTimeout&&(clearInterval(this.leftButtonTimeout),this.leftButtonTimeout=null),this.isEmergencyBrightness&&(this.dispatchEvent(new CustomEvent("emergency-brightness-stop")),this.isEmergencyBrightness=!1),this.isLeftButtonDown=!1)}render(){const A=[];this.settings?(A.push(Ye`<div class="menu-button">
          <obc-icon-button
            variant="flat"
            @pointerdown=${()=>this.leftButtonDown(new CustomEvent("close"))}
            @pointerup=${()=>this.leftButtonUp()}
            @pointerleave=${()=>this.leftButtonLeave()}
          >
            <obi-close-google></obi-close-google>
          </obc-icon-button>
        </div>`),A.push(Ye`<div class="divider"></div>`),A.push(Ye`<obc-icon-button
          variant="flat"
          @click=${()=>this.dispatchEvent(new CustomEvent("back"))}
        >
          <obi-arrow-left-google></obi-arrow-left-google>
        </obc-icon-button>`),A.push(Ye`<div class="title">${this.appTitle}</div>`),A.push(Ye`<obc-breadcrumb
          .items=${this.breadcrumbItems}
          @breadcrumb-click=${P=>this.dispatchEvent(new CustomEvent("breadcrumb-click",{detail:P.detail}))}
        ></obc-breadcrumb>`)):(this.inactive||A.push(Ye`<div class="menu-button ${this.wideMenuButton?"wide":null}">
            <obc-icon-button
              variant="flat"
              @pointerdown=${()=>this.leftButtonDown(new CustomEvent("menu-button-clicked"))}
              @pointerup=${()=>this.leftButtonUp()}
              @pointerleave=${()=>this.leftButtonLeave()}
              ?activated=${this.menuButtonActivated}
            >
              ${this.menuButtonIcon==="menu"?Ye`<obi-menu-iec></obi-menu-iec>`:Ye`<obi-home></obi-home>`}
            </obc-icon-button>
          </div>`),this.showAppIcon&&A.push(Ye`<div class="app-icon"><slot name="app-icon"></slot></div>`),A.push(Ye`<div class="title">${this.appTitle}</div>`),A.push(Ye`<div class="page-name">${this.pageName}</div>`),A.push(Ye`<slot name="command-button"></slot>`));const B=Math.max(this.appButtonBreakpointPx,this.dimmingButtonBreakpointPx);return Ye`
      <style>
                @media (max-width: ${B}px) {
                  .left-more-button {
                    display: revert !important;
        import { customElement } from '../../decorator.js';
                  }

                  .group.left > * {
                    margin-right: 4px;
                    margin-left: 4px;
                  }
                }

                @media (max-width: ${this.appButtonBreakpointPx}px) {
                  .apps-button {
                    display: none;
                  }
                }

                @media (max-width: ${this.dimmingButtonBreakpointPx}px) {
                  .dimming-button {
                    display: none;
                  }
                }

                @media (max-width: ${this.appTitleBreakpointPx}px) {
                  .title {
                    display: none;
                  }
                }

                @media (max-width: ${this.userButtonBreakpointPx}px) {
                  .user-button {
                    display: none;
                  }
                }

                @media (max-width: ${this.appIconBreakpointPx}px) {
                  .app-icon {
                    display: none;
                  }
                }
      </style>
      <nav
        class=${Wn({wrapper:!0,inactive:this.inactive,settings:this.settings,tall:this.tall})}
        role="menubar"
      >
        <div class="left group">${A}</div>
        <div class="right group">
          <div class="alert-container">
            <slot name="alerts"></slot>
          </div>
          ${this.showDimmingButton&&!this.inactive?Ye`<obc-icon-button
                class="dimming-button"
                part="dimming-button"
                variant="flat"
                @click=${this.dimmingButtonClicked}
                ?activated=${this.dimmingButtonActivated}
              >
                <obi-palette-day-night-iec></obi-palette-day-night-iec>
              </obc-icon-button>`:null}
          ${this.showUserButton&&!this.inactive?Ye`<obc-icon-button
                class="user-button"
                variant="flat"
                part="user-button"
                @click=${this.userButtonClicked}
                ?activated=${this.userButtonActivated}
              >
                <obi-user></obi-user>
              </obc-icon-button>`:null}
          ${this.showAppsButton&&!this.inactive?Ye`<obc-icon-button
                class="apps-button"
                variant="flat"
                part="apps-button"
                @click=${this.appsButtonClicked}
                ?activated=${this.appsButtonActivated}
              >
                <obi-applications></obi-applications>
              </obc-icon-button>`:null}
          ${this.showClock?Ye`<slot name="clock"></slot>`:null}
          ${this.inactive?null:Ye`<obc-icon-button
                class="left-more-button"
                part="left-more-button"
                variant="flat"
                @click=${this.leftMoreButtonClicked}
                ?activated=${this.leftMoreButtonActivated}
              >
                <obi-more-vertical-google></obi-more-vertical-google>
              </obc-icon-button>`}
        </div>
      </nav>
    `}};nr.styles=ga(F_);Tr([Ie({type:String})],nr.prototype,"appTitle",2);Tr([Ie({type:String})],nr.prototype,"pageName",2);Tr([Ie({type:String})],nr.prototype,"menuButtonIcon",2);Tr([Ie({type:Boolean})],nr.prototype,"menuButtonActivated",2);Tr([Ie({type:Boolean})],nr.prototype,"dimmingButtonActivated",2);Tr([Ie({type:Boolean})],nr.prototype,"appsButtonActivated",2);Tr([Ie({type:Boolean})],nr.prototype,"leftMoreButtonActivated",2);Tr([Ie({type:Boolean})],nr.prototype,"userButtonActivated",2);Tr([Ie({type:Boolean})],nr.prototype,"tall",2);Tr([Ie({type:Boolean})],nr.prototype,"wideMenuButton",2);Tr([Ie({type:Boolean})],nr.prototype,"showAppsButton",2);Tr([Ie({type:Boolean})],nr.prototype,"showDimmingButton",2);Tr([Ie({type:Boolean})],nr.prototype,"showUserButton",2);Tr([Ie({type:Boolean})],nr.prototype,"showClock",2);Tr([Ie({type:Boolean})],nr.prototype,"showDate",2);Tr([Ie({type:Boolean})],nr.prototype,"showAppIcon",2);Tr([Ie({type:Boolean})],nr.prototype,"inactive",2);Tr([Ie({type:Number})],nr.prototype,"appButtonBreakpointPx",2);Tr([Ie({type:Number})],nr.prototype,"dimmingButtonBreakpointPx",2);Tr([Ie({type:Number})],nr.prototype,"appTitleBreakpointPx",2);Tr([Ie({type:Number})],nr.prototype,"userButtonBreakpointPx",2);Tr([Ie({type:Number})],nr.prototype,"appIconBreakpointPx",2);Tr([Ie({type:Boolean})],nr.prototype,"settings",2);Tr([Ie({type:Array})],nr.prototype,"breadcrumbItems",2);nr=Tr([Gt("obc-top-bar")],nr);const Sv=Jo({react:Wo,tagName:"obc-top-bar",elementClass:nr,events:{onMenuButtonClicked:"menu-button-clicked",onDimmingButtonClicked:"dimming-button-clicked",onAppsButtonClicked:"apps-button-clicked",onLeftMoreButtonClicked:"left-more-button-clicked",onUserButtonClicked:"user-button-clicked",onClose:"close",onBack:"back",onEmergencyBrightnessStart:"emergency-brightness-start",onEmergencyBrightnessStop:"emergency-brightness-stop",onBreadcrumbClick:"breadcrumb-click"}}),Tv=Ht`
          * {
            -webkit-tap-highlight-color: transparent;
          }

* {
  box-sizing: border-box;
}

.card {
  border-radius: 8px;
  background: var(--container-global-color, #fcfcfc);
  /* Shadow/Floating */
  box-shadow: var(--shadow-floating);
  display: flex;
  flex-direction: column;
  box-sizing: border-box;
  width: 320px;
  user-select: none;
}

.title-container {
  padding: var(--app-components-system-menu-margin-vertical)
    calc(
      var(--app-components-system-menu-margin-horizontal) +
        var(--app-components-system-menu-padding-horizontal)
    );
}

.title-container h3 {
    /* UI/Overline */
    font-feature-settings: 'liga' off, 'clig' off;
    font-family: var(--font-family-main);
    font-size: var(--global-typography-ui-overline-font-size);
    font-style: normal;
    font-weight: var(--global-typography-ui-overline-font-weight);
    line-height: var(--global-typography-ui-overline-line-height);
    letter-spacing: var(--global-typography-ui-overline-letter-spacing);
    text-transform: capitalize;
    color: var(--element-neutral-color, rgba(0, 0, 0, 0.59));
    margin: 0;
  }

.card.normal .palette .value-label-container {
  padding-top: 0 !important;
}

.content-container {
  padding: var(--app-components-system-menu-padding-vertical)
    var(--app-components-system-menu-margin-vertical);
}

.content-container.palette {
    display: flex;
    flex-direction: column;
    gap: 8px;
  }

.content-container.palette.without-link {
      padding-bottom: 24px;
    }

.content-container.palette .value-label-container {
      padding-bottom: 0 !important;
    }

.content-container .value-container {
    display: flex;
    padding: var(--app-components-system-menu-padding-vertical) 0;
    flex-direction: column;
    align-items: center;
    align-self: stretch;
  }

:is(.content-container .value-container) .value-label-container {
      display: flex;
      padding: var(--app-components-system-menu-padding-vertical) 0;
      justify-content: center;
      align-items: center;
      gap: var(--app-components-dimming-menu-label-spacing);
      align-self: stretch;
    }

:is(:is(.content-container .value-container) .value-label-container) .icon {
        width: var(--app-components-dimming-menu-icon-size);
        height: var(--app-components-dimming-menu-icon-size);
        color: var(--instrument-enhanced-secondary-color);
      }

:is(:is(.content-container .value-container) .value-label-container) .label-container {
        display: flex;
        align-items: baseline;
        font-family: var(--global-typography-font-family);
        font-size: var(--global-typography-instrument-value-large-font-size);
        font-style: normal;
        font-weight: var(
    --global-typography-instrument-value-large-font-weight-active
  );
        line-height: var(--global-typography-instrument-value-large-line-height)
    /* 100% */;
        transition: width 0.1s ease-in-out;
      }

:is(:is(:is(.content-container .value-container) .value-label-container) .label-container) .value {
          color: var(--element-active-color);
        }

:is(:is(:is(.content-container .value-container) .value-label-container) .label-container) .unit {
          font-family: var(--global-typography-font-family);
          font-size: var(--global-typography-instrument-label-font-size);
          font-style: normal;
          font-weight: var(--global-typography-instrument-label-font-weight);
          line-height: var(--global-typography-instrument-label-line-height) /* 133.333% */;
          color: var(--element-neutral-color);
        }

:is(.content-container .value-container) .value-slider-container {
      width: 100%;
    }

.content-container .icon-button-container {
    display: flex;
    flex-direction: row;
    padding: 0 var(--app-components-system-menu-padding-horizontal);
  }

:is(.content-container .icon-button-container) > obc-button {
      width: 100%;
      display: block;
      z-index: 1;
    }

.disabled:is(:is(.content-container .icon-button-container) > obc-button) {
        z-index: 0;
      }

:is(.content-container .icon-button-container) .btn-icon {
      color: var(--on-normal-neutral-color);
    }

:is(.content-container .icon-button-container) .disabled .btn-icon {
      color: var(--on-normal-disabled-color);
    }

.palette obc-button::part(visible-wrapper) {
  height: 100%;
}

.divider {
  height: 1px;
  align-self: stretch;
  background: var(--border-divider-color);
}

.footer {
  padding: var(--app-components-dimming-menu-padding-vertical)
    var(--app-components-dimming-menu-margin-horizontal);

  padding-top: calc(var(--app-components-dimming-menu-padding-vertical) - 1px);

  border-top: 1px solid var(--border-divider-color);
}

.footer obc-user-button {
    height: 32px;
    width: 32px;
  }
`;/**
 * @license
 * Copyright 2018 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Fm=R=>R??Zt,Mv=Ht`
          * {
            -webkit-tap-highlight-color: transparent;
          }

.wrapper {
  padding: 0;
  user-select: none;
  background: transparent;
  height: var(--ui-components-button-touch-target-size);
  min-width: var(--ui-components-button-touch-target-size);
  appearance: none;
  border: none;
  display: flex;
  align-items: center;
  justify-content: center;
  font-feature-settings:
    'liga' off,
    'clig' off;
  font-family: var(--font-family-main);
  font-size: var(--global-typography-ui-button-font-size);
  font-style: normal;
  font-weight: var(--global-typography-ui-button-font-weight);
  line-height: var(--global-typography-ui-button-line-height) /* 150% */;
  text-decoration: none;
}

.wrapper.full-width {
    width: 100%;
  }

.wrapper.full-width .visible-wrapper {
      width: 100%;
    }

.wrapper .visible-wrapper {
    border-radius: var(--ui-components-button-border-radius-top-left)
      var(--ui-components-button-border-radius-top-right)
      var(--ui-components-button-border-radius-bottom-right)
      var(--ui-components-button-border-radius-bottom-left);
    display: flex;
    align-items: center;
    justify-content: center;
    padding-left: calc(2 * var(--ui-components-button-padding-horizontal));
    padding-right: calc(2 * var(--ui-components-button-padding-horizontal));
    height: var(--ui-components-button-visual-size);
  }

.wrapper .icon {
    height: var(--ui-components-button-icon-size);
    width: var(--ui-components-button-icon-size);
  }

.wrapper:not(.hasIconLeading) .icon.leading {
    display: none;
    width: 0;
  }

.wrapper:not(.hasIconTrailing) .icon.trailing {
    display: none;
    width: 0;
  }

.wrapper .label {
    padding-left: var(--ui-components-button-label-spacing);
    padding-right: var(--ui-components-button-label-spacing);
  }

.wrapper.variant-normal {
            cursor: pointer;
}

.wrapper.variant-normal:focus {
            outline: none;
}

.wrapper.variant-normal .visible-wrapper {
            border-color: var(--normal-enabled-border-color);
            background-color: var(--normal-enabled-background-color);
            border-width: 1px;
            border-style: solid;
            cursor: pointer;
            --base-border-color: var(--normal-enabled-border-color);
            --base-background-color: var(--normal-enabled-background-color);
}

.wrapper.variant-normal.activated .visible-wrapper {
            border-color: var(--normal-activated-border-color);
            background-color: var(--normal-activated-background-color);
            --base-border-color: var(--normal-activated-border-color);
            --base-background-color: var(--normal-activated-background-color);
}

@media (hover:hover) {

.wrapper.variant-normal:hover .visible-wrapper {
                        border-color: color-mix(in srgb, var(--normal-hover-border-color) calc(var(--obc-can-hover) * 100%), var(--base-border-color));
                        background-color: color-mix(in srgb, var(--normal-hover-background-color) calc(var(--obc-can-hover) * 100%), var(--base-background-color));
            }
}

.wrapper.variant-normal:active .visible-wrapper {
            border-color: var(--normal-pressed-border-color);
            background-color: var(--normal-pressed-background-color);
}

.wrapper.variant-normal:focus-visible .visible-wrapper {
            outline-color: var(--border-focus-color);
            outline-width: var(--global-size-spacing-border-weight-focusframe);
            outline-style: solid;
            border-color: var(--container-global-color);
            z-index: 1;
}

.wrapper.variant-normal:disabled .visible-wrapper {
            border-color: var(--normal-disabled-border-color);
            background-color: var(--normal-disabled-background-color);
            cursor: not-allowed;
            color: var(--on-normal-disabled-color);
}

.wrapper.variant-normal.disabled .visible-wrapper {
            border-color: var(--normal-disabled-border-color);
            background-color: var(--normal-disabled-background-color);
            cursor: not-allowed;
            color: var(--on-normal-disabled-color);
}

.wrapper.variant-normal:disabled {
            cursor: not-allowed;
}

.wrapper.variant-normal.disabled {
            cursor: not-allowed;
}

.wrapper.variant-normal {
    color: var(--on-normal-active-color);
}

.wrapper.variant-normal .icon {
      color: var(--on-normal-neutral-color);
    }

.wrapper.variant-normal:disabled .icon {
      color: var(--on-normal-disabled-color);
    }

.wrapper.variant-flat {
            cursor: pointer;
}

.wrapper.variant-flat:focus {
            outline: none;
}

.wrapper.variant-flat .visible-wrapper {
            border-color: var(--flat-enabled-border-color);
            background-color: var(--flat-enabled-background-color);
            border-width: 1px;
            border-style: solid;
            cursor: pointer;
            --base-border-color: var(--flat-enabled-border-color);
            --base-background-color: var(--flat-enabled-background-color);
}

.wrapper.variant-flat.activated .visible-wrapper {
            border-color: var(--flat-activated-border-color);
            background-color: var(--flat-activated-background-color);
            --base-border-color: var(--flat-activated-border-color);
            --base-background-color: var(--flat-activated-background-color);
}

@media (hover:hover) {

.wrapper.variant-flat:hover .visible-wrapper {
                        border-color: color-mix(in srgb, var(--flat-hover-border-color) calc(var(--obc-can-hover) * 100%), var(--base-border-color));
                        background-color: color-mix(in srgb, var(--flat-hover-background-color) calc(var(--obc-can-hover) * 100%), var(--base-background-color));
            }
}

.wrapper.variant-flat:active .visible-wrapper {
            border-color: var(--flat-pressed-border-color);
            background-color: var(--flat-pressed-background-color);
}

.wrapper.variant-flat:focus-visible .visible-wrapper {
            outline-color: var(--border-focus-color);
            outline-width: var(--global-size-spacing-border-weight-focusframe);
            outline-style: solid;
            border-color: var(--container-global-color);
            z-index: 1;
}

.wrapper.variant-flat:disabled .visible-wrapper {
            border-color: var(--flat-disabled-border-color);
            background-color: var(--flat-disabled-background-color);
            cursor: not-allowed;
            color: var(--on-flat-disabled-color);
}

.wrapper.variant-flat.disabled .visible-wrapper {
            border-color: var(--flat-disabled-border-color);
            background-color: var(--flat-disabled-background-color);
            cursor: not-allowed;
            color: var(--on-flat-disabled-color);
}

.wrapper.variant-flat:disabled {
            cursor: not-allowed;
}

.wrapper.variant-flat.disabled {
            cursor: not-allowed;
}

.wrapper.variant-flat {
    color: var(--on-flat-active-color);
}

.wrapper.variant-flat .icon {
      color: var(--on-flat-neutral-color);
    }

.wrapper.variant-flat:disabled .icon {
      color: var(--on-flat-disabled-color);
    }

.wrapper.variant-raised {
            cursor: pointer;
}

.wrapper.variant-raised:focus {
            outline: none;
}

.wrapper.variant-raised .visible-wrapper {
            border-color: var(--raised-enabled-border-color);
            background-color: var(--raised-enabled-background-color);
            border-width: 1px;
            border-style: solid;
            cursor: pointer;
            --base-border-color: var(--raised-enabled-border-color);
            --base-background-color: var(--raised-enabled-background-color);
}

.wrapper.variant-raised.activated .visible-wrapper {
            border-color: var(--raised-activated-border-color);
            background-color: var(--raised-activated-background-color);
            --base-border-color: var(--raised-activated-border-color);
            --base-background-color: var(--raised-activated-background-color);
}

@media (hover:hover) {

.wrapper.variant-raised:hover .visible-wrapper {
                        border-color: color-mix(in srgb, var(--raised-hover-border-color) calc(var(--obc-can-hover) * 100%), var(--base-border-color));
                        background-color: color-mix(in srgb, var(--raised-hover-background-color) calc(var(--obc-can-hover) * 100%), var(--base-background-color));
            }
}

.wrapper.variant-raised:active .visible-wrapper {
            border-color: var(--raised-pressed-border-color);
            background-color: var(--raised-pressed-background-color);
}

.wrapper.variant-raised:focus-visible .visible-wrapper {
            outline-color: var(--border-focus-color);
            outline-width: var(--global-size-spacing-border-weight-focusframe);
            outline-style: solid;
            border-color: var(--container-global-color);
            z-index: 1;
}

.wrapper.variant-raised:disabled .visible-wrapper {
            border-color: var(--raised-disabled-border-color);
            background-color: var(--raised-disabled-background-color);
            cursor: not-allowed;
            color: var(--on-raised-disabled-color);
}

.wrapper.variant-raised.disabled .visible-wrapper {
            border-color: var(--raised-disabled-border-color);
            background-color: var(--raised-disabled-background-color);
            cursor: not-allowed;
            color: var(--on-raised-disabled-color);
}

.wrapper.variant-raised:disabled {
            cursor: not-allowed;
}

.wrapper.variant-raised.disabled {
            cursor: not-allowed;
}

.wrapper.variant-raised {
    color: var(--on-raised-active-color);
}

.wrapper.variant-raised .icon {
      color: var(--on-raised-neutral-color);
    }

.wrapper.variant-raised:disabled .icon {
      color: var(--on-raised-disabled-color);
    }

.wrapper.segment-position-start {
    margin-right: -1px;
  }

.wrapper.segment-position-start .visible-wrapper {
      border-top-right-radius: 0;
      border-bottom-right-radius: 0;
    }

.wrapper.segment-position-middle .visible-wrapper {
    border-radius: 0;
  }

.wrapper.segment-position-end .visible-wrapper {
    border-top-left-radius: 0;
    border-bottom-left-radius: 0;
  }

:host:has(.segment-position-start),
:host:has(.segment-position-middle) {
  margin-right: -0.5px;
}

:host:has(.segment-position-middle),
:host:has(.segment-position-end) {
  margin-left: -0.5px;
}
`;var Av=Object.defineProperty,Ev=Object.getOwnPropertyDescriptor,su=(R,A,B,P)=>{for(var D=P>1?void 0:P?Ev(A,B):A,X=R.length-1,M;X>=0;X--)(M=R[X])&&(D=(P?M(A,B,D):M(D))||D);return P&&D&&Av(A,B,D),D};let wl=class extends Bt{constructor(){super(...arguments),this.variant="normal",this.fullWidth=!1,this.disabled=!1,this.showLeadingIcon=!1,this.showTrailingIcon=!1,this.href=void 0,this.target=void 0,this.segmentPosition="single"}renderLeadingIcon(){return this.showLeadingIcon?nn`
        <span class="icon leading" part="icon leading">
          <slot name="leading-icon"></slot>
        </span>
      `:nn``}renderTrailingIcon(){return this.showTrailingIcon?nn`
        <span class="icon trailing" part="icon trailing">
          <slot name="trailing-icon"></slot>
        </span>
      `:nn``}render(){const R=this.href?_p`a`:_p`button`;return nn`
      <${R}
        class=${Wn({wrapper:!0,["variant-"+this.variant]:!0,hasIconLeading:this.showLeadingIcon,hasIconTrailing:this.showTrailingIcon,"full-width":this.fullWidth,["segment-position-"+this.segmentPosition]:!0})}
        ?disabled=${this.disabled}
        href=${Fm(this.href)}
        target=${Fm(this.target)}
        part="wrapper"
      >
        <div class="visible-wrapper" part="visible-wrapper">
          ${this.renderLeadingIcon()}
          <span class="label" part="label">
            <slot></slot>
          </span>
          ${this.renderTrailingIcon()}
        </div>
      </${R}>
    `}};wl.styles=ga(Mv);su([Ie({type:String})],wl.prototype,"variant",2);su([Ie({type:Boolean,reflect:!0})],wl.prototype,"fullWidth",2);su([Ie({type:Boolean})],wl.prototype,"disabled",2);su([Ie({type:Boolean})],wl.prototype,"showLeadingIcon",2);su([Ie({type:Boolean})],wl.prototype,"showTrailingIcon",2);su([Ie({type:String})],wl.prototype,"href",2);su([Ie({type:String})],wl.prototype,"target",2);su([Ie({type:String})],wl.prototype,"segmentPosition",2);wl=su([Gt("obc-button")],wl);const zv=Ht`
          * {
            -webkit-tap-highlight-color: transparent;
          }

* {
  box-sizing: border-box;
}

:host {
  display: flex;
  align-items: center;
  justify-content: center;
  height: 48px;

  color: var(--element-neutral-color, #1a1a1a);
}

:host([hugcontainer]) {
  margin-left: -12px;
  margin-right: -12px;
}

.wrapper {
  flex: 1;
  height: 48px;
  position: relative;
}

.slider {
  position: absolute;
  -webkit-appearance: none;
  appearance: none;
  width: 100%;
  height: 48px;
  margin: 0;
  padding: 0;
  background: none;
}

.slider::-webkit-slider-container {
  position: absolute;
  margin: auto 0;
  top: 0;
  bottom: 0;
  left: 0;
  right: 0;
  height: 40px;
  border-radius: 6px;
  cursor: pointer;
}

.no-input :is(.slider::-webkit-slider-container) {
    cursor: default;
  }

.container-hover {
  position: absolute;
  left: anchor(right);
  top: 0;
  bottom: 0;
  position-anchor: --thumb;
  right: 0;
  cursor: pointer;
}

.no-input .container-hover {
    cursor: default;
  }

.track {
  position: absolute;
  -webkit-appearance: none;
  appearance: none;
  margin: auto 0;
  padding: 0;
  top: 0;
  bottom: 0;
  left: 18px;
  right: 18px;
  height: 4px;
  border-radius: 6px;
  background: var(--border-outline-color);
}

.track::after {
    content: '';
    position: absolute;
    top: 0;
    bottom: 0;
    left: 0;
    right: 0;
    background: var(--flat-enabled-background-color);
    border-radius: 6px;
  }

.enhanced .track {
  height: 32px;
  background: var(--indent-enabled-background-color);
  border: 1px solid var(--indent-enabled-border-color);
}

.normal .track:has(~ .container-hover:hover)::after,
.normal .track:has(~ input:hover)::after {
  background: var(--flat-hover-background-color);
}

.enhanced .track:has(~ .container-hover:hover)::after,
.enhanced .track:has(~ input:hover)::after {
  background-color: var(--indent-hover-background-color);
  border-color: var(--indent-hover-border-color);
}

.normal .track:has(~ .container-hover:active)::after,
.normal .track:has(~ input:active)::after {
  background: var(--flat-pressed-background-color);
}

.enhanced .track:has(~ .container-hover:active)::after,
.enhanced .track:has(~ input:active)::after {
  background-color: var(--indent-pressed-background-color);
  border-color: var(--indent-pressed-border-color);
}

.interactive-track-hover {
  position: absolute;
  left: 0;
  top: 0;
  bottom: 0;
  position-anchor: --thumb;
  right: anchor(left);
  cursor: pointer;
}

.no-input .interactive-track-hover {
    cursor: default;
  }

.interactive-track {
  position: absolute;
  left: 18px;
  top: 0;
  bottom: 0;
  height: 4px;
  border-radius: 6px;
  right: anchor(center);
  position-anchor: --thumb;
  margin-top: auto;
  margin-bottom: auto;
  background: var(--selected-enabled-background-color);
  border-color: var(--selected-enabled-background-color);
  border-width: 1px;
  border-style: solid;
  pointer-events: none;
}

.enhanced .interactive-track {
  height: 32px;
  right: calc(anchor(center) - 6px);
}

.interactive-track-hover:hover ~ .interactive-track,
input:hover ~ .interactive-track {
  background: var(--selected-hover-background-color);
  border-color: var(--selected-hover-background-color);
}

.interactive-track-hover:active ~ .interactive-track,
input:active ~ .interactive-track {
  background: var(--selected-pressed-background-color);
  border-color: var(--selected-pressed-background-color);
}

/** slider thumb */

input::-webkit-slider-thumb {
  -webkit-appearance: none;
  appearance: none;
  margin: 0;
  padding: 0;
  width: 48px;
  height: 48px;
  background: transparent;
  cursor: grab;

  anchor-name: --thumb;
}

.no-input input::-webkit-slider-thumb {
  cursor: default;
}

input:active::-webkit-slider-thumb {
  cursor: grabbing;
}

.no-input input:active::-webkit-slider-thumb {
  cursor: default;
}

.thumb {
  position: absolute;
  top: anchor(top);
  left: anchor(left);
  right: anchor(right);
  bottom: anchor(bottom);
  position-anchor: --thumb;
  border-radius: 6px;
  border-width: 2px;
  height: 28px;
  width: 12px;
  margin: auto;
  border-style: solid;
  border-color: var(--container-background-color);
  background: var(--selected-enabled-background-color);
  pointer-events: none;
}

:host:has(.no-input) {
  height: 24px;
  margin-left: -8px;
  margin-right: -8px;
}

.no-input .thumb {
    height: 12px;
    width: 12px;
  }

.enhanced .thumb {
  border-width: 4px;
  height: 32px;
  border-color: var(--selected-enabled-background-color);
  background: var(--container-background-color);
}

input:hover ~ .thumb {
  background: var(--selected-hover-background-color);
}

.enhanced input:hover ~ .thumb {
  border-color: var(--selected-hover-background-color);
  background: var(--container-background-color);
}

input:active ~ .thumb {
  background: var(--selected-pressed-background-color);
}

.enhanced input:active ~ .thumb {
  border-color: var(--selected-pressed-background-color);
  background: var(--container-background-color);
}
`;var Pv=Object.defineProperty,kv=Object.getOwnPropertyDescriptor,Sl=(R,A,B,P)=>{for(var D=P>1?void 0:P?kv(A,B):A,X=R.length-1,M;X>=0;X--)(M=R[X])&&(D=(P?M(A,B,D):M(D))||D);return P&&D&&Pv(A,B,D),D},Em=(R=>(R.Normal="normal",R.Enhanced="enhanced",R.NoInput="no-input",R))(Em||{});let Ko=class extends Bt{constructor(){super(...arguments),this.value=50,this.min=0,this.max=100,this.stepClick=10,this.variant="normal",this.hasLeftIcon=!1,this.hasRightIcon=!1,this.allowSeeking=!1,this.seekingSpeed=1/3,this.animationFrame=null,this.isMouseDown=!1,this.isTouchActive=!1,this.targetValue=0,this.isDragging=!1,this.animationStartTime=null,this.animationStartValue=0,this.onWindowMouseMove=R=>{this.onMouseMove(R)},this.onWindowMouseUp=()=>{this.onMouseUp()},this.onWindowTouchMove=R=>{this.onTouchMove(R)},this.onWindowTouchEnd=()=>{this.onTouchEnd()}}onInput(R){this.value=R,this.dispatchEvent(new CustomEvent("value",{detail:this.value}))}onReduceClick(){this.onInput(Math.max(this.value-this.stepClick,this.min))}onIncreaseClick(){this.onInput(Math.min(this.value+this.stepClick,this.max))}get slider(){return this.renderRoot.querySelector('input[type="range"]')}isClickingThumb(R){const A=this.slider.getBoundingClientRect(),B=A.left+24,P=A.width-48,D=48,X=parseFloat(this.slider.value)/(parseFloat(this.slider.max)-parseFloat(this.slider.min)),M=B+P*X;let d;return R instanceof TouchEvent?d=R.touches[0].clientX:d=R.clientX,Math.abs(d-M)<=D/2}onMouseDown(R){this.variant!=="no-input"&&(this.isClickingThumb(R)||(this.isMouseDown=!0,this.updateTargetValue(R),R.preventDefault(),window.addEventListener("mousemove",this.onWindowMouseMove),window.addEventListener("mouseup",this.onWindowMouseUp),this.startAnimation()))}onTouchStart(R){this.variant!=="no-input"&&(this.isClickingThumb(R)||(this.isTouchActive=!0,this.updateTargetValue(R),R.preventDefault(),window.addEventListener("touchmove",this.onWindowTouchMove,{passive:!1}),window.addEventListener("touchend",this.onWindowTouchEnd),this.startAnimation()))}onMouseMove(R){this.isMouseDown&&this.updateTargetValue(R)}onTouchMove(R){this.isTouchActive&&this.updateTargetValue(R)}onMouseUp(){this.isMouseDown=!1,window.removeEventListener("mousemove",this.onWindowMouseMove),window.removeEventListener("mouseup",this.onWindowMouseUp),this.stopAnimation()}onTouchEnd(){this.isTouchActive=!1,window.removeEventListener("touchmove",this.onWindowTouchMove),window.removeEventListener("touchend",this.onWindowTouchEnd),this.stopAnimation()}updateTargetValue(R){const A=this.slider.getBoundingClientRect(),B=A.left+24,P=A.width-48,X=((R instanceof MouseEvent?R.clientX:R.touches[0].clientX)-B)/P,M=parseFloat(this.slider.min),d=parseFloat(this.slider.max),ye=M+(d-M)*X;this.step?this.targetValue=Math.round(ye/this.step)*this.step:this.targetValue=ye}startAnimation(){this.isDragging=this.allowSeeking,this.animationStartTime=performance.now(),this.animationStartValue=parseFloat(this.slider.value);const R=parseFloat(this.slider.min),A=parseFloat(this.slider.max),B=this.step,P=1/this.seekingSpeed*1e3,D=this.targetValue>this.animationStartValue?1:-1,X=()=>{let M=this.targetValue;if(!this.isDragging){const d=performance.now(),ye=d-(this.animationStartTime??d),ke=Math.abs(A-R),ot=Math.min(ye/P,1),Je=this.animationStartValue+D*ke*ot;M=this.animationStartValue,D>0?(M=B===void 0?Je:Math.ceil((Je-R)/B)*B+R,M=Math.min(this.targetValue,M)):(M=B===void 0?Je:Math.floor((Je-R)/B)*B+R,M=Math.max(this.targetValue,M))}parseFloat(this.slider.value)!==M&&(this.slider.value=String(M),this.slider.dispatchEvent(new Event("input"))),D>0&&M<this.targetValue||D<0&&M>this.targetValue?this.animationFrame=requestAnimationFrame(X):(this.isMouseDown||this.isTouchActive)&&(this.animationStartTime=performance.now(),this.animationStartValue=parseFloat(this.slider.value),this.animationFrame=requestAnimationFrame(X),this.isDragging=!0)};this.animationFrame=requestAnimationFrame(X)}stopAnimation(){this.animationFrame!==null&&(cancelAnimationFrame(this.animationFrame),this.animationFrame=null)}render(){return Ye`
      ${this.hasLeftIcon?Ye` <obc-icon-button @click=${this.onReduceClick} variant="normal">
            <slot name="icon-left"></slot>
          </obc-icon-button>`:null}
      <div class=${Wn({wrapper:!0,[this.variant]:!0})}>
        <div class="track"></div>
        <input
          type="range"
          min=${this.min}
          max=${this.max}
          step=${Fm(this.step)}
          .value=${this.value.toString()}
          ?disabled=${this.variant==="no-input"}
          class="slider"
          @input=${R=>{this.value=Number(R.target.value),this.dispatchEvent(new CustomEvent("value",{detail:this.value}))}}
          @mousedown=${this.onMouseDown}
          @touchstart=${this.onTouchStart}
          @mousemove=${this.onMouseMove}
          @touchmove=${this.onTouchMove}
          @mouseup=${this.onMouseUp}
          @touchend=${this.onTouchEnd}
        />
        <div
          class="interactive-track-hover"
          @mousedown=${this.onMouseDown}
          @touchstart=${this.onTouchStart}
          @mousemove=${this.onMouseMove}
          @touchmove=${this.onTouchMove}
          @mouseup=${this.onMouseUp}
          @touchend=${this.onTouchEnd}
        ></div>
        <div
          class="container-hover"
          @mousedown=${this.onMouseDown}
          @touchstart=${this.onTouchStart}
          @mousemove=${this.onMouseMove}
          @touchmove=${this.onTouchMove}
          @mouseup=${this.onMouseUp}
          @touchend=${this.onTouchEnd}
        ></div>
        <div class="interactive-track"></div>
        <div class="thumb"></div>
      </div>
      ${this.hasRightIcon?Ye`<obc-icon-button @click=${this.onIncreaseClick} variant="normal">
            <slot name="icon-right"></slot>
          </obc-icon-button>`:null}
    `}};Ko.styles=ga(zv);Sl([Ie({type:Number})],Ko.prototype,"value",2);Sl([Ie({type:Number})],Ko.prototype,"min",2);Sl([Ie({type:Number})],Ko.prototype,"max",2);Sl([Ie({type:Number})],Ko.prototype,"step",2);Sl([Ie({type:Number})],Ko.prototype,"stepClick",2);Sl([Ie({type:String})],Ko.prototype,"variant",2);Sl([Ie({type:Boolean})],Ko.prototype,"hasLeftIcon",2);Sl([Ie({type:Boolean})],Ko.prototype,"hasRightIcon",2);Sl([Ie({type:Boolean})],Ko.prototype,"allowSeeking",2);Sl([Ie({type:Number})],Ko.prototype,"seekingSpeed",2);Ko=Sl([Gt("obc-slider")],Ko);const Dv=Ht`
          * {
            -webkit-tap-highlight-color: transparent;
          }

label {
  box-sizing: border-box;
  display: flex;
  align-items: center;
  justify-content: space-between;
  position: relative;
  height: var(--ui-components-toggle-switch-item-touch-target-size-two-story);
  padding: 0px var(--ui-components-toggle-switch-item-padding-horizontal);
  flex: 1 0 0;

  color: var(--element-active-color, #1a1a1a);
  cursor: pointer;
  user-select: none;
}

label.has-description .icon-label-container {
    display: flex;
    align-items: center;
    flex: 1 0 0;
  }

label .label {
    /* UI/Body */
    font-feature-settings: 'liga' off, 'clig' off;
    font-family: var(--font-family-main);
    font-size: var(--global-typography-ui-body-font-size);
    font-style: normal;
    font-weight: var(--global-typography-ui-body-font-weight);
    line-height: var(--global-typography-ui-body-line-height);
    text-decoration: none;
  }

label .description {
    font-feature-settings: 'liga' off, 'clig' off;
    font-family: var(--font-family-main);
    font-size: var(--global-typography-ui-label-font-size);
    font-style: normal;
    font-weight: var(--global-typography-ui-label-font-weight);
    line-height: var(--global-typography-ui-label-line-height);
    display: -webkit-box;
    -webkit-box-orient: vertical;
    -webkit-line-clamp: 1;
    color: var(--element-neutral-color);
    overflow: hidden;
  }

label .icon-label-container {
    display: flex;
    align-items: center;
    flex: 1 0 0;
  }

label .label-container {
    display: flex;
    padding: 0px var(--ui-components-toggle-switch-item-label-spacing);
    align-items: center;
    flex: 1 0 0;
  }

label.has-description .label-container {
    flex-direction: column;
    justify-content: center;
    align-items: flex-start;
  }

label .presenter {
    box-sizing: border-box;
    width: var(--ui-components-toggle-switch-selection-width);
    height: var(--ui-components-toggle-switch-selection-height);
    padding: 0px var(--ui-components-toggle-switch-selection-padding);
    flex-shrink: 0;
    border-radius: var(--ui-components-toggle-switch-item-border-radius);

    background: var(--indent-enabled-background-color, rgba(0, 0, 0, 0.05));
    border: solid 1px var(--element-inactive-color, rgba(0, 0, 0, 0.42));
    user-select: none;

    display: flex;
    position: relative;
    align-items: center;
    
    /* Add transition for smooth background and border color changes */
    transition: background-color 0.3s ease, border-color 0.3s ease, box-shadow 0.15s ease;

  }

:is(label .presenter):hover {
      background: var(--indent-hover-background-color, rgba(0, 0, 0, 0.1));
    }

:is(label .presenter):active {
      background: var(--indent-pressed-background-color, rgba(0, 0, 0, 0.16));
    }

:is(label .presenter):has(:focus-visible) {
      /* Remove the original border when focused */
      border: 1px solid transparent;
      
      /* Ensure the focus styling works with the proper border radius */
      border-radius: var(--global-border-radius-border-radius-round, var(--ui-components-toggle-switch-item-border-radius));
      
      /* Create the double border effect with proper spacing */
      box-shadow: 
        /* Inner border (1px) */
        0 0 0 1px var(--container-global-color, #fff),
        /* Outer border (variable width) */
        0 0 0 calc(1px + var(--global-size-spacing-border-weight-focusframe, 2px)) var(--border-focus-color, #007bff);
      
      /* Remove default outline */
      outline: none;
      
      /* Ensure the element is positioned to accommodate the box-shadow */
      position: relative;
      z-index: 1;
    }

label.disabled * {
    color: var(--element-disabled-color);
    cursor: not-allowed;
  }

label.disabled {
    cursor: not-allowed;
  }

:is(label.disabled .presenter) {
            border-color: var(--disabled-enabled-border-color);
            background-color: var(--disabled-enabled-background-color);
            border-width: 1px;
            border-style: solid;
            cursor: pointer;
            --base-border-color: var(--disabled-enabled-border-color);
            --base-background-color: var(--disabled-enabled-background-color);
}

:is(label.disabled .presenter):focus {
            outline: none;
}

.activated:is(label.disabled .presenter) {
            border-color: var(--disabled-activated-border-color);
            background-color: var(--disabled-activated-background-color);
            --base-border-color: var(--disabled-activated-border-color);
            --base-background-color: var(--disabled-activated-background-color);
}

@media (hover:hover) {

:is(label.disabled .presenter):hover {
                        border-color: color-mix(in srgb, var(--disabled-hover-border-color) calc(var(--obc-can-hover) * 100%), var(--base-border-color));
                        background-color: color-mix(in srgb, var(--disabled-hover-background-color) calc(var(--obc-can-hover) * 100%), var(--base-background-color));
            }
}

:is(label.disabled .presenter):active {
            border-color: var(--disabled-pressed-border-color);
            background-color: var(--disabled-pressed-background-color);
}

:is(label.disabled .presenter):focus-visible {
            outline-color: var(--border-focus-color);
            outline-width: var(--global-size-spacing-border-weight-focusframe);
            outline-style: solid;
            border-color: var(--container-global-color);
            z-index: 1;
}

:is(label.disabled .presenter):disabled {
            border-color: var(--disabled-disabled-border-color);
            background-color: var(--disabled-disabled-background-color);
            cursor: not-allowed;
            color: var(--on-disabled-disabled-color);
}

.disabled:is(label.disabled .presenter) {
            border-color: var(--disabled-disabled-border-color);
            background-color: var(--disabled-disabled-background-color);
            cursor: not-allowed;
            color: var(--on-disabled-disabled-color);
}

label.disabled .knob {
      background-color: var(--element-disabled-color);
    }

label.checked .label {
      /* UI/Body-Active */
      font-feature-settings: 'liga' off, 'clig' off;
      font-family: var(--font-family-main);
      font-size: var(--global-typography-ui-body-active-font-size);
      font-style: normal;
      font-weight: var(--font-weight-bold);
      line-height: var(--global-typography-ui-body-active-line-height);
    }

:is(label.checked .presenter) {
            border-color: var(--selected-enabled-border-color);
            background-color: var(--selected-enabled-background-color);
            border-width: 1px;
            border-style: solid;
            cursor: pointer;
            --base-border-color: var(--selected-enabled-border-color);
            --base-background-color: var(--selected-enabled-background-color);
}

:is(label.checked .presenter):focus {
            outline: none;
}

.activated:is(label.checked .presenter) {
            border-color: var(--selected-activated-border-color);
            background-color: var(--selected-activated-background-color);
            --base-border-color: var(--selected-activated-border-color);
            --base-background-color: var(--selected-activated-background-color);
}

@media (hover:hover) {

:is(label.checked .presenter):hover {
                        border-color: color-mix(in srgb, var(--selected-hover-border-color) calc(var(--obc-can-hover) * 100%), var(--base-border-color));
                        background-color: color-mix(in srgb, var(--selected-hover-background-color) calc(var(--obc-can-hover) * 100%), var(--base-background-color));
            }
}

:is(label.checked .presenter):active {
            border-color: var(--selected-pressed-border-color);
            background-color: var(--selected-pressed-background-color);
}

:is(label.checked .presenter):focus-visible {
            outline-color: var(--border-focus-color);
            outline-width: var(--global-size-spacing-border-weight-focusframe);
            outline-style: solid;
            border-color: var(--container-global-color);
            z-index: 1;
}

:is(label.checked .presenter):disabled {
            border-color: var(--selected-disabled-border-color);
            background-color: var(--selected-disabled-background-color);
            cursor: not-allowed;
            color: var(--on-selected-disabled-color);
}

.disabled:is(label.checked .presenter) {
            border-color: var(--selected-disabled-border-color);
            background-color: var(--selected-disabled-background-color);
            cursor: not-allowed;
            color: var(--on-selected-disabled-color);
}

label.checked.disabled .presenter {
        border-color: var(--selected-disabled-border-color);
        background-color: var(--selected-disabled-background-color);
        cursor: not-allowed;
      }

label.checked.disabled .knob {
        background-color: var(--on-selected-disabled-color);
      }

.icon-container {
  width: var(--ui-components-toggle-switch-item-icon-size);
  height: var(--ui-components-toggle-switch-item-icon-size);
  color: var(--element-neutral-color);
}

.switch {
  padding: var(--global-size-spacing-border-weight-focusframe, 2px);
  overflow: visible;
}

input {
  position: absolute;
  height: var(--ui-components-toggle-switch-touch-target);
  width: var(--ui-components-toggle-switch-selection-width);
  top: 0;
  bottom: 0;
  right: -1px;
  left: -1px;
  opacity: 0;
  margin: auto;
}

.knob {
  width: var(--ui-components-toggle-switch-thumb-size);
  height: var(--ui-components-toggle-switch-thumb-size);
  flex-shrink: 0;
  fill: var(--on-selected-active-color);
  border-radius: 50%;

  background: var(--element-neutral-color, rgba(0, 0, 0, 0.59));

  /* Add transition for smooth knob movement and color change */
  transition: transform 0.3s ease, background-color 0.3s ease;
}

.checked .knob {
    background: var(--on-selected-active-color, #fff);
    /* Move knob to the right edge, matching the original flex-end position */
    transform: translateX(calc(var(--ui-components-toggle-switch-selection-width) - var(--ui-components-toggle-switch-thumb-size) - (2 * var(--ui-components-toggle-switch-selection-padding))));
  }

.bottom-divider {
  width: 100%;
  height: 1px;
  position: absolute;
  bottom: -1px;
  border-radius: 1px;
  background: var(--border-divider-color);
}`;var Lv=Object.defineProperty,Iv=Object.getOwnPropertyDescriptor,ah=(R,A,B,P)=>{for(var D=P>1?void 0:P?Iv(A,B):A,X=R.length-1,M;X>=0;X--)(M=R[X])&&(D=(P?M(A,B,D):M(D))||D);return P&&D&&Lv(A,B,D),D};let uc=class extends Bt{constructor(){super(...arguments),this.label="Label",this.checked=!1,this.disabled=!1,this.hasDescription=!1,this.description="",this.hasBottomDivider=!1,this.hasIcon=!1}_tryChange(R){if(this.disabled){R.preventDefault();return}this.checked=R.target.checked}render(){return Ye`
      <label
        class=${Wn({checked:this.checked,disabled:this.disabled,"has-description":this.hasDescription})}
      >
        <div class="icon-label-container">
          ${this.hasIcon?Ye`<div class="icon-container"><slot name="icon"></slot></div>`:Zt}
          <div class="label-container">
            <span class="label">${this.label}</span>
            ${this.hasDescription?Ye`<span class="description">${this.description}</span>`:Zt}
          </div>
        </div>
        <div class="switch">
          <div class="presenter ${Wn({checked:this.checked})}">
            <div class="knob"></div>
            <input
              type="checkbox"
              ?checked=${this.checked}
              ?disabled=${this.disabled}
              @input=${this._tryChange}
            />
          </div>
        </div>
        ${this.hasBottomDivider?Ye`<div class="bottom-divider"></div>`:Zt}
      </label>
    `}};uc.styles=ga(Dv);ah([Ie({type:String})],uc.prototype,"label",2);ah([Ie({type:Boolean})],uc.prototype,"checked",2);ah([Ie({type:Boolean})],uc.prototype,"disabled",2);ah([Ie({type:Boolean})],uc.prototype,"hasDescription",2);ah([Ie({type:String})],uc.prototype,"description",2);ah([Ie({type:Boolean})],uc.prototype,"hasBottomDivider",2);ah([Ie({type:Boolean})],uc.prototype,"hasIcon",2);uc=ah([Gt("obc-toggle-switch")],uc);const Rv=Ht`
          * {
            -webkit-tap-highlight-color: transparent;
          }

:host {
  flex: 1;
}

.wrapper {
  height: var(--ui-components-button-touch-target-size);
  width: 100%;
  min-width: var(--ui-components-icon-toggle-button-horizontal-item-touch-target-size);
  min-height: var(--ui-components-toggle-button-toggle-button-item-touch-target-size);
  user-select: none;
  padding: 0;
  background: transparent;
  display: flex;
  appearance: none;
  border: none;
  align-items: center;
  justify-content: center;
  position: relative;
}

.wrapper {
            cursor: pointer;
}

.wrapper:focus {
            outline: none;
}

.wrapper .visible-wrapper {
            border-color: var(--flat-enabled-border-color);
            background-color: var(--flat-enabled-background-color);
            border-width: 1px;
            border-style: solid;
            cursor: pointer;
            --base-border-color: var(--flat-enabled-border-color);
            --base-background-color: var(--flat-enabled-background-color);
}

.wrapper.activated .visible-wrapper {
            border-color: var(--flat-activated-border-color);
            background-color: var(--flat-activated-background-color);
            --base-border-color: var(--flat-activated-border-color);
            --base-background-color: var(--flat-activated-background-color);
}

@media (hover:hover) {

.wrapper:hover .visible-wrapper {
                        border-color: color-mix(in srgb, var(--flat-hover-border-color) calc(var(--obc-can-hover) * 100%), var(--base-border-color));
                        background-color: color-mix(in srgb, var(--flat-hover-background-color) calc(var(--obc-can-hover) * 100%), var(--base-background-color));
            }
}

.wrapper:active .visible-wrapper {
            border-color: var(--flat-pressed-border-color);
            background-color: var(--flat-pressed-background-color);
}

.wrapper:focus-visible .visible-wrapper {
            outline-color: var(--border-focus-color);
            outline-width: var(--global-size-spacing-border-weight-focusframe);
            outline-style: solid;
            border-color: var(--container-global-color);
            z-index: 1;
}

.wrapper:disabled .visible-wrapper {
            border-color: var(--flat-disabled-border-color);
            background-color: var(--flat-disabled-background-color);
            cursor: not-allowed;
            color: var(--on-flat-disabled-color);
}

.wrapper.disabled .visible-wrapper {
            border-color: var(--flat-disabled-border-color);
            background-color: var(--flat-disabled-background-color);
            cursor: not-allowed;
            color: var(--on-flat-disabled-color);
}

.wrapper:disabled {
            cursor: not-allowed;
}

.wrapper.disabled {
            cursor: not-allowed;
}

.wrapper.type-flat {
    border-color: none;
  }

.wrapper.hug-text:not(.icon-text-under) .visible-wrapper {
    width: fit-content;
  }

.wrapper.icon-text-under {
    align-items: flex-start;
    justify-content: center;
    flex-direction: column;
    padding-top: 8px;
  }

.visible-wrapper {
  box-sizing: border-box;
  display: flex;
  height: var(--ui-components-toggle-button-toggle-button-item-visual-size);
  min-width: var(--ui-components-toggle-button-icon-toggle-button-horizontal-item-touch-target-size);
  padding: 0px var(--ui-components-check-button-padding-horizontal);
  border-radius: var(--ui-components-toggle-button-toggle-button-item-border-radius);
  width: 100%;
  padding: 0px calc(var(--ui-components-check-button-padding-horizontal) * 2);
  display: flex;
  position: relative;
  align-items: center;
  justify-content: center;
  border-radius: 6px;
}

.icon {
  color: var(--on-flat-neutral-color);
  width: var(--ui-components-toggle-button-icon-toggle-button-horizontal-item-icon-size);
  height: var(--ui-components-toggle-button-icon-toggle-button-horizontal-item-icon-size);
  width: var(--ui-components-toggle-button-toggle-button-item-icon-size); 
  height: var(--ui-components-toggle-button-toggle-button-item-icon-size);
}

.label {
  text-wrap: nowrap;
}

.label-container {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 100%;
}

.wrapper.icon-text-under .label {
  color: var(--element-active-color);
  text-align: center;
  font-feature-settings: 'liga' off, 'clig' off;
  font-family: var(--font-family-main);
  font-size: var(--global-typography-ui-label-font-size);
  font-style: normal;
  font-weight: var(--global-typography-ui-label-font-weight);
  line-height: var(--global-typography-ui-label-line-height);
  position: relative;
  top: auto;
  left: auto;
  right: auto;
}

.wrapper.inline-label .label {
  /* UI/Body */
  font-feature-settings: 'liga' off, 'clig' off;
  font-family: var(--font-family-main);
  font-size: var(--global-typography-ui-body-font-size);
  font-style: normal;
  font-weight: var(--global-typography-ui-body-font-weight);
  line-height: var(--global-typography-ui-body-line-height);
  text-decoration: none;
  color: var(--on-flat-active-color);
  padding: 0px
    var(--ui-components-toggle-button-toggle-button-item-label-spacing, 8px);
}

:is(.wrapper.selected.type-regular .visible-wrapper) {
            border-color: var(--selected-enabled-border-color);
            background-color: var(--selected-enabled-background-color);
            border-width: 1px;
            border-style: solid;
            cursor: pointer;
            --base-border-color: var(--selected-enabled-border-color);
            --base-background-color: var(--selected-enabled-background-color);
}

:is(.wrapper.selected.type-regular .visible-wrapper):focus {
            outline: none;
}

.activated:is(.wrapper.selected.type-regular .visible-wrapper) {
            border-color: var(--selected-activated-border-color);
            background-color: var(--selected-activated-background-color);
            --base-border-color: var(--selected-activated-border-color);
            --base-background-color: var(--selected-activated-background-color);
}

@media (hover:hover) {

:is(.wrapper.selected.type-regular .visible-wrapper):hover {
                        border-color: color-mix(in srgb, var(--selected-hover-border-color) calc(var(--obc-can-hover) * 100%), var(--base-border-color));
                        background-color: color-mix(in srgb, var(--selected-hover-background-color) calc(var(--obc-can-hover) * 100%), var(--base-background-color));
            }
}

:is(.wrapper.selected.type-regular .visible-wrapper):active {
            border-color: var(--selected-pressed-border-color);
            background-color: var(--selected-pressed-background-color);
}

:is(.wrapper.selected.type-regular .visible-wrapper):focus-visible {
            outline-color: var(--border-focus-color);
            outline-width: var(--global-size-spacing-border-weight-focusframe);
            outline-style: solid;
            border-color: var(--container-global-color);
            z-index: 1;
}

:is(.wrapper.selected.type-regular .visible-wrapper):disabled {
            border-color: var(--selected-disabled-border-color);
            background-color: var(--selected-disabled-background-color);
            cursor: not-allowed;
            color: var(--on-selected-disabled-color);
}

.disabled:is(.wrapper.selected.type-regular .visible-wrapper) {
            border-color: var(--selected-disabled-border-color);
            background-color: var(--selected-disabled-background-color);
            cursor: not-allowed;
            color: var(--on-selected-disabled-color);
}

.wrapper.selected.type-regular .icon {
    color: var(--on-selected-active-color);
  }

.wrapper.selected.type-regular .label {
    font-feature-settings: 'liga' off, 'clig' off;
    font-family: var(--font-family-main);
    font-size: var(--global-typography-ui-label-active-font-size);
    font-style: normal;
    font-weight: var(--global-typography-ui-label-active-font-weight);
    line-height: var(--global-typography-ui-label-active-line-height);
  }

.wrapper.selected.type-regular.inline-label .label {
    /* UI/Body-Active */
    font-feature-settings: 'liga' off, 'clig' off;
    font-family: var(--font-family-main);
    font-size: var(--global-typography-ui-body-active-font-size);
    font-style: normal;
    font-weight: var(--font-weight-bold);
    line-height: var(--global-typography-ui-body-active-line-height);
    color: var(--on-selected-active-color);
  }

:is(.wrapper.selected.type-flat .visible-wrapper) {
            border-color: var(--amplified-enabled-border-color);
            background-color: var(--amplified-enabled-background-color);
            border-width: 1px;
            border-style: solid;
            cursor: pointer;
            --base-border-color: var(--amplified-enabled-border-color);
            --base-background-color: var(--amplified-enabled-background-color);
}

:is(.wrapper.selected.type-flat .visible-wrapper):focus {
            outline: none;
}

.activated:is(.wrapper.selected.type-flat .visible-wrapper) {
            border-color: var(--amplified-activated-border-color);
            background-color: var(--amplified-activated-background-color);
            --base-border-color: var(--amplified-activated-border-color);
            --base-background-color: var(--amplified-activated-background-color);
}

@media (hover:hover) {

:is(.wrapper.selected.type-flat .visible-wrapper):hover {
                        border-color: color-mix(in srgb, var(--amplified-hover-border-color) calc(var(--obc-can-hover) * 100%), var(--base-border-color));
                        background-color: color-mix(in srgb, var(--amplified-hover-background-color) calc(var(--obc-can-hover) * 100%), var(--base-background-color));
            }
}

:is(.wrapper.selected.type-flat .visible-wrapper):active {
            border-color: var(--amplified-pressed-border-color);
            background-color: var(--amplified-pressed-background-color);
}

:is(.wrapper.selected.type-flat .visible-wrapper):focus-visible {
            outline-color: var(--border-focus-color);
            outline-width: var(--global-size-spacing-border-weight-focusframe);
            outline-style: solid;
            border-color: var(--container-global-color);
            z-index: 1;
}

:is(.wrapper.selected.type-flat .visible-wrapper):disabled {
            border-color: var(--amplified-disabled-border-color);
            background-color: var(--amplified-disabled-background-color);
            cursor: not-allowed;
            color: var(--on-amplified-disabled-color);
}

.disabled:is(.wrapper.selected.type-flat .visible-wrapper) {
            border-color: var(--amplified-disabled-border-color);
            background-color: var(--amplified-disabled-background-color);
            cursor: not-allowed;
            color: var(--on-amplified-disabled-color);
}

.wrapper.selected.type-flat .icon {
    color: var(--on-amplified-active-color);
  }

.wrapper.selected.type-flat .label {
    font-feature-settings: 'liga' off, 'clig' off;
    font-family: var(--font-family-main);
    font-size: var(--global-typography-ui-label-active-font-size);
    font-style: normal;
    font-weight: var(--global-typography-ui-label-active-font-weight);
    line-height: var(--global-typography-ui-label-active-line-height);
    color: var(--on-amplified-active-color);
  }

.wrapper.selected.type-flat.inline-label .label {
    /* UI/Body-Active */
    font-feature-settings: 'liga' off, 'clig' off;
    font-family: var(--font-family-main);
    font-size: var(--global-typography-ui-body-active-font-size);
    font-style: normal;
    font-weight: var(--font-weight-bold);
    line-height: var(--global-typography-ui-body-active-line-height);
    color: var(--on-amplified-active-color);
  }

.wrapper.selected.icon-text-under .label {
  color: var(--element-active-color);
  font-feature-settings: 'liga' off, 'clig' off;
  font-family: var(--font-family-main);
  font-size: var(--global-typography-ui-label-active-font-size);
  font-style: normal;
  font-weight: var(--global-typography-ui-label-active-font-weight);
  line-height: var(--global-typography-ui-label-active-line-height);
}

.wrapper.icon-text-under {
  align-items: flex-start;
  justify-content: flex-start;
  flex-direction: column;
  padding-top: 0;
  height: auto;
  min-height: var(--ui-components-button-touch-target-size);
}

.wrapper.icon-text-under .visible-wrapper {
  margin-top: 0;
  height: var(--ui-components-toggle-button-toggle-button-item-visual-size);
}

.wrapper.icon-text-under .label-container {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 100%;
}

.wrapper.icon-text-under .label {
  color: var(--element-active-color, #1a1a1a);
  text-align: center;
  font-feature-settings: 'liga' off, 'clig' off;
  font-family: var(--font-family-main);
  font-size: var(--global-typography-ui-label-font-size);
  font-style: normal;
  font-weight: var(--global-typography-ui-label-font-weight);
  line-height: var(--global-typography-ui-label-line-height);
  position: relative;
  top: auto;
  left: auto;
  right: auto;
}

.wrapper.disabled,
.wrapper.disabled .visible-wrapper {
  cursor: not-allowed;
}

.wrapper.disabled .icon {
  color: var(--on-flat-disabled-color);
}

.wrapper.disabled .label {
  color: var(--on-flat-disabled-color);
}

.wrapper.disabled.inline-label .label {
  color: var(--on-flat-disabled-color);
}

.wrapper.selected.type-regular.disabled .visible-wrapper {
  border-color: var(--selected-disabled-border-color);
  background-color: var(--selected-disabled-background-color);
  cursor: not-allowed;
}

.wrapper.selected.type-regular.disabled .icon,
.wrapper.selected.type-regular.disabled.inline-label .label {
  color: var(--on-selected-disabled-color);
}

.wrapper.selected.type-regular.disabled .label {
  color: var(--on-flat-disabled-color);
}

.wrapper.selected.type-flat.disabled .visible-wrapper {
  border-color: var(--amplified-disabled-border-color);
  background-color: var(--amplified-disabled-background-color);
  cursor: not-allowed;
}

.wrapper.selected.type-flat.disabled .icon,
.wrapper.selected.type-flat.disabled .label,
.wrapper.selected.type-flat.disabled.inline-label .label {
  color: var(--on-amplified-disabled-color);
}

.wrapper.disabled.icon-text-under .label {
  color: var(--on-flat-disabled-color);
}

.wrapper.selected.disabled.icon-text-under:not(.icon-text-under) .label {
  color: var(--on-selected-disabled-color);
}`;var Bv=Object.defineProperty,Ov=Object.getOwnPropertyDescriptor,nh=(R,A,B,P)=>{for(var D=P>1?void 0:P?Ov(A,B):A,X=R.length-1,M;X>=0;X--)(M=R[X])&&(D=(P?M(A,B,D):M(D))||D);return P&&D&&Bv(A,B,D),D},Nm=(R=>(R.icon="icon",R.text="text",R.iconTextUnder="icon-text-under",R.iconText="text-icon",R))(Nm||{}),Mf=(R=>(R.flat="flat",R.regular="regular",R))(Mf||{});let hc=class extends Bt{constructor(){super(...arguments),this.value="value",this.selected=!1,this.type="text",this.variant="regular",this.hugText=!1,this.noDivider=!1,this.disabled=!1}onClick(){this.disabled||this.dispatchEvent(new CustomEvent("selected",{detail:{value:this.value}}))}render(){const R=this.type==="text"||this.type==="text-icon",A=this.type!=="text",B=this.type!=="icon",P=this.type==="icon-text-under";return Ye`
      <button
        class=${Wn({wrapper:!0,selected:this.selected,"inline-label":R,"type-flat":this.variant==="flat","type-regular":this.variant==="regular","icon-text-under":P,"hug-text":this.hugText,disabled:this.disabled})}
        @click=${this.onClick}
      >
        <div class="visible-wrapper">
          ${A?Ye`<div class="icon">
                <slot name="icon"></slot>
              </div>`:""}
          ${B&&!P?Ye`<div class="label"><slot></slot></div>`:""}
        </div>
        ${B&&P?Ye`<div class="label-container">
              <div class="label"><slot></slot></div>
            </div>`:""}
      </button>
    `}};hc.styles=ga(Rv);nh([Ie({type:String})],hc.prototype,"value",2);nh([Ie({type:Boolean,reflect:!0})],hc.prototype,"selected",2);nh([Ie({type:String})],hc.prototype,"type",2);nh([Ie({type:String})],hc.prototype,"variant",2);nh([Ie({type:Boolean})],hc.prototype,"hugText",2);nh([Ie({type:Boolean,reflect:!0})],hc.prototype,"noDivider",2);nh([Ie({type:Boolean,reflect:!0})],hc.prototype,"disabled",2);hc=nh([Gt("obc-toggle-button-option")],hc);const jv=Ht`
          * {
            -webkit-tap-highlight-color: transparent;
          }

:host {
  isolation: isolate;
}

.outer-wrapper {
  box-sizing: border-box;
  width: 100%;
  display: flex;
  align-items: center;
  min-height: var(--ui-components-toggle-button-touch-target-size);
}

.outer-wrapper.has-labels:not(.inline-label) {
    padding-top: 4px;
    height: 64px;
  }

.outer-wrapper.hug-text {
    width: fit-content;
  }

.outer-wrapper.icon-text-under .wrapper {
    height: var(--ui-components-toggle-button-toggle-button-item-visual-size);
    align-items: flex-start;
  }

.outer-wrapper.disabled .wrapper {
    background-color: var(--indent-disabled-background-color);
    border-color: var(--indent-disabled-border-color);
  }

.wrapper {
  box-sizing: border-box;
  display: flex;
  position: relative;
  align-items: center;
  height: var(--ui-components-toggle-button-toggle-button-item-visual-size);
  outline: 1px solid var(--indent-enabled-border-color);
  outline-offset: -1px;
  width: 100%;
  background: var(--indent-enabled-background-color);
  flex-shrink: 0;
  border-radius: var(--ui-components-toggle-button-border-radius);
}

.outer-wrapper.flat .wrapper {
  background: none;
  outline: none;
  border: none;
}

.outer-wrapper ::slotted(*:not(:first-child):not([selected]))::before {
    box-sizing: border-box;
    content: '';
    position: absolute;
    top: 0;
    bottom: 0;
    margin-left: -0.5px;
    margin-top: auto;
    margin-bottom: auto;
    z-index: -1;
    display: block;
    width: 1px;
    border-radius: 1px;
    background: var(--border-divider-color);
    height: var(--ui-components-divider-height-small);
    fill: var(--border-divider-color);
  }

.outer-wrapper.icon-text-under {
  padding: 0;
  align-items: flex-start;
}

::slotted([nodivider])::before {
  content: none !important;
}

.wrapper ::slotted(*) {
  flex: 1;
}
`;var Vv=Object.defineProperty,$v=Object.getOwnPropertyDescriptor,hd=(R,A,B,P)=>{for(var D=P>1?void 0:P?$v(A,B):A,X=R.length-1,M;X>=0;X--)(M=R[X])&&(D=(P?M(A,B,D):M(D))||D);return P&&D&&Vv(A,B,D),D};let nu=class extends Bt{constructor(){super(...arguments),this.value="",this.type=Nm.text,this.variant=Mf.regular,this.hugText=!1,this.disabled=!1,this._originalDisabledStates=new Map}hasAnyEnabledOption(){return this.disabled?!1:Array.from(this.options).some(R=>!R.disabled)}canSelectOption(R){if(this.disabled)return!1;const A=this.getOptionByValue(R);return A!==null&&!A.disabled}getOptionByValue(R){return Array.from(this.options).find(A=>A.value===R)||null}getFirstSelectableOption(){return this.disabled?null:Array.from(this.options).find(R=>!R.disabled)||null}updateSelection(R,A=!0){const B=this.value;if(!this.hasAnyEnabledOption()){this.options.forEach(P=>{P.selected=P.value===this.value}),this.setNoDivider();return}if(!this.canSelectOption(R)){if(this.value&&this.getOptionByValue(this.value)){this.options.forEach(D=>{D.selected=D.value===this.value}),this.setNoDivider();return}const P=this.getFirstSelectableOption();R=P?.value||""}this.value=R,this.options.forEach(P=>{P.selected=P.value===R}),this.setNoDivider(),A&&B!==R&&this.dispatchEvent(new CustomEvent("value",{detail:{value:R,previousValue:B}}))}setNoDivider(){const R=Array.from(this.options).findIndex(B=>B.selected);if(this.options.forEach(B=>{B.noDivider=!1}),R===-1)return;const A=this.options[R+1];A&&(A.noDivider=!0)}firstUpdated(R){super.firstUpdated(R);const A=Array.from(this.options).map(P=>P.value),B=new Set(A);if(A.length!==B.size&&console.warn("Toggle button group has duplicate values. This may cause unexpected behavior."),this.options.forEach(P=>{this._originalDisabledStates.set(P,P.hasAttribute("disabled")),P.addEventListener("selected",X=>this.handleOptionClick(X)),new MutationObserver(X=>{X.forEach(M=>{M.attributeName==="disabled"&&!P.hasAttribute("data-group-disabled")&&(this._originalDisabledStates.set(P,P.hasAttribute("disabled")),this.handleOptionDisabledChange())})}).observe(P,{attributes:!0,attributeFilter:["disabled"]}),P.type=this.type,P.variant=this.variant,P.hugText=this.hugText,this.disabled&&(P.setAttribute("data-group-disabled","true"),P.disabled=!0)}),!this.value||!this.getOptionByValue(this.value)){const P=this.getFirstSelectableOption();P&&this.updateSelection(P.value,!1)}else this.updateSelection(this.value,!1)}handleOptionDisabledChange(){const R=this.getOptionByValue(this.value);if(R?.disabled&&this.hasAnyEnabledOption()){const A=this.getFirstSelectableOption();A&&this.updateSelection(A.value)}}handleOptionClick(R){const{value:A}=R.detail;this.updateSelection(A)}willUpdate(R){R.has("value")&&this.updateSelection(this.value),(R.has("type")||R.has("variant")||R.has("hugText"))&&this.options.forEach(A=>{A.type=this.type,A.variant=this.variant,A.hugText=this.hugText}),R.has("disabled")&&this.options.forEach(A=>{if(this.disabled)A.setAttribute("data-group-disabled","true"),A.disabled=!0;else{A.removeAttribute("data-group-disabled");const B=this._originalDisabledStates.get(A)||!1;A.disabled=B}})}updated(R){super.updated(R);const A=this.getOptionByValue(this.value);if(A?.disabled&&this.hasAnyEnabledOption()){const B=this.getFirstSelectableOption();B&&this.updateSelection(B.value)}}render(){const R={"outer-wrapper":!0,flat:this.variant===Mf.flat,regular:this.variant===Mf.regular,"hug-text":this.hugText,"icon-text-under":this.type===Nm.iconTextUnder,disabled:this.disabled};return Ye`
      <div class=${Wn(R)}>
        <div class="wrapper">
          <slot></slot>
        </div>
      </div>
    `}};nu.styles=ga(jv);hd([Ie({type:String})],nu.prototype,"value",2);hd([Ie({type:String})],nu.prototype,"type",2);hd([Ie({type:String})],nu.prototype,"variant",2);hd([Ie({type:Boolean})],nu.prototype,"hugText",2);hd([Ie({type:Boolean,reflect:!0})],nu.prototype,"disabled",2);hd([O_({selector:"obc-toggle-button-option"})],nu.prototype,"options",2);nu=hd([Gt("obc-toggle-button-group")],nu);var Fv=Object.defineProperty,Nv=Object.getOwnPropertyDescriptor,L1=(R,A,B,P)=>{for(var D=P>1?void 0:P?Nv(A,B):A,X=R.length-1,M;X>=0;X--)(M=R[X])&&(D=(P?M(A,B,D):M(D))||D);return P&&D&&Fv(A,B,D),D};let Um=class extends Bt{constructor(){super(...arguments),this.useCssColor=!1,this.icon=Ct`<svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
<path d="M16.9498 15.5355L15.5355 16.9497L16.9498 18.364L18.364 16.9497L16.9498 15.5355Z" fill="currentColor"/>
<path d="M13 18V20H11V18H13Z" fill="currentColor"/>
<path d="M8.46447 16.9498L7.05025 15.5355L5.63604 16.9498L7.05025 18.364L8.46447 16.9498Z" fill="currentColor"/>
<path d="M4 13V11H6L6 13H4Z" fill="currentColor"/>
<path d="M7.05025 5.63604L5.63604 7.05025L7.05025 8.46446L8.46447 7.05025L7.05025 5.63604Z" fill="currentColor"/>
<path d="M11 4H13V6H11V4Z" fill="currentColor"/>
<path d="M18.364 7.05025L16.9497 5.63604L15.5355 7.05025L16.9497 8.46447L18.364 7.05025Z" fill="currentColor"/>
<path d="M18 11H20V13H18V11Z" fill="currentColor"/>
<path fill-rule="evenodd" clip-rule="evenodd" d="M12 13C12.5523 13 13 12.5523 13 12C13 11.4477 12.5523 11 12 11C11.4477 11 11 11.4477 11 12C11 12.5523 11.4477 13 12 13ZM12 15C13.6569 15 15 13.6569 15 12C15 10.3431 13.6569 9 12 9C10.3431 9 9 10.3431 9 12C9 13.6569 10.3431 15 12 15Z" fill="currentColor"/>
</svg>
`,this.iconCss=Ct`<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M16.9498 15.5355L15.5355 16.9497L16.9498 18.364L18.364 16.9497L16.9498 15.5355Z" style="fill: var(--element-active-color)"/>
<path d="M13 18V20H11V18H13Z" style="fill: var(--element-active-color)"/>
<path d="M8.46447 16.9498L7.05025 15.5355L5.63604 16.9498L7.05025 18.364L8.46447 16.9498Z" style="fill: var(--element-active-color)"/>
<path d="M4 13V11H6L6 13H4Z" style="fill: var(--element-active-color)"/>
<path d="M7.05025 5.63604L5.63604 7.05025L7.05025 8.46446L8.46447 7.05025L7.05025 5.63604Z" style="fill: var(--element-active-color)"/>
<path d="M11 4H13V6H11V4Z" style="fill: var(--element-active-color)"/>
<path d="M18.364 7.05025L16.9497 5.63604L15.5355 7.05025L16.9497 8.46447L18.364 7.05025Z" style="fill: var(--element-active-color)"/>
<path d="M18 11H20V13H18V11Z" style="fill: var(--element-active-color)"/>
<path fill-rule="evenodd" clip-rule="evenodd" d="M12 13C12.5523 13 13 12.5523 13 12C13 11.4477 12.5523 11 12 11C11.4477 11 11 11.4477 11 12C11 12.5523 11.4477 13 12 13ZM12 15C13.6569 15 15 13.6569 15 12C15 10.3431 13.6569 9 12 9C10.3431 9 9 10.3431 9 12C9 13.6569 10.3431 15 12 15Z" style="fill: var(--element-active-color)"/>
</svg>
`}render(){return Ye`
      <div class="wrapper">${this.useCssColor?this.iconCss:this.icon}</div>
    `}};Um.styles=Ht`
    .wrapper {
      height: 100%;
      width: 100%;
      line-height: 0;
    }
    .wrapper > * {
      height: 100%;
      width: 100%;
    }
  `;L1([Ie({type:Boolean})],Um.prototype,"useCssColor",2);Um=L1([Gt("obi-display-brilliance-low")],Um);var Uv=Object.defineProperty,Zv=Object.getOwnPropertyDescriptor,I1=(R,A,B,P)=>{for(var D=P>1?void 0:P?Zv(A,B):A,X=R.length-1,M;X>=0;X--)(M=R[X])&&(D=(P?M(A,B,D):M(D))||D);return P&&D&&Uv(A,B,D),D};let Zm=class extends Bt{constructor(){super(...arguments),this.useCssColor=!1,this.icon=Ct`<svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
<path fill-rule="evenodd" clip-rule="evenodd" d="M14.8331 9.17621C14.83 9.17312 14.8269 9.17002 14.8238 9.16694C14.1003 8.4458 13.1022 8 12 8C10.8978 8 9.89964 8.44583 9.17615 9.167C9.1731 9.17005 9.17005 9.1731 9.167 9.17615C8.44583 9.89964 8 10.8978 8 12C8 14.2091 9.79086 16 12 16C14.2091 16 16 14.2091 16 12C16 10.8978 15.5542 9.8997 14.8331 9.17621ZM12 14C13.1046 14 14 13.1046 14 12C14 10.8954 13.1046 10 12 10C10.8954 10 10 10.8954 10 12C10 13.1046 10.8954 14 12 14ZM18.364 4.22182L19.7782 5.63604L16.9497 8.46447L16.237 7.75175L15.5355 7.05025L18.364 4.22182ZM4.22183 5.63604L5.63605 4.22183L8.46447 7.05025L7.76316 7.75157L7.75175 7.76298L7.05026 8.46447L4.22183 5.63604ZM7.05025 15.5355L8.46446 16.9498L5.63603 19.7782L4.22182 18.364L7.05025 15.5355ZM16.9498 15.5355L19.7782 18.364L18.364 19.7782L15.5355 16.9497L16.9498 15.5355ZM11 2H13V6H11V2ZM2 13V11H6V13H2ZM13 22H11V18H13V22ZM22 11V13H18V11H22Z" fill="currentColor"/>
</svg>
`,this.iconCss=Ct`<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
<path fill-rule="evenodd" clip-rule="evenodd" d="M14.8331 9.17621C14.83 9.17312 14.8269 9.17002 14.8238 9.16694C14.1003 8.4458 13.1022 8 12 8C10.8978 8 9.89964 8.44583 9.17615 9.167C9.1731 9.17005 9.17005 9.1731 9.167 9.17615C8.44583 9.89964 8 10.8978 8 12C8 14.2091 9.79086 16 12 16C14.2091 16 16 14.2091 16 12C16 10.8978 15.5542 9.8997 14.8331 9.17621ZM12 14C13.1046 14 14 13.1046 14 12C14 10.8954 13.1046 10 12 10C10.8954 10 10 10.8954 10 12C10 13.1046 10.8954 14 12 14ZM18.364 4.22182L19.7782 5.63604L16.9497 8.46447L16.237 7.75175L15.5355 7.05025L18.364 4.22182ZM4.22183 5.63604L5.63605 4.22183L8.46447 7.05025L7.76316 7.75157L7.75175 7.76298L7.05026 8.46447L4.22183 5.63604ZM7.05025 15.5355L8.46446 16.9498L5.63603 19.7782L4.22182 18.364L7.05025 15.5355ZM16.9498 15.5355L19.7782 18.364L18.364 19.7782L15.5355 16.9497L16.9498 15.5355ZM11 2H13V6H11V2ZM2 13V11H6V13H2ZM13 22H11V18H13V22ZM22 11V13H18V11H22Z" style="fill: var(--element-active-color)"/>
</svg>
`}render(){return Ye`
      <div class="wrapper">${this.useCssColor?this.iconCss:this.icon}</div>
    `}};Zm.styles=Ht`
    .wrapper {
      height: 100%;
      width: 100%;
      line-height: 0;
    }
    .wrapper > * {
      height: 100%;
      width: 100%;
    }
  `;I1([Ie({type:Boolean})],Zm.prototype,"useCssColor",2);Zm=I1([Gt("obi-display-brilliance-proposal")],Zm);var Hv=Object.defineProperty,Gv=Object.getOwnPropertyDescriptor,R1=(R,A,B,P)=>{for(var D=P>1?void 0:P?Gv(A,B):A,X=R.length-1,M;X>=0;X--)(M=R[X])&&(D=(P?M(A,B,D):M(D))||D);return P&&D&&Hv(A,B,D),D};let Hm=class extends Bt{constructor(){super(...arguments),this.useCssColor=!1,this.icon=Ct`<svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
<path d="M12 21C9.5 21 7.375 20.125 5.625 18.375C3.875 16.625 3 14.5 3 12C3 9.5 3.875 7.375 5.625 5.625C7.375 3.875 9.5 3 12 3C12.2333 3 12.4625 3.00833 12.6875 3.025C12.9125 3.04167 13.1333 3.06667 13.35 3.1C12.6667 3.58333 12.1208 4.2125 11.7125 4.9875C11.3042 5.7625 11.1 6.6 11.1 7.5C11.1 9 11.625 10.275 12.675 11.325C13.725 12.375 15 12.9 16.5 12.9C17.4167 12.9 18.2583 12.6958 19.025 12.2875C19.7917 11.8792 20.4167 11.3333 20.9 10.65C20.9333 10.8667 20.9583 11.0875 20.975 11.3125C20.9917 11.5375 21 11.7667 21 12C21 14.5 20.125 16.625 18.375 18.375C16.625 20.125 14.5 21 12 21ZM12 19C13.4667 19 14.7833 18.5958 15.95 17.7875C17.1167 16.9792 17.9667 15.925 18.5 14.625C18.1667 14.7083 17.8333 14.775 17.5 14.825C17.1667 14.875 16.8333 14.9 16.5 14.9C14.45 14.9 12.7042 14.1792 11.2625 12.7375C9.82083 11.2958 9.1 9.55 9.1 7.5C9.1 7.16667 9.125 6.83333 9.175 6.5C9.225 6.16667 9.29167 5.83333 9.375 5.5C8.075 6.03333 7.02083 6.88333 6.2125 8.05C5.40417 9.21667 5 10.5333 5 12C5 13.9333 5.68333 15.5833 7.05 16.95C8.41667 18.3167 10.0667 19 12 19Z" fill="currentColor"/>
</svg>
`,this.iconCss=Ct`<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M12 21C9.5 21 7.375 20.125 5.625 18.375C3.875 16.625 3 14.5 3 12C3 9.5 3.875 7.375 5.625 5.625C7.375 3.875 9.5 3 12 3C12.2333 3 12.4625 3.00833 12.6875 3.025C12.9125 3.04167 13.1333 3.06667 13.35 3.1C12.6667 3.58333 12.1208 4.2125 11.7125 4.9875C11.3042 5.7625 11.1 6.6 11.1 7.5C11.1 9 11.625 10.275 12.675 11.325C13.725 12.375 15 12.9 16.5 12.9C17.4167 12.9 18.2583 12.6958 19.025 12.2875C19.7917 11.8792 20.4167 11.3333 20.9 10.65C20.9333 10.8667 20.9583 11.0875 20.975 11.3125C20.9917 11.5375 21 11.7667 21 12C21 14.5 20.125 16.625 18.375 18.375C16.625 20.125 14.5 21 12 21ZM12 19C13.4667 19 14.7833 18.5958 15.95 17.7875C17.1167 16.9792 17.9667 15.925 18.5 14.625C18.1667 14.7083 17.8333 14.775 17.5 14.825C17.1667 14.875 16.8333 14.9 16.5 14.9C14.45 14.9 12.7042 14.1792 11.2625 12.7375C9.82083 11.2958 9.1 9.55 9.1 7.5C9.1 7.16667 9.125 6.83333 9.175 6.5C9.225 6.16667 9.29167 5.83333 9.375 5.5C8.075 6.03333 7.02083 6.88333 6.2125 8.05C5.40417 9.21667 5 10.5333 5 12C5 13.9333 5.68333 15.5833 7.05 16.95C8.41667 18.3167 10.0667 19 12 19Z" style="fill: var(--element-active-color)"/>
</svg>
`}render(){return Ye`
      <div class="wrapper">${this.useCssColor?this.iconCss:this.icon}</div>
    `}};Hm.styles=Ht`
    .wrapper {
      height: 100%;
      width: 100%;
      line-height: 0;
    }
    .wrapper > * {
      height: 100%;
      width: 100%;
    }
  `;R1([Ie({type:Boolean})],Hm.prototype,"useCssColor",2);Hm=R1([Gt("obi-palette-night")],Hm);var qv=Object.defineProperty,Xv=Object.getOwnPropertyDescriptor,B1=(R,A,B,P)=>{for(var D=P>1?void 0:P?Xv(A,B):A,X=R.length-1,M;X>=0;X--)(M=R[X])&&(D=(P?M(A,B,D):M(D))||D);return P&&D&&qv(A,B,D),D};let Gm=class extends Bt{constructor(){super(...arguments),this.useCssColor=!1,this.icon=Ct`<svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
<path fill-rule="evenodd" clip-rule="evenodd" d="M11.5529 3.75275C11.7695 3.24908 12.4805 3.24908 12.6971 3.75276L13.8662 6.47216C14.0151 6.81843 14.4328 6.95476 14.7559 6.76251L17.2931 5.2527C17.763 4.97306 18.3383 5.39286 18.2187 5.92818L17.5732 8.81846C17.491 9.18649 17.7491 9.5434 18.123 9.57861L21.0592 9.85509C21.603 9.9063 21.8228 10.5855 21.4128 10.948L19.1991 12.9052C19.1278 12.9683 19.0745 13.0436 19.0393 13.125H21C21.4142 13.125 21.75 13.4608 21.75 13.875C21.75 14.2892 21.4142 14.625 21 14.625H3C2.58579 14.625 2.25 14.2892 2.25 13.875C2.25 13.4608 2.58579 13.125 3 13.125H5.21069C5.17546 13.0436 5.12219 12.9683 5.05087 12.9052L2.83724 10.948C2.42724 10.5855 2.64697 9.9063 3.1908 9.85509L6.12699 9.57861C6.50087 9.5434 6.75903 9.18649 6.67683 8.81846L6.0313 5.92818C5.91173 5.39286 6.48698 4.97306 6.95691 5.2527L9.49414 6.76251C9.81722 6.95476 10.2349 6.81843 10.3838 6.47216L11.5529 3.75275ZM7.13114 13.125H17.1189C16.9886 10.4797 14.8026 8.375 12.125 8.375C9.44741 8.375 7.2614 10.4797 7.13114 13.125Z" fill="currentColor"/>
<path d="M7.5 15.75C7.08579 15.75 6.75 16.0858 6.75 16.5C6.75 16.9142 7.08579 17.25 7.5 17.25H16.5C16.9142 17.25 17.25 16.9142 17.25 16.5C17.25 16.0858 16.9142 15.75 16.5 15.75H7.5Z" fill="currentColor"/>
<path d="M13.875 19.25C13.875 19.6642 13.5392 20 13.125 20H12H10.875C10.4608 20 10.125 19.6642 10.125 19.25C10.125 18.8358 10.4608 18.5 10.875 18.5H12H13.125C13.5392 18.5 13.875 18.8358 13.875 19.25Z" fill="currentColor"/>
</svg>
`,this.iconCss=Ct`<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
<path fill-rule="evenodd" clip-rule="evenodd" d="M11.5529 3.75275C11.7695 3.24908 12.4805 3.24908 12.6971 3.75276L13.8662 6.47216C14.0151 6.81843 14.4328 6.95476 14.7559 6.76251L17.2931 5.2527C17.763 4.97306 18.3383 5.39286 18.2187 5.92818L17.5732 8.81846C17.491 9.18649 17.7491 9.5434 18.123 9.57861L21.0592 9.85509C21.603 9.9063 21.8228 10.5855 21.4128 10.948L19.1991 12.9052C19.1278 12.9683 19.0745 13.0436 19.0393 13.125H21C21.4142 13.125 21.75 13.4608 21.75 13.875C21.75 14.2892 21.4142 14.625 21 14.625H3C2.58579 14.625 2.25 14.2892 2.25 13.875C2.25 13.4608 2.58579 13.125 3 13.125H5.21069C5.17546 13.0436 5.12219 12.9683 5.05087 12.9052L2.83724 10.948C2.42724 10.5855 2.64697 9.9063 3.1908 9.85509L6.12699 9.57861C6.50087 9.5434 6.75903 9.18649 6.67683 8.81846L6.0313 5.92818C5.91173 5.39286 6.48698 4.97306 6.95691 5.2527L9.49414 6.76251C9.81722 6.95476 10.2349 6.81843 10.3838 6.47216L11.5529 3.75275ZM7.13114 13.125H17.1189C16.9886 10.4797 14.8026 8.375 12.125 8.375C9.44741 8.375 7.2614 10.4797 7.13114 13.125Z" style="fill: var(--element-active-color)"/>
<path d="M7.5 15.75C7.08579 15.75 6.75 16.0858 6.75 16.5C6.75 16.9142 7.08579 17.25 7.5 17.25H16.5C16.9142 17.25 17.25 16.9142 17.25 16.5C17.25 16.0858 16.9142 15.75 16.5 15.75H7.5Z" style="fill: var(--element-active-color)"/>
<path d="M13.875 19.25C13.875 19.6642 13.5392 20 13.125 20H12H10.875C10.4608 20 10.125 19.6642 10.125 19.25C10.125 18.8358 10.4608 18.5 10.875 18.5H12H13.125C13.5392 18.5 13.875 18.8358 13.875 19.25Z" style="fill: var(--element-active-color)"/>
</svg>
`}render(){return Ye`
      <div class="wrapper">${this.useCssColor?this.iconCss:this.icon}</div>
    `}};Gm.styles=Ht`
    .wrapper {
      height: 100%;
      width: 100%;
      line-height: 0;
    }
    .wrapper > * {
      height: 100%;
      width: 100%;
    }
  `;B1([Ie({type:Boolean})],Gm.prototype,"useCssColor",2);Gm=B1([Gt("obi-palette-dusk")],Gm);var Yv=Object.defineProperty,Qv=Object.getOwnPropertyDescriptor,O1=(R,A,B,P)=>{for(var D=P>1?void 0:P?Qv(A,B):A,X=R.length-1,M;X>=0;X--)(M=R[X])&&(D=(P?M(A,B,D):M(D))||D);return P&&D&&Yv(A,B,D),D};let qm=class extends Bt{constructor(){super(...arguments),this.useCssColor=!1,this.icon=Ct`<svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
<path fill-rule="evenodd" clip-rule="evenodd" d="M14.4178 2.66892C14.7789 2.25636 15.4554 2.47526 15.5064 3.02113L15.7816 5.96838C15.8166 6.34367 16.1721 6.60197 16.5386 6.51851L19.4174 5.8631C19.9506 5.74171 20.3687 6.3182 20.0902 6.79072L18.5862 9.34191C18.3947 9.66677 18.5305 10.0858 18.8753 10.2344L21.5838 11.4014C22.0855 11.6175 22.0854 12.3314 21.5838 12.5501L19.2437 13.5701C19.9738 14.2507 20.5123 15.1503 20.7626 16.1622C21.9582 16.6967 22.7499 17.9449 22.7499 19.3243C22.7499 21.1817 21.3013 22.75 19.4588 22.75H9.62935C8.73882 22.75 7.89257 22.3876 7.27532 21.7385C6.61858 21.085 6.27173 20.2054 6.25014 19.2667L6.24994 19.2581V19.212C6.24994 18.6736 6.37017 18.152 6.59526 17.6786L4.5824 18.1369C4.04921 18.2582 3.63113 17.6818 3.90968 17.2092L5.41363 14.658C5.60514 14.3332 5.46938 13.9141 5.12449 13.7655L2.41601 12.5986C1.91436 12.3825 1.9144 11.6686 2.41608 11.4499L5.12472 10.2692C5.46962 10.1189 5.60543 9.69915 5.41397 9.37526L3.91034 6.83168C3.63185 6.36057 4.05 5.78196 4.58318 5.90066L7.4619 6.54149C7.82846 6.62309 8.18396 6.36299 8.21905 5.98753L8.49462 3.03888C8.54566 2.49275 9.2222 2.27043 9.58323 2.68116L11.5324 4.89872C11.7807 5.18109 12.2201 5.17998 12.4683 4.89635L14.4178 2.66892ZM8.77567 15.8232C9.0014 15.7627 9.23504 15.7262 9.47374 15.7151C9.91656 15.02 10.6813 14.5702 11.5529 14.5702C11.6374 14.5702 11.7229 14.5744 11.8091 14.5835C12.7056 13.1529 14.2426 12.25 15.947 12.25C16.3039 12.25 16.652 12.29 16.9877 12.3658C17.1542 10.1198 15.7772 7.96694 13.5391 7.2428C10.9118 6.39271 8.09283 7.83343 7.24274 10.4608C6.59862 12.4515 7.26972 14.5523 8.77567 15.8232ZM12.8665 15.771C13.4558 14.5213 14.6481 13.75 15.947 13.75C17.6096 13.75 19.0881 15.057 19.371 16.8409L19.4468 17.3191L19.9138 17.4469C20.6575 17.6504 21.2499 18.4014 21.2499 19.3243C21.2499 20.4233 20.4045 21.25 19.4588 21.25H9.62935C9.14786 21.25 8.69223 21.0546 8.35732 20.6995L8.34813 20.6898L8.3386 20.6804C7.9796 20.326 7.7653 19.8279 7.74994 19.2403V19.212C7.74994 18.6904 7.94322 18.1961 8.2958 17.8083C8.65036 17.419 9.1208 17.2115 9.62936 17.2115C9.73976 17.2115 9.76618 17.213 9.79884 17.2188L10.4228 17.329L10.6357 16.7323C10.7806 16.3265 11.1414 16.0702 11.5529 16.0702C11.6726 16.0702 11.7795 16.0905 11.8851 16.1372L12.5544 16.4329L12.8665 15.771Z" fill="currentColor"/>
</svg>
`,this.iconCss=Ct`<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
<path fill-rule="evenodd" clip-rule="evenodd" d="M14.4178 2.66892C14.7789 2.25636 15.4554 2.47526 15.5064 3.02113L15.7816 5.96838C15.8166 6.34367 16.1721 6.60197 16.5386 6.51851L19.4174 5.8631C19.9506 5.74171 20.3687 6.3182 20.0902 6.79072L18.5862 9.34191C18.3947 9.66677 18.5305 10.0858 18.8753 10.2344L21.5838 11.4014C22.0855 11.6175 22.0854 12.3314 21.5838 12.5501L19.2437 13.5701C19.9738 14.2507 20.5123 15.1503 20.7626 16.1622C21.9582 16.6967 22.7499 17.9449 22.7499 19.3243C22.7499 21.1817 21.3013 22.75 19.4588 22.75H9.62935C8.73882 22.75 7.89257 22.3876 7.27532 21.7385C6.61858 21.085 6.27173 20.2054 6.25014 19.2667L6.24994 19.2581V19.212C6.24994 18.6736 6.37017 18.152 6.59526 17.6786L4.5824 18.1369C4.04921 18.2582 3.63113 17.6818 3.90968 17.2092L5.41363 14.658C5.60514 14.3332 5.46938 13.9141 5.12449 13.7655L2.41601 12.5986C1.91436 12.3825 1.9144 11.6686 2.41608 11.4499L5.12472 10.2692C5.46962 10.1189 5.60543 9.69915 5.41397 9.37526L3.91034 6.83168C3.63185 6.36057 4.05 5.78196 4.58318 5.90066L7.4619 6.54149C7.82846 6.62309 8.18396 6.36299 8.21905 5.98753L8.49462 3.03888C8.54566 2.49275 9.2222 2.27043 9.58323 2.68116L11.5324 4.89872C11.7807 5.18109 12.2201 5.17998 12.4683 4.89635L14.4178 2.66892ZM8.77567 15.8232C9.0014 15.7627 9.23504 15.7262 9.47374 15.7151C9.91656 15.02 10.6813 14.5702 11.5529 14.5702C11.6374 14.5702 11.7229 14.5744 11.8091 14.5835C12.7056 13.1529 14.2426 12.25 15.947 12.25C16.3039 12.25 16.652 12.29 16.9877 12.3658C17.1542 10.1198 15.7772 7.96694 13.5391 7.2428C10.9118 6.39271 8.09283 7.83343 7.24274 10.4608C6.59862 12.4515 7.26972 14.5523 8.77567 15.8232ZM12.8665 15.771C13.4558 14.5213 14.6481 13.75 15.947 13.75C17.6096 13.75 19.0881 15.057 19.371 16.8409L19.4468 17.3191L19.9138 17.4469C20.6575 17.6504 21.2499 18.4014 21.2499 19.3243C21.2499 20.4233 20.4045 21.25 19.4588 21.25H9.62935C9.14786 21.25 8.69223 21.0546 8.35732 20.6995L8.34813 20.6898L8.3386 20.6804C7.9796 20.326 7.7653 19.8279 7.74994 19.2403V19.212C7.74994 18.6904 7.94322 18.1961 8.2958 17.8083C8.65036 17.419 9.1208 17.2115 9.62936 17.2115C9.73976 17.2115 9.76618 17.213 9.79884 17.2188L10.4228 17.329L10.6357 16.7323C10.7806 16.3265 11.1414 16.0702 11.5529 16.0702C11.6726 16.0702 11.7795 16.0905 11.8851 16.1372L12.5544 16.4329L12.8665 15.771Z" style="fill: var(--element-active-color)"/>
</svg>
`}render(){return Ye`
      <div class="wrapper">${this.useCssColor?this.iconCss:this.icon}</div>
    `}};qm.styles=Ht`
    .wrapper {
      height: 100%;
      width: 100%;
      line-height: 0;
    }
    .wrapper > * {
      height: 100%;
      width: 100%;
    }
  `;O1([Ie({type:Boolean})],qm.prototype,"useCssColor",2);qm=O1([Gt("obi-palette-day")],qm);var Kv=Object.defineProperty,Wv=Object.getOwnPropertyDescriptor,j1=(R,A,B,P)=>{for(var D=P>1?void 0:P?Wv(A,B):A,X=R.length-1,M;X>=0;X--)(M=R[X])&&(D=(P?M(A,B,D):M(D))||D);return P&&D&&Kv(A,B,D),D};let Xm=class extends Bt{constructor(){super(...arguments),this.useCssColor=!1,this.icon=Ct`<svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
<path fill-rule="evenodd" clip-rule="evenodd" d="M11.4279 2.37775C11.6445 1.87408 12.3555 1.87408 12.5721 2.37776L13.7412 5.09716C13.8901 5.44343 14.3078 5.57976 14.6309 5.38751L17.1681 3.8777C17.638 3.59806 18.2133 4.01786 18.0937 4.55318L17.4482 7.44346C17.366 7.81149 17.6241 8.1684 17.998 8.20361L20.9342 8.48009C21.478 8.5313 21.6978 9.21054 21.2878 9.57303L19.0741 11.5302C18.7923 11.7794 18.7923 12.2206 19.0741 12.4698L21.2878 14.427C21.6978 14.7895 21.478 15.4687 20.9342 15.5199L17.998 15.7964C17.6241 15.8316 17.366 16.1885 17.4482 16.5565L18.0937 19.4468C18.2133 19.9821 17.638 20.4019 17.1681 20.1223L14.6309 18.6125C14.3078 18.4202 13.8901 18.5566 13.7412 18.9028L12.5721 21.6222C12.3555 22.1259 11.6445 22.1259 11.4279 21.6222L10.2588 18.9028C10.1099 18.5566 9.69222 18.4202 9.36914 18.6125L6.83191 20.1223C6.36198 20.4019 5.78673 19.9821 5.9063 19.4468L6.55183 16.5565C6.63403 16.1885 6.37587 15.8316 6.00199 15.7964L3.06579 15.5199C2.52197 15.4687 2.30224 14.7895 2.71224 14.427L4.92587 12.4698C5.20775 12.2206 5.20774 11.7794 4.92587 11.5302L2.71224 9.57303C2.30224 9.21054 2.52197 8.5313 3.0658 8.48009L6.00199 8.20361C6.37587 8.1684 6.63403 7.81149 6.55183 7.44346L5.9063 4.55318C5.78673 4.01786 6.36198 3.59806 6.83191 3.8777L9.36914 5.38751C9.69222 5.57976 10.1099 5.44343 10.2588 5.09716L11.4279 2.37775ZM17 12C17 14.7614 14.7614 17 12 17C9.23858 17 7 14.7614 7 12C7 9.23858 9.23858 7 12 7C14.7614 7 17 9.23858 17 12Z" fill="currentColor"/>
</svg>
`,this.iconCss=Ct`<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
<path fill-rule="evenodd" clip-rule="evenodd" d="M11.4279 2.37775C11.6445 1.87408 12.3555 1.87408 12.5721 2.37776L13.7412 5.09716C13.8901 5.44343 14.3078 5.57976 14.6309 5.38751L17.1681 3.8777C17.638 3.59806 18.2133 4.01786 18.0937 4.55318L17.4482 7.44346C17.366 7.81149 17.6241 8.1684 17.998 8.20361L20.9342 8.48009C21.478 8.5313 21.6978 9.21054 21.2878 9.57303L19.0741 11.5302C18.7923 11.7794 18.7923 12.2206 19.0741 12.4698L21.2878 14.427C21.6978 14.7895 21.478 15.4687 20.9342 15.5199L17.998 15.7964C17.6241 15.8316 17.366 16.1885 17.4482 16.5565L18.0937 19.4468C18.2133 19.9821 17.638 20.4019 17.1681 20.1223L14.6309 18.6125C14.3078 18.4202 13.8901 18.5566 13.7412 18.9028L12.5721 21.6222C12.3555 22.1259 11.6445 22.1259 11.4279 21.6222L10.2588 18.9028C10.1099 18.5566 9.69222 18.4202 9.36914 18.6125L6.83191 20.1223C6.36198 20.4019 5.78673 19.9821 5.9063 19.4468L6.55183 16.5565C6.63403 16.1885 6.37587 15.8316 6.00199 15.7964L3.06579 15.5199C2.52197 15.4687 2.30224 14.7895 2.71224 14.427L4.92587 12.4698C5.20775 12.2206 5.20774 11.7794 4.92587 11.5302L2.71224 9.57303C2.30224 9.21054 2.52197 8.5313 3.0658 8.48009L6.00199 8.20361C6.37587 8.1684 6.63403 7.81149 6.55183 7.44346L5.9063 4.55318C5.78673 4.01786 6.36198 3.59806 6.83191 3.8777L9.36914 5.38751C9.69222 5.57976 10.1099 5.44343 10.2588 5.09716L11.4279 2.37775ZM17 12C17 14.7614 14.7614 17 12 17C9.23858 17 7 14.7614 7 12C7 9.23858 9.23858 7 12 7C14.7614 7 17 9.23858 17 12Z" style="fill: var(--element-active-color)"/>
</svg>
`}render(){return Ye`
      <div class="wrapper">${this.useCssColor?this.iconCss:this.icon}</div>
    `}};Xm.styles=Ht`
    .wrapper {
      height: 100%;
      width: 100%;
      line-height: 0;
    }
    .wrapper > * {
      height: 100%;
      width: 100%;
    }
  `;j1([Ie({type:Boolean})],Xm.prototype,"useCssColor",2);Xm=j1([Gt("obi-palette-day-bright")],Xm);var Jv=Object.defineProperty,ey=Object.getOwnPropertyDescriptor,V1=(R,A,B,P)=>{for(var D=P>1?void 0:P?ey(A,B):A,X=R.length-1,M;X>=0;X--)(M=R[X])&&(D=(P?M(A,B,D):M(D))||D);return P&&D&&Jv(A,B,D),D};let Ym=class extends Bt{constructor(){super(...arguments),this.useCssColor=!1,this.icon=Ct`<svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
<path d="M7 15H11V17H7C4.24 17 2 14.76 2 12C2 9.24 4.24 7 7 7H11V9H7C5.35 9 4 10.35 4 12C4 13.65 5.35 15 7 15Z" fill="currentColor"/>
<path d="M13 7H17C19.76 7 22 9.24 22 12C22 14.76 19.76 17 17 17H13V15H17C18.65 15 20 13.65 20 12C20 10.35 18.65 9 17 9H13V7Z" fill="currentColor"/>
<path d="M16 11H8V13H16V11Z" fill="currentColor"/>
</svg>
`,this.iconCss=Ct`<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M7 15H11V17H7C4.24 17 2 14.76 2 12C2 9.24 4.24 7 7 7H11V9H7C5.35 9 4 10.35 4 12C4 13.65 5.35 15 7 15Z" style="fill: var(--element-active-color)"/>
<path d="M13 7H17C19.76 7 22 9.24 22 12C22 14.76 19.76 17 17 17H13V15H17C18.65 15 20 13.65 20 12C20 10.35 18.65 9 17 9H13V7Z" style="fill: var(--element-active-color)"/>
<path d="M16 11H8V13H16V11Z" style="fill: var(--element-active-color)"/>
</svg>
`}render(){return Ye`
      <div class="wrapper">${this.useCssColor?this.iconCss:this.icon}</div>
    `}};Ym.styles=Ht`
    .wrapper {
      height: 100%;
      width: 100%;
      line-height: 0;
    }
    .wrapper > * {
      height: 100%;
      width: 100%;
    }
  `;V1([Ie({type:Boolean})],Ym.prototype,"useCssColor",2);Ym=V1([Gt("obi-link")],Ym);var ty=Object.defineProperty,iy=Object.getOwnPropertyDescriptor,$1=(R,A,B,P)=>{for(var D=P>1?void 0:P?iy(A,B):A,X=R.length-1,M;X>=0;X--)(M=R[X])&&(D=(P?M(A,B,D):M(D))||D);return P&&D&&ty(A,B,D),D};let Qm=class extends Bt{constructor(){super(...arguments),this.useCssColor=!1,this.icon=Ct`<svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
<path d="M5 7.41L6.41 6L12.41 12L6.41 18L5 16.59L9.58 12L5 7.41Z" fill="currentColor"/>
<path d="M11 7.41L12.41 6L18.41 12L12.41 18L11 16.59L15.58 12L11 7.41Z" fill="currentColor"/>
</svg>
`,this.iconCss=Ct`<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M5 7.41L6.41 6L12.41 12L6.41 18L5 16.59L9.58 12L5 7.41Z" style="fill: var(--element-active-color)"/>
<path d="M11 7.41L12.41 6L18.41 12L12.41 18L11 16.59L15.58 12L11 7.41Z" style="fill: var(--element-active-color)"/>
</svg>
`}render(){return Ye`
      <div class="wrapper">${this.useCssColor?this.iconCss:this.icon}</div>
    `}};Qm.styles=Ht`
    .wrapper {
      height: 100%;
      width: 100%;
      line-height: 0;
    }
    .wrapper > * {
      height: 100%;
      width: 100%;
    }
  `;$1([Ie({type:Boolean})],Qm.prototype,"useCssColor",2);Qm=$1([Gt("obi-chevron-double-right-google")],Qm);var ry=Object.defineProperty,ay=Object.getOwnPropertyDescriptor,F1=(R,A,B,P)=>{for(var D=P>1?void 0:P?ay(A,B):A,X=R.length-1,M;X>=0;X--)(M=R[X])&&(D=(P?M(A,B,D):M(D))||D);return P&&D&&ry(A,B,D),D};let Km=class extends Bt{constructor(){super(...arguments),this.useCssColor=!1,this.icon=Ct`<svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
<path d="M18.41 16.59L17 18L11 12L17 6L18.41 7.41L13.83 12L18.41 16.59Z" fill="currentColor"/>
<path d="M12.41 16.59L11 18L5 12L11 6L12.41 7.41L7.83 12L12.41 16.59Z" fill="currentColor"/>
</svg>
`,this.iconCss=Ct`<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M18.41 16.59L17 18L11 12L17 6L18.41 7.41L13.83 12L18.41 16.59Z" style="fill: var(--element-active-color)"/>
<path d="M12.41 16.59L11 18L5 12L11 6L12.41 7.41L7.83 12L12.41 16.59Z" style="fill: var(--element-active-color)"/>
</svg>
`}render(){return Ye`
      <div class="wrapper">${this.useCssColor?this.iconCss:this.icon}</div>
    `}};Km.styles=Ht`
    .wrapper {
      height: 100%;
      width: 100%;
      line-height: 0;
    }
    .wrapper > * {
      height: 100%;
      width: 100%;
    }
  `;F1([Ie({type:Boolean})],Km.prototype,"useCssColor",2);Km=F1([Gt("obi-chevron-double-left-google")],Km);var ny=Object.defineProperty,oy=Object.getOwnPropertyDescriptor,N1=(R,A,B,P)=>{for(var D=P>1?void 0:P?oy(A,B):A,X=R.length-1,M;X>=0;X--)(M=R[X])&&(D=(P?M(A,B,D):M(D))||D);return P&&D&&ny(A,B,D),D};let Wm=class extends Bt{constructor(){super(...arguments),this.useCssColor=!1,this.icon=Ct`<svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
<path fill-rule="evenodd" clip-rule="evenodd" d="M13.9999 18L15.4099 16.59L10.8299 12L15.4099 7.41L13.9999 6L7.99991 12L13.9999 18Z" fill="currentColor"/>
</svg>
`,this.iconCss=Ct`<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
<path fill-rule="evenodd" clip-rule="evenodd" d="M13.9999 18L15.4099 16.59L10.8299 12L15.4099 7.41L13.9999 6L7.99991 12L13.9999 18Z" style="fill: var(--element-active-color)"/>
</svg>
`}render(){return Ye`
      <div class="wrapper">${this.useCssColor?this.iconCss:this.icon}</div>
    `}};Wm.styles=Ht`
    .wrapper {
      height: 100%;
      width: 100%;
      line-height: 0;
    }
    .wrapper > * {
      height: 100%;
      width: 100%;
    }
  `;N1([Ie({type:Boolean})],Wm.prototype,"useCssColor",2);Wm=N1([Gt("obi-chevron-left-google")],Wm);var sy=Object.defineProperty,ly=Object.getOwnPropertyDescriptor,U1=(R,A,B,P)=>{for(var D=P>1?void 0:P?ly(A,B):A,X=R.length-1,M;X>=0;X--)(M=R[X])&&(D=(P?M(A,B,D):M(D))||D);return P&&D&&sy(A,B,D),D};let Jm=class extends Bt{constructor(){super(...arguments),this.useCssColor=!1,this.icon=Ct`<svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
<path fill-rule="evenodd" clip-rule="evenodd" d="M7 5H3C2.45 5 2 5.45 2 6V8C2 8.55 2.45 9 3 9H3.5V10H6.5V9H7C7.55 9 7.995 8.55 7.995 8L8 6C8 5.45 7.55 5 7 5ZM7 8H3V6H7V8Z" fill="currentColor"/>
<path fill-rule="evenodd" clip-rule="evenodd" d="M14 5H10C9.45 5 9 5.45 9 6V8C9 8.55 9.45 9 10 9H10.5V10H13.5V9H14C14.55 9 14.995 8.55 14.995 8L15 6C15 5.45 14.55 5 14 5ZM14 8H10V6H14V8Z" fill="currentColor"/>
<path fill-rule="evenodd" clip-rule="evenodd" d="M17 5H21C21.55 5 22 5.45 22 6L21.995 8C21.995 8.55 21.55 9 21 9H20.5V10H17.5V9H17C16.45 9 16 8.55 16 8V6C16 5.45 16.45 5 17 5ZM17 8H21V6H17V8Z" fill="currentColor"/>
<path fill-rule="evenodd" clip-rule="evenodd" d="M2 13C2 12.45 2.45 12 3 12H10C10.55 12 11 12.45 11 13L10.995 17C10.995 17.55 10.55 18 10 18H8.5V19H4.5V18H3C2.45 18 2 17.55 2 17V13ZM10 16V13H3V16H10Z" fill="currentColor"/>
<path fill-rule="evenodd" clip-rule="evenodd" d="M13 13C13 12.45 13.45 12 14 12H21C21.55 12 22 12.45 22 13L21.995 17C21.995 17.55 21.55 18 21 18H19.5V19H15.5V18H14C13.45 18 13 17.55 13 17V13ZM21 16V13H14V16H21Z" fill="currentColor"/>
</svg>
`,this.iconCss=Ct`<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
<path fill-rule="evenodd" clip-rule="evenodd" d="M7 5H3C2.45 5 2 5.45 2 6V8C2 8.55 2.45 9 3 9H3.5V10H6.5V9H7C7.55 9 7.995 8.55 7.995 8L8 6C8 5.45 7.55 5 7 5ZM7 8H3V6H7V8Z" style="fill: var(--element-active-color)"/>
<path fill-rule="evenodd" clip-rule="evenodd" d="M14 5H10C9.45 5 9 5.45 9 6V8C9 8.55 9.45 9 10 9H10.5V10H13.5V9H14C14.55 9 14.995 8.55 14.995 8L15 6C15 5.45 14.55 5 14 5ZM14 8H10V6H14V8Z" style="fill: var(--element-active-color)"/>
<path fill-rule="evenodd" clip-rule="evenodd" d="M17 5H21C21.55 5 22 5.45 22 6L21.995 8C21.995 8.55 21.55 9 21 9H20.5V10H17.5V9H17C16.45 9 16 8.55 16 8V6C16 5.45 16.45 5 17 5ZM17 8H21V6H17V8Z" style="fill: var(--element-active-color)"/>
<path fill-rule="evenodd" clip-rule="evenodd" d="M2 13C2 12.45 2.45 12 3 12H10C10.55 12 11 12.45 11 13L10.995 17C10.995 17.55 10.55 18 10 18H8.5V19H4.5V18H3C2.45 18 2 17.55 2 17V13ZM10 16V13H3V16H10Z" style="fill: var(--element-active-color)"/>
<path fill-rule="evenodd" clip-rule="evenodd" d="M13 13C13 12.45 13.45 12 14 12H21C21.55 12 22 12.45 22 13L21.995 17C21.995 17.55 21.55 18 21 18H19.5V19H15.5V18H14C13.45 18 13 17.55 13 17V13ZM21 16V13H14V16H21Z" style="fill: var(--element-active-color)"/>
</svg>
`}render(){return Ye`
      <div class="wrapper">${this.useCssColor?this.iconCss:this.icon}</div>
    `}};Jm.styles=Ht`
    .wrapper {
      height: 100%;
      width: 100%;
      line-height: 0;
    }
    .wrapper > * {
      height: 100%;
      width: 100%;
    }
  `;U1([Ie({type:Boolean})],Jm.prototype,"useCssColor",2);Jm=U1([Gt("obi-screens")],Jm);/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const p1="lit-localize-status";/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const cy=R=>typeof R!="string"&&"strTag"in R,uy=(R,A,B)=>{let P=R[0];for(let D=1;D<R.length;D++)P+=A[D-1],P+=R[D];return P};/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const hy=(R=>cy(R)?uy(R.strings,R.values):R);let Qo=hy;/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */class dy{constructor(A){this.__litLocalizeEventHandler=B=>{B.detail.status==="ready"&&this.host.requestUpdate()},this.host=A}hostConnected(){window.addEventListener(p1,this.__litLocalizeEventHandler)}hostDisconnected(){window.removeEventListener(p1,this.__litLocalizeEventHandler)}}const py=R=>R.addController(new dy(R)),fy=py;/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const my=()=>(R,A)=>(R.addInitializer(fy),R);/**
 * @license
 * Copyright 2020 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */class gy{constructor(){this.settled=!1,this.promise=new Promise((A,B)=>{this._resolve=A,this._reject=B})}resolve(A){this.settled=!0,this._resolve(A)}reject(A){this.settled=!0,this._reject(A)}}/**
 * @license
 * Copyright 2014 Travis Webb
 * SPDX-License-Identifier: MIT
 */for(let R=0;R<256;R++)(R>>4&15).toString(16)+(R&15).toString(16);/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */let _y=new gy;_y.resolve();const vy=Ht`
          * {
            -webkit-tap-highlight-color: transparent;
          }
.wrapper {
    display: flex;
    user-select: none;
    padding: 8px;
    flex-direction: column;
    align-items: flex-start;
    gap: 8px;
    flex: 1 0 0;
}
.wrapper.style-fullwidth {
        width: 100%;
    }
.wrapper.style-compact {
        width: fit-content;
    }
.wrapper .content-container {
        display: flex;
        justify-content: space-between;
        align-items: center;
        align-self: stretch;
        align-items: center;
        gap: var(--menu-navigation-components-page-indicator-indicator-spacing);
    }
.wrapper .dot {
        width: var(--menu-navigation-components-page-indicator-indicator-size);
        height: var(--menu-navigation-components-page-indicator-indicator-size);
        border-radius: 50%;
    }
.wrapper .dot.state-inactive {
        fill: var(--indent-enabled-background-color);
        background-color: var(--indent-enabled-background-color);
    }
.wrapper .dot.state-active {
        background-color: var(--instrument-enhanced-secondary-color);
        fill: var(--instrument-enhanced-secondary-color);
    }

`;var yy=Object.defineProperty,by=Object.getOwnPropertyDescriptor,sg=(R,A,B,P)=>{for(var D=P>1?void 0:P?by(A,B):A,X=R.length-1,M;X>=0;X--)(M=R[X])&&(D=(P?M(A,B,D):M(D))||D);return P&&D&&yy(A,B,D),D};let vp=class extends Bt{constructor(){super(...arguments),this.totalSteps=5,this.currentStep=1,this.fullwidth=!1}get validCurrentStep(){return Math.max(1,Math.min(this.currentStep,this.totalSteps))}get validTotalSteps(){return Math.max(1,this.totalSteps)}renderDots(){const R=[];for(let A=0;A<this.validTotalSteps;A++)R.push(Ye`
        <div
          class=${Wn({dot:!0,"state-active":A===this.validCurrentStep-1,"state-inactive":A!==this.validCurrentStep-1})}
        ></div>
      `);return R}render(){return Ye`
      <div
        class=${Wn({wrapper:!0,"style-fullwidth":this.fullwidth,"style-compact":!this.fullwidth})}
      >
        <div class="content-container">${this.renderDots()}</div>
      </div>
    `}};vp.styles=ga(vy);sg([Ie({type:Number})],vp.prototype,"totalSteps",2);sg([Ie({type:Number})],vp.prototype,"currentStep",2);sg([Ie({type:Boolean})],vp.prototype,"fullwidth",2);vp=sg([Gt("obc-progress-indicator-dots")],vp);const xy=Ht`
          * {
            -webkit-tap-highlight-color: transparent;
          }

* {
  box-sizing: border-box;
}

.wrapper {
  display: flex;
  align-items: center;
  width: 100%;
  height: var(--menu-navigation-components-navigation-item-touch-target-size);
  transition: height 200ms;
  text-decoration: none;
  user-select: none;
}

.wrapper:focus-visible {
    outline-offset: -2px;
  }

.wrapper {
            cursor: pointer;
}

.wrapper:focus {
            outline: none;
}

.wrapper .visible-wrapper {
            border-color: var(--flat-enabled-border-color);
            background-color: var(--flat-enabled-background-color);
            border-width: 1px;
            border-style: solid;
            cursor: pointer;
            --base-border-color: var(--flat-enabled-border-color);
            --base-background-color: var(--flat-enabled-background-color);
}

.wrapper.activated .visible-wrapper {
            border-color: var(--flat-activated-border-color);
            background-color: var(--flat-activated-background-color);
            --base-border-color: var(--flat-activated-border-color);
            --base-background-color: var(--flat-activated-background-color);
}

@media (hover:hover) {

.wrapper:hover .visible-wrapper {
                        border-color: color-mix(in srgb, var(--flat-hover-border-color) calc(var(--obc-can-hover) * 100%), var(--base-border-color));
                        background-color: color-mix(in srgb, var(--flat-hover-background-color) calc(var(--obc-can-hover) * 100%), var(--base-background-color));
            }
}

.wrapper:active .visible-wrapper {
            border-color: var(--flat-pressed-border-color);
            background-color: var(--flat-pressed-background-color);
}

.wrapper:focus-visible .visible-wrapper {
            outline-color: var(--border-focus-color);
            outline-width: var(--global-size-spacing-border-weight-focusframe);
            outline-style: solid;
            border-color: var(--container-global-color);
            z-index: 1;
}

.wrapper:disabled .visible-wrapper {
            border-color: var(--flat-disabled-border-color);
            background-color: var(--flat-disabled-background-color);
            cursor: not-allowed;
            color: var(--on-flat-disabled-color);
}

.wrapper.disabled .visible-wrapper {
            border-color: var(--flat-disabled-border-color);
            background-color: var(--flat-disabled-background-color);
            cursor: not-allowed;
            color: var(--on-flat-disabled-color);
}

.wrapper:disabled {
            cursor: not-allowed;
}

.wrapper.disabled {
            cursor: not-allowed;
}

.wrapper {
  color: var(--on-flat-active-color);
}

.wrapper .visible-wrapper {
    display: flex;
    align-items: center;
    width: 100%;
    height: 100%;
    border-radius: var(
      --menu-navigation-components-navigation-item-border-radius
    );
    padding: 0px
      calc(
        var(
            --menu-navigation-components-navigation-item-margin-horizontal-list-item
          ) +
          var(--menu-navigation-components-navigation-item-padding-horizontal)
      );
  }

.wrapper {

  /* UI/Body */

  font-feature-settings: 'liga' off, 'clig' off;

  font-family: var(--font-family-main);

  font-size: var(--global-typography-ui-body-font-size);

  font-style: normal;

  font-weight: var(--global-typography-ui-body-font-weight);

  line-height: var(--global-typography-ui-body-line-height);

  text-decoration: none;
}

.wrapper.full .flyout-wrapper {
    display: flex;
    width: var(
      --menu-navigation-components-navigation-item-flyout-icon-container-size
    );
    align-items: center;
  }

:is(.wrapper.full .flyout-wrapper) .icon {
      flex-shrink: 0;
    }

.wrapper.icon-only,.wrapper.icon-only-large {
    width: var(--menu-navigation-components-navigation-item-touch-target-size);
    padding: var(
        --menu-navigation-components-navigation-item-margin-vertical-icon-button
      )
      var(
        --menu-navigation-components-navigation-item-margin-horizontal-icon-button
      );
  }

:is(.wrapper.icon-only,.wrapper.icon-only-large) .visible-wrapper {
      position: relative;
      padding: 0;
      display: flex;
      align-items: center;
      justify-content: center;
    }

.wrapper.icon-only-large {
    width: var(--menu-navigation-components-navigation-item-touch-target-size);
    height: var(--menu-navigation-components-navigation-item-touch-target-size);
    padding: 0;
  }

.wrapper.icon-only-large .icon.leading {
      anchor-name: --leading-icon;
    }

.wrapper.icon-only-large .icon.trailing {
      width: var(--menu-navigation-components-navigation-item-icon-size);
      height: var(--menu-navigation-components-navigation-item-icon-size);
      flex-shrink: 0;
      position: absolute;
      right: anchor(right);
      transform: translateX(60%);
      position-anchor: --leading-icon;
      top: anchor(top);
      bottom: anchor(bottom);
      margin: auto;
    }

.wrapper.compact {
    position: relative;
    width: var(
      --menu-navigation-components-navigation-item-touch-target-size-large
    );
    height: var(
      --menu-navigation-components-navigation-item-touch-target-size-large
    );
    padding: var(
        --menu-navigation-components-navigation-item-margin-vertical-icon-button
      )
      var(
        --menu-navigation-components-navigation-item-margin-horizontal-icon-button
      );
  }

.wrapper.compact .visible-wrapper {
      padding: 0;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
    }

.wrapper.compact .icon.leading {
      anchor-name: --leading-icon;
    }

.wrapper.compact .icon.trailing {
      width: var(--menu-navigation-components-navigation-item-icon-size);
      height: var(--menu-navigation-components-navigation-item-icon-size);
      flex-shrink: 0;
      position: absolute;
      right: anchor(right);
      transform: translateX(60%);
      position-anchor: --leading-icon;
      top: anchor(top);
      bottom: anchor(bottom);
      margin: auto;
    }

.wrapper.compact .label {
      font-feature-settings: 'liga' off, 'clig' off;
      font-family: var(--font-family-main);
      font-size: var(--global-typography-ui-label-font-size);
      font-style: normal;
      font-weight: var(--global-typography-ui-label-font-weight);
      line-height: var(--global-typography-ui-label-line-height);
      flex-grow: 0;
      flex-basis: auto;
    }

.checked :is(.wrapper.compact .label) {
        font-feature-settings: 'liga' off, 'clig' off;
        font-family: var(--font-family-main);
        font-size: var(--global-typography-ui-label-active-font-size);
        font-style: normal;
        font-weight: var(--global-typography-ui-label-active-font-weight);
        line-height: var(--global-typography-ui-label-active-line-height);
      }

.wrapper.checked {
            cursor: pointer;
}

.wrapper.checked:focus {
            outline: none;
}

.wrapper.checked .visible-wrapper {
            border-color: var(--amplified-enabled-border-color);
            background-color: var(--amplified-enabled-background-color);
            border-width: 1px;
            border-style: solid;
            cursor: pointer;
            --base-border-color: var(--amplified-enabled-border-color);
            --base-background-color: var(--amplified-enabled-background-color);
}

.wrapper.checked.activated .visible-wrapper {
            border-color: var(--amplified-activated-border-color);
            background-color: var(--amplified-activated-background-color);
            --base-border-color: var(--amplified-activated-border-color);
            --base-background-color: var(--amplified-activated-background-color);
}

@media (hover:hover) {

.wrapper.checked:hover .visible-wrapper {
                        border-color: color-mix(in srgb, var(--amplified-hover-border-color) calc(var(--obc-can-hover) * 100%), var(--base-border-color));
                        background-color: color-mix(in srgb, var(--amplified-hover-background-color) calc(var(--obc-can-hover) * 100%), var(--base-background-color));
            }
}

.wrapper.checked:active .visible-wrapper {
            border-color: var(--amplified-pressed-border-color);
            background-color: var(--amplified-pressed-background-color);
}

.wrapper.checked:focus-visible .visible-wrapper {
            outline-color: var(--border-focus-color);
            outline-width: var(--global-size-spacing-border-weight-focusframe);
            outline-style: solid;
            border-color: var(--container-global-color);
            z-index: 1;
}

.wrapper.checked:disabled .visible-wrapper {
            border-color: var(--amplified-disabled-border-color);
            background-color: var(--amplified-disabled-background-color);
            cursor: not-allowed;
            color: var(--on-amplified-disabled-color);
}

.wrapper.checked.disabled .visible-wrapper {
            border-color: var(--amplified-disabled-border-color);
            background-color: var(--amplified-disabled-background-color);
            cursor: not-allowed;
            color: var(--on-amplified-disabled-color);
}

.wrapper.checked:disabled {
            cursor: not-allowed;
}

.wrapper.checked.disabled {
            cursor: not-allowed;
}

.wrapper.checked {
    /* UI/Body-Active */
    font-feature-settings: 'liga' off, 'clig' off;
    font-family: var(--font-family-main);
    font-size: var(--global-typography-ui-body-active-font-size);
    font-style: normal;
    font-weight: var(--font-weight-bold);
    line-height: var(--global-typography-ui-body-active-line-height);
}

.wrapper.checked .icon.leading {
      color: var(--instrument-enhanced-secondary-color);
    }

.wrapper.group-selected .visible-wrapper {
    background: var(--flat-pressed-background-color);
    border-color: var(--flat-hover-border-color);
  }

.wrapper .icon {
    display: flex;
    align-items: center;
    color: var(--on-flat-neutral-color);
  }

.wrapper.full.has-icon .icon.leading {
    margin-right: var(
      --menu-navigation-components-navigation-item-label-spacing
    );
  }

.wrapper ::slotted([slot='icon']),.wrapper ::slotted([slot='trailing-icon']) {
    display: block;
    width: var(--menu-navigation-components-navigation-item-icon-size);
    height: var(--menu-navigation-components-navigation-item-icon-size);
  }

.wrapper .icon.trailing {
    width: var(--menu-navigation-components-navigation-item-icon-size);
    height: var(--menu-navigation-components-navigation-item-icon-size);
  }

.wrapper .label {
    flex: 1;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
    min-width: 0;
  }
`;var wy=Object.defineProperty,Cy=Object.getOwnPropertyDescriptor,Z1=(R,A,B,P)=>{for(var D=P>1?void 0:P?Cy(A,B):A,X=R.length-1,M;X>=0;X--)(M=R[X])&&(D=(P?M(A,B,D):M(D))||D);return P&&D&&wy(A,B,D),D};let eg=class extends Bt{constructor(){super(...arguments),this.useCssColor=!1,this.icon=Ct`<svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
<path d="M9.5 15.0686C9.5 15.6744 9.5 15.9773 9.6198 16.1176C9.72374 16.2393 9.87967 16.3039 10.0392 16.2913C10.2231 16.2769 10.4373 16.0627 10.8657 15.6343L13.9343 12.5657C14.1323 12.3677 14.2313 12.2687 14.2684 12.1545C14.3011 12.0541 14.3011 11.9459 14.2684 11.8455C14.2313 11.7313 14.1323 11.6323 13.9343 11.4343L10.8657 8.36567C10.4373 7.9373 10.2231 7.72311 10.0392 7.70864C9.87967 7.69608 9.72374 7.76067 9.6198 7.88237C9.5 8.02264 9.5 8.32554 9.5 8.93136L9.5 15.0686Z" fill="currentColor"/>
</svg>
`,this.iconCss=Ct`<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M9.5 15.0686C9.5 15.6744 9.5 15.9773 9.6198 16.1176C9.72374 16.2393 9.87967 16.3039 10.0392 16.2913C10.2231 16.2769 10.4373 16.0627 10.8657 15.6343L13.9343 12.5657C14.1323 12.3677 14.2313 12.2687 14.2684 12.1545C14.3011 12.0541 14.3011 11.9459 14.2684 11.8455C14.2313 11.7313 14.1323 11.6323 13.9343 11.4343L10.8657 8.36567C10.4373 7.9373 10.2231 7.72311 10.0392 7.70864C9.87967 7.69608 9.72374 7.76067 9.6198 7.88237C9.5 8.02264 9.5 8.32554 9.5 8.93136L9.5 15.0686Z" style="fill: var(--element-active-color)"/>
</svg>
`}render(){return Ye`
      <div class="wrapper">${this.useCssColor?this.iconCss:this.icon}</div>
    `}};eg.styles=Ht`
    .wrapper {
      height: 100%;
      width: 100%;
      line-height: 0;
    }
    .wrapper > * {
      height: 100%;
      width: 100%;
    }
  `;Z1([Ie({type:Boolean})],eg.prototype,"useCssColor",2);eg=Z1([Gt("obi-arrow-flyout-google")],eg);const Sy=Ht`
          * {
            -webkit-tap-highlight-color: transparent;
          }

.wrapper {
    display: flex;
    flex-direction: column;
    justify-content: center;
    height: 100%;
    width: 320px;
    background: var(--container-global-color, #FCFCFC);
    box-shadow: var(--shadow-flat);
}

.wrapper nav {
        padding: var(--app-components-navigation-menu-margin-vertical) var(--app-components-navigation-menu-footer-margin-horizontal);
    }

.wrapper.icon-only,.wrapper.compact {
        width: fit-content;
    }

:is(.wrapper.icon-only,.wrapper.compact) nav.main {
            padding: var(--app-components-navigation-menu-margin-vertical) 0px;
        }

:is(.wrapper.icon-only,.wrapper.compact) .footer nav {
            padding: 0;
        }

.wrapper.icon-only-large {
        width: fit-content;
    }

.wrapper .main {
        flex: 1;
    }

.wrapper .footer {
        display: flex;
        flex-direction: column;
        border-top: 1px solid var(--border-outline-color, rgba(0, 0, 0, 0.08));
        flex: 0;   
    }

.wrapper.small-screen .footer nav ol {
        display: flex;
        justify-content: space-around;
        width: 100%;
    }

.full .footer nav {
    border-bottom: 1px solid var(--border-outline-color, rgba(0, 0, 0, 0.08));        
}

.full .logo {
    height: 96px;
    width: 100%;
}

.icon-only-large .footer nav {
    padding-bottom: 0;
}

.icon-only-large .logo {
    padding: var(--app-components-navigation-menu-margin-vertical) var(--app-components-navigation-menu-footer-margin-horizontal);
    padding-top: 0;
    height: calc(var(--menu-navigation-components-navigation-item-touch-target-size) + var(--app-components-navigation-menu-margin-vertical));
}

.icon-only .logo {
    height: var(--menu-navigation-components-navigation-item-touch-target-size);
}

.compact .logo {
    height: var(--menu-navigation-components-navigation-item-touch-target-size-large);
}

.logo {
    transition: height 200ms;
}

.wrapper:not(.small-screen) ::slotted([slot="logo"]) {
    width: 100%;
}

ol {
    list-style: none;
    margin: 0;
    padding: 0;
}`;var Ty=Object.defineProperty,My=Object.getOwnPropertyDescriptor,Ng=(R,A,B,P)=>{for(var D=P>1?void 0:P?My(A,B):A,X=R.length-1,M;X>=0;X--)(M=R[X])&&(D=(P?M(A,B,D):M(D))||D);return P&&D&&Ty(A,B,D),D},pp=(R=>(R.Full="full",R.IconOnly="icon-only",R.IconOnlyLarge="icon-only-large",R.Compact="compact",R))(pp||{});let yp=class extends Bt{constructor(){super(...arguments),this.variant="full",this.smallScreen=!1,this.slotObservers=[]}findAllElements(A,B,{slot:P,stopTag:D}={}){const X=[];for(const M of A.children)if(M.tagName.toLowerCase()===B){if(P&&M.getAttribute("slot")!==P)continue;X.push(M)}else{if(D&&M.tagName.toLowerCase()===D)continue;if(P&&M.getAttribute("slot")!==P)continue;X.push(...this.findAllElements(M,B,{stopTag:D}))}return X}findAllGroups(A){return this.findAllElements(A,"obc-navigation-item-group")}findRootItems(A){return this.findAllElements(A,"obc-navigation-item",{stopTag:"obc-navigation-item-group"})}findAllItems(A,B){return this.findAllElements(A,"obc-navigation-item",{slot:B})}closeAllGroups(){this.findAllGroups(this).forEach(B=>{B.close()})}registerGroup(A){A.forEach(B=>{B.addEventListener("open",()=>{A.forEach(D=>{D!==B&&D.close()})});const P=this.findAllGroups(B);this.registerGroup(P)})}cleanupSlotObservers(){this.slotObservers.forEach(A=>A.disconnect()),this.slotObservers=[]}setupSlotObservers(){var A,B;this.cleanupSlotObservers();const P=(A=this.shadowRoot)==null?void 0:A.querySelector('slot[name="main"]'),D=(B=this.shadowRoot)==null?void 0:B.querySelector('slot[name="footer"]');[P,D].forEach(X=>{X&&X.assignedElements().forEach(d=>{const ye=new MutationObserver(()=>{this.setupItems()});ye.observe(d,{childList:!0,subtree:!0}),this.slotObservers.push(ye)})})}firstUpdated(A){super.firstUpdated(A);const B=this.findAllGroups(this);this.registerGroup(B)}updated(A){super.updated(A),A.has("variant")&&this.setupItems()}setVariantToFlyoutItems(A){this.findAllElements(A,"obc-navigation-item").forEach(D=>{D.variant="full"}),this.findAllGroups(A).forEach(D=>{D.variant="full",this.setVariantToFlyoutItems(D)})}disconnectedCallback(){super.disconnectedCallback(),this.cleanupSlotObservers()}handleSlotChange(){this.setupItems(),this.setupSlotObservers()}setupItems(){const A=this.variant!=="full";this.setHugToGroups(this,A),this.findAllGroups(this).forEach(D=>{D.variant=this.variant,this.setVariantToFlyoutItems(D)}),this.findRootItems(this).forEach(D=>{D.variant=this.variant});const P=this.smallScreen&&this.variant==="full"?"compact":this.variant;this.findAllItems(this,"footer").forEach(D=>{D.variant=P}),this.findAllItems(this,"logo").forEach(D=>{D.variant=P}),this.findAllItems(this).forEach(D=>{D.addEventListener("click",()=>{this.closeAllGroups()})})}setHugToGroups(A,B){this.findAllGroups(A).forEach(D=>{D.hug=B,this.setHugToGroups(D,B)})}render(){return Ye`
      <div
        class="wrapper ${this.variant} ${this.smallScreen?"small-screen":""}"
      >
        <nav class="main">
          <ol>
            <slot name="main" @slotchange=${this.handleSlotChange}></slot>
          </ol>
        </nav>
        <div class="footer">
          <nav>
            <ol>
              <slot name="footer" @slotchange=${this.handleSlotChange}></slot>
              ${this.smallScreen?Ye` <slot name="logo"></slot> `:Zt}
            </ol>
          </nav>
          ${this.smallScreen?Zt:Ye`
                <div class="logo">
                  <slot name="logo"></slot>
                </div>
              `}
        </div>
      </div>
    `}};yp.styles=ga(Sy);Ng([Ie({type:String})],yp.prototype,"variant",2);Ng([Ie({type:Boolean})],yp.prototype,"smallScreen",2);yp=Ng([Gt("obc-navigation-menu")],yp);var Ay=Object.defineProperty,Ey=Object.getOwnPropertyDescriptor,oh=(R,A,B,P)=>{for(var D=P>1?void 0:P?Ey(A,B):A,X=R.length-1,M;X>=0;X--)(M=R[X])&&(D=(P?M(A,B,D):M(D))||D);return P&&D&&Ay(A,B,D),D};let Cl=class extends Bt{constructor(){super(...arguments),this.label="Label",this.checked=!1,this.variant=pp.Full,this.group=!1,this.groupSelected=!1,this.hasIcon=!1}firstUpdated(){this.updateIconState()}updated(A){super.updated(A),this.updateIconState()}checkIconPresence(){var A;const B=(A=this.shadowRoot)==null?void 0:A.querySelector('slot[name="icon"]');this.hasIcon=!!B&&B.assignedElements().length>0}updateIconState(){this.checkIconPresence()}onSlotChange(){this.checkIconPresence()}onClick(){dispatchEvent(new CustomEvent("click"))}render(){const A=this.group&&this.variant!==pp.IconOnly,B=this.variant===pp.Compact;return Ye`
      <a
        class="${Wn({wrapper:!0,checked:this.checked,"group-selected":this.groupSelected&&this.group,"has-icon":this.hasIcon,[this.variant]:!0})}"
        href="${Fm(this.href)}"
        @click=${this.onClick}
      >
        <div class="visible-wrapper">
          ${this.hasIcon?Ye`<slot
                name="icon"
                class="icon leading"
                @slotchange=${this.onSlotChange}
              ></slot>`:Zt}
          ${[pp.IconOnly,pp.IconOnlyLarge].includes(this.variant)?Zt:Ye`
                <span
                  class=${Wn({label:!0,"label-flyout":A&&!B})}
                >
                  ${this.label}
                </span>
              `}
          ${A?Ye`
                <div class="flyout-wrapper">
                  <obi-arrow-flyout-google
                    class="icon trailing"
                  ></obi-arrow-flyout-google>
                </div>
              `:Zt}
        </div>
      </a>
    `}};Cl.styles=ga(xy);oh([Ie({type:String})],Cl.prototype,"label",2);oh([Ie({type:String})],Cl.prototype,"href",2);oh([Ie({type:Boolean})],Cl.prototype,"checked",2);oh([Ie({type:String})],Cl.prototype,"variant",2);oh([Ie({type:Boolean})],Cl.prototype,"group",2);oh([Ie({type:Boolean})],Cl.prototype,"groupSelected",2);oh([Ie({type:Boolean,reflect:!0})],Cl.prototype,"hasIcon",2);Cl=oh([Gt("obc-navigation-item")],Cl);const zy=Ht`
          * {
            -webkit-tap-highlight-color: transparent;
          }

* {
  box-sizing: border-box;
}

.wrapper {
  display: inline-flex;
  min-width: var(--ui-components-app-button-touch-target-size-enhanced);
  min-height: var(--ui-components-app-button-touch-target-size-enhanced);
  padding: var(--ui-components-app-button-padding-vertical-enhanced) 0px;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  border-radius: var(--ui-components-app-button-border-radius-container);
  border-width: 0 !important;
}

.wrapper {
            border-color: var(--flat-enabled-border-color);
            background-color: var(--flat-enabled-background-color);
            border-width: 1px;
            border-style: solid;
            cursor: pointer;
            --base-border-color: var(--flat-enabled-border-color);
            --base-background-color: var(--flat-enabled-background-color);
}

.wrapper:focus {
            outline: none;
}

.wrapper.activated {
            border-color: var(--flat-activated-border-color);
            background-color: var(--flat-activated-background-color);
            --base-border-color: var(--flat-activated-border-color);
            --base-background-color: var(--flat-activated-background-color);
}

@media (hover:hover) {

.wrapper:hover {
                        border-color: color-mix(in srgb, var(--flat-hover-border-color) calc(var(--obc-can-hover) * 100%), var(--base-border-color));
                        background-color: color-mix(in srgb, var(--flat-hover-background-color) calc(var(--obc-can-hover) * 100%), var(--base-background-color));
            }
}

.wrapper:active {
            border-color: var(--flat-pressed-border-color);
            background-color: var(--flat-pressed-background-color);
}

.wrapper:focus-visible {
            outline-color: var(--border-focus-color);
            outline-width: var(--global-size-spacing-border-weight-focusframe);
            outline-style: solid;
            border-color: var(--container-global-color);
            z-index: 1;
}

.wrapper:disabled {
            border-color: var(--flat-disabled-border-color);
            background-color: var(--flat-disabled-background-color);
            cursor: not-allowed;
            color: var(--on-flat-disabled-color);
}

.wrapper.disabled {
            border-color: var(--flat-disabled-border-color);
            background-color: var(--flat-disabled-background-color);
            cursor: not-allowed;
            color: var(--on-flat-disabled-color);
}

:is(.wrapper .icon-wrapper) {
            border-color: var(--normal-enabled-border-color);
            background-color: var(--normal-enabled-background-color);
            border-width: 1px;
            border-style: solid;
            --base-border-color: var(--normal-enabled-border-color);
            --base-background-color: var(--normal-enabled-background-color);
}

.wrapper .icon-wrapper {
    color: var(--on-normal-neutral-color);

    width: var(--ui-components-app-button-visual-size-enhanced);
    height: var(--ui-components-app-button-visual-size-enhanced);
    border-radius: 100%;

    display: flex;

    align-items: center;
    justify-content: center;
  }

:is(.wrapper .icon-wrapper) .icon {
      width: var(--ui-components-app-button-icon-size-enhanced);
      height: var(--ui-components-app-button-icon-size-enhanced);
    }

.wrapper .label {
    color: var(--element-active-color);
    text-align: center;
    font-feature-settings: 'liga' off, 'clig' off;
    font-family: var(--font-family-main);
    font-size: var(--global-typography-ui-label-font-size);
    font-style: normal;
    font-weight: var(--global-typography-ui-label-font-weight);
    line-height: var(--global-typography-ui-label-line-height);
  }

.wrapper.small {
    min-width: var(--ui-components-app-button-touch-target-size);
    min-height: var(--ui-components-app-button-touch-target-size);
    padding: var(--ui-components-app-button-padding-vertical) 0px;
  }

.wrapper.small .icon-wrapper {
      width: var(--ui-components-app-button-visual-size);
      height: var(--ui-components-app-button-visual-size);
    }

.wrapper.small .icon {
      width: var(--ui-components-app-button-icon-size);
      height: var(--ui-components-app-button-icon-size);
    }

:is(.wrapper.checked .icon-wrapper) {
            border-color: var(--selected-enabled-border-color);
            background-color: var(--selected-enabled-background-color);
            border-width: 1px;
            border-style: solid;
            cursor: pointer;
            --base-border-color: var(--selected-enabled-border-color);
            --base-background-color: var(--selected-enabled-background-color);
}

:is(.wrapper.checked .icon-wrapper):focus {
            outline: none;
}

.activated:is(.wrapper.checked .icon-wrapper) {
            border-color: var(--selected-activated-border-color);
            background-color: var(--selected-activated-background-color);
            --base-border-color: var(--selected-activated-border-color);
            --base-background-color: var(--selected-activated-background-color);
}

@media (hover:hover) {

:is(.wrapper.checked .icon-wrapper):hover {
                        border-color: color-mix(in srgb, var(--selected-hover-border-color) calc(var(--obc-can-hover) * 100%), var(--base-border-color));
                        background-color: color-mix(in srgb, var(--selected-hover-background-color) calc(var(--obc-can-hover) * 100%), var(--base-background-color));
            }
}

:is(.wrapper.checked .icon-wrapper):active {
            border-color: var(--selected-pressed-border-color);
            background-color: var(--selected-pressed-background-color);
}

:is(.wrapper.checked .icon-wrapper):focus-visible {
            outline-color: var(--border-focus-color);
            outline-width: var(--global-size-spacing-border-weight-focusframe);
            outline-style: solid;
            border-color: var(--container-global-color);
            z-index: 1;
}

:is(.wrapper.checked .icon-wrapper):disabled {
            border-color: var(--selected-disabled-border-color);
            background-color: var(--selected-disabled-background-color);
            cursor: not-allowed;
            color: var(--on-selected-disabled-color);
}

.disabled:is(.wrapper.checked .icon-wrapper) {
            border-color: var(--selected-disabled-border-color);
            background-color: var(--selected-disabled-background-color);
            cursor: not-allowed;
            color: var(--on-selected-disabled-color);
}

.wrapper.checked .icon-wrapper {
      color: var(--on-selected-active-color);
    }

.wrapper.checked .label {
      font-feature-settings: 'liga' off, 'clig' off;
      font-family: var(--font-family-main);
      font-size: var(--global-typography-ui-label-active-font-size);
      font-style: normal;
      font-weight: var(--global-typography-ui-label-active-font-weight);
      line-height: var(--global-typography-ui-label-active-line-height);
    }
`;var Py=Object.defineProperty,ky=Object.getOwnPropertyDescriptor,lg=(R,A,B,P)=>{for(var D=P>1?void 0:P?ky(A,B):A,X=R.length-1,M;X>=0;X--)(M=R[X])&&(D=(P?M(A,B,D):M(D))||D);return P&&D&&Py(A,B,D),D};let bp=class extends Bt{constructor(){super(...arguments),this.label="Button",this.checked=!1,this.size="normal"}render(){return Ye` <button
      class="${Wn({wrapper:!0,checked:this.checked,small:this.size==="small"})}"
    >
      <div class="icon-wrapper">
        <span class="icon">
          <slot name="icon"></slot>
        </span>
      </div>
      <div class="label">${this.label}</div>
    </button>`}};bp.styles=ga(zy);lg([Ie({type:String})],bp.prototype,"label",2);lg([Ie({type:Boolean})],bp.prototype,"checked",2);lg([Ie({type:String})],bp.prototype,"size",2);bp=lg([Gt("obc-app-button")],bp);const Dy=Ht`
          * {
            -webkit-tap-highlight-color: transparent;
          }


* {
  box-sizing: border-box;
}


.wrapper {
  display: flex;
  user-select: none;
  min-width: var(--ui-components-user-button-touch-target-size);
  min-height: var(--ui-components-app-button-touch-target-size);
  width: fit-content;
  padding: var(--ui-components-user-button-padding-vertical) 0px;
  margin: 0;
  appearance: none;
  justify-content: center;
  align-items: center;
  border-radius: var(--ui-components-user-button-border-radius-container);
  border: none;
  background: transparent;
  /* UI/Body */
  font-feature-settings: 'liga' off, 'clig' off;
  font-family: var(--font-family-main);
  font-size: var(--global-typography-ui-body-font-size);
  font-style: normal;
  font-weight: var(--global-typography-ui-body-font-weight);
  line-height: var(--global-typography-ui-body-line-height);
  text-decoration: none;
}


.wrapper .user-label {
    font-feature-settings: 'liga' off, 'clig' off;
    font-family: var(--font-family-main);
    font-size: var(--global-typography-ui-label-font-size);
    font-style: normal;
    font-weight: var(--global-typography-ui-label-font-weight);
    line-height: var(--global-typography-ui-label-line-height);
    color: var(--element-active-color);
  }


.wrapper:disabled .user-label {
    color: var(--element-disabled-color);
  }


.wrapper .user-button-circle {
    display: flex;
    width: var(--ui-components-user-button-visual-size);
    height: var(--ui-components-user-button-visual-size);
    flex-direction: column;
    justify-content: center;
    align-items: center;
    border-radius: 100px;
  }


.wrapper.state-static {
    width: var(--ui-components-user-button-visual-size);
    height: var(--ui-components-user-button-visual-size);
    min-width: unset;
    min-height: unset;
    padding: 0;
    margin: 0;
  }


.wrapper.style-flat {
  /* UI/Body-Active */
  font-feature-settings: 'liga' off, 'clig' off;
  font-family: var(--font-family-main);
  font-size: var(--global-typography-ui-body-active-font-size);
  font-style: normal;
  font-weight: var(--font-weight-bold);
  line-height: var(--global-typography-ui-body-active-line-height);
}


.wrapper.style-flat:not(.state-static) {
            cursor: pointer;
}


.wrapper.style-flat:not(.state-static):focus {
            outline: none;
}


.wrapper.style-flat:not(.state-static) .user-button-circle {
            border-color: var(--flat-enabled-border-color);
            background-color: var(--flat-enabled-background-color);
            border-width: 1px;
            border-style: solid;
            cursor: pointer;
            --base-border-color: var(--flat-enabled-border-color);
            --base-background-color: var(--flat-enabled-background-color);
}


.wrapper.style-flat.activated:not(.state-static) .user-button-circle {
            border-color: var(--flat-activated-border-color);
            background-color: var(--flat-activated-background-color);
            --base-border-color: var(--flat-activated-border-color);
            --base-background-color: var(--flat-activated-background-color);
}


@media (hover:hover) {


.wrapper.style-flat:not(.state-static):hover .user-button-circle {
                        border-color: color-mix(in srgb, var(--flat-hover-border-color) calc(var(--obc-can-hover) * 100%), var(--base-border-color));
                        background-color: color-mix(in srgb, var(--flat-hover-background-color) calc(var(--obc-can-hover) * 100%), var(--base-background-color));
            }
}


.wrapper.style-flat:not(.state-static):active .user-button-circle {
            border-color: var(--flat-pressed-border-color);
            background-color: var(--flat-pressed-background-color);
}


.wrapper.style-flat:not(.state-static):focus-visible .user-button-circle {
            outline-color: var(--border-focus-color);
            outline-width: var(--global-size-spacing-border-weight-focusframe);
            outline-style: solid;
            border-color: var(--container-global-color);
            z-index: 1;
}


.wrapper.style-flat:not(.state-static):disabled .user-button-circle {
            border-color: var(--flat-disabled-border-color);
            background-color: var(--flat-disabled-background-color);
            cursor: not-allowed;
            color: var(--on-flat-disabled-color);
}


.wrapper.style-flat.disabled:not(.state-static) .user-button-circle {
            border-color: var(--flat-disabled-border-color);
            background-color: var(--flat-disabled-background-color);
            cursor: not-allowed;
            color: var(--on-flat-disabled-color);
}


.wrapper.style-flat:not(.state-static):disabled {
            cursor: not-allowed;
}


.wrapper.style-flat.disabled:not(.state-static) {
            cursor: not-allowed;
}


.wrapper.style-flat .user-icon {
    color: var(--on-flat-neutral-color)
  }


.wrapper.style-flat .user-button-circle {
    border-radius: var(--ui-components-button-border-radius-top-left) var(--ui-components-button-border-radius-top-right) var(--ui-components-button-border-radius-bottom-right) var(--ui-components-button-border-radius-bottom-left);
    color: var(--on-flat-neutral-color);
  }


.wrapper.style-normal:not(.state-static) {
            border-color: var(--flat-enabled-border-color);
            background-color: var(--flat-enabled-background-color);
            border-width: 1px;
            border-style: solid;
            cursor: pointer;
            --base-border-color: var(--flat-enabled-border-color);
            --base-background-color: var(--flat-enabled-background-color);
}


.wrapper.style-normal:not(.state-static):focus {
            outline: none;
}


.wrapper.style-normal.activated:not(.state-static) {
            border-color: var(--flat-activated-border-color);
            background-color: var(--flat-activated-background-color);
            --base-border-color: var(--flat-activated-border-color);
            --base-background-color: var(--flat-activated-background-color);
}


@media (hover:hover) {


.wrapper.style-normal:not(.state-static):hover {
                        border-color: color-mix(in srgb, var(--flat-hover-border-color) calc(var(--obc-can-hover) * 100%), var(--base-border-color));
                        background-color: color-mix(in srgb, var(--flat-hover-background-color) calc(var(--obc-can-hover) * 100%), var(--base-background-color));
            }
}


.wrapper.style-normal:not(.state-static):active {
            border-color: var(--flat-pressed-border-color);
            background-color: var(--flat-pressed-background-color);
}


.wrapper.style-normal:not(.state-static):focus-visible {
            outline-color: var(--border-focus-color);
            outline-width: var(--global-size-spacing-border-weight-focusframe);
            outline-style: solid;
            border-color: var(--container-global-color);
            z-index: 1;
}


.wrapper.style-normal:not(.state-static):disabled {
            border-color: var(--flat-disabled-border-color);
            background-color: var(--flat-disabled-background-color);
            cursor: not-allowed;
            color: var(--on-flat-disabled-color);
}


.wrapper.style-normal.disabled:not(.state-static) {
            border-color: var(--flat-disabled-border-color);
            background-color: var(--flat-disabled-background-color);
            cursor: not-allowed;
            color: var(--on-flat-disabled-color);
}


.wrapper.style-normal .user-button-circle {
    border: 1px solid var(--normal-enabled-border-color);
    background: var(--normal-enabled-background-color);
    color: var(--on-normal-neutral-color);
  }


.wrapper.style-normal.mode-initials .user-button-circle {
    color: var(--element-neutral-color);
  }


.wrapper.style-normal.mode-initials:disabled .user-button-circle {
    color: var(--element-disabled-color);
    background-color: var(--normal-disabled-background-color);
    border-color: var(--normal-disabled-border-color);
  }


.wrapper.style-normal.mode-icon:disabled .user-button-circle{
    color: var(--on-normal-disabled-color);
    background-color: var(--normal-disabled-background-color);
    border-color: var(--normal-disabled-border-color);
  }


.wrapper.style-selected {
  /* UI/Body-Active */
  font-feature-settings: 'liga' off, 'clig' off;
  font-family: var(--font-family-main);
  font-size: var(--global-typography-ui-body-active-font-size);
  font-style: normal;
  font-weight: var(--font-weight-bold);
  line-height: var(--global-typography-ui-body-active-line-height);
}


.wrapper.style-selected:not(.state-static) {
            border-color: var(--flat-enabled-border-color);
            background-color: var(--flat-enabled-background-color);
            border-width: 1px;
            border-style: solid;
            cursor: pointer;
            --base-border-color: var(--flat-enabled-border-color);
            --base-background-color: var(--flat-enabled-background-color);
}


.wrapper.style-selected:not(.state-static):focus {
            outline: none;
}


.wrapper.style-selected.activated:not(.state-static) {
            border-color: var(--flat-activated-border-color);
            background-color: var(--flat-activated-background-color);
            --base-border-color: var(--flat-activated-border-color);
            --base-background-color: var(--flat-activated-background-color);
}


@media (hover:hover) {


.wrapper.style-selected:not(.state-static):hover {
                        border-color: color-mix(in srgb, var(--flat-hover-border-color) calc(var(--obc-can-hover) * 100%), var(--base-border-color));
                        background-color: color-mix(in srgb, var(--flat-hover-background-color) calc(var(--obc-can-hover) * 100%), var(--base-background-color));
            }
}


.wrapper.style-selected:not(.state-static):active {
            border-color: var(--flat-pressed-border-color);
            background-color: var(--flat-pressed-background-color);
}


.wrapper.style-selected:not(.state-static):focus-visible {
            outline-color: var(--border-focus-color);
            outline-width: var(--global-size-spacing-border-weight-focusframe);
            outline-style: solid;
            border-color: var(--container-global-color);
            z-index: 1;
}


.wrapper.style-selected:not(.state-static):disabled {
            border-color: var(--flat-disabled-border-color);
            background-color: var(--flat-disabled-background-color);
            cursor: not-allowed;
            color: var(--on-flat-disabled-color);
}


.wrapper.style-selected.disabled:not(.state-static) {
            border-color: var(--flat-disabled-border-color);
            background-color: var(--flat-disabled-background-color);
            cursor: not-allowed;
            color: var(--on-flat-disabled-color);
}


.wrapper.style-selected .user-button-circle {
    color: var(--on-selected-active-color);
    border: 1px solid var(--selected-enabled-border-color);
    background: var(--selected-enabled-background-color);
  }


.wrapper.style-selected .user-label {
    font-feature-settings: 'liga' off, 'clig' off;
    font-family: var(--font-family-main);
    font-size: var(--global-typography-ui-label-active-font-size);
    font-style: normal;
    font-weight: var(--global-typography-ui-label-active-font-weight);
    line-height: var(--global-typography-ui-label-active-line-height);
  }


.wrapper.style-selected:disabled .user-button-circle {
  color: var(--on-selected-disabled-color);
  background-color: var(--selected-disabled-background-color);
  border-color: var(--selected-disabled-border-color);
}


.content-container {
  display: flex;
  justify-content: center;
  align-items: center;
  align-self: stretch;
  flex-direction: column;
}


.icon-container {
  width: var(--ui-components-user-button-icon-size);
  height: var(--ui-components-user-button-icon-size);
  flex-shrink: 0;
}


.chip-icon-wrapper ::slotted(*) {
  width: 100%;
  height: 100%;
  flex-shrink: 0;
}
`;var Ly=Object.defineProperty,Iy=Object.getOwnPropertyDescriptor,dd=(R,A,B,P)=>{for(var D=P>1?void 0:P?Iy(A,B):A,X=R.length-1,M;X>=0;X--)(M=R[X])&&(D=(P?M(A,B,D):M(D))||D);return P&&D&&Ly(A,B,D),D};let ou=class extends Bt{constructor(){super(...arguments),this.variant="icon",this.styleType="flat",this.static=!1,this.disabled=!1,this.initials=""}get formattedInitials(){if(!this.initials)return"";const R=this.initials.replace(/\s+/g,"").toUpperCase();return R.length>2?(console.warn(`Initials "${this.initials}" are longer than 2 characters.`),R.slice(0,2)):R}get shouldShowIcon(){return this.variant==="icon"}render(){const R={wrapper:!0,"wrapper-static":this.static,"style-flat":this.styleType==="flat","style-normal":this.styleType==="normal","style-selected":this.styleType==="selected","mode-icon":this.shouldShowIcon,"mode-initials":!this.shouldShowIcon,"state-static":this.static},A=this.static?_p`div`:_p`button`,B=this.label&&!this.static?nn`<span class="user-label">${this.label}</span>`:Zt;return nn`
        <${A}
          class=${Wn(R)}
          ?disabled=${this.disabled}
          aria-label=${this.initials||"User button"}
        >
        <div class="content-container">
          <div class="user-button-circle">
            ${this.shouldShowIcon?nn`
                    <div class="icon-container">
                      <slot name="icon">
                        <!-- Fallback to default icon if no slot content -->
                        <obi-user></obi-user>
                      </slot>
                    </div>
                  `:nn`
                    <span class="user-initials">
                      ${this.formattedInitials}
                    </span>
                  `}
          </div>
          ${B}
        </div>
        </${A}>
      `}};ou.styles=ga(Dy);dd([Ie({type:String})],ou.prototype,"variant",2);dd([Ie({type:String})],ou.prototype,"styleType",2);dd([Ie({type:Boolean})],ou.prototype,"static",2);dd([Ie({type:Boolean})],ou.prototype,"disabled",2);dd([Ie({type:String})],ou.prototype,"initials",2);dd([Ie({type:String})],ou.prototype,"label",2);ou=dd([Gt("obc-user-button")],ou);const Ry=Ht`
          * {
            -webkit-tap-highlight-color: transparent;
          }

* {
  box-sizing: border-box;
}

:host {
  display: block;
}

.tab-container {
  display: flex;
  width: 100%;
  height: 100%;
  flex-direction: column;
  align-items: center;
  flex-shrink: 0;
  border-radius: var(--app-components-alert-menu-border-radius);
  background: var(--container-global-color);
  box-shadow: var(--shadow-floating);
}

.tab-header {
  display: flex;
  align-items: center;
  align-self: stretch;
  border-top-left-radius: var(--app-components-alert-menu-border-radius);
  border-top-right-radius: var(--app-components-alert-menu-border-radius);
  background: var(--container-section-color);
}

.tab-button {
  position: relative;
  display: flex;
  height: var(--menu-navigation-components-tab-item-touch-target-size);
  padding: 0 var(--menu-navigation-components-tab-item-padding-horizontal);
  justify-content: center;
  align-items: center;
  flex: 1 0 0;
}

.tab-button {
            border-color: var(--flat-enabled-border-color);
            background-color: var(--flat-enabled-background-color);
            border-width: 1px;
            border-style: solid;
            cursor: pointer;
            --base-border-color: var(--flat-enabled-border-color);
            --base-background-color: var(--flat-enabled-background-color);
}

.tab-button:focus {
            outline: none;
}

.tab-button.activated {
            border-color: var(--flat-activated-border-color);
            background-color: var(--flat-activated-background-color);
            --base-border-color: var(--flat-activated-border-color);
            --base-background-color: var(--flat-activated-background-color);
}

@media (hover:hover) {

.tab-button:hover {
                        border-color: color-mix(in srgb, var(--flat-hover-border-color) calc(var(--obc-can-hover) * 100%), var(--base-border-color));
                        background-color: color-mix(in srgb, var(--flat-hover-background-color) calc(var(--obc-can-hover) * 100%), var(--base-background-color));
            }
}

.tab-button:active {
            border-color: var(--flat-pressed-border-color);
            background-color: var(--flat-pressed-background-color);
}

.tab-button:focus-visible {
            outline-color: var(--border-focus-color);
            outline-width: var(--global-size-spacing-border-weight-focusframe);
            outline-style: solid;
            border-color: var(--container-global-color);
            z-index: 1;
}

.tab-button:disabled {
            border-color: var(--flat-disabled-border-color);
            background-color: var(--flat-disabled-background-color);
            cursor: not-allowed;
            color: var(--on-flat-disabled-color);
}

.tab-button.disabled {
            border-color: var(--flat-disabled-border-color);
            background-color: var(--flat-disabled-background-color);
            cursor: not-allowed;
            color: var(--on-flat-disabled-color);
}

.tab-button {
  /* UI/Body */
  font-feature-settings: 'liga' off, 'clig' off;
  font-family: var(--font-family-main);
  font-size: var(--global-typography-ui-body-font-size);
  font-style: normal;
  font-weight: var(--global-typography-ui-body-font-weight);
  line-height: var(--global-typography-ui-body-line-height);
  text-decoration: none;
  color: var(--on-flat-active-color);
  border-width: 0;
  border-bottom: 1px solid var(--border-divider-color);
}

.tab-button .tab-title-container {
    display: flex;
    align-items: center;
  }

:is(.tab-button .tab-title-container) .tab-icon {
      color: var(--on-flat-neutral-color);
    }

:is(.tab-button .tab-title-container) .tab-title {
      display: block;
      padding: 0 var(--menu-navigation-components-tab-item-label-spacing);
    }

/* Divider between tabs */

.tab-button.has-divider::after {
    content: '';
    position: absolute;
    top: 0;
    bottom: 0;
    margin: auto;
    right: 0;
    width: 1px;
    height: 24px;
    background: var(--border-divider-color);
    z-index: 0;
  }

.tab-button[aria-selected='true'] {
    /* UI/Body-Active */
    font-feature-settings: 'liga' off, 'clig' off;
    font-family: var(--font-family-main);
    font-size: var(--global-typography-ui-body-active-font-size);
    font-style: normal;
    font-weight: var(--font-weight-bold);
    line-height: var(--global-typography-ui-body-active-line-height);
  }

.tab-button[aria-selected='true'] {
            border-color: var(--normal-enabled-border-color);
            background-color: var(--normal-enabled-background-color);
            border-width: 1px;
            border-style: solid;
            cursor: pointer;
            --base-border-color: var(--normal-enabled-border-color);
            --base-background-color: var(--normal-enabled-background-color);
}

.tab-button[aria-selected='true']:focus {
            outline: none;
}

.tab-button.activated[aria-selected='true'] {
            border-color: var(--normal-activated-border-color);
            background-color: var(--normal-activated-background-color);
            --base-border-color: var(--normal-activated-border-color);
            --base-background-color: var(--normal-activated-background-color);
}

@media (hover:hover) {

.tab-button[aria-selected='true']:hover {
                        border-color: color-mix(in srgb, var(--normal-hover-border-color) calc(var(--obc-can-hover) * 100%), var(--base-border-color));
                        background-color: color-mix(in srgb, var(--normal-hover-background-color) calc(var(--obc-can-hover) * 100%), var(--base-background-color));
            }
}

.tab-button[aria-selected='true']:active {
            border-color: var(--normal-pressed-border-color);
            background-color: var(--normal-pressed-background-color);
}

.tab-button[aria-selected='true']:focus-visible {
            outline-color: var(--border-focus-color);
            outline-width: var(--global-size-spacing-border-weight-focusframe);
            outline-style: solid;
            border-color: var(--container-global-color);
            z-index: 1;
}

.tab-button[aria-selected='true']:disabled {
            border-color: var(--normal-disabled-border-color);
            background-color: var(--normal-disabled-background-color);
            cursor: not-allowed;
            color: var(--on-normal-disabled-color);
}

.tab-button.disabled[aria-selected='true'] {
            border-color: var(--normal-disabled-border-color);
            background-color: var(--normal-disabled-background-color);
            cursor: not-allowed;
            color: var(--on-normal-disabled-color);
}

.tab-button[aria-selected='true'] {
    border-width: 0;
    border-bottom: 1px solid transparent !important;
    border-color: transparent;
    z-index: 1;
}

.tab-button[aria-selected='true']:not(:last-of-type) {
      border-right: 1px solid var(--border-divider-color);
    }

.tab-button[aria-selected='true']:not(:first-of-type) {
      border-left: 1px solid var(--border-divider-color);
    }

.tab-button[aria-selected='true'] .tab-icon {
      color: var(--instrument-enhanced-secondary-color);
    }

.tab-button:first-of-type {
    border-top-left-radius: var(--app-components-alert-menu-border-radius);
  }

.tab-button:last-of-type {
    border-top-right-radius: var(--app-components-alert-menu-border-radius);
  }

.tab-panels {
  width: 100%;
  flex: 1;
  min-height: 0;
}

div[role='tabpanel'] {
  width: 100%;
  height: 100%;
  border-bottom-left-radius: var(--app-components-alert-menu-border-radius);
  border-bottom-right-radius: var(--app-components-alert-menu-border-radius);
  overflow: hidden;
}
`;var By=Object.defineProperty,Oy=Object.getOwnPropertyDescriptor,jf=(R,A,B,P)=>{for(var D=P>1?void 0:P?Oy(A,B):A,X=R.length-1,M;X>=0;X--)(M=R[X])&&(D=(P?M(A,B,D):M(D))||D);return P&&D&&By(A,B,D),D};let ud=class extends Bt{constructor(){super(...arguments),this.nTabs=1,this.selectedTab=0,this.hasDefaultSlotOnly=!1,this.hasTabIcons=!1}_handleKeyDown(R){if(!R.target.classList.contains("tab-button"))return;const B=this.selectedTab;switch(R.key){case"ArrowRight":this.setSelectedTab((B+1)%this.nTabs);break;case"ArrowLeft":this.setSelectedTab((B-1+this.nTabs)%this.nTabs);break;case"Home":this.setSelectedTab(0);break;case"End":this.setSelectedTab(this.nTabs-1);break;default:return}R.preventDefault(),this._focusTab(this.selectedTab)}setSelectedTab(R){this.selectedTab=R,this.dispatchEvent(new CustomEvent("tab-change",{detail:{tab:R}}))}_focusTab(R){var A;const B=(A=this.shadowRoot)==null?void 0:A.querySelector(`button[data-index="${R}"]`);B?.focus()}_generateTabHeaders(){return[...Array(this.nTabs)].map((R,A)=>{const B=A!==this.nTabs-1&&this.selectedTab!==A&&A+1!==this.selectedTab,P=this.hasTabIcons?Ye`<span class="tab-icon">
            <slot name="tab-icon-${A}"></slot>
          </span>`:Zt;return Ye`
        <button
          class="tab-button ${B?"has-divider":""}"
          role="tab"
          aria-selected="${this.selectedTab===A}"
          aria-controls="panel-${A}"
          id="tab-${A}"
          data-index="${A}"
          tabindex="${this.selectedTab===A?0:-1}"
          @click="${()=>this.setSelectedTab(A)}"
          @focus="${()=>this.setSelectedTab(A)}"
        >
          <div class="tab-title-container">
            ${P}
            <slot class="tab-title" name="tab-title-${A}"
              >Tab ${A+1}</slot
            >
          </div>
        </button>
      `})}_generateTabPanels(){return this.hasDefaultSlotOnly?Ye`<div
        role="tabpanel"
        class="tab-content"
        id="panel-${this.selectedTab}"
        aria-labelledby="tab-${this.selectedTab}"
        tabindex="0"
      >
        <slot></slot>
      </div>`:[...Array(this.nTabs)].map((R,A)=>Ye`
        <div
          role="tabpanel"
          id="panel-${A}"
          aria-labelledby="tab-${A}"
          tabindex="0"
          ?hidden="${this.selectedTab!==A}"
        >
          <slot name="tab-content-${A}"></slot>
        </div>
      `)}render(){return Ye`
      <div class="tab-container" @keydown="${this._handleKeyDown}">
        <div class="tab-header" role="tablist" aria-label="Tab List">
          ${this._generateTabHeaders()}
        </div>
        <div class="tab-panels">${this._generateTabPanels()}</div>
      </div>
    `}};ud.styles=ga(Ry);jf([Ie({type:Number})],ud.prototype,"nTabs",2);jf([Ie({type:Number})],ud.prototype,"selectedTab",2);jf([Ie({type:Boolean})],ud.prototype,"hasDefaultSlotOnly",2);jf([Ie({type:Boolean})],ud.prototype,"hasTabIcons",2);ud=jf([Gt("obc-tabbed-card")],ud);var jy=Object.defineProperty,Vy=Object.getOwnPropertyDescriptor,H1=(R,A,B,P)=>{for(var D=P>1?void 0:P?Vy(A,B):A,X=R.length-1,M;X>=0;X--)(M=R[X])&&(D=(P?M(A,B,D):M(D))||D);return P&&D&&jy(A,B,D),D};let tg=class extends Bt{constructor(){super(...arguments),this.useCssColor=!1,this.icon=Ct`<svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
<path fill-rule="evenodd" clip-rule="evenodd" d="M12 20.5C16.6944 20.5 20.5 16.6944 20.5 12C20.5 7.30558 16.6944 3.5 12 3.5C7.30558 3.5 3.5 7.30558 3.5 12C3.5 16.6944 7.30558 20.5 12 20.5ZM12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22Z" fill="currentColor"/>
<path fill-rule="evenodd" clip-rule="evenodd" d="M12 13.5C12.8284 13.5 13.5 12.8284 13.5 12C13.5 11.1716 12.8284 10.5 12 10.5C11.1716 10.5 10.5 11.1716 10.5 12C10.5 12.8284 11.1716 13.5 12 13.5ZM12 15C13.6569 15 15 13.6569 15 12C15 10.3431 13.6569 9 12 9C10.3431 9 9 10.3431 9 12C9 13.6569 10.3431 15 12 15Z" fill="currentColor"/>
<path d="M11.25 5H12.75V7.5H11.25V5Z" fill="currentColor"/>
<path d="M19 11.25V12.75H16.5V11.25H19Z" fill="currentColor"/>
<path d="M7.58008 17.48L6.51942 16.4193L8.28719 14.6516L9.34785 15.7122L7.58008 17.48Z" fill="currentColor"/>
<path d="M6.51953 7.58008L7.58019 6.51942L9.34796 8.28719L8.2873 9.34785L6.51953 7.58008Z" fill="currentColor"/>
<path d="M11.25 16.5H12.75V19H11.25V16.5Z" fill="currentColor"/>
<path d="M7.5 11.25V12.75H5V11.25H7.5Z" fill="currentColor"/>
<path d="M15.7129 9.34839L14.6522 8.28773L16.42 6.51996L17.4807 7.58062L15.7129 9.34839Z" fill="currentColor"/>
<path d="M14.6523 15.7122L15.713 14.6515L17.4808 16.4193L16.4201 17.4799L14.6523 15.7122Z" fill="currentColor"/>
</svg>
`,this.iconCss=Ct`<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
<path fill-rule="evenodd" clip-rule="evenodd" d="M12 20.5C16.6944 20.5 20.5 16.6944 20.5 12C20.5 7.30558 16.6944 3.5 12 3.5C7.30558 3.5 3.5 7.30558 3.5 12C3.5 16.6944 7.30558 20.5 12 20.5ZM12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22Z" style="fill: var(--element-active-color)"/>
<path fill-rule="evenodd" clip-rule="evenodd" d="M12 13.5C12.8284 13.5 13.5 12.8284 13.5 12C13.5 11.1716 12.8284 10.5 12 10.5C11.1716 10.5 10.5 11.1716 10.5 12C10.5 12.8284 11.1716 13.5 12 13.5ZM12 15C13.6569 15 15 13.6569 15 12C15 10.3431 13.6569 9 12 9C10.3431 9 9 10.3431 9 12C9 13.6569 10.3431 15 12 15Z" style="fill: var(--element-active-color)"/>
<path d="M11.25 5H12.75V7.5H11.25V5Z" style="fill: var(--element-active-color)"/>
<path d="M19 11.25V12.75H16.5V11.25H19Z" style="fill: var(--element-active-color)"/>
<path d="M7.58008 17.48L6.51942 16.4193L8.28719 14.6516L9.34785 15.7122L7.58008 17.48Z" style="fill: var(--element-active-color)"/>
<path d="M6.51953 7.58008L7.58019 6.51942L9.34796 8.28719L8.2873 9.34785L6.51953 7.58008Z" style="fill: var(--element-active-color)"/>
<path d="M11.25 16.5H12.75V19H11.25V16.5Z" style="fill: var(--element-active-color)"/>
<path d="M7.5 11.25V12.75H5V11.25H7.5Z" style="fill: var(--element-active-color)"/>
<path d="M15.7129 9.34839L14.6522 8.28773L16.42 6.51996L17.4807 7.58062L15.7129 9.34839Z" style="fill: var(--element-active-color)"/>
<path d="M14.6523 15.7122L15.713 14.6515L17.4808 16.4193L16.4201 17.4799L14.6523 15.7122Z" style="fill: var(--element-active-color)"/>
</svg>
`}render(){return Ye`
      <div class="wrapper">${this.useCssColor?this.iconCss:this.icon}</div>
    `}};tg.styles=Ht`
    .wrapper {
      height: 100%;
      width: 100%;
      line-height: 0;
    }
    .wrapper > * {
      height: 100%;
      width: 100%;
    }
  `;H1([Ie({type:Boolean})],tg.prototype,"useCssColor",2);tg=H1([Gt("obi-display-brilliance-iec")],tg);var $y=Object.defineProperty,Fy=Object.getOwnPropertyDescriptor,yo=(R,A,B,P)=>{for(var D=P>1?void 0:P?Fy(A,B):A,X=R.length-1,M;X>=0;X--)(M=R[X])&&(D=(P?M(A,B,D):M(D))||D);return P&&D&&$y(A,B,D),D},mp=(R=>(R.night="night",R.dusk="dusk",R.day="day",R.bright="bright",R))(mp||{}),G1=(R=>(R.buttons="buttons",R.slider="slider",R))(G1||{});let sn=class extends Bt{constructor(){super(...arguments),this.palette="day",this.brightness=50,this.showLinkBrightness=!1,this.showLinkPalette=!1,this.hideBrightness=!1,this.hidePalette=!1,this.variant="normal",this.brightnessUnit="%",this.brightnessMax=100,this.brightnessMinorStep=5,this.brightnessMajorStep=25,this.brightnessInputVariant="buttons",this.showScreenControlLink=!1}onPaletteChanged(A){this.palette=A.detail.value,this.dispatchEvent(new CustomEvent("palette-changed",{detail:{value:A.detail.value}}))}handleBrightnessChanged(A){this.brightness=A.detail,this.dispatchEvent(new CustomEvent("brightness-changed",{detail:{value:A.detail}}))}increaseBrightness(A){this.brightness=Math.max(0,Math.min(this.brightness+A,this.brightnessMax)),this.dispatchEvent(new CustomEvent("brightness-changed",{detail:{value:this.brightness}}))}get canIncreaseBrightness(){return this.brightness<this.brightnessMax}get canDecreaseBrightness(){return this.brightness>0}onLinkPaletteChanged(A){this.dispatchEvent(new CustomEvent("link-palette-changed",{detail:{value:A.target.checked}}))}onLinkBrightnessChanged(A){this.dispatchEvent(new CustomEvent("link-brightness-changed",{detail:{value:A.target.checked}}))}get canIncreasePalette(){return this.palette!=="bright"}get canDecreasePalette(){return this.palette!=="night"}nextPalette(){this.canIncreasePalette&&(this.palette=Object.keys(mp)[Object.keys(mp).indexOf(this.palette)+1],this.dispatchEvent(new CustomEvent("palette-changed",{detail:{value:this.palette}})))}previousPalette(){this.canDecreasePalette&&(this.palette=Object.keys(mp)[Object.keys(mp).indexOf(this.palette)-1],this.dispatchEvent(new CustomEvent("palette-changed",{detail:{value:this.palette}})))}renderBrightness(){const A=this.variant==="tabbed"?Zt:Ye`<div class="title-container">
            <h3>${Qo("Brilliance")}</h3>
          </div>`,B=this.brightness.toString().length+.5*this.brightnessUnit.length;return Ye`${A}
      <div class="content-container brilliance">
        ${this.variant==="compact"?Ye` <obc-slider
              value=${this.brightness}
              @value=${this.handleBrightnessChanged}
              min="0"
              max=${this.brightnessMax}
              variant=${Em.Normal}
              haslefticon
              hasrighticon
            >
              <obi-display-brilliance-low
                slot="icon-left"
              ></obi-display-brilliance-low>
              <obi-display-brilliance-proposal
                slot="icon-right"
              ></obi-display-brilliance-proposal>
            </obc-slider>`:Ye`
              <div class="value-container">
                <div class="value-label-container">
                  <obi-display-brilliance-proposal
                    class="icon"
                  ></obi-display-brilliance-proposal>
                  <div class="label-container" style="width: ${B}ch">
                    <div class="value">${this.brightness.toFixed(0)}</div>
                    <div class="unit">${this.brightnessUnit}</div>
                  </div>
                </div>
                <div class="value-slider-container">
                  ${this.brightnessInputVariant==="buttons"?Ye`
                        <obc-slider
                          value=${this.brightness}
                          variant=${Em.NoInput}
                          min="0"
                          max=${this.brightnessMax}
                        ></obc-slider>
                      `:Ye`
                        <obc-slider
                          value=${this.brightness}
                          variant=${Em.Enhanced}
                          @value=${this.handleBrightnessChanged}
                          min="0"
                          max=${this.brightnessMax}
                        ></obc-slider>
                      `}
                </div>
              </div>
              ${this.brightnessInputVariant==="buttons"?Ye`
                    <div class="icon-button-container">
                      <obc-button
                        segmentPosition="start"
                        fullWidth
                        ?disabled=${!this.canDecreaseBrightness}
                        class=${this.canDecreaseBrightness?"":"disabled"}
                        @click=${()=>this.increaseBrightness(-this.brightnessMajorStep)}
                      >
                        <obi-chevron-double-left-google
                          class="btn-icon"
                        ></obi-chevron-double-left-google>
                      </obc-button>
                      <obc-button
                        segmentPosition="middle"
                        fullWidth
                        ?disabled=${!this.canDecreaseBrightness}
                        class=${this.canDecreaseBrightness?"":"disabled"}
                        @click=${()=>this.increaseBrightness(-this.brightnessMinorStep)}
                      >
                        <obi-chevron-left-google
                          class="btn-icon"
                        ></obi-chevron-left-google>
                      </obc-button>
                      <obc-button
                        segmentPosition="middle"
                        fullWidth
                        ?disabled=${!this.canIncreaseBrightness}
                        class=${this.canIncreaseBrightness?"":"disabled"}
                        @click=${()=>this.increaseBrightness(this.brightnessMinorStep)}
                      >
                        <obi-chevron-right-google
                          class="btn-icon"
                        ></obi-chevron-right-google>
                      </obc-button>
                      <obc-button
                        segmentPosition="end"
                        fullWidth
                        ?disabled=${!this.canIncreaseBrightness}
                        class=${this.canIncreaseBrightness?"":"disabled"}
                        @click=${()=>this.increaseBrightness(this.brightnessMajorStep)}
                      >
                        <obi-chevron-double-right-google
                          class="btn-icon"
                        ></obi-chevron-double-right-google>
                      </obc-button>
                    </div>
                  `:Zt}
            `}
        ${this.showLinkBrightness?Ye`<obc-toggle-switch
              .label="${Qo("Link")}"
              hasicon
              @input=${this.onLinkBrightnessChanged}
            >
              <obi-link slot="icon"></obi-link>
            </obc-toggle-switch>`:Zt}
      </div>`}get paletteIcon(){return this.palette==="night"?Ye`<obi-palette-night class="icon"></obi-palette-night>`:this.palette==="dusk"?Ye`<obi-palette-dusk class="icon"></obi-palette-dusk>`:this.palette==="day"?Ye`<obi-palette-day class="icon"></obi-palette-day>`:this.palette==="bright"?Ye`<obi-palette-day-bright
        class="icon"
      ></obi-palette-day-bright>`:Zt}renderPalette(){const A={night:Qo("Night"),dusk:Qo("Dusk"),day:Qo("Day"),bright:Qo("Bright")},B=A[this.palette],P=B.length,D=Object.keys(A).indexOf(this.palette),X=Math.min(D+1,3),M=Math.max(D-1,0),d=A[Object.keys(A)[X]],ye=A[Object.keys(A)[M]];return Ye`
      ${this.variant==="tabbed"?Zt:Ye`
            <div class="title-container">
              <h3>${Qo("Day")}/${Qo("Night")}</h3>
            </div>
          `}
      <div
        class="content-container palette ${this.showLinkPalette?"with-link":"without-link"}"
      >
        ${this.variant==="compact"?Ye` <obc-toggle-button-group
              value=${this.palette}
              @value=${this.onPaletteChanged}
              variant=${Mf.regular}
              type=${Nm.icon}
            >
              <obc-toggle-button-option value="night" type="icon">
                <obi-palette-night slot="icon"></obi-palette-night>
              </obc-toggle-button-option>
              <obc-toggle-button-option value="dusk" type="icon">
                <obi-palette-dusk slot="icon"></obi-palette-dusk>
              </obc-toggle-button-option>
              <obc-toggle-button-option value="day" type="icon">
                <obi-palette-day slot="icon"></obi-palette-day>
              </obc-toggle-button-option>
              <obc-toggle-button-option value="bright" type="icon">
                <obi-palette-day-bright slot="icon"></obi-palette-day-bright>
              </obc-toggle-button-option>
            </obc-toggle-button-group>`:Ye`
              <div class="value-container">
                <div class="value-label-container">
                  ${this.paletteIcon}
                  <div class="label-container" style="width: ${P}ch">
                    <div class="value">${B}</div>
                  </div>
                </div>
                <obc-progress-indicator-dots
                  .totalSteps=${4}
                  .currentStep=${D+1}
                ></obc-progress-indicator-dots>
              </div>
              <div class="icon-button-container">
                <obc-button
                  segmentPosition="start"
                  fullWidth
                  showLeadingIcon
                  ?disabled=${!this.canDecreasePalette}
                  class=${this.canDecreasePalette?"":"disabled"}
                  @click=${()=>this.previousPalette()}
                >
                  ${ye}
                  <obi-chevron-left-google
                    slot="leading-icon"
                  ></obi-chevron-left-google>
                </obc-button>

                <obc-button
                  segmentPosition="end"
                  fullWidth
                  showTrailingIcon
                  ?disabled=${!this.canIncreasePalette}
                  class=${this.canIncreasePalette?"":"disabled"}
                  @click=${()=>this.nextPalette()}
                >
                  ${d}
                  <obi-chevron-right-google
                    slot="trailing-icon"
                  ></obi-chevron-right-google>
                </obc-button>
              </div>
            `}
        ${this.showLinkPalette?Ye`<obc-toggle-switch
              .label="${Qo("Link")}"
              hasicon
              @input=${this.onLinkPaletteChanged}
            >
              <obi-link slot="icon"></obi-link>
            </obc-toggle-switch>`:Zt}
      </div>
    `}renderScreenControlLink(){return this.showScreenControlLink?Ye`
      <div class="footer">
        <obc-navigation-item
          .label="${Qo("Screen Control")}"
          @click=${()=>this.handleScreenControlLinkClicked()}
          hasicon
        >
          <obc-user-button slot="icon" static variant="icon" styleType="normal">
            <obi-screens slot="icon"></obi-screens>
          </obc-user-button>
        </obc-navigation-item>
      </div>
    `:Zt}render(){return this.variant==="tabbed"?Ye`<obc-tabbed-card class="card" nTabs=${2} hasTabIcons>
        <span slot="tab-title-0">${Qo("Brilliance")}</span>
        <obi-display-brilliance-iec
          slot="tab-icon-0"
        ></obi-display-brilliance-iec>
        <span slot="tab-title-1">${Qo("Day")}/${Qo("Night")}</span>
        <obi-palette-day-night-iec
          slot="tab-icon-1"
        ></obi-palette-day-night-iec>
        <div slot="tab-content-0">
          ${this.renderBrightness()} ${this.renderScreenControlLink()}
        </div>
        <div slot="tab-content-1">
          ${this.renderPalette()} ${this.renderScreenControlLink()}
        </div>
      </obc-tabbed-card>`:Ye`
        <div class="card ${this.variant}">
          ${this.hideBrightness?Zt:this.renderBrightness()}
          ${!this.hideBrightness&&!this.hidePalette?Ye`<div class="divider"></div>`:Zt}
          ${this.hidePalette?Zt:this.renderPalette()}
          ${this.renderScreenControlLink()}
        </div>
      `}handleScreenControlLinkClicked(){this.dispatchEvent(new CustomEvent("screen-control-link-clicked"))}};sn.styles=ga(Tv);yo([Ie({type:String})],sn.prototype,"palette",2);yo([Ie({type:Number})],sn.prototype,"brightness",2);yo([Ie({type:Boolean})],sn.prototype,"showLinkBrightness",2);yo([Ie({type:Boolean})],sn.prototype,"showLinkPalette",2);yo([Ie({type:Boolean})],sn.prototype,"hideBrightness",2);yo([Ie({type:Boolean})],sn.prototype,"hidePalette",2);yo([Ie({type:String})],sn.prototype,"variant",2);yo([Ie({type:String})],sn.prototype,"brightnessUnit",2);yo([Ie({type:Number})],sn.prototype,"brightnessMax",2);yo([Ie({type:Number})],sn.prototype,"brightnessMinorStep",2);yo([Ie({type:Number})],sn.prototype,"brightnessMajorStep",2);yo([Ie({type:String})],sn.prototype,"brightnessInputVariant",2);yo([Ie({type:Boolean})],sn.prototype,"showScreenControlLink",2);sn=yo([my(),Gt("obc-brilliance-menu")],sn);const Ny=Jo({react:Wo,tagName:"obc-brilliance-menu",elementClass:sn,events:{onPaletteChanged:"palette-changed",onBrightnessChanged:"brightness-changed",onLinkPaletteChanged:"link-palette-changed",onLinkBrightnessChanged:"link-brightness-changed",onScreenControlLinkClicked:"screen-control-link-clicked"}}),Uy=Jo({react:Wo,tagName:"obc-clock",elementClass:on,events:{}}),Zy=Jo({react:Wo,tagName:"obc-navigation-menu",elementClass:yp,events:{}}),Hy=Ht`
          * {
            -webkit-tap-highlight-color: transparent;
          }
.wrapper {
    width: 100%;
    user-select: none;
}
.wrapper {
            border-color: var(--flat-enabled-border-color);
            background-color: var(--flat-enabled-background-color);
            border-width: 1px;
            border-style: solid;
            cursor: pointer;
            --base-border-color: var(--flat-enabled-border-color);
            --base-background-color: var(--flat-enabled-background-color);
}
.wrapper:focus {
            outline: none;
}
.wrapper.activated {
            border-color: var(--flat-activated-border-color);
            background-color: var(--flat-activated-background-color);
            --base-border-color: var(--flat-activated-border-color);
            --base-background-color: var(--flat-activated-background-color);
}
@media (hover:hover) {
            .wrapper:hover {
                        border-color: color-mix(in srgb, var(--flat-hover-border-color) calc(var(--obc-can-hover) * 100%), var(--base-border-color));
                        background-color: color-mix(in srgb, var(--flat-hover-background-color) calc(var(--obc-can-hover) * 100%), var(--base-background-color));
            }
}
.wrapper:active {
            border-color: var(--flat-pressed-border-color);
            background-color: var(--flat-pressed-background-color);
}
.wrapper:focus-visible {
            outline-color: var(--border-focus-color);
            outline-width: var(--global-size-spacing-border-weight-focusframe);
            outline-style: solid;
            border-color: var(--container-global-color);
            z-index: 1;
}
.wrapper:disabled {
            border-color: var(--flat-disabled-border-color);
            background-color: var(--flat-disabled-background-color);
            cursor: not-allowed;
            color: var(--on-flat-disabled-color);
}
.wrapper.disabled {
            border-color: var(--flat-disabled-border-color);
            background-color: var(--flat-disabled-background-color);
            cursor: not-allowed;
            color: var(--on-flat-disabled-color);
}
.wrapper:focus-visible {
    outline-offset: -2px;
  }
.wrapper img {
        width: 100%;
        height: 100%;
    }`;var Gy=Object.defineProperty,qy=Object.getOwnPropertyDescriptor,Ug=(R,A,B,P)=>{for(var D=P>1?void 0:P?qy(A,B):A,X=R.length-1,M;X>=0;X--)(M=R[X])&&(D=(P?M(A,B,D):M(D))||D);return P&&D&&Gy(A,B,D),D};let xp=class extends Bt{constructor(){super(...arguments),this.imageSrc="",this.alt="logo"}render(){return Ye`
      <button class="wrapper">
        <img src=${this.imageSrc} alt=${this.alt} />
      </button>
    `}};xp.styles=ga(Hy);Ug([Ie({type:String})],xp.prototype,"imageSrc",2);Ug([Ie({type:String})],xp.prototype,"alt",2);xp=Ug([Gt("obc-vendor-button")],xp);const Xy=Jo({react:Wo,tagName:"obc-vendor-button",elementClass:xp,events:{}}),fp=Jo({react:Wo,tagName:"obc-navigation-item",elementClass:Cl,events:{onClick:"click"}}),Yy=Jo({react:Wo,tagName:"obi-applications",elementClass:kf,events:{}});var Qy=Object.defineProperty,Ky=Object.getOwnPropertyDescriptor,q1=(R,A,B,P)=>{for(var D=P>1?void 0:P?Ky(A,B):A,X=R.length-1,M;X>=0;X--)(M=R[X])&&(D=(P?M(A,B,D):M(D))||D);return P&&D&&Qy(A,B,D),D};let Df=class extends Bt{constructor(){super(...arguments),this.useCssColor=!1,this.icon=Ct`<svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
<path d="M4 19V17H6V10C6 8.61667 6.41667 7.3875 7.25 6.3125C8.08333 5.2375 9.16667 4.53333 10.5 4.2V3.5C10.5 3.08333 10.6458 2.72917 10.9375 2.4375C11.2292 2.14583 11.5833 2 12 2C12.4167 2 12.7708 2.14583 13.0625 2.4375C13.3542 2.72917 13.5 3.08333 13.5 3.5V4.2C14.8333 4.53333 15.9167 5.2375 16.75 6.3125C17.5833 7.3875 18 8.61667 18 10V17H20V19H4ZM12 22C11.45 22 10.9792 21.8042 10.5875 21.4125C10.1958 21.0208 10 20.55 10 20H14C14 20.55 13.8042 21.0208 13.4125 21.4125C13.0208 21.8042 12.55 22 12 22ZM8 17H16V10C16 8.9 15.6083 7.95833 14.825 7.175C14.0417 6.39167 13.1 6 12 6C10.9 6 9.95833 6.39167 9.175 7.175C8.39167 7.95833 8 8.9 8 10V17Z" fill="currentColor"/>
</svg>
`,this.iconCss=Ct`<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M4 19V17H6V10C6 8.61667 6.41667 7.3875 7.25 6.3125C8.08333 5.2375 9.16667 4.53333 10.5 4.2V3.5C10.5 3.08333 10.6458 2.72917 10.9375 2.4375C11.2292 2.14583 11.5833 2 12 2C12.4167 2 12.7708 2.14583 13.0625 2.4375C13.3542 2.72917 13.5 3.08333 13.5 3.5V4.2C14.8333 4.53333 15.9167 5.2375 16.75 6.3125C17.5833 7.3875 18 8.61667 18 10V17H20V19H4ZM12 22C11.45 22 10.9792 21.8042 10.5875 21.4125C10.1958 21.0208 10 20.55 10 20H14C14 20.55 13.8042 21.0208 13.4125 21.4125C13.0208 21.8042 12.55 22 12 22ZM8 17H16V10C16 8.9 15.6083 7.95833 14.825 7.175C14.0417 6.39167 13.1 6 12 6C10.9 6 9.95833 6.39167 9.175 7.175C8.39167 7.95833 8 8.9 8 10V17Z" style="fill: var(--element-active-color)"/>
</svg>
`}render(){return Ye`
      <div class="wrapper">${this.useCssColor?this.iconCss:this.icon}</div>
    `}};Df.styles=Ht`
    .wrapper {
      height: 100%;
      width: 100%;
      line-height: 0;
    }
    .wrapper > * {
      height: 100%;
      width: 100%;
    }
  `;q1([Ie({type:Boolean})],Df.prototype,"useCssColor",2);Df=q1([Gt("obi-alerts")],Df);const Wy=Jo({react:Wo,tagName:"obi-alerts",elementClass:Df,events:{}});var Jy=Object.defineProperty,eb=Object.getOwnPropertyDescriptor,X1=(R,A,B,P)=>{for(var D=P>1?void 0:P?eb(A,B):A,X=R.length-1,M;X>=0;X--)(M=R[X])&&(D=(P?M(A,B,D):M(D))||D);return P&&D&&Jy(A,B,D),D};let Lf=class extends Bt{constructor(){super(...arguments),this.useCssColor=!1,this.icon=Ct`<svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
<path d="M11.7 17C10.3167 17 9.13755 16.5125 8.16255 15.5375C7.18755 14.5625 6.70005 13.3833 6.70005 12C6.70005 10.6166 7.18755 9.43745 8.16255 8.46245C9.13755 7.48745 10.3167 6.99995 11.7 6.99995C12.0667 6.99995 12.425 7.03745 12.775 7.11245C13.125 7.18745 13.4667 7.29995 13.8 7.44995C12.9 7.86662 12.1875 8.48328 11.6625 9.29995C11.1375 10.1166 10.875 11.0166 10.875 12C10.875 12.9833 11.1375 13.8833 11.6625 14.7C12.1875 15.5166 12.9 16.1333 13.8 16.55C13.4667 16.7 13.125 16.8125 12.775 16.8875C12.425 16.9625 12.0667 17 11.7 17ZM12 23.3L15.35 20H20V15.35L23.3 12L20 8.64995V3.99995H15.35L12 0.699951L8.65005 3.99995H4.00005V8.64995L0.700048 12L4.00005 15.35V20H8.65005L12 23.3ZM12 20.5L9.50005 18H6.00005V14.5L3.50005 12L6.00005 9.49995V5.99995H9.50005L12 3.49995L14.5 5.99995H18V9.49995L20.5 12L18 14.5V18H14.5L12 20.5Z" fill="currentColor"/>
</svg>
`,this.iconCss=Ct`<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M11.7 17C10.3167 17 9.13755 16.5125 8.16255 15.5375C7.18755 14.5625 6.70005 13.3833 6.70005 12C6.70005 10.6166 7.18755 9.43745 8.16255 8.46245C9.13755 7.48745 10.3167 6.99995 11.7 6.99995C12.0667 6.99995 12.425 7.03745 12.775 7.11245C13.125 7.18745 13.4667 7.29995 13.8 7.44995C12.9 7.86662 12.1875 8.48328 11.6625 9.29995C11.1375 10.1166 10.875 11.0166 10.875 12C10.875 12.9833 11.1375 13.8833 11.6625 14.7C12.1875 15.5166 12.9 16.1333 13.8 16.55C13.4667 16.7 13.125 16.8125 12.775 16.8875C12.425 16.9625 12.0667 17 11.7 17ZM12 23.3L15.35 20H20V15.35L23.3 12L20 8.64995V3.99995H15.35L12 0.699951L8.65005 3.99995H4.00005V8.64995L0.700048 12L4.00005 15.35V20H8.65005L12 23.3ZM12 20.5L9.50005 18H6.00005V14.5L3.50005 12L6.00005 9.49995V5.99995H9.50005L12 3.49995L14.5 5.99995H18V9.49995L20.5 12L18 14.5V18H14.5L12 20.5Z" style="fill: var(--element-active-color)"/>
</svg>
`}render(){return Ye`
      <div class="wrapper">${this.useCssColor?this.iconCss:this.icon}</div>
    `}};Lf.styles=Ht`
    .wrapper {
      height: 100%;
      width: 100%;
      line-height: 0;
    }
    .wrapper > * {
      height: 100%;
      width: 100%;
    }
  `;X1([Ie({type:Boolean})],Lf.prototype,"useCssColor",2);Lf=X1([Gt("obi-palette-dimming")],Lf);const tb=Jo({react:Wo,tagName:"obi-palette-dimming",elementClass:Lf,events:{}});var ib=Object.defineProperty,rb=Object.getOwnPropertyDescriptor,Y1=(R,A,B,P)=>{for(var D=P>1?void 0:P?rb(A,B):A,X=R.length-1,M;X>=0;X--)(M=R[X])&&(D=(P?M(A,B,D):M(D))||D);return P&&D&&ib(A,B,D),D};let If=class extends Bt{constructor(){super(...arguments),this.useCssColor=!1,this.icon=Ct`<svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
<path d="M11 18H13V16H11V18Z" fill="currentColor"/>
<path d="M12 6C9.79 6 8 7.79 8 10H10C10 8.9 10.9 8 12 8C13.1 8 14 8.9 14 10C14 12 11 11.75 11 15H13C13 12.75 16 12.5 16 10C16 7.79 14.21 6 12 6Z" fill="currentColor"/>
<path fill-rule="evenodd" clip-rule="evenodd" d="M12 2C6.48 2 2 6.48 2 12C2 17.52 6.48 22 12 22C17.52 22 22 17.52 22 12C22 6.48 17.52 2 12 2ZM12 20C7.59 20 4 16.41 4 12C4 7.59 7.59 4 12 4C16.41 4 20 7.59 20 12C20 16.41 16.41 20 12 20Z" fill="currentColor"/>
</svg>
`,this.iconCss=Ct`<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M11 18H13V16H11V18Z" style="fill: var(--element-active-color)"/>
<path d="M12 6C9.79 6 8 7.79 8 10H10C10 8.9 10.9 8 12 8C13.1 8 14 8.9 14 10C14 12 11 11.75 11 15H13C13 12.75 16 12.5 16 10C16 7.79 14.21 6 12 6Z" style="fill: var(--element-active-color)"/>
<path fill-rule="evenodd" clip-rule="evenodd" d="M12 2C6.48 2 2 6.48 2 12C2 17.52 6.48 22 12 22C17.52 22 22 17.52 22 12C22 6.48 17.52 2 12 2ZM12 20C7.59 20 4 16.41 4 12C4 7.59 7.59 4 12 4C16.41 4 20 7.59 20 12C20 16.41 16.41 20 12 20Z" style="fill: var(--element-active-color)"/>
</svg>
`}render(){return Ye`
      <div class="wrapper">${this.useCssColor?this.iconCss:this.icon}</div>
    `}};If.styles=Ht`
    .wrapper {
      height: 100%;
      width: 100%;
      line-height: 0;
    }
    .wrapper > * {
      height: 100%;
      width: 100%;
    }
  `;Y1([Ie({type:Boolean})],If.prototype,"useCssColor",2);If=Y1([Gt("obi-support-google")],If);const ab=Jo({react:Wo,tagName:"obi-support-google",elementClass:If,events:{}});var nb=Object.defineProperty,ob=Object.getOwnPropertyDescriptor,Q1=(R,A,B,P)=>{for(var D=P>1?void 0:P?ob(A,B):A,X=R.length-1,M;X>=0;X--)(M=R[X])&&(D=(P?M(A,B,D):M(D))||D);return P&&D&&nb(A,B,D),D};let Rf=class extends Bt{constructor(){super(...arguments),this.useCssColor=!1,this.icon=Ct`<svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
<path d="M9.24995 22L8.84995 18.8C8.63328 18.7167 8.42912 18.6167 8.23745 18.5C8.04578 18.3833 7.85828 18.2583 7.67495 18.125L4.69995 19.375L1.94995 14.625L4.52495 12.675C4.50828 12.5583 4.49995 12.4458 4.49995 12.3375V11.6625C4.49995 11.5542 4.50828 11.4417 4.52495 11.325L1.94995 9.375L4.69995 4.625L7.67495 5.875C7.85828 5.74167 8.04995 5.61667 8.24995 5.5C8.44995 5.38333 8.64995 5.28333 8.84995 5.2L9.24995 2H14.75L15.15 5.2C15.3666 5.28333 15.5708 5.38333 15.7625 5.5C15.9541 5.61667 16.1416 5.74167 16.325 5.875L19.3 4.625L22.05 9.375L19.475 11.325C19.4916 11.4417 19.5 11.5542 19.5 11.6625V12.3375C19.5 12.4458 19.4833 12.5583 19.45 12.675L22.025 14.625L19.275 19.375L16.325 18.125C16.1416 18.2583 15.95 18.3833 15.75 18.5C15.55 18.6167 15.35 18.7167 15.15 18.8L14.75 22H9.24995ZM11 20H12.975L13.325 17.35C13.8416 17.2167 14.3208 17.0208 14.7625 16.7625C15.2041 16.5042 15.6083 16.1917 15.975 15.825L18.45 16.85L19.425 15.15L17.275 13.525C17.3583 13.2917 17.4166 13.0458 17.45 12.7875C17.4833 12.5292 17.5 12.2667 17.5 12C17.5 11.7333 17.4833 11.4708 17.45 11.2125C17.4166 10.9542 17.3583 10.7083 17.275 10.475L19.425 8.85L18.45 7.15L15.975 8.2C15.6083 7.81667 15.2041 7.49583 14.7625 7.2375C14.3208 6.97917 13.8416 6.78333 13.325 6.65L13 4H11.025L10.675 6.65C10.1583 6.78333 9.67912 6.97917 9.23745 7.2375C8.79578 7.49583 8.39162 7.80833 8.02495 8.175L5.54995 7.15L4.57495 8.85L6.72495 10.45C6.64162 10.7 6.58328 10.95 6.54995 11.2C6.51662 11.45 6.49995 11.7167 6.49995 12C6.49995 12.2667 6.51662 12.525 6.54995 12.775C6.58328 13.025 6.64162 13.275 6.72495 13.525L4.57495 15.15L5.54995 16.85L8.02495 15.8C8.39162 16.1833 8.79578 16.5042 9.23745 16.7625C9.67912 17.0208 10.1583 17.2167 10.675 17.35L11 20Z" fill="currentColor"/>
<path fill-rule="evenodd" clip-rule="evenodd" d="M12 13.5C12.8284 13.5 13.5 12.8284 13.5 12C13.5 11.1716 12.8284 10.5 12 10.5C11.1715 10.5 10.5 11.1716 10.5 12C10.5 12.8284 11.1715 13.5 12 13.5ZM12 15.5C13.9329 15.5 15.5 13.933 15.5 12C15.5 10.067 13.9329 8.5 12 8.5C10.067 8.5 8.49995 10.067 8.49995 12C8.49995 13.933 10.067 15.5 12 15.5Z" fill="currentColor"/>
</svg>
`,this.iconCss=Ct`<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M9.24995 22L8.84995 18.8C8.63328 18.7167 8.42912 18.6167 8.23745 18.5C8.04578 18.3833 7.85828 18.2583 7.67495 18.125L4.69995 19.375L1.94995 14.625L4.52495 12.675C4.50828 12.5583 4.49995 12.4458 4.49995 12.3375V11.6625C4.49995 11.5542 4.50828 11.4417 4.52495 11.325L1.94995 9.375L4.69995 4.625L7.67495 5.875C7.85828 5.74167 8.04995 5.61667 8.24995 5.5C8.44995 5.38333 8.64995 5.28333 8.84995 5.2L9.24995 2H14.75L15.15 5.2C15.3666 5.28333 15.5708 5.38333 15.7625 5.5C15.9541 5.61667 16.1416 5.74167 16.325 5.875L19.3 4.625L22.05 9.375L19.475 11.325C19.4916 11.4417 19.5 11.5542 19.5 11.6625V12.3375C19.5 12.4458 19.4833 12.5583 19.45 12.675L22.025 14.625L19.275 19.375L16.325 18.125C16.1416 18.2583 15.95 18.3833 15.75 18.5C15.55 18.6167 15.35 18.7167 15.15 18.8L14.75 22H9.24995ZM11 20H12.975L13.325 17.35C13.8416 17.2167 14.3208 17.0208 14.7625 16.7625C15.2041 16.5042 15.6083 16.1917 15.975 15.825L18.45 16.85L19.425 15.15L17.275 13.525C17.3583 13.2917 17.4166 13.0458 17.45 12.7875C17.4833 12.5292 17.5 12.2667 17.5 12C17.5 11.7333 17.4833 11.4708 17.45 11.2125C17.4166 10.9542 17.3583 10.7083 17.275 10.475L19.425 8.85L18.45 7.15L15.975 8.2C15.6083 7.81667 15.2041 7.49583 14.7625 7.2375C14.3208 6.97917 13.8416 6.78333 13.325 6.65L13 4H11.025L10.675 6.65C10.1583 6.78333 9.67912 6.97917 9.23745 7.2375C8.79578 7.49583 8.39162 7.80833 8.02495 8.175L5.54995 7.15L4.57495 8.85L6.72495 10.45C6.64162 10.7 6.58328 10.95 6.54995 11.2C6.51662 11.45 6.49995 11.7167 6.49995 12C6.49995 12.2667 6.51662 12.525 6.54995 12.775C6.58328 13.025 6.64162 13.275 6.72495 13.525L4.57495 15.15L5.54995 16.85L8.02495 15.8C8.39162 16.1833 8.79578 16.5042 9.23745 16.7625C9.67912 17.0208 10.1583 17.2167 10.675 17.35L11 20Z" style="fill: var(--element-active-color)"/>
<path fill-rule="evenodd" clip-rule="evenodd" d="M12 13.5C12.8284 13.5 13.5 12.8284 13.5 12C13.5 11.1716 12.8284 10.5 12 10.5C11.1715 10.5 10.5 11.1716 10.5 12C10.5 12.8284 11.1715 13.5 12 13.5ZM12 15.5C13.9329 15.5 15.5 13.933 15.5 12C15.5 10.067 13.9329 8.5 12 8.5C10.067 8.5 8.49995 10.067 8.49995 12C8.49995 13.933 10.067 15.5 12 15.5Z" style="fill: var(--element-active-color)"/>
</svg>
`}render(){return Ye`
      <div class="wrapper">${this.useCssColor?this.iconCss:this.icon}</div>
    `}};Rf.styles=Ht`
    .wrapper {
      height: 100%;
      width: 100%;
      line-height: 0;
    }
    .wrapper > * {
      height: 100%;
      width: 100%;
    }
  `;Q1([Ie({type:Boolean})],Rf.prototype,"useCssColor",2);Rf=Q1([Gt("obi-settings-iec")],Rf);const sb=Jo({react:Wo,tagName:"obi-settings-iec",elementClass:Rf,events:{}});function lb({logoSrc:R,...A}){const B=Fa.useMemo(()=>R||`/roc-prototype/has-logo-${document.documentElement.getAttribute("data-obc-theme")||"day"}.svg`,[R]);return Bi.jsxs(Zy,{...A,children:[Bi.jsx(fp,{slot:"main",hasIcon:!0,label:"Apps",href:"#",children:Bi.jsx(Yy,{slot:"icon"})}),Bi.jsx(fp,{slot:"main",hasIcon:!0,label:"Alerts",href:"#",children:Bi.jsx(Wy,{slot:"icon"})}),Bi.jsx(fp,{slot:"main",hasIcon:!0,label:"Dimming",href:"#",children:Bi.jsx(tb,{slot:"icon"})}),Bi.jsx(fp,{slot:"footer",hasIcon:!0,label:"Help",href:"#",children:Bi.jsx(ab,{slot:"icon"})}),Bi.jsx(fp,{slot:"footer",hasIcon:!0,label:"Settings",href:"#",children:Bi.jsx(sb,{slot:"icon"})}),Bi.jsx("a",{target:"_blank",href:"https://hoglund.no/",slot:"logo",children:Bi.jsx(Xy,{imageSrc:B,alt:"Hglund"})})]})}const cb=Ht`
          * {
            -webkit-tap-highlight-color: transparent;
          }
ol {
    display: block;
    list-style-type: none;
    margin: 0;
    padding: 0;
    width: fit-content;

    border-radius: 6px;
    background: var(--normal-enabled-background-color);
    box-shadow: var(--shadow-floating);
}`;var ub=Object.getOwnPropertyDescriptor,hb=(R,A,B,P)=>{for(var D=P>1?void 0:P?ub(A,B):A,X=R.length-1,M;X>=0;X--)(M=R[X])&&(D=M(D)||D);return D};let ig=class extends Bt{render(){return Ye` <ol>
      <slot></slot>
    </ol>`}};ig.styles=ga(cb);ig=hb([Gt("obc-context-menu")],ig);const db=Jo({react:Wo,tagName:"obc-context-menu",elementClass:ig,events:{}});var pb=Object.defineProperty,fb=Object.getOwnPropertyDescriptor,K1=(R,A,B,P)=>{for(var D=P>1?void 0:P?fb(A,B):A,X=R.length-1,M;X>=0;X--)(M=R[X])&&(D=(P?M(A,B,D):M(D))||D);return P&&D&&pb(A,B,D),D};let Bf=class extends Bt{constructor(){super(...arguments),this.useCssColor=!1,this.icon=Ct`<svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
<path d="M12 4C16.4183 4 20 7.58172 20 12C20 16.4183 16.4183 20 12 20C7.58172 20 4 16.4183 4 12C4 7.58172 7.58172 4 12 4Z" fill="currentColor"/>
</svg>
`,this.iconCss=Ct`<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M12 4C16.4183 4 20 7.58172 20 12C20 16.4183 16.4183 20 12 20C7.58172 20 4 16.4183 4 12C4 7.58172 7.58172 4 12 4Z" style="fill: var(--element-active-color)"/>
</svg>
`}render(){return Ye`
      <div class="wrapper">${this.useCssColor?this.iconCss:this.icon}</div>
    `}};Bf.styles=Ht`
    .wrapper {
      height: 100%;
      width: 100%;
      line-height: 0;
    }
    .wrapper > * {
      height: 100%;
      width: 100%;
    }
  `;K1([Ie({type:Boolean})],Bf.prototype,"useCssColor",2);Bf=K1([Gt("obi-own-ship-no-command-generic")],Bf);const mb=Jo({react:Wo,tagName:"obi-own-ship-no-command-generic",elementClass:Bf,events:{}});function gb({...R}){const A=["A3601","A3602","A3603","A3604","A3605"];return Bi.jsx(db,{...R,children:A.map(B=>{const P=B[B.length-1];return Bi.jsx("div",{className:"context-menu-item",children:Bi.jsx(fp,{label:B,hasIcon:!0,children:Bi.jsxs("div",{slot:"icon",className:"icon-stack",children:[Bi.jsx(mb,{className:"icon-base",useCssColor:!0}),Bi.jsx("span",{className:"icon-text",children:P})]})},B)},B)})})}var zm={exports:{}};/**
 * MapLibre GL JS
 * @license 3-Clause BSD. Full text of license: https://github.com/maplibre/maplibre-gl-js/blob/v5.10.0/LICENSE.txt
 */var _b=zm.exports,f1;function vb(){return f1||(f1=1,(function(R,A){(function(B,P){R.exports=P()})(_b,(function(){var B={},P={};function D(M,d,ye){if(P[M]=ye,M==="index"){var ke="var sharedModule = {}; ("+P.shared+")(sharedModule); ("+P.worker+")(sharedModule);",ot={};return P.shared(ot),P.index(B,ot),typeof window<"u"&&B.setWorkerUrl(window.URL.createObjectURL(new Blob([ke],{type:"text/javascript"}))),B}}D("shared",["exports"],(function(M){function d(a,t,r,s){return new(r||(r=Promise))((function(u,m){function _(T){try{b(s.next(T))}catch(E){m(E)}}function y(T){try{b(s.throw(T))}catch(E){m(E)}}function b(T){var E;T.done?u(T.value):(E=T.value,E instanceof r?E:new r((function(L){L(E)}))).then(_,y)}b((s=s.apply(a,t||[])).next())}))}function ye(a,t){this.x=a,this.y=t}function ke(a){return a&&a.__esModule&&Object.prototype.hasOwnProperty.call(a,"default")?a.default:a}var ot,Je;typeof SuppressedError=="function"&&SuppressedError,ye.prototype={clone(){return new ye(this.x,this.y)},add(a){return this.clone()._add(a)},sub(a){return this.clone()._sub(a)},multByPoint(a){return this.clone()._multByPoint(a)},divByPoint(a){return this.clone()._divByPoint(a)},mult(a){return this.clone()._mult(a)},div(a){return this.clone()._div(a)},rotate(a){return this.clone()._rotate(a)},rotateAround(a,t){return this.clone()._rotateAround(a,t)},matMult(a){return this.clone()._matMult(a)},unit(){return this.clone()._unit()},perp(){return this.clone()._perp()},round(){return this.clone()._round()},mag(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals(a){return this.x===a.x&&this.y===a.y},dist(a){return Math.sqrt(this.distSqr(a))},distSqr(a){const t=a.x-this.x,r=a.y-this.y;return t*t+r*r},angle(){return Math.atan2(this.y,this.x)},angleTo(a){return Math.atan2(this.y-a.y,this.x-a.x)},angleWith(a){return this.angleWithSep(a.x,a.y)},angleWithSep(a,t){return Math.atan2(this.x*t-this.y*a,this.x*a+this.y*t)},_matMult(a){const t=a[2]*this.x+a[3]*this.y;return this.x=a[0]*this.x+a[1]*this.y,this.y=t,this},_add(a){return this.x+=a.x,this.y+=a.y,this},_sub(a){return this.x-=a.x,this.y-=a.y,this},_mult(a){return this.x*=a,this.y*=a,this},_div(a){return this.x/=a,this.y/=a,this},_multByPoint(a){return this.x*=a.x,this.y*=a.y,this},_divByPoint(a){return this.x/=a.x,this.y/=a.y,this},_unit(){return this._div(this.mag()),this},_perp(){const a=this.y;return this.y=this.x,this.x=-a,this},_rotate(a){const t=Math.cos(a),r=Math.sin(a),s=r*this.x+t*this.y;return this.x=t*this.x-r*this.y,this.y=s,this},_rotateAround(a,t){const r=Math.cos(a),s=Math.sin(a),u=t.y+s*(this.x-t.x)+r*(this.y-t.y);return this.x=t.x+r*(this.x-t.x)-s*(this.y-t.y),this.y=u,this},_round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},constructor:ye},ye.convert=function(a){if(a instanceof ye)return a;if(Array.isArray(a))return new ye(+a[0],+a[1]);if(a.x!==void 0&&a.y!==void 0)return new ye(+a.x,+a.y);throw new Error("Expected [x, y] or {x, y} point format")};var xt=(function(){if(Je)return ot;function a(t,r,s,u){this.cx=3*t,this.bx=3*(s-t)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*r,this.by=3*(u-r)-this.cy,this.ay=1-this.cy-this.by,this.p1x=t,this.p1y=r,this.p2x=s,this.p2y=u}return Je=1,ot=a,a.prototype={sampleCurveX:function(t){return((this.ax*t+this.bx)*t+this.cx)*t},sampleCurveY:function(t){return((this.ay*t+this.by)*t+this.cy)*t},sampleCurveDerivativeX:function(t){return(3*this.ax*t+2*this.bx)*t+this.cx},solveCurveX:function(t,r){if(r===void 0&&(r=1e-6),t<0)return 0;if(t>1)return 1;for(var s=t,u=0;u<8;u++){var m=this.sampleCurveX(s)-t;if(Math.abs(m)<r)return s;var _=this.sampleCurveDerivativeX(s);if(Math.abs(_)<1e-6)break;s-=m/_}var y=0,b=1;for(s=t,u=0;u<20&&(m=this.sampleCurveX(s),!(Math.abs(m-t)<r));u++)t>m?y=s:b=s,s=.5*(b-y)+y;return s},solve:function(t,r){return this.sampleCurveY(this.solveCurveX(t,r))}},ot})(),Ot=ke(xt);let dt,Ce;function aa(){return dt==null&&(dt=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),dt}function dr(){if(Ce==null&&(Ce=!1,aa())){const t=new OffscreenCanvas(5,5).getContext("2d",{willReadFrequently:!0});if(t){for(let s=0;s<25;s++){const u=4*s;t.fillStyle=`rgb(${u},${u+1},${u+2})`,t.fillRect(s%5,Math.floor(s/5),1,1)}const r=t.getImageData(0,0,5,5).data;for(let s=0;s<100;s++)if(s%4!=3&&r[s]!==s){Ce=!0;break}}}return Ce||!1}var _i=1e-6,oi=typeof Float32Array<"u"?Float32Array:Array;function na(){var a=new oi(9);return oi!=Float32Array&&(a[1]=0,a[2]=0,a[3]=0,a[5]=0,a[6]=0,a[7]=0),a[0]=1,a[4]=1,a[8]=1,a}function _a(a){return a[0]=1,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=1,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=1,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a}function ki(){var a=new oi(3);return oi!=Float32Array&&(a[0]=0,a[1]=0,a[2]=0),a}function ii(a){var t=a[0],r=a[1],s=a[2];return Math.sqrt(t*t+r*r+s*s)}function Mr(a,t,r){var s=new oi(3);return s[0]=a,s[1]=t,s[2]=r,s}function va(a,t,r){return a[0]=t[0]+r[0],a[1]=t[1]+r[1],a[2]=t[2]+r[2],a}function ln(a,t,r){return a[0]=t[0]*r,a[1]=t[1]*r,a[2]=t[2]*r,a}function oa(a,t,r){var s=t[0],u=t[1],m=t[2],_=r[0],y=r[1],b=r[2];return a[0]=u*b-m*y,a[1]=m*_-s*b,a[2]=s*y-u*_,a}var Gi,Jn=ii;function Pa(a,t,r){var s=t[0],u=t[1],m=t[2],_=t[3];return a[0]=r[0]*s+r[4]*u+r[8]*m+r[12]*_,a[1]=r[1]*s+r[5]*u+r[9]*m+r[13]*_,a[2]=r[2]*s+r[6]*u+r[10]*m+r[14]*_,a[3]=r[3]*s+r[7]*u+r[11]*m+r[15]*_,a}function Ar(){var a=new oi(4);return oi!=Float32Array&&(a[0]=0,a[1]=0,a[2]=0),a[3]=1,a}function je(a,t,r,s){var u=arguments.length>4&&arguments[4]!==void 0?arguments[4]:"zyx",m=Math.PI/360;t*=m,s*=m,r*=m;var _=Math.sin(t),y=Math.cos(t),b=Math.sin(r),T=Math.cos(r),E=Math.sin(s),L=Math.cos(s);switch(u){case"xyz":a[0]=_*T*L+y*b*E,a[1]=y*b*L-_*T*E,a[2]=y*T*E+_*b*L,a[3]=y*T*L-_*b*E;break;case"xzy":a[0]=_*T*L-y*b*E,a[1]=y*b*L-_*T*E,a[2]=y*T*E+_*b*L,a[3]=y*T*L+_*b*E;break;case"yxz":a[0]=_*T*L+y*b*E,a[1]=y*b*L-_*T*E,a[2]=y*T*E-_*b*L,a[3]=y*T*L+_*b*E;break;case"yzx":a[0]=_*T*L+y*b*E,a[1]=y*b*L+_*T*E,a[2]=y*T*E-_*b*L,a[3]=y*T*L-_*b*E;break;case"zxy":a[0]=_*T*L-y*b*E,a[1]=y*b*L+_*T*E,a[2]=y*T*E+_*b*L,a[3]=y*T*L-_*b*E;break;case"zyx":a[0]=_*T*L-y*b*E,a[1]=y*b*L+_*T*E,a[2]=y*T*E-_*b*L,a[3]=y*T*L+_*b*E;break;default:throw new Error("Unknown angle order "+u)}return a}function nt(){var a=new oi(2);return oi!=Float32Array&&(a[0]=0,a[1]=0),a}function zt(a,t){var r=new oi(2);return r[0]=a,r[1]=t,r}ki(),Gi=new oi(4),oi!=Float32Array&&(Gi[0]=0,Gi[1]=0,Gi[2]=0,Gi[3]=0),ki(),Mr(1,0,0),Mr(0,1,0),Ar(),Ar(),na(),nt();const wt=8192;function vi(a,t,r){return t*(wt/(a.tileSize*Math.pow(2,r-a.tileID.overscaledZ)))}function me(a,t){return(a%t+t)%t}function Ue(a,t,r){return a*(1-r)+t*r}function at(a){if(a<=0)return 0;if(a>=1)return 1;const t=a*a,r=t*a;return 4*(a<.5?r:3*(a-t)+r-.75)}function ft(a,t,r,s){const u=new Ot(a,t,r,s);return m=>u.solve(m)}const Dt=ft(.25,.1,.25,1);function Et(a,t,r){return Math.min(r,Math.max(t,a))}function si(a,t,r){const s=r-t,u=((a-t)%s+s)%s+t;return u===t?r:u}function Oi(a,...t){for(const r of t)for(const s in r)a[s]=r[s];return a}let mi=1;function bo(a,t,r){const s={};for(const u in a)s[u]=t.call(this,a[u],u,a);return s}function es(a,t,r){const s={};for(const u in a)t.call(this,a[u],u,a)&&(s[u]=a[u]);return s}function ya(a){return Array.isArray(a)?a.map(ya):typeof a=="object"&&a?bo(a,ya):a}const ts={};function ji(a){ts[a]||(typeof console<"u"&&console.warn(a),ts[a]=!0)}function Di(a,t,r){return(r.y-a.y)*(t.x-a.x)>(t.y-a.y)*(r.x-a.x)}function An(a){return typeof WorkerGlobalScope<"u"&&a!==void 0&&a instanceof WorkerGlobalScope}let Vs=null;function xo(a){if(Vs==null){const t=a.navigator?a.navigator.userAgent:null;Vs=!!a.safari||!(!t||!(/\b(iPad|iPhone|iPod)\b/.test(t)||t.match("Safari")&&!t.match("Chrome")))}return Vs}function En(a){return typeof ImageBitmap<"u"&&a instanceof ImageBitmap}const is="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function zn(a,t,r,s,u){return d(this,void 0,void 0,(function*(){if(typeof VideoFrame>"u")throw new Error("VideoFrame not supported");const m=new VideoFrame(a,{timestamp:0});try{const _=m?.format;if(!_||!_.startsWith("BGR")&&!_.startsWith("RGB"))throw new Error(`Unrecognized format ${_}`);const y=_.startsWith("BGR"),b=new Uint8ClampedArray(s*u*4);if(yield m.copyTo(b,(function(T,E,L,V,$){const N=4*Math.max(-E,0),G=(Math.max(0,L)-L)*V*4+N,Q=4*V,ee=Math.max(0,E),_e=Math.max(0,L);return{rect:{x:ee,y:_e,width:Math.min(T.width,E+V)-ee,height:Math.min(T.height,L+$)-_e},layout:[{offset:G,stride:Q}]}})(a,t,r,s,u)),y)for(let T=0;T<b.length;T+=4){const E=b[T];b[T]=b[T+2],b[T+2]=E}return b}finally{m.close()}}))}let rs,eo;function Zr(a,t,r,s){return a.addEventListener(t,r,s),{unsubscribe:()=>{a.removeEventListener(t,r,s)}}}function Tl(a){return a*Math.PI/180}function Na(a){return a/Math.PI*180}const pc={touchstart:!0,touchmove:!0,touchmoveWindow:!0,touchend:!0,touchcancel:!0},wo={dblclick:!0,click:!0,mouseover:!0,mouseout:!0,mousedown:!0,mousemove:!0,mousemoveWindow:!0,mouseup:!0,mouseupWindow:!0,contextmenu:!0,wheel:!0},Co="AbortError";function pe(){return new Error(Co)}const U={MAX_PARALLEL_IMAGE_REQUESTS:16,MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:8,MAX_TILE_CACHE_ZOOM_LEVELS:5,REGISTERED_PROTOCOLS:{},WORKER_URL:""};function Z(a){return U.REGISTERED_PROTOCOLS[a.substring(0,a.indexOf("://"))]}const Y="global-dispatcher";class re extends Error{constructor(t,r,s,u){super(`AJAXError: ${r} (${t}): ${s}`),this.status=t,this.statusText=r,this.url=s,this.body=u}}const se=()=>An(self)?self.worker&&self.worker.referrer:(window.location.protocol==="blob:"?window.parent:window).location.href,de=function(a,t){if(/:\/\//.test(a.url)&&!/^https?:|^file:/.test(a.url)){const s=Z(a.url);if(s)return s(a,t);if(An(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:a,targetMapId:Y},t)}if(!(/^file:/.test(r=a.url)||/^file:/.test(se())&&!/^\w+:/.test(r))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return(function(s,u){return d(this,void 0,void 0,(function*(){const m=new Request(s.url,{method:s.method||"GET",body:s.body,credentials:s.credentials,headers:s.headers,cache:s.cache,referrer:se(),signal:u.signal});let _,y;s.type!=="json"||m.headers.has("Accept")||m.headers.set("Accept","application/json");try{_=yield fetch(m)}catch(T){throw new re(0,T.message,s.url,new Blob)}if(!_.ok){const T=yield _.blob();throw new re(_.status,_.statusText,s.url,T)}y=s.type==="arrayBuffer"||s.type==="image"?_.arrayBuffer():s.type==="json"?_.json():_.text();const b=yield y;if(u.signal.aborted)throw pe();return{data:b,cacheControl:_.headers.get("Cache-Control"),expires:_.headers.get("Expires")}}))})(a,t);if(An(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:a,mustQueue:!0,targetMapId:Y},t)}var r;return(function(s,u){return new Promise(((m,_)=>{var y;const b=new XMLHttpRequest;b.open(s.method||"GET",s.url,!0),s.type!=="arrayBuffer"&&s.type!=="image"||(b.responseType="arraybuffer");for(const T in s.headers)b.setRequestHeader(T,s.headers[T]);s.type==="json"&&(b.responseType="text",!((y=s.headers)===null||y===void 0)&&y.Accept||b.setRequestHeader("Accept","application/json")),b.withCredentials=s.credentials==="include",b.onerror=()=>{_(new Error(b.statusText))},b.onload=()=>{if(!u.signal.aborted)if((b.status>=200&&b.status<300||b.status===0)&&b.response!==null){let T=b.response;if(s.type==="json")try{T=JSON.parse(b.response)}catch(E){return void _(E)}m({data:T,cacheControl:b.getResponseHeader("Cache-Control"),expires:b.getResponseHeader("Expires")})}else{const T=new Blob([b.response],{type:b.getResponseHeader("Content-Type")});_(new re(b.status,b.statusText,s.url,T))}},u.signal.addEventListener("abort",(()=>{b.abort(),_(pe())})),b.send(s.body)}))})(a,t)};function Me(a){if(!a||a.indexOf("://")<=0||a.indexOf("data:image/")===0||a.indexOf("blob:")===0)return!0;const t=new URL(a),r=window.location;return t.protocol===r.protocol&&t.host===r.host}function ve(a,t,r){r[a]&&r[a].indexOf(t)!==-1||(r[a]=r[a]||[],r[a].push(t))}function De(a,t,r){if(r&&r[a]){const s=r[a].indexOf(t);s!==-1&&r[a].splice(s,1)}}class Ze{constructor(t,r={}){Oi(this,r),this.type=t}}class Oe extends Ze{constructor(t,r={}){super("error",Oi({error:t},r))}}class pt{on(t,r){return this._listeners=this._listeners||{},ve(t,r,this._listeners),{unsubscribe:()=>{this.off(t,r)}}}off(t,r){return De(t,r,this._listeners),De(t,r,this._oneTimeListeners),this}once(t,r){return r?(this._oneTimeListeners=this._oneTimeListeners||{},ve(t,r,this._oneTimeListeners),this):new Promise((s=>this.once(t,s)))}fire(t,r){typeof t=="string"&&(t=new Ze(t,r||{}));const s=t.type;if(this.listens(s)){t.target=this;const u=this._listeners&&this._listeners[s]?this._listeners[s].slice():[];for(const y of u)y.call(this,t);const m=this._oneTimeListeners&&this._oneTimeListeners[s]?this._oneTimeListeners[s].slice():[];for(const y of m)De(s,y,this._oneTimeListeners),y.call(this,t);const _=this._eventedParent;_&&(Oi(t,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),_.fire(t))}else t instanceof Oe&&console.error(t.error);return this}listens(t){return this._listeners&&this._listeners[t]&&this._listeners[t].length>0||this._oneTimeListeners&&this._oneTimeListeners[t]&&this._oneTimeListeners[t].length>0||this._eventedParent&&this._eventedParent.listens(t)}setEventedParent(t,r){return this._eventedParent=t,this._eventedParentData=r,this}}var be={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},centerAltitude:{type:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},roll:{type:"number",default:0,units:"degrees"},state:{type:"state",default:{}},light:{type:"light"},sky:{type:"sky"},projection:{type:"projection"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},"font-faces":{type:"array",value:"fontFaces"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},encoding:{type:"enum",values:{mvt:{},mlt:{}},default:"mvt"},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},"color-relief":{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_color-relief","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_color-relief":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},sky:{"sky-color":{type:"color","property-type":"data-constant",default:"#88C6FC",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-ground-blend":{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-fog-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"sky-horizon-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"atmosphere-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},projection:{type:{type:"projectionDefinition",default:"mercator","property-type":"data-constant",transition:!1,expression:{interpolated:!0,parameters:["zoom"]}}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_color-relief","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"numberArray",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-altitude":{type:"numberArray",default:45,minimum:0,maximum:90,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"colorArray",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"colorArray",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-method":{type:"enum",values:{standard:{},basic:{},combined:{},igor:{},multidirectional:{}},default:"standard",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},"paint_color-relief":{"color-relief-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"color-relief-color":{type:"color",transition:!1,expression:{interpolated:!0,parameters:["elevation"]},"property-type":"color-ramp"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};const qt=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function Mi(a,t){const r={};for(const s in a)s!=="ref"&&(r[s]=a[s]);return qt.forEach((s=>{s in t&&(r[s]=t[s])})),r}function gt(a,t){if(Array.isArray(a)){if(!Array.isArray(t)||a.length!==t.length)return!1;for(let r=0;r<a.length;r++)if(!gt(a[r],t[r]))return!1;return!0}if(typeof a=="object"&&a!==null&&t!==null){if(typeof t!="object"||Object.keys(a).length!==Object.keys(t).length)return!1;for(const r in a)if(!gt(a[r],t[r]))return!1;return!0}return a===t}function Yt(a,t){a.push(t)}function ci(a,t,r){Yt(r,{command:"addSource",args:[a,t[a]]})}function or(a,t,r){Yt(t,{command:"removeSource",args:[a]}),r[a]=!0}function Rr(a,t,r,s){or(a,r,s),ci(a,t,r)}function Hr(a,t,r){let s;for(s in a[r])if(Object.prototype.hasOwnProperty.call(a[r],s)&&s!=="data"&&!gt(a[r][s],t[r][s]))return!1;for(s in t[r])if(Object.prototype.hasOwnProperty.call(t[r],s)&&s!=="data"&&!gt(a[r][s],t[r][s]))return!1;return!0}function sr(a,t,r,s,u,m){a=a||{},t=t||{};for(const _ in a)Object.prototype.hasOwnProperty.call(a,_)&&(gt(a[_],t[_])||r.push({command:m,args:[s,_,t[_],u]}));for(const _ in t)Object.prototype.hasOwnProperty.call(t,_)&&!Object.prototype.hasOwnProperty.call(a,_)&&(gt(a[_],t[_])||r.push({command:m,args:[s,_,t[_],u]}))}function qi(a){return a.id}function lr(a,t){return a[t.id]=t,a}class Fe{constructor(t,r,s,u){this.message=(t?`${t}: `:"")+s,u&&(this.identifier=u),r!=null&&r.__line__&&(this.line=r.__line__)}}function er(a,...t){for(const r of t)for(const s in r)a[s]=r[s];return a}class sa extends Error{constructor(t,r){super(r),this.message=r,this.key=t}}class ka{constructor(t,r=[]){this.parent=t,this.bindings={};for(const[s,u]of r)this.bindings[s]=u}concat(t){return new ka(this,t)}get(t){if(this.bindings[t])return this.bindings[t];if(this.parent)return this.parent.get(t);throw new Error(`${t} not found in scope.`)}has(t){return!!this.bindings[t]||!!this.parent&&this.parent.has(t)}}const yi={kind:"null"},Xe={kind:"number"},Lt={kind:"string"},Ft={kind:"boolean"},cn={kind:"color"},fc={kind:"projectionDefinition"},to={kind:"object"},Mt={kind:"value"},So={kind:"collator"},Pn={kind:"formatted"},kn={kind:"padding"},To={kind:"colorArray"},un={kind:"numberArray"},pr={kind:"resolvedImage"},io={kind:"variableAnchorOffsetCollection"};function la(a,t){return{kind:"array",itemType:a,N:t}}function jt(a){if(a.kind==="array"){const t=jt(a.itemType);return typeof a.N=="number"?`array<${t}, ${a.N}>`:a.itemType.kind==="value"?"array":`array<${t}>`}return a.kind}const Ml=[yi,Xe,Lt,Ft,cn,fc,Pn,to,la(Mt),kn,un,To,pr,io];function Al(a,t){if(t.kind==="error")return null;if(a.kind==="array"){if(t.kind==="array"&&(t.N===0&&t.itemType.kind==="value"||!Al(a.itemType,t.itemType))&&(typeof a.N!="number"||a.N===t.N))return null}else{if(a.kind===t.kind)return null;if(a.kind==="value"){for(const r of Ml)if(!Al(r,t))return null}}return`Expected ${jt(a)} but found ${jt(t)} instead.`}function as(a,t){return t.some((r=>r.kind===a.kind))}function Mo(a,t){return t.some((r=>r==="null"?a===null:r==="array"?Array.isArray(a):r==="object"?a&&!Array.isArray(a)&&typeof a=="object":r===typeof a))}function ns(a,t){return a.kind==="array"&&t.kind==="array"?a.itemType.kind===t.itemType.kind&&typeof a.N=="number":a.kind===t.kind}const mc=.96422,El=.82521,ro=4/29,Gr=6/29,sh=3*Gr*Gr,wp=Gr*Gr*Gr,lh=Math.PI/180,pd=180/Math.PI;function gc(a){return(a%=360)<0&&(a+=360),a}function fd([a,t,r,s]){let u,m;const _=zl((.2225045*(a=Da(a))+.7168786*(t=Da(t))+.0606169*(r=Da(r)))/1);a===t&&t===r?u=m=_:(u=zl((.4360747*a+.3850649*t+.1430804*r)/mc),m=zl((.0139322*a+.0971045*t+.7141733*r)/El));const y=116*_-16;return[y<0?0:y,500*(u-_),200*(_-m),s]}function Da(a){return a<=.04045?a/12.92:Math.pow((a+.055)/1.055,2.4)}function zl(a){return a>wp?Math.pow(a,1/3):a/sh+ro}function $s([a,t,r,s]){let u=(a+16)/116,m=isNaN(t)?u:u+t/500,_=isNaN(r)?u:u-r/200;return u=1*os(u),m=mc*os(m),_=El*os(_),[_c(3.1338561*m-1.6168667*u-.4906146*_),_c(-.9787684*m+1.9161415*u+.033454*_),_c(.0719453*m-.2289914*u+1.4052427*_),s]}function _c(a){return(a=a<=.00304?12.92*a:1.055*Math.pow(a,1/2.4)-.055)<0?0:a>1?1:a}function os(a){return a>Gr?a*a*a:sh*(a-ro)}const Pl=Object.hasOwn||function(a,t){return Object.prototype.hasOwnProperty.call(a,t)};function kl(a,t){return Pl(a,t)?a[t]:void 0}function Ao(a){return parseInt(a.padEnd(2,a),16)/255}function md(a,t){return ss(t?a/100:a,0,1)}function ss(a,t,r){return Math.min(Math.max(t,a),r)}function lu(a){return!a.some(Number.isNaN)}const hn={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};function Xt(a,t,r){return a+r*(t-a)}function Dn(a,t,r){return a.map(((s,u)=>Xt(s,t[u],r)))}class It{constructor(t,r,s,u=1,m=!0){this.r=t,this.g=r,this.b=s,this.a=u,m||(this.r*=u,this.g*=u,this.b*=u,u||this.overwriteGetter("rgb",[t,r,s,u]))}static parse(t){if(t instanceof It)return t;if(typeof t!="string")return;const r=(function(s){if((s=s.toLowerCase().trim())==="transparent")return[0,0,0,0];const u=kl(hn,s);if(u){const[_,y,b]=u;return[_/255,y/255,b/255,1]}if(s.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(s)){const _=s.length<6?1:2;let y=1;return[Ao(s.slice(y,y+=_)),Ao(s.slice(y,y+=_)),Ao(s.slice(y,y+=_)),Ao(s.slice(y,y+_)||"ff")]}if(s.startsWith("rgb")){const _=s.match(/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(_){const[y,b,T,E,L,V,$,N,G,Q,ee,_e]=_,ne=[E||" ",$||" ",Q].join("");if(ne==="  "||ne==="  /"||ne===",,"||ne===",,,"){const ce=[T,V,G].join(""),Te=ce==="%%%"?100:ce===""?255:0;if(Te){const Le=[ss(+b/Te,0,1),ss(+L/Te,0,1),ss(+N/Te,0,1),ee?md(+ee,_e):1];if(lu(Le))return Le}}return}}const m=s.match(/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(m){const[_,y,b,T,E,L,V,$,N]=m,G=[b||" ",E||" ",V].join("");if(G==="  "||G==="  /"||G===",,"||G===",,,"){const Q=[+y,ss(+T,0,100),ss(+L,0,100),$?md(+$,N):1];if(lu(Q))return(function([ee,_e,ne,ce]){function Te(Le){const Ge=(Le+ee/30)%12,rt=_e*Math.min(ne,1-ne);return ne-rt*Math.max(-1,Math.min(Ge-3,9-Ge,1))}return ee=gc(ee),_e/=100,ne/=100,[Te(0),Te(8),Te(4),ce]})(Q)}}})(t);return r?new It(...r,!1):void 0}get rgb(){const{r:t,g:r,b:s,a:u}=this,m=u||1/0;return this.overwriteGetter("rgb",[t/m,r/m,s/m,u])}get hcl(){return this.overwriteGetter("hcl",(function(t){const[r,s,u,m]=fd(t),_=Math.sqrt(s*s+u*u);return[Math.round(1e4*_)?gc(Math.atan2(u,s)*pd):NaN,_,r,m]})(this.rgb))}get lab(){return this.overwriteGetter("lab",fd(this.rgb))}overwriteGetter(t,r){return Object.defineProperty(this,t,{value:r}),r}toString(){const[t,r,s,u]=this.rgb;return`rgba(${[t,r,s].map((m=>Math.round(255*m))).join(",")},${u})`}static interpolate(t,r,s,u="rgb"){switch(u){case"rgb":{const[m,_,y,b]=Dn(t.rgb,r.rgb,s);return new It(m,_,y,b,!1)}case"hcl":{const[m,_,y,b]=t.hcl,[T,E,L,V]=r.hcl;let $,N;if(isNaN(m)||isNaN(T))isNaN(m)?isNaN(T)?$=NaN:($=T,y!==1&&y!==0||(N=E)):($=m,L!==1&&L!==0||(N=_));else{let ne=T-m;T>m&&ne>180?ne-=360:T<m&&m-T>180&&(ne+=360),$=m+s*ne}const[G,Q,ee,_e]=(function([ne,ce,Te,Le]){return ne=isNaN(ne)?0:ne*lh,$s([Te,Math.cos(ne)*ce,Math.sin(ne)*ce,Le])})([$,N??Xt(_,E,s),Xt(y,L,s),Xt(b,V,s)]);return new It(G,Q,ee,_e,!1)}case"lab":{const[m,_,y,b]=$s(Dn(t.lab,r.lab,s));return new It(m,_,y,b,!1)}}}}It.black=new It(0,0,0,1),It.white=new It(1,1,1,1),It.transparent=new It(0,0,0,0),It.red=new It(1,0,0,1);class dn{constructor(t,r,s){this.sensitivity=t?r?"variant":"case":r?"accent":"base",this.locale=s,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(t,r){return this.collator.compare(t,r)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}const cu=["bottom","center","top"];class Fs{constructor(t,r,s,u,m,_){this.text=t,this.image=r,this.scale=s,this.fontStack=u,this.textColor=m,this.verticalAlign=_}}class fr{constructor(t){this.sections=t}static fromString(t){return new fr([new Fs(t,null,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some((t=>t.text.length!==0||t.image&&t.image.name.length!==0))}static factory(t){return t instanceof fr?t:fr.fromString(t)}toString(){return this.sections.length===0?"":this.sections.map((t=>t.text)).join("")}}class cr{constructor(t){this.values=t.slice()}static parse(t){if(t instanceof cr)return t;if(typeof t=="number")return new cr([t,t,t,t]);if(Array.isArray(t)&&!(t.length<1||t.length>4)){for(const r of t)if(typeof r!="number")return;switch(t.length){case 1:t=[t[0],t[0],t[0],t[0]];break;case 2:t=[t[0],t[1],t[0],t[1]];break;case 3:t=[t[0],t[1],t[2],t[1]]}return new cr(t)}}toString(){return JSON.stringify(this.values)}static interpolate(t,r,s){return new cr(Dn(t.values,r.values,s))}}class Kr{constructor(t){this.values=t.slice()}static parse(t){if(t instanceof Kr)return t;if(typeof t=="number")return new Kr([t]);if(Array.isArray(t)){for(const r of t)if(typeof r!="number")return;return new Kr(t)}}toString(){return JSON.stringify(this.values)}static interpolate(t,r,s){return new Kr(Dn(t.values,r.values,s))}}class yr{constructor(t){this.values=t.slice()}static parse(t){if(t instanceof yr)return t;if(typeof t=="string"){const s=It.parse(t);return s?new yr([s]):void 0}if(!Array.isArray(t))return;const r=[];for(const s of t){if(typeof s!="string")return;const u=It.parse(s);if(!u)return;r.push(u)}return new yr(r)}toString(){return JSON.stringify(this.values)}static interpolate(t,r,s,u="rgb"){const m=[];if(t.values.length!=r.values.length)throw new Error(`colorArray: Arrays have mismatched length (${t.values.length} vs. ${r.values.length}), cannot interpolate.`);for(let _=0;_<t.values.length;_++)m.push(It.interpolate(t.values[_],r.values[_],s,u));return new yr(m)}}class Vi extends Error{constructor(t){super(t),this.name="RuntimeError"}toJSON(){return this.message}}const vc=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class Qi{constructor(t){this.values=t.slice()}static parse(t){if(t instanceof Qi)return t;if(Array.isArray(t)&&!(t.length<1)&&t.length%2==0){for(let r=0;r<t.length;r+=2){const s=t[r],u=t[r+1];if(typeof s!="string"||!vc.has(s)||!Array.isArray(u)||u.length!==2||typeof u[0]!="number"||typeof u[1]!="number")return}return new Qi(t)}}toString(){return JSON.stringify(this.values)}static interpolate(t,r,s){const u=t.values,m=r.values;if(u.length!==m.length)throw new Vi(`Cannot interpolate values of different length. from: ${t.toString()}, to: ${r.toString()}`);const _=[];for(let y=0;y<u.length;y+=2){if(u[y]!==m[y])throw new Vi(`Cannot interpolate values containing mismatched anchors. from[${y}]: ${u[y]}, to[${y}]: ${m[y]}`);_.push(u[y]);const[b,T]=u[y+1],[E,L]=m[y+1];_.push([Xt(b,E,s),Xt(T,L,s)])}return new Qi(_)}}class Br{constructor(t){this.name=t.name,this.available=t.available}toString(){return this.name}static fromString(t){return t?new Br({name:t,available:!1}):null}}class qr{constructor(t,r,s){this.from=t,this.to=r,this.transition=s}static interpolate(t,r,s){return new qr(t,r,s)}static parse(t){return t instanceof qr?t:Array.isArray(t)&&t.length===3&&typeof t[0]=="string"&&typeof t[1]=="string"&&typeof t[2]=="number"?new qr(t[0],t[1],t[2]):typeof t=="object"&&typeof t.from=="string"&&typeof t.to=="string"&&typeof t.transition=="number"?new qr(t.from,t.to,t.transition):typeof t=="string"?new qr(t,t,1):void 0}}function ao(a,t,r,s){return typeof a=="number"&&a>=0&&a<=255&&typeof t=="number"&&t>=0&&t<=255&&typeof r=="number"&&r>=0&&r<=255?s===void 0||typeof s=="number"&&s>=0&&s<=1?null:`Invalid rgba value [${[a,t,r,s].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof s=="number"?[a,t,r,s]:[a,t,r]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function ls(a){if(a===null||typeof a=="string"||typeof a=="boolean"||typeof a=="number"||a instanceof qr||a instanceof It||a instanceof dn||a instanceof fr||a instanceof cr||a instanceof Kr||a instanceof yr||a instanceof Qi||a instanceof Br)return!0;if(Array.isArray(a)){for(const t of a)if(!ls(t))return!1;return!0}if(typeof a=="object"){for(const t in a)if(!ls(a[t]))return!1;return!0}return!1}function $i(a){if(a===null)return yi;if(typeof a=="string")return Lt;if(typeof a=="boolean")return Ft;if(typeof a=="number")return Xe;if(a instanceof It)return cn;if(a instanceof qr)return fc;if(a instanceof dn)return So;if(a instanceof fr)return Pn;if(a instanceof cr)return kn;if(a instanceof Kr)return un;if(a instanceof yr)return To;if(a instanceof Qi)return io;if(a instanceof Br)return pr;if(Array.isArray(a)){const t=a.length;let r;for(const s of a){const u=$i(s);if(r){if(r===u)continue;r=Mt;break}r=u}return la(r||Mt,t)}return to}function Ci(a){const t=typeof a;return a===null?"":t==="string"||t==="number"||t==="boolean"?String(a):a instanceof It||a instanceof qr||a instanceof fr||a instanceof cr||a instanceof Kr||a instanceof yr||a instanceof Qi||a instanceof Br?a.toString():JSON.stringify(a)}class pn{constructor(t,r){this.type=t,this.value=r}static parse(t,r){if(t.length!==2)return r.error(`'literal' expression requires exactly one argument, but found ${t.length-1} instead.`);if(!ls(t[1]))return r.error("invalid value");const s=t[1];let u=$i(s);const m=r.expectedType;return u.kind!=="array"||u.N!==0||!m||m.kind!=="array"||typeof m.N=="number"&&m.N!==0||(u=m),new pn(u,s)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}const Kt={string:Lt,number:Xe,boolean:Ft,object:to};class St{constructor(t,r){this.type=t,this.args=r}static parse(t,r){if(t.length<2)return r.error("Expected at least one argument.");let s,u=1;const m=t[0];if(m==="array"){let y,b;if(t.length>2){const T=t[1];if(typeof T!="string"||!(T in Kt)||T==="object")return r.error('The item type argument of "array" must be one of string, number, boolean',1);y=Kt[T],u++}else y=Mt;if(t.length>3){if(t[2]!==null&&(typeof t[2]!="number"||t[2]<0||t[2]!==Math.floor(t[2])))return r.error('The length argument to "array" must be a positive integer literal',2);b=t[2],u++}s=la(y,b)}else{if(!Kt[m])throw new Error(`Types doesn't contain name = ${m}`);s=Kt[m]}const _=[];for(;u<t.length;u++){const y=r.parse(t[u],u,Mt);if(!y)return null;_.push(y)}return new St(s,_)}evaluate(t){for(let r=0;r<this.args.length;r++){const s=this.args[r].evaluate(t);if(!Al(this.type,$i(s)))return s;if(r===this.args.length-1)throw new Vi(`Expected value to be of type ${jt(this.type)}, but found ${jt($i(s))} instead.`)}throw new Error}eachChild(t){this.args.forEach(t)}outputDefined(){return this.args.every((t=>t.outputDefined()))}}const Wr={"to-boolean":Ft,"to-color":cn,"to-number":Xe,"to-string":Lt};class Vt{constructor(t,r){this.type=t,this.args=r}static parse(t,r){if(t.length<2)return r.error("Expected at least one argument.");const s=t[0];if(!Wr[s])throw new Error(`Can't parse ${s} as it is not part of the known types`);if((s==="to-boolean"||s==="to-string")&&t.length!==2)return r.error("Expected one argument.");const u=Wr[s],m=[];for(let _=1;_<t.length;_++){const y=r.parse(t[_],_,Mt);if(!y)return null;m.push(y)}return new Vt(u,m)}evaluate(t){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(t);case"color":{let r,s;for(const u of this.args){if(r=u.evaluate(t),s=null,r instanceof It)return r;if(typeof r=="string"){const m=t.parseColor(r);if(m)return m}else if(Array.isArray(r)&&(s=r.length<3||r.length>4?`Invalid rgba value ${JSON.stringify(r)}: expected an array containing either three or four numeric values.`:ao(r[0],r[1],r[2],r[3]),!s))return new It(r[0]/255,r[1]/255,r[2]/255,r[3])}throw new Vi(s||`Could not parse color from value '${typeof r=="string"?r:JSON.stringify(r)}'`)}case"padding":{let r;for(const s of this.args){r=s.evaluate(t);const u=cr.parse(r);if(u)return u}throw new Vi(`Could not parse padding from value '${typeof r=="string"?r:JSON.stringify(r)}'`)}case"numberArray":{let r;for(const s of this.args){r=s.evaluate(t);const u=Kr.parse(r);if(u)return u}throw new Vi(`Could not parse numberArray from value '${typeof r=="string"?r:JSON.stringify(r)}'`)}case"colorArray":{let r;for(const s of this.args){r=s.evaluate(t);const u=yr.parse(r);if(u)return u}throw new Vi(`Could not parse colorArray from value '${typeof r=="string"?r:JSON.stringify(r)}'`)}case"variableAnchorOffsetCollection":{let r;for(const s of this.args){r=s.evaluate(t);const u=Qi.parse(r);if(u)return u}throw new Vi(`Could not parse variableAnchorOffsetCollection from value '${typeof r=="string"?r:JSON.stringify(r)}'`)}case"number":{let r=null;for(const s of this.args){if(r=s.evaluate(t),r===null)return 0;const u=Number(r);if(!isNaN(u))return u}throw new Vi(`Could not convert ${JSON.stringify(r)} to number.`)}case"formatted":return fr.fromString(Ci(this.args[0].evaluate(t)));case"resolvedImage":return Br.fromString(Ci(this.args[0].evaluate(t)));case"projectionDefinition":return this.args[0].evaluate(t);default:return Ci(this.args[0].evaluate(t))}}eachChild(t){this.args.forEach(t)}outputDefined(){return this.args.every((t=>t.outputDefined()))}}const Dl=["Unknown","Point","LineString","Polygon"];class La{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache=new Map,this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?Dl[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(t){let r=this._parseColorCache.get(t);return r||(r=It.parse(t),this._parseColorCache.set(t,r)),r}}class Ll{constructor(t,r,s=[],u,m=new ka,_=[]){this.registry=t,this.path=s,this.key=s.map((y=>`[${y}]`)).join(""),this.scope=m,this.errors=_,this.expectedType=u,this._isConstant=r}parse(t,r,s,u,m={}){return r?this.concat(r,s,u)._parse(t,m):this._parse(t,m)}_parse(t,r){function s(u,m,_){return _==="assert"?new St(m,[u]):_==="coerce"?new Vt(m,[u]):u}if(t!==null&&typeof t!="string"&&typeof t!="boolean"&&typeof t!="number"||(t=["literal",t]),Array.isArray(t)){if(t.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const u=t[0];if(typeof u!="string")return this.error(`Expression name must be a string, but found ${typeof u} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const m=this.registry[u];if(m){let _=m.parse(t,this);if(!_)return null;if(this.expectedType){const y=this.expectedType,b=_.type;if(y.kind!=="string"&&y.kind!=="number"&&y.kind!=="boolean"&&y.kind!=="object"&&y.kind!=="array"||b.kind!=="value"){if(y.kind==="projectionDefinition"&&["string","array"].includes(b.kind)||["color","formatted","resolvedImage"].includes(y.kind)&&["value","string"].includes(b.kind)||["padding","numberArray"].includes(y.kind)&&["value","number","array"].includes(b.kind)||y.kind==="colorArray"&&["value","string","array"].includes(b.kind)||y.kind==="variableAnchorOffsetCollection"&&["value","array"].includes(b.kind))_=s(_,y,r.typeAnnotation||"coerce");else if(this.checkSubtype(y,b))return null}else _=s(_,y,r.typeAnnotation||"assert")}if(!(_ instanceof pn)&&_.type.kind!=="resolvedImage"&&this._isConstant(_)){const y=new La;try{_=new pn(_.type,_.evaluate(y))}catch(b){return this.error(b.message),null}}return _}return this.error(`Unknown expression "${u}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(t===void 0?"'undefined' value invalid. Use null instead.":typeof t=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof t} instead.`)}concat(t,r,s){const u=typeof t=="number"?this.path.concat(t):this.path,m=s?this.scope.concat(s):this.scope;return new Ll(this.registry,this._isConstant,u,r||null,m,this.errors)}error(t,...r){const s=`${this.key}${r.map((u=>`[${u}]`)).join("")}`;this.errors.push(new sa(s,t))}checkSubtype(t,r){const s=Al(t,r);return s&&this.error(s),s}}class Eo{constructor(t,r){this.type=r.type,this.bindings=[].concat(t),this.result=r}evaluate(t){return this.result.evaluate(t)}eachChild(t){for(const r of this.bindings)t(r[1]);t(this.result)}static parse(t,r){if(t.length<4)return r.error(`Expected at least 3 arguments, but found ${t.length-1} instead.`);const s=[];for(let m=1;m<t.length-1;m+=2){const _=t[m];if(typeof _!="string")return r.error(`Expected string, but found ${typeof _} instead.`,m);if(/[^a-zA-Z0-9_]/.test(_))return r.error("Variable names must contain only alphanumeric characters or '_'.",m);const y=r.parse(t[m+1],m+1);if(!y)return null;s.push([_,y])}const u=r.parse(t[t.length-1],t.length-1,r.expectedType,s);return u?new Eo(s,u):null}outputDefined(){return this.result.outputDefined()}}class Ns{constructor(t,r){this.type=r.type,this.name=t,this.boundExpression=r}static parse(t,r){if(t.length!==2||typeof t[1]!="string")return r.error("'var' expression requires exactly one string literal argument.");const s=t[1];return r.scope.has(s)?new Ns(s,r.scope.get(s)):r.error(`Unknown variable "${s}". Make sure "${s}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(t){return this.boundExpression.evaluate(t)}eachChild(){}outputDefined(){return!1}}class zo{constructor(t,r,s){this.type=t,this.index=r,this.input=s}static parse(t,r){if(t.length!==3)return r.error(`Expected 2 arguments, but found ${t.length-1} instead.`);const s=r.parse(t[1],1,Xe),u=r.parse(t[2],2,la(r.expectedType||Mt));return s&&u?new zo(u.type.itemType,s,u):null}evaluate(t){const r=this.index.evaluate(t),s=this.input.evaluate(t);if(r<0)throw new Vi(`Array index out of bounds: ${r} < 0.`);if(r>=s.length)throw new Vi(`Array index out of bounds: ${r} > ${s.length-1}.`);if(r!==Math.floor(r))throw new Vi(`Array index must be an integer, but found ${r} instead.`);return s[r]}eachChild(t){t(this.index),t(this.input)}outputDefined(){return!1}}class Us{constructor(t,r){this.type=Ft,this.needle=t,this.haystack=r}static parse(t,r){if(t.length!==3)return r.error(`Expected 2 arguments, but found ${t.length-1} instead.`);const s=r.parse(t[1],1,Mt),u=r.parse(t[2],2,Mt);return s&&u?as(s.type,[Ft,Lt,Xe,yi,Mt])?new Us(s,u):r.error(`Expected first argument to be of type boolean, string, number or null, but found ${jt(s.type)} instead`):null}evaluate(t){const r=this.needle.evaluate(t),s=this.haystack.evaluate(t);if(!s)return!1;if(!Mo(r,["boolean","string","number","null"]))throw new Vi(`Expected first argument to be of type boolean, string, number or null, but found ${jt($i(r))} instead.`);if(!Mo(s,["string","array"]))throw new Vi(`Expected second argument to be of type array or string, but found ${jt($i(s))} instead.`);return s.indexOf(r)>=0}eachChild(t){t(this.needle),t(this.haystack)}outputDefined(){return!0}}class yc{constructor(t,r,s){this.type=Xe,this.needle=t,this.haystack=r,this.fromIndex=s}static parse(t,r){if(t.length<=2||t.length>=5)return r.error(`Expected 2 or 3 arguments, but found ${t.length-1} instead.`);const s=r.parse(t[1],1,Mt),u=r.parse(t[2],2,Mt);if(!s||!u)return null;if(!as(s.type,[Ft,Lt,Xe,yi,Mt]))return r.error(`Expected first argument to be of type boolean, string, number or null, but found ${jt(s.type)} instead`);if(t.length===4){const m=r.parse(t[3],3,Xe);return m?new yc(s,u,m):null}return new yc(s,u)}evaluate(t){const r=this.needle.evaluate(t),s=this.haystack.evaluate(t);if(!Mo(r,["boolean","string","number","null"]))throw new Vi(`Expected first argument to be of type boolean, string, number or null, but found ${jt($i(r))} instead.`);let u;if(this.fromIndex&&(u=this.fromIndex.evaluate(t)),Mo(s,["string"])){const m=s.indexOf(r,u);return m===-1?-1:[...s.slice(0,m)].length}if(Mo(s,["array"]))return s.indexOf(r,u);throw new Vi(`Expected second argument to be of type array or string, but found ${jt($i(s))} instead.`)}eachChild(t){t(this.needle),t(this.haystack),this.fromIndex&&t(this.fromIndex)}outputDefined(){return!1}}class uu{constructor(t,r,s,u,m,_){this.inputType=t,this.type=r,this.input=s,this.cases=u,this.outputs=m,this.otherwise=_}static parse(t,r){if(t.length<5)return r.error(`Expected at least 4 arguments, but found only ${t.length-1}.`);if(t.length%2!=1)return r.error("Expected an even number of arguments.");let s,u;r.expectedType&&r.expectedType.kind!=="value"&&(u=r.expectedType);const m={},_=[];for(let T=2;T<t.length-1;T+=2){let E=t[T];const L=t[T+1];Array.isArray(E)||(E=[E]);const V=r.concat(T);if(E.length===0)return V.error("Expected at least one branch label.");for(const N of E){if(typeof N!="number"&&typeof N!="string")return V.error("Branch labels must be numbers or strings.");if(typeof N=="number"&&Math.abs(N)>Number.MAX_SAFE_INTEGER)return V.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof N=="number"&&Math.floor(N)!==N)return V.error("Numeric branch labels must be integer values.");if(s){if(V.checkSubtype(s,$i(N)))return null}else s=$i(N);if(m[String(N)]!==void 0)return V.error("Branch labels must be unique.");m[String(N)]=_.length}const $=r.parse(L,T,u);if(!$)return null;u=u||$.type,_.push($)}const y=r.parse(t[1],1,Mt);if(!y)return null;const b=r.parse(t[t.length-1],t.length-1,u);return b?y.type.kind!=="value"&&r.concat(1).checkSubtype(s,y.type)?null:new uu(s,u,y,m,_,b):null}evaluate(t){const r=this.input.evaluate(t);return($i(r)===this.inputType&&this.outputs[this.cases[r]]||this.otherwise).evaluate(t)}eachChild(t){t(this.input),this.outputs.forEach(t),t(this.otherwise)}outputDefined(){return this.outputs.every((t=>t.outputDefined()))&&this.otherwise.outputDefined()}}class hu{constructor(t,r,s){this.type=t,this.branches=r,this.otherwise=s}static parse(t,r){if(t.length<4)return r.error(`Expected at least 3 arguments, but found only ${t.length-1}.`);if(t.length%2!=0)return r.error("Expected an odd number of arguments.");let s;r.expectedType&&r.expectedType.kind!=="value"&&(s=r.expectedType);const u=[];for(let _=1;_<t.length-1;_+=2){const y=r.parse(t[_],_,Ft);if(!y)return null;const b=r.parse(t[_+1],_+1,s);if(!b)return null;u.push([y,b]),s=s||b.type}const m=r.parse(t[t.length-1],t.length-1,s);if(!m)return null;if(!s)throw new Error("Can't infer output type");return new hu(s,u,m)}evaluate(t){for(const[r,s]of this.branches)if(r.evaluate(t))return s.evaluate(t);return this.otherwise.evaluate(t)}eachChild(t){for(const[r,s]of this.branches)t(r),t(s);t(this.otherwise)}outputDefined(){return this.branches.every((([t,r])=>r.outputDefined()))&&this.otherwise.outputDefined()}}class Ln{constructor(t,r,s,u){this.type=t,this.input=r,this.beginIndex=s,this.endIndex=u}static parse(t,r){if(t.length<=2||t.length>=5)return r.error(`Expected 2 or 3 arguments, but found ${t.length-1} instead.`);const s=r.parse(t[1],1,Mt),u=r.parse(t[2],2,Xe);if(!s||!u)return null;if(!as(s.type,[la(Mt),Lt,Mt]))return r.error(`Expected first argument to be of type array or string, but found ${jt(s.type)} instead`);if(t.length===4){const m=r.parse(t[3],3,Xe);return m?new Ln(s.type,s,u,m):null}return new Ln(s.type,s,u)}evaluate(t){const r=this.input.evaluate(t),s=this.beginIndex.evaluate(t);let u;if(this.endIndex&&(u=this.endIndex.evaluate(t)),Mo(r,["string"]))return[...r].slice(s,u).join("");if(Mo(r,["array"]))return r.slice(s,u);throw new Vi(`Expected first argument to be of type array or string, but found ${jt($i(r))} instead.`)}eachChild(t){t(this.input),t(this.beginIndex),this.endIndex&&t(this.endIndex)}outputDefined(){return!1}}function br(a,t){const r=a.length-1;let s,u,m=0,_=r,y=0;for(;m<=_;)if(y=Math.floor((m+_)/2),s=a[y],u=a[y+1],s<=t){if(y===r||t<u)return y;m=y+1}else{if(!(s>t))throw new Vi("Input is not a number.");_=y-1}return 0}class cs{constructor(t,r,s){this.type=t,this.input=r,this.labels=[],this.outputs=[];for(const[u,m]of s)this.labels.push(u),this.outputs.push(m)}static parse(t,r){if(t.length-1<4)return r.error(`Expected at least 4 arguments, but found only ${t.length-1}.`);if((t.length-1)%2!=0)return r.error("Expected an even number of arguments.");const s=r.parse(t[1],1,Xe);if(!s)return null;const u=[];let m=null;r.expectedType&&r.expectedType.kind!=="value"&&(m=r.expectedType);for(let _=1;_<t.length;_+=2){const y=_===1?-1/0:t[_],b=t[_+1],T=_,E=_+1;if(typeof y!="number")return r.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',T);if(u.length&&u[u.length-1][0]>=y)return r.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',T);const L=r.parse(b,E,m);if(!L)return null;m=m||L.type,u.push([y,L])}return new cs(m,s,u)}evaluate(t){const r=this.labels,s=this.outputs;if(r.length===1)return s[0].evaluate(t);const u=this.input.evaluate(t);if(u<=r[0])return s[0].evaluate(t);const m=r.length;return u>=r[m-1]?s[m-1].evaluate(t):s[br(r,u)].evaluate(t)}eachChild(t){t(this.input);for(const r of this.outputs)t(r)}outputDefined(){return this.outputs.every((t=>t.outputDefined()))}}function gd(a){return a&&a.__esModule&&Object.prototype.hasOwnProperty.call(a,"default")?a.default:a}var Il,Or,_d=(function(){if(Or)return Il;function a(t,r,s,u){this.cx=3*t,this.bx=3*(s-t)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*r,this.by=3*(u-r)-this.cy,this.ay=1-this.cy-this.by,this.p1x=t,this.p1y=r,this.p2x=s,this.p2y=u}return Or=1,Il=a,a.prototype={sampleCurveX:function(t){return((this.ax*t+this.bx)*t+this.cx)*t},sampleCurveY:function(t){return((this.ay*t+this.by)*t+this.cy)*t},sampleCurveDerivativeX:function(t){return(3*this.ax*t+2*this.bx)*t+this.cx},solveCurveX:function(t,r){if(r===void 0&&(r=1e-6),t<0)return 0;if(t>1)return 1;for(var s=t,u=0;u<8;u++){var m=this.sampleCurveX(s)-t;if(Math.abs(m)<r)return s;var _=this.sampleCurveDerivativeX(s);if(Math.abs(_)<1e-6)break;s-=m/_}var y=0,b=1;for(s=t,u=0;u<20&&(m=this.sampleCurveX(s),!(Math.abs(m-t)<r));u++)t>m?y=s:b=s,s=.5*(b-y)+y;return s},solve:function(t,r){return this.sampleCurveY(this.solveCurveX(t,r))}},Il})(),du=gd(_d);class ba{constructor(t,r,s,u,m){this.type=t,this.operator=r,this.interpolation=s,this.input=u,this.labels=[],this.outputs=[];for(const[_,y]of m)this.labels.push(_),this.outputs.push(y)}static interpolationFactor(t,r,s,u){let m=0;if(t.name==="exponential")m=ch(r,t.base,s,u);else if(t.name==="linear")m=ch(r,1,s,u);else if(t.name==="cubic-bezier"){const _=t.controlPoints;m=new du(_[0],_[1],_[2],_[3]).solve(ch(r,1,s,u))}return m}static parse(t,r){let[s,u,m,..._]=t;if(!Array.isArray(u)||u.length===0)return r.error("Expected an interpolation type expression.",1);if(u[0]==="linear")u={name:"linear"};else if(u[0]==="exponential"){const T=u[1];if(typeof T!="number")return r.error("Exponential interpolation requires a numeric base.",1,1);u={name:"exponential",base:T}}else{if(u[0]!=="cubic-bezier")return r.error(`Unknown interpolation type ${String(u[0])}`,1,0);{const T=u.slice(1);if(T.length!==4||T.some((E=>typeof E!="number"||E<0||E>1)))return r.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);u={name:"cubic-bezier",controlPoints:T}}}if(t.length-1<4)return r.error(`Expected at least 4 arguments, but found only ${t.length-1}.`);if((t.length-1)%2!=0)return r.error("Expected an even number of arguments.");if(m=r.parse(m,2,Xe),!m)return null;const y=[];let b=null;s!=="interpolate-hcl"&&s!=="interpolate-lab"||r.expectedType==To?r.expectedType&&r.expectedType.kind!=="value"&&(b=r.expectedType):b=cn;for(let T=0;T<_.length;T+=2){const E=_[T],L=_[T+1],V=T+3,$=T+4;if(typeof E!="number")return r.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',V);if(y.length&&y[y.length-1][0]>=E)return r.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',V);const N=r.parse(L,$,b);if(!N)return null;b=b||N.type,y.push([E,N])}return ns(b,Xe)||ns(b,fc)||ns(b,cn)||ns(b,kn)||ns(b,un)||ns(b,To)||ns(b,io)||ns(b,la(Xe))?new ba(b,s,u,m,y):r.error(`Type ${jt(b)} is not interpolatable.`)}evaluate(t){const r=this.labels,s=this.outputs;if(r.length===1)return s[0].evaluate(t);const u=this.input.evaluate(t);if(u<=r[0])return s[0].evaluate(t);const m=r.length;if(u>=r[m-1])return s[m-1].evaluate(t);const _=br(r,u),y=ba.interpolationFactor(this.interpolation,u,r[_],r[_+1]),b=s[_].evaluate(t),T=s[_+1].evaluate(t);switch(this.operator){case"interpolate":switch(this.type.kind){case"number":return Xt(b,T,y);case"color":return It.interpolate(b,T,y);case"padding":return cr.interpolate(b,T,y);case"colorArray":return yr.interpolate(b,T,y);case"numberArray":return Kr.interpolate(b,T,y);case"variableAnchorOffsetCollection":return Qi.interpolate(b,T,y);case"array":return Dn(b,T,y);case"projectionDefinition":return qr.interpolate(b,T,y)}case"interpolate-hcl":switch(this.type.kind){case"color":return It.interpolate(b,T,y,"hcl");case"colorArray":return yr.interpolate(b,T,y,"hcl")}case"interpolate-lab":switch(this.type.kind){case"color":return It.interpolate(b,T,y,"lab");case"colorArray":return yr.interpolate(b,T,y,"lab")}}}eachChild(t){t(this.input);for(const r of this.outputs)t(r)}outputDefined(){return this.outputs.every((t=>t.outputDefined()))}}function ch(a,t,r,s){const u=s-r,m=a-r;return u===0?0:t===1?m/u:(Math.pow(t,m)-1)/(Math.pow(t,u)-1)}const xa={color:It.interpolate,number:Xt,padding:cr.interpolate,numberArray:Kr.interpolate,colorArray:yr.interpolate,variableAnchorOffsetCollection:Qi.interpolate,array:Dn};class Zs{constructor(t,r){this.type=t,this.args=r}static parse(t,r){if(t.length<2)return r.error("Expected at least one argument.");let s=null;const u=r.expectedType;u&&u.kind!=="value"&&(s=u);const m=[];for(const y of t.slice(1)){const b=r.parse(y,1+m.length,s,void 0,{typeAnnotation:"omit"});if(!b)return null;s=s||b.type,m.push(b)}if(!s)throw new Error("No output type");const _=u&&m.some((y=>Al(u,y.type)));return new Zs(_?Mt:s,m)}evaluate(t){let r,s=null,u=0;for(const m of this.args)if(u++,s=m.evaluate(t),s&&s instanceof Br&&!s.available&&(r||(r=s.name),s=null,u===this.args.length&&(s=r)),s!==null)break;return s}eachChild(t){this.args.forEach(t)}outputDefined(){return this.args.every((t=>t.outputDefined()))}}function Rl(a,t){return a==="=="||a==="!="?t.kind==="boolean"||t.kind==="string"||t.kind==="number"||t.kind==="null"||t.kind==="value":t.kind==="string"||t.kind==="number"||t.kind==="value"}function vd(a,t,r,s){return s.compare(t,r)===0}function Hs(a,t,r){const s=a!=="=="&&a!=="!=";return class W1{constructor(m,_,y){this.type=Ft,this.lhs=m,this.rhs=_,this.collator=y,this.hasUntypedArgument=m.type.kind==="value"||_.type.kind==="value"}static parse(m,_){if(m.length!==3&&m.length!==4)return _.error("Expected two or three arguments.");const y=m[0];let b=_.parse(m[1],1,Mt);if(!b)return null;if(!Rl(y,b.type))return _.concat(1).error(`"${y}" comparisons are not supported for type '${jt(b.type)}'.`);let T=_.parse(m[2],2,Mt);if(!T)return null;if(!Rl(y,T.type))return _.concat(2).error(`"${y}" comparisons are not supported for type '${jt(T.type)}'.`);if(b.type.kind!==T.type.kind&&b.type.kind!=="value"&&T.type.kind!=="value")return _.error(`Cannot compare types '${jt(b.type)}' and '${jt(T.type)}'.`);s&&(b.type.kind==="value"&&T.type.kind!=="value"?b=new St(T.type,[b]):b.type.kind!=="value"&&T.type.kind==="value"&&(T=new St(b.type,[T])));let E=null;if(m.length===4){if(b.type.kind!=="string"&&T.type.kind!=="string"&&b.type.kind!=="value"&&T.type.kind!=="value")return _.error("Cannot use collator to compare non-string types.");if(E=_.parse(m[3],3,So),!E)return null}return new W1(b,T,E)}evaluate(m){const _=this.lhs.evaluate(m),y=this.rhs.evaluate(m);if(s&&this.hasUntypedArgument){const b=$i(_),T=$i(y);if(b.kind!==T.kind||b.kind!=="string"&&b.kind!=="number")throw new Vi(`Expected arguments for "${a}" to be (string, string) or (number, number), but found (${b.kind}, ${T.kind}) instead.`)}if(this.collator&&!s&&this.hasUntypedArgument){const b=$i(_),T=$i(y);if(b.kind!=="string"||T.kind!=="string")return t(m,_,y)}return this.collator?r(m,_,y,this.collator.evaluate(m)):t(m,_,y)}eachChild(m){m(this.lhs),m(this.rhs),this.collator&&m(this.collator)}outputDefined(){return!0}}}const pu=Hs("==",(function(a,t,r){return t===r}),vd),bc=Hs("!=",(function(a,t,r){return t!==r}),(function(a,t,r,s){return!vd(0,t,r,s)})),In=Hs("<",(function(a,t,r){return t<r}),(function(a,t,r,s){return s.compare(t,r)<0})),yd=Hs(">",(function(a,t,r){return t>r}),(function(a,t,r,s){return s.compare(t,r)>0})),fu=Hs("<=",(function(a,t,r){return t<=r}),(function(a,t,r,s){return s.compare(t,r)<=0})),Cp=Hs(">=",(function(a,t,r){return t>=r}),(function(a,t,r,s){return s.compare(t,r)>=0}));class Bl{constructor(t,r,s){this.type=So,this.locale=s,this.caseSensitive=t,this.diacriticSensitive=r}static parse(t,r){if(t.length!==2)return r.error("Expected one argument.");const s=t[1];if(typeof s!="object"||Array.isArray(s))return r.error("Collator options argument must be an object.");const u=r.parse(s["case-sensitive"]!==void 0&&s["case-sensitive"],1,Ft);if(!u)return null;const m=r.parse(s["diacritic-sensitive"]!==void 0&&s["diacritic-sensitive"],1,Ft);if(!m)return null;let _=null;return s.locale&&(_=r.parse(s.locale,1,Lt),!_)?null:new Bl(u,m,_)}evaluate(t){return new dn(this.caseSensitive.evaluate(t),this.diacriticSensitive.evaluate(t),this.locale?this.locale.evaluate(t):null)}eachChild(t){t(this.caseSensitive),t(this.diacriticSensitive),this.locale&&t(this.locale)}outputDefined(){return!1}}class uh{constructor(t,r,s,u,m){this.type=Lt,this.number=t,this.locale=r,this.currency=s,this.minFractionDigits=u,this.maxFractionDigits=m}static parse(t,r){if(t.length!==3)return r.error("Expected two arguments.");const s=r.parse(t[1],1,Xe);if(!s)return null;const u=t[2];if(typeof u!="object"||Array.isArray(u))return r.error("NumberFormat options argument must be an object.");let m=null;if(u.locale&&(m=r.parse(u.locale,1,Lt),!m))return null;let _=null;if(u.currency&&(_=r.parse(u.currency,1,Lt),!_))return null;let y=null;if(u["min-fraction-digits"]&&(y=r.parse(u["min-fraction-digits"],1,Xe),!y))return null;let b=null;return u["max-fraction-digits"]&&(b=r.parse(u["max-fraction-digits"],1,Xe),!b)?null:new uh(s,m,_,y,b)}evaluate(t){return new Intl.NumberFormat(this.locale?this.locale.evaluate(t):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(t):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(t):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(t):void 0}).format(this.number.evaluate(t))}eachChild(t){t(this.number),this.locale&&t(this.locale),this.currency&&t(this.currency),this.minFractionDigits&&t(this.minFractionDigits),this.maxFractionDigits&&t(this.maxFractionDigits)}outputDefined(){return!1}}class mu{constructor(t){this.type=Pn,this.sections=t}static parse(t,r){if(t.length<2)return r.error("Expected at least one argument.");const s=t[1];if(!Array.isArray(s)&&typeof s=="object")return r.error("First argument must be an image or text section.");const u=[];let m=!1;for(let _=1;_<=t.length-1;++_){const y=t[_];if(m&&typeof y=="object"&&!Array.isArray(y)){m=!1;let b=null;if(y["font-scale"]&&(b=r.parse(y["font-scale"],1,Xe),!b))return null;let T=null;if(y["text-font"]&&(T=r.parse(y["text-font"],1,la(Lt)),!T))return null;let E=null;if(y["text-color"]&&(E=r.parse(y["text-color"],1,cn),!E))return null;let L=null;if(y["vertical-align"]){if(typeof y["vertical-align"]=="string"&&!cu.includes(y["vertical-align"]))return r.error(`'vertical-align' must be one of: 'bottom', 'center', 'top' but found '${y["vertical-align"]}' instead.`);if(L=r.parse(y["vertical-align"],1,Lt),!L)return null}const V=u[u.length-1];V.scale=b,V.font=T,V.textColor=E,V.verticalAlign=L}else{const b=r.parse(t[_],1,Mt);if(!b)return null;const T=b.type.kind;if(T!=="string"&&T!=="value"&&T!=="null"&&T!=="resolvedImage")return r.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");m=!0,u.push({content:b,scale:null,font:null,textColor:null,verticalAlign:null})}}return new mu(u)}evaluate(t){return new fr(this.sections.map((r=>{const s=r.content.evaluate(t);return $i(s)===pr?new Fs("",s,null,null,null,r.verticalAlign?r.verticalAlign.evaluate(t):null):new Fs(Ci(s),null,r.scale?r.scale.evaluate(t):null,r.font?r.font.evaluate(t).join(","):null,r.textColor?r.textColor.evaluate(t):null,r.verticalAlign?r.verticalAlign.evaluate(t):null)})))}eachChild(t){for(const r of this.sections)t(r.content),r.scale&&t(r.scale),r.font&&t(r.font),r.textColor&&t(r.textColor),r.verticalAlign&&t(r.verticalAlign)}outputDefined(){return!1}}class hh{constructor(t){this.type=pr,this.input=t}static parse(t,r){if(t.length!==2)return r.error("Expected two arguments.");const s=r.parse(t[1],1,Lt);return s?new hh(s):r.error("No image name provided.")}evaluate(t){const r=this.input.evaluate(t),s=Br.fromString(r);return s&&t.availableImages&&(s.available=t.availableImages.indexOf(r)>-1),s}eachChild(t){t(this.input)}outputDefined(){return!1}}class dh{constructor(t){this.type=Xe,this.input=t}static parse(t,r){if(t.length!==2)return r.error(`Expected 1 argument, but found ${t.length-1} instead.`);const s=r.parse(t[1],1);return s?s.type.kind!=="array"&&s.type.kind!=="string"&&s.type.kind!=="value"?r.error(`Expected argument of type string or array, but found ${jt(s.type)} instead.`):new dh(s):null}evaluate(t){const r=this.input.evaluate(t);if(typeof r=="string")return[...r].length;if(Array.isArray(r))return r.length;throw new Vi(`Expected value to be of type string or array, but found ${jt($i(r))} instead.`)}eachChild(t){t(this.input)}outputDefined(){return!1}}const wa=8192;function xc(a,t){const r=(180+a[0])/360,s=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+a[1]*Math.PI/360)))/360,u=Math.pow(2,t.z);return[Math.round(r*u*wa),Math.round(s*u*wa)]}function gu(a,t){const r=Math.pow(2,t.z);return[(u=(a[0]/wa+t.x)/r,360*u-180),(s=(a[1]/wa+t.y)/r,360/Math.PI*Math.atan(Math.exp((180-360*s)*Math.PI/180))-90)];var s,u}function Gs(a,t){a[0]=Math.min(a[0],t[0]),a[1]=Math.min(a[1],t[1]),a[2]=Math.max(a[2],t[0]),a[3]=Math.max(a[3],t[1])}function Ol(a,t){return!(a[0]<=t[0]||a[2]>=t[2]||a[1]<=t[1]||a[3]>=t[3])}function ph(a,t,r){const s=a[0]-t[0],u=a[1]-t[1],m=a[0]-r[0],_=a[1]-r[1];return s*_-m*u==0&&s*m<=0&&u*_<=0}function wc(a,t,r,s){return(u=[s[0]-r[0],s[1]-r[1]])[0]*(m=[t[0]-a[0],t[1]-a[1]])[1]-u[1]*m[0]!=0&&!(!_u(a,t,r,s)||!_u(r,s,a,t));var u,m}function bd(a,t,r){for(const s of r)for(let u=0;u<s.length-1;++u)if(wc(a,t,s[u],s[u+1]))return!0;return!1}function Rn(a,t,r=!1){let s=!1;for(const y of t)for(let b=0;b<y.length-1;b++){if(ph(a,y[b],y[b+1]))return r;(m=y[b])[1]>(u=a)[1]!=(_=y[b+1])[1]>u[1]&&u[0]<(_[0]-m[0])*(u[1]-m[1])/(_[1]-m[1])+m[0]&&(s=!s)}var u,m,_;return s}function Sp(a,t){for(const r of t)if(Rn(a,r))return!0;return!1}function xd(a,t){for(const r of a)if(!Rn(r,t))return!1;for(let r=0;r<a.length-1;++r)if(bd(a[r],a[r+1],t))return!1;return!0}function wd(a,t){for(const r of t)if(xd(a,r))return!0;return!1}function _u(a,t,r,s){const u=s[0]-r[0],m=s[1]-r[1],_=(a[0]-r[0])*m-u*(a[1]-r[1]),y=(t[0]-r[0])*m-u*(t[1]-r[1]);return _>0&&y<0||_<0&&y>0}function Cc(a,t,r){const s=[];for(let u=0;u<a.length;u++){const m=[];for(let _=0;_<a[u].length;_++){const y=xc(a[u][_],r);Gs(t,y),m.push(y)}s.push(m)}return s}function jl(a,t,r){const s=[];for(let u=0;u<a.length;u++){const m=Cc(a[u],t,r);s.push(m)}return s}function Vl(a,t,r,s){if(a[0]<r[0]||a[0]>r[2]){const u=.5*s;let m=a[0]-r[0]>u?-s:r[0]-a[0]>u?s:0;m===0&&(m=a[0]-r[2]>u?-s:r[2]-a[0]>u?s:0),a[0]+=m}Gs(t,a)}function Cd(a,t,r,s){const u=Math.pow(2,s.z)*wa,m=[s.x*wa,s.y*wa],_=[];for(const y of a)for(const b of y){const T=[b.x+m[0],b.y+m[1]];Vl(T,t,r,u),_.push(T)}return _}function Sc(a,t,r,s){const u=Math.pow(2,s.z)*wa,m=[s.x*wa,s.y*wa],_=[];for(const b of a){const T=[];for(const E of b){const L=[E.x+m[0],E.y+m[1]];Gs(t,L),T.push(L)}_.push(T)}if(t[2]-t[0]<=u/2){(y=t)[0]=y[1]=1/0,y[2]=y[3]=-1/0;for(const b of _)for(const T of b)Vl(T,t,r,u)}var y;return _}class Bn{constructor(t,r){this.type=Ft,this.geojson=t,this.geometries=r}static parse(t,r){if(t.length!==2)return r.error(`'within' expression requires exactly one argument, but found ${t.length-1} instead.`);if(ls(t[1])){const s=t[1];if(s.type==="FeatureCollection"){const u=[];for(const m of s.features){const{type:_,coordinates:y}=m.geometry;_==="Polygon"&&u.push(y),_==="MultiPolygon"&&u.push(...y)}if(u.length)return new Bn(s,{type:"MultiPolygon",coordinates:u})}else if(s.type==="Feature"){const u=s.geometry.type;if(u==="Polygon"||u==="MultiPolygon")return new Bn(s,s.geometry)}else if(s.type==="Polygon"||s.type==="MultiPolygon")return new Bn(s,s)}return r.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(t){if(t.geometry()!=null&&t.canonicalID()!=null){if(t.geometryType()==="Point")return(function(r,s){const u=[1/0,1/0,-1/0,-1/0],m=[1/0,1/0,-1/0,-1/0],_=r.canonicalID();if(s.type==="Polygon"){const y=Cc(s.coordinates,m,_),b=Cd(r.geometry(),u,m,_);if(!Ol(u,m))return!1;for(const T of b)if(!Rn(T,y))return!1}if(s.type==="MultiPolygon"){const y=jl(s.coordinates,m,_),b=Cd(r.geometry(),u,m,_);if(!Ol(u,m))return!1;for(const T of b)if(!Sp(T,y))return!1}return!0})(t,this.geometries);if(t.geometryType()==="LineString")return(function(r,s){const u=[1/0,1/0,-1/0,-1/0],m=[1/0,1/0,-1/0,-1/0],_=r.canonicalID();if(s.type==="Polygon"){const y=Cc(s.coordinates,m,_),b=Sc(r.geometry(),u,m,_);if(!Ol(u,m))return!1;for(const T of b)if(!xd(T,y))return!1}if(s.type==="MultiPolygon"){const y=jl(s.coordinates,m,_),b=Sc(r.geometry(),u,m,_);if(!Ol(u,m))return!1;for(const T of b)if(!wd(T,y))return!1}return!0})(t,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}let fh=class{constructor(a=[],t=(r,s)=>r<s?-1:r>s?1:0){if(this.data=a,this.length=this.data.length,this.compare=t,this.length>0)for(let r=(this.length>>1)-1;r>=0;r--)this._down(r)}push(a){this.data.push(a),this._up(this.length++)}pop(){if(this.length===0)return;const a=this.data[0],t=this.data.pop();return--this.length>0&&(this.data[0]=t,this._down(0)),a}peek(){return this.data[0]}_up(a){const{data:t,compare:r}=this,s=t[a];for(;a>0;){const u=a-1>>1,m=t[u];if(r(s,m)>=0)break;t[a]=m,a=u}t[a]=s}_down(a){const{data:t,compare:r}=this,s=this.length>>1,u=t[a];for(;a<s;){let m=1+(a<<1);const _=m+1;if(_<this.length&&r(t[_],t[m])<0&&(m=_),r(t[m],u)>=0)break;t[a]=t[m],a=m}t[a]=u}};function vu(a,t,r=0,s=a.length-1,u=Sd){for(;s>r;){if(s-r>600){const b=s-r+1,T=t-r+1,E=Math.log(b),L=.5*Math.exp(2*E/3),V=.5*Math.sqrt(E*L*(b-L)/b)*(T-b/2<0?-1:1);vu(a,t,Math.max(r,Math.floor(t-T*L/b+V)),Math.min(s,Math.floor(t+(b-T)*L/b+V)),u)}const m=a[t];let _=r,y=s;for(qs(a,r,t),u(a[s],m)>0&&qs(a,r,s);_<y;){for(qs(a,_,y),_++,y--;u(a[_],m)<0;)_++;for(;u(a[y],m)>0;)y--}u(a[r],m)===0?qs(a,r,y):(y++,qs(a,y,s)),y<=t&&(r=y+1),t<=y&&(s=y-1)}}function qs(a,t,r){const s=a[t];a[t]=a[r],a[r]=s}function Sd(a,t){return a<t?-1:a>t?1:0}function Xs(a,t){if(a.length<=1)return[a];const r=[];let s,u;for(const m of a){const _=Tp(m);_!==0&&(m.area=Math.abs(_),u===void 0&&(u=_<0),u===_<0?(s&&r.push(s),s=[m]):s.push(m))}if(s&&r.push(s),t>1)for(let m=0;m<r.length;m++)r[m].length<=t||(vu(r[m],t,1,r[m].length-1,mh),r[m]=r[m].slice(0,t));return r}function mh(a,t){return t.area-a.area}function Tp(a){let t=0;for(let r,s,u=0,m=a.length,_=m-1;u<m;_=u++)r=a[u],s=a[_],t+=(s.x-r.x)*(r.y+s.y);return t}const Td=1/298.257223563,gh=Td*(2-Td),_h=Math.PI/180;class vh{constructor(t){const r=6378.137*_h*1e3,s=Math.cos(t*_h),u=1/(1-gh*(1-s*s)),m=Math.sqrt(u);this.kx=r*m*s,this.ky=r*m*u*(1-gh)}distance(t,r){const s=this.wrap(t[0]-r[0])*this.kx,u=(t[1]-r[1])*this.ky;return Math.sqrt(s*s+u*u)}pointOnLine(t,r){let s,u,m,_,y=1/0;for(let b=0;b<t.length-1;b++){let T=t[b][0],E=t[b][1],L=this.wrap(t[b+1][0]-T)*this.kx,V=(t[b+1][1]-E)*this.ky,$=0;L===0&&V===0||($=(this.wrap(r[0]-T)*this.kx*L+(r[1]-E)*this.ky*V)/(L*L+V*V),$>1?(T=t[b+1][0],E=t[b+1][1]):$>0&&(T+=L/this.kx*$,E+=V/this.ky*$)),L=this.wrap(r[0]-T)*this.kx,V=(r[1]-E)*this.ky;const N=L*L+V*V;N<y&&(y=N,s=T,u=E,m=b,_=$)}return{point:[s,u],index:m,t:Math.max(0,Math.min(1,_))}}wrap(t){for(;t<-180;)t+=360;for(;t>180;)t-=360;return t}}function Ia(a,t){return t[0]-a[0]}function us(a){return a[1]-a[0]+1}function On(a,t){return a[1]>=a[0]&&a[1]<t}function yu(a,t){if(a[0]>a[1])return[null,null];const r=us(a);if(t){if(r===2)return[a,null];const u=Math.floor(r/2);return[[a[0],a[0]+u],[a[0]+u,a[1]]]}if(r===1)return[a,null];const s=Math.floor(r/2)-1;return[[a[0],a[0]+s],[a[0]+s+1,a[1]]]}function bu(a,t){if(!On(t,a.length))return[1/0,1/0,-1/0,-1/0];const r=[1/0,1/0,-1/0,-1/0];for(let s=t[0];s<=t[1];++s)Gs(r,a[s]);return r}function xu(a){const t=[1/0,1/0,-1/0,-1/0];for(const r of a)for(const s of r)Gs(t,s);return t}function wu(a){return a[0]!==-1/0&&a[1]!==-1/0&&a[2]!==1/0&&a[3]!==1/0}function di(a,t,r){if(!wu(a)||!wu(t))return NaN;let s=0,u=0;return a[2]<t[0]&&(s=t[0]-a[2]),a[0]>t[2]&&(s=a[0]-t[2]),a[1]>t[3]&&(u=a[1]-t[3]),a[3]<t[1]&&(u=t[1]-a[3]),r.distance([0,0],[s,u])}function fn(a,t,r){const s=r.pointOnLine(t,a);return r.distance(a,s.point)}function Tc(a,t,r,s,u){const m=Math.min(fn(a,[r,s],u),fn(t,[r,s],u)),_=Math.min(fn(r,[a,t],u),fn(s,[a,t],u));return Math.min(m,_)}function Mc(a,t,r,s,u){if(!On(t,a.length)||!On(s,r.length))return 1/0;let m=1/0;for(let _=t[0];_<t[1];++_){const y=a[_],b=a[_+1];for(let T=s[0];T<s[1];++T){const E=r[T],L=r[T+1];if(wc(y,b,E,L))return 0;m=Math.min(m,Tc(y,b,E,L,u))}}return m}function yh(a,t,r,s,u){if(!On(t,a.length)||!On(s,r.length))return NaN;let m=1/0;for(let _=t[0];_<=t[1];++_)for(let y=s[0];y<=s[1];++y)if(m=Math.min(m,u.distance(a[_],r[y])),m===0)return m;return m}function Md(a,t,r){if(Rn(a,t,!0))return 0;let s=1/0;for(const u of t){const m=u[0],_=u[u.length-1];if(m!==_&&(s=Math.min(s,fn(a,[_,m],r)),s===0))return s;const y=r.pointOnLine(u,a);if(s=Math.min(s,r.distance(a,y.point)),s===0)return s}return s}function Ys(a,t,r,s){if(!On(t,a.length))return NaN;for(let m=t[0];m<=t[1];++m)if(Rn(a[m],r,!0))return 0;let u=1/0;for(let m=t[0];m<t[1];++m){const _=a[m],y=a[m+1];for(const b of r)for(let T=0,E=b.length,L=E-1;T<E;L=T++){const V=b[L],$=b[T];if(wc(_,y,V,$))return 0;u=Math.min(u,Tc(_,y,V,$,s))}}return u}function Qs(a,t){for(const r of a)for(const s of r)if(Rn(s,t,!0))return!0;return!1}function bh(a,t,r,s=1/0){const u=xu(a),m=xu(t);if(s!==1/0&&di(u,m,r)>=s)return s;if(Ol(u,m)){if(Qs(a,t))return 0}else if(Qs(t,a))return 0;let _=1/0;for(const y of a)for(let b=0,T=y.length,E=T-1;b<T;E=b++){const L=y[E],V=y[b];for(const $ of t)for(let N=0,G=$.length,Q=G-1;N<G;Q=N++){const ee=$[Q],_e=$[N];if(wc(L,V,ee,_e))return 0;_=Math.min(_,Tc(L,V,ee,_e,r))}}return _}function xh(a,t,r,s,u,m){if(!m)return;const _=di(bu(s,m),u,r);_<t&&a.push([_,m,[0,0]])}function no(a,t,r,s,u,m,_){if(!m||!_)return;const y=di(bu(s,m),bu(u,_),r);y<t&&a.push([y,m,_])}function Ac(a,t,r,s,u=1/0){let m=Math.min(s.distance(a[0],r[0][0]),u);if(m===0)return m;const _=new fh([[0,[0,a.length-1],[0,0]]],Ia),y=xu(r);for(;_.length>0;){const b=_.pop();if(b[0]>=m)continue;const T=b[1],E=t?50:100;if(us(T)<=E){if(!On(T,a.length))return NaN;if(t){const L=Ys(a,T,r,s);if(isNaN(L)||L===0)return L;m=Math.min(m,L)}else for(let L=T[0];L<=T[1];++L){const V=Md(a[L],r,s);if(m=Math.min(m,V),m===0)return 0}}else{const L=yu(T,t);xh(_,m,s,a,y,L[0]),xh(_,m,s,a,y,L[1])}}return m}function Ec(a,t,r,s,u,m=1/0){let _=Math.min(m,u.distance(a[0],r[0]));if(_===0)return _;const y=new fh([[0,[0,a.length-1],[0,r.length-1]]],Ia);for(;y.length>0;){const b=y.pop();if(b[0]>=_)continue;const T=b[1],E=b[2],L=t?50:100,V=s?50:100;if(us(T)<=L&&us(E)<=V){if(!On(T,a.length)&&On(E,r.length))return NaN;let $;if(t&&s)$=Mc(a,T,r,E,u),_=Math.min(_,$);else if(t&&!s){const N=a.slice(T[0],T[1]+1);for(let G=E[0];G<=E[1];++G)if($=fn(r[G],N,u),_=Math.min(_,$),_===0)return _}else if(!t&&s){const N=r.slice(E[0],E[1]+1);for(let G=T[0];G<=T[1];++G)if($=fn(a[G],N,u),_=Math.min(_,$),_===0)return _}else $=yh(a,T,r,E,u),_=Math.min(_,$)}else{const $=yu(T,t),N=yu(E,s);no(y,_,u,a,r,$[0],N[0]),no(y,_,u,a,r,$[0],N[1]),no(y,_,u,a,r,$[1],N[0]),no(y,_,u,a,r,$[1],N[1])}}return _}function Cu(a){return a.type==="MultiPolygon"?a.coordinates.map((t=>({type:"Polygon",coordinates:t}))):a.type==="MultiLineString"?a.coordinates.map((t=>({type:"LineString",coordinates:t}))):a.type==="MultiPoint"?a.coordinates.map((t=>({type:"Point",coordinates:t}))):[a]}class Ks{constructor(t,r){this.type=Xe,this.geojson=t,this.geometries=r}static parse(t,r){if(t.length!==2)return r.error(`'distance' expression requires exactly one argument, but found ${t.length-1} instead.`);if(ls(t[1])){const s=t[1];if(s.type==="FeatureCollection")return new Ks(s,s.features.map((u=>Cu(u.geometry))).flat());if(s.type==="Feature")return new Ks(s,Cu(s.geometry));if("type"in s&&"coordinates"in s)return new Ks(s,Cu(s))}return r.error("'distance' expression requires valid geojson object that contains polygon geometry type.")}evaluate(t){if(t.geometry()!=null&&t.canonicalID()!=null){if(t.geometryType()==="Point")return(function(r,s){const u=r.geometry(),m=u.flat().map((b=>gu([b.x,b.y],r.canonical)));if(u.length===0)return NaN;const _=new vh(m[0][1]);let y=1/0;for(const b of s){switch(b.type){case"Point":y=Math.min(y,Ec(m,!1,[b.coordinates],!1,_,y));break;case"LineString":y=Math.min(y,Ec(m,!1,b.coordinates,!0,_,y));break;case"Polygon":y=Math.min(y,Ac(m,!1,b.coordinates,_,y))}if(y===0)return y}return y})(t,this.geometries);if(t.geometryType()==="LineString")return(function(r,s){const u=r.geometry(),m=u.flat().map((b=>gu([b.x,b.y],r.canonical)));if(u.length===0)return NaN;const _=new vh(m[0][1]);let y=1/0;for(const b of s){switch(b.type){case"Point":y=Math.min(y,Ec(m,!0,[b.coordinates],!1,_,y));break;case"LineString":y=Math.min(y,Ec(m,!0,b.coordinates,!0,_,y));break;case"Polygon":y=Math.min(y,Ac(m,!0,b.coordinates,_,y))}if(y===0)return y}return y})(t,this.geometries);if(t.geometryType()==="Polygon")return(function(r,s){const u=r.geometry();if(u.length===0||u[0].length===0)return NaN;const m=Xs(u,0).map((b=>b.map((T=>T.map((E=>gu([E.x,E.y],r.canonical))))))),_=new vh(m[0][0][0][1]);let y=1/0;for(const b of s)for(const T of m){switch(b.type){case"Point":y=Math.min(y,Ac([b.coordinates],!1,T,_,y));break;case"LineString":y=Math.min(y,Ac(b.coordinates,!0,T,_,y));break;case"Polygon":y=Math.min(y,bh(T,b.coordinates,_,y))}if(y===0)return y}return y})(t,this.geometries)}return NaN}eachChild(){}outputDefined(){return!0}}class zc{constructor(t){this.type=Mt,this.key=t}static parse(t,r){if(t.length!==2)return r.error(`Expected 1 argument, but found ${t.length-1} instead.`);const s=t[1];return s==null?r.error("Global state property must be defined."):typeof s!="string"?r.error(`Global state property must be string, but found ${typeof t[1]} instead.`):new zc(s)}evaluate(t){var r;const s=(r=t.globals)===null||r===void 0?void 0:r.globalState;return s&&Object.keys(s).length!==0?kl(s,this.key):null}eachChild(){}outputDefined(){return!1}}const $l={"==":pu,"!=":bc,">":yd,"<":In,">=":Cp,"<=":fu,array:St,at:zo,boolean:St,case:hu,coalesce:Zs,collator:Bl,format:mu,image:hh,in:Us,"index-of":yc,interpolate:ba,"interpolate-hcl":ba,"interpolate-lab":ba,length:dh,let:Eo,literal:pn,match:uu,number:St,"number-format":uh,object:St,slice:Ln,step:cs,string:St,"to-boolean":Vt,"to-color":Vt,"to-number":Vt,"to-string":Vt,var:Ns,within:Bn,distance:Ks,"global-state":zc};class Ua{constructor(t,r,s,u){this.name=t,this.type=r,this._evaluate=s,this.args=u}evaluate(t){return this._evaluate(t,this.args)}eachChild(t){this.args.forEach(t)}outputDefined(){return!1}static parse(t,r){const s=t[0],u=Ua.definitions[s];if(!u)return r.error(`Unknown expression "${s}". If you wanted a literal array, use ["literal", [...]].`,0);const m=Array.isArray(u)?u[0]:u.type,_=Array.isArray(u)?[[u[1],u[2]]]:u.overloads,y=_.filter((([T])=>!Array.isArray(T)||T.length===t.length-1));let b=null;for(const[T,E]of y){b=new Ll(r.registry,Ca,r.path,null,r.scope);const L=[];let V=!1;for(let $=1;$<t.length;$++){const N=t[$],G=Array.isArray(T)?T[$-1]:T.type,Q=b.parse(N,1+L.length,G);if(!Q){V=!0;break}L.push(Q)}if(!V)if(Array.isArray(T)&&T.length!==L.length)b.error(`Expected ${T.length} arguments, but found ${L.length} instead.`);else{for(let $=0;$<L.length;$++){const N=Array.isArray(T)?T[$]:T.type,G=L[$];b.concat($+1).checkSubtype(N,G.type)}if(b.errors.length===0)return new Ua(s,m,E,L)}}if(y.length===1)r.errors.push(...b.errors);else{const T=(y.length?y:_).map((([L])=>{return V=L,Array.isArray(V)?`(${V.map(jt).join(", ")})`:`(${jt(V.type)}...)`;var V})).join(" | "),E=[];for(let L=1;L<t.length;L++){const V=r.parse(t[L],1+E.length);if(!V)return null;E.push(jt(V.type))}r.error(`Expected arguments of type ${T}, but found (${E.join(", ")}) instead.`)}return null}static register(t,r){Ua.definitions=r;for(const s in r)t[s]=Ua}}function wh(a,[t,r,s,u]){t=t.evaluate(a),r=r.evaluate(a),s=s.evaluate(a);const m=u?u.evaluate(a):1,_=ao(t,r,s,m);if(_)throw new Vi(_);return new It(t/255,r/255,s/255,m,!1)}function Su(a,t){return a in t}function Za(a,t){const r=t[a];return r===void 0?null:r}function oo(a){return{type:a}}function Ca(a){if(a instanceof Ns)return Ca(a.boundExpression);if(a instanceof Ua&&a.name==="error"||a instanceof Bl||a instanceof Bn||a instanceof Ks||a instanceof zc)return!1;const t=a instanceof Vt||a instanceof St;let r=!0;return a.eachChild((s=>{r=t?r&&Ca(s):r&&s instanceof pn})),!!r&&Po(a)&&Js(a,["zoom","heatmap-density","elevation","line-progress","accumulated","is-supported-script"])}function Po(a){if(a instanceof Ua&&(a.name==="get"&&a.args.length===1||a.name==="feature-state"||a.name==="has"&&a.args.length===1||a.name==="properties"||a.name==="geometry-type"||a.name==="id"||/^filter-/.test(a.name))||a instanceof Bn||a instanceof Ks)return!1;let t=!0;return a.eachChild((r=>{t&&!Po(r)&&(t=!1)})),t}function Ws(a){if(a instanceof Ua&&a.name==="feature-state")return!1;let t=!0;return a.eachChild((r=>{t&&!Ws(r)&&(t=!1)})),t}function Js(a,t){if(a instanceof Ua&&t.indexOf(a.name)>=0)return!1;let r=!0;return a.eachChild((s=>{r&&!Js(s,t)&&(r=!1)})),r}function Pc(a){return{result:"success",value:a}}function hs(a){return{result:"error",value:a}}function mn(a){return a["property-type"]==="data-driven"||a["property-type"]==="cross-faded-data-driven"}function Ch(a){return!!a.expression&&a.expression.parameters.indexOf("zoom")>-1}function Fl(a){return!!a.expression&&a.expression.interpolated}function Nt(a){return a instanceof Number?"number":a instanceof String?"string":a instanceof Boolean?"boolean":Array.isArray(a)?"array":a===null?"null":typeof a}function Nl(a){return typeof a=="object"&&a!==null&&!Array.isArray(a)&&$i(a)===to}function Ha(a){return a}function Tu(a,t){const r=a.stops&&typeof a.stops[0][0]=="object",s=r||!(r||a.property!==void 0),u=a.type||(Fl(t)?"exponential":"interval"),m=(function(E){switch(E.type){case"color":return It.parse;case"padding":return cr.parse;case"numberArray":return Kr.parse;case"colorArray":return yr.parse;default:return null}})(t);if(m&&((a=er({},a)).stops&&(a.stops=a.stops.map((E=>[E[0],m(E[1])]))),a.default=m(a.default?a.default:t.default)),a.colorSpace&&(_=a.colorSpace)!=="rgb"&&_!=="hcl"&&_!=="lab")throw new Error(`Unknown color space: "${a.colorSpace}"`);var _;const y=(function(E){switch(E){case"exponential":return ds;case"interval":return Mu;case"categorical":return Sh;case"identity":return Ul;default:throw new Error(`Unknown function type "${E}"`)}})(u);let b,T;if(u==="categorical"){b=Object.create(null);for(const E of a.stops)b[E[0]]=E[1];T=typeof a.stops[0][0]}if(r){const E={},L=[];for(let N=0;N<a.stops.length;N++){const G=a.stops[N],Q=G[0].zoom;E[Q]===void 0&&(E[Q]={zoom:Q,type:a.type,property:a.property,default:a.default,stops:[]},L.push(Q)),E[Q].stops.push([G[0].value,G[1]])}const V=[];for(const N of L)V.push([E[N].zoom,Tu(E[N],t)]);const $={name:"linear"};return{kind:"composite",interpolationType:$,interpolationFactor:ba.interpolationFactor.bind(void 0,$),zoomStops:V.map((N=>N[0])),evaluate:({zoom:N},G)=>ds({stops:V,base:a.base},t,N).evaluate(N,G)}}if(s){const E=u==="exponential"?{name:"exponential",base:a.base!==void 0?a.base:1}:null;return{kind:"camera",interpolationType:E,interpolationFactor:ba.interpolationFactor.bind(void 0,E),zoomStops:a.stops.map((L=>L[0])),evaluate:({zoom:L})=>y(a,t,L,b,T)}}return{kind:"source",evaluate(E,L){const V=L&&L.properties?L.properties[a.property]:void 0;return V===void 0?Ga(a.default,t.default):y(a,t,V,b,T)}}}function Ga(a,t,r){return a!==void 0?a:t!==void 0?t:r!==void 0?r:void 0}function Sh(a,t,r,s,u){return Ga(typeof r===u?s[r]:void 0,a.default,t.default)}function Mu(a,t,r){if(Nt(r)!=="number")return Ga(a.default,t.default);const s=a.stops.length;if(s===1||r<=a.stops[0][0])return a.stops[0][1];if(r>=a.stops[s-1][0])return a.stops[s-1][1];const u=br(a.stops.map((m=>m[0])),r);return a.stops[u][1]}function ds(a,t,r){const s=a.base!==void 0?a.base:1;if(Nt(r)!=="number")return Ga(a.default,t.default);const u=a.stops.length;if(u===1||r<=a.stops[0][0])return a.stops[0][1];if(r>=a.stops[u-1][0])return a.stops[u-1][1];const m=br(a.stops.map((E=>E[0])),r),_=(function(E,L,V,$){const N=$-V,G=E-V;return N===0?0:L===1?G/N:(Math.pow(L,G)-1)/(Math.pow(L,N)-1)})(r,s,a.stops[m][0],a.stops[m+1][0]),y=a.stops[m][1],b=a.stops[m+1][1],T=xa[t.type]||Ha;return typeof y.evaluate=="function"?{evaluate(...E){const L=y.evaluate.apply(void 0,E),V=b.evaluate.apply(void 0,E);if(L!==void 0&&V!==void 0)return T(L,V,_,a.colorSpace)}}:T(y,b,_,a.colorSpace)}function Ul(a,t,r){switch(t.type){case"color":r=It.parse(r);break;case"formatted":r=fr.fromString(r.toString());break;case"resolvedImage":r=Br.fromString(r.toString());break;case"padding":r=cr.parse(r);break;case"colorArray":r=yr.parse(r);break;case"numberArray":r=Kr.parse(r);break;default:Nt(r)===t.type||t.type==="enum"&&t.values[r]||(r=void 0)}return Ga(r,a.default,t.default)}Ua.register($l,{error:[{kind:"error"},[Lt],(a,[t])=>{throw new Vi(t.evaluate(a))}],typeof:[Lt,[Mt],(a,[t])=>jt($i(t.evaluate(a)))],"to-rgba":[la(Xe,4),[cn],(a,[t])=>{const[r,s,u,m]=t.evaluate(a).rgb;return[255*r,255*s,255*u,m]}],rgb:[cn,[Xe,Xe,Xe],wh],rgba:[cn,[Xe,Xe,Xe,Xe],wh],has:{type:Ft,overloads:[[[Lt],(a,[t])=>Su(t.evaluate(a),a.properties())],[[Lt,to],(a,[t,r])=>Su(t.evaluate(a),r.evaluate(a))]]},get:{type:Mt,overloads:[[[Lt],(a,[t])=>Za(t.evaluate(a),a.properties())],[[Lt,to],(a,[t,r])=>Za(t.evaluate(a),r.evaluate(a))]]},"feature-state":[Mt,[Lt],(a,[t])=>Za(t.evaluate(a),a.featureState||{})],properties:[to,[],a=>a.properties()],"geometry-type":[Lt,[],a=>a.geometryType()],id:[Mt,[],a=>a.id()],zoom:[Xe,[],a=>a.globals.zoom],"heatmap-density":[Xe,[],a=>a.globals.heatmapDensity||0],elevation:[Xe,[],a=>a.globals.elevation||0],"line-progress":[Xe,[],a=>a.globals.lineProgress||0],accumulated:[Mt,[],a=>a.globals.accumulated===void 0?null:a.globals.accumulated],"+":[Xe,oo(Xe),(a,t)=>{let r=0;for(const s of t)r+=s.evaluate(a);return r}],"*":[Xe,oo(Xe),(a,t)=>{let r=1;for(const s of t)r*=s.evaluate(a);return r}],"-":{type:Xe,overloads:[[[Xe,Xe],(a,[t,r])=>t.evaluate(a)-r.evaluate(a)],[[Xe],(a,[t])=>-t.evaluate(a)]]},"/":[Xe,[Xe,Xe],(a,[t,r])=>t.evaluate(a)/r.evaluate(a)],"%":[Xe,[Xe,Xe],(a,[t,r])=>t.evaluate(a)%r.evaluate(a)],ln2:[Xe,[],()=>Math.LN2],pi:[Xe,[],()=>Math.PI],e:[Xe,[],()=>Math.E],"^":[Xe,[Xe,Xe],(a,[t,r])=>Math.pow(t.evaluate(a),r.evaluate(a))],sqrt:[Xe,[Xe],(a,[t])=>Math.sqrt(t.evaluate(a))],log10:[Xe,[Xe],(a,[t])=>Math.log(t.evaluate(a))/Math.LN10],ln:[Xe,[Xe],(a,[t])=>Math.log(t.evaluate(a))],log2:[Xe,[Xe],(a,[t])=>Math.log(t.evaluate(a))/Math.LN2],sin:[Xe,[Xe],(a,[t])=>Math.sin(t.evaluate(a))],cos:[Xe,[Xe],(a,[t])=>Math.cos(t.evaluate(a))],tan:[Xe,[Xe],(a,[t])=>Math.tan(t.evaluate(a))],asin:[Xe,[Xe],(a,[t])=>Math.asin(t.evaluate(a))],acos:[Xe,[Xe],(a,[t])=>Math.acos(t.evaluate(a))],atan:[Xe,[Xe],(a,[t])=>Math.atan(t.evaluate(a))],min:[Xe,oo(Xe),(a,t)=>Math.min(...t.map((r=>r.evaluate(a))))],max:[Xe,oo(Xe),(a,t)=>Math.max(...t.map((r=>r.evaluate(a))))],abs:[Xe,[Xe],(a,[t])=>Math.abs(t.evaluate(a))],round:[Xe,[Xe],(a,[t])=>{const r=t.evaluate(a);return r<0?-Math.round(-r):Math.round(r)}],floor:[Xe,[Xe],(a,[t])=>Math.floor(t.evaluate(a))],ceil:[Xe,[Xe],(a,[t])=>Math.ceil(t.evaluate(a))],"filter-==":[Ft,[Lt,Mt],(a,[t,r])=>a.properties()[t.value]===r.value],"filter-id-==":[Ft,[Mt],(a,[t])=>a.id()===t.value],"filter-type-==":[Ft,[Lt],(a,[t])=>a.geometryType()===t.value],"filter-<":[Ft,[Lt,Mt],(a,[t,r])=>{const s=a.properties()[t.value],u=r.value;return typeof s==typeof u&&s<u}],"filter-id-<":[Ft,[Mt],(a,[t])=>{const r=a.id(),s=t.value;return typeof r==typeof s&&r<s}],"filter->":[Ft,[Lt,Mt],(a,[t,r])=>{const s=a.properties()[t.value],u=r.value;return typeof s==typeof u&&s>u}],"filter-id->":[Ft,[Mt],(a,[t])=>{const r=a.id(),s=t.value;return typeof r==typeof s&&r>s}],"filter-<=":[Ft,[Lt,Mt],(a,[t,r])=>{const s=a.properties()[t.value],u=r.value;return typeof s==typeof u&&s<=u}],"filter-id-<=":[Ft,[Mt],(a,[t])=>{const r=a.id(),s=t.value;return typeof r==typeof s&&r<=s}],"filter->=":[Ft,[Lt,Mt],(a,[t,r])=>{const s=a.properties()[t.value],u=r.value;return typeof s==typeof u&&s>=u}],"filter-id->=":[Ft,[Mt],(a,[t])=>{const r=a.id(),s=t.value;return typeof r==typeof s&&r>=s}],"filter-has":[Ft,[Mt],(a,[t])=>t.value in a.properties()],"filter-has-id":[Ft,[],a=>a.id()!==null&&a.id()!==void 0],"filter-type-in":[Ft,[la(Lt)],(a,[t])=>t.value.indexOf(a.geometryType())>=0],"filter-id-in":[Ft,[la(Mt)],(a,[t])=>t.value.indexOf(a.id())>=0],"filter-in-small":[Ft,[Lt,la(Mt)],(a,[t,r])=>r.value.indexOf(a.properties()[t.value])>=0],"filter-in-large":[Ft,[Lt,la(Mt)],(a,[t,r])=>(function(s,u,m,_){for(;m<=_;){const y=m+_>>1;if(u[y]===s)return!0;u[y]>s?_=y-1:m=y+1}return!1})(a.properties()[t.value],r.value,0,r.value.length-1)],all:{type:Ft,overloads:[[[Ft,Ft],(a,[t,r])=>t.evaluate(a)&&r.evaluate(a)],[oo(Ft),(a,t)=>{for(const r of t)if(!r.evaluate(a))return!1;return!0}]]},any:{type:Ft,overloads:[[[Ft,Ft],(a,[t,r])=>t.evaluate(a)||r.evaluate(a)],[oo(Ft),(a,t)=>{for(const r of t)if(r.evaluate(a))return!0;return!1}]]},"!":[Ft,[Ft],(a,[t])=>!t.evaluate(a)],"is-supported-script":[Ft,[Lt],(a,[t])=>{const r=a.globals&&a.globals.isSupportedScript;return!r||r(t.evaluate(a))}],upcase:[Lt,[Lt],(a,[t])=>t.evaluate(a).toUpperCase()],downcase:[Lt,[Lt],(a,[t])=>t.evaluate(a).toLowerCase()],concat:[Lt,oo(Mt),(a,t)=>t.map((r=>Ci(r.evaluate(a)))).join("")],"resolved-locale":[Lt,[So],(a,[t])=>t.evaluate(a).resolvedLocale()]});class kc{constructor(t,r,s){this.expression=t,this._warningHistory={},this._evaluator=new La,this._defaultValue=r?(function(u){if(u.type==="color"&&Nl(u.default))return new It(0,0,0,0);switch(u.type){case"color":return It.parse(u.default)||null;case"padding":return cr.parse(u.default)||null;case"numberArray":return Kr.parse(u.default)||null;case"colorArray":return yr.parse(u.default)||null;case"variableAnchorOffsetCollection":return Qi.parse(u.default)||null;case"projectionDefinition":return qr.parse(u.default)||null;default:return u.default===void 0?null:u.default}})(r):null,this._enumValues=r&&r.type==="enum"?r.values:null,this._globalState=s}evaluateWithoutErrorHandling(t,r,s,u,m,_){return this._globalState&&(t=Jr(t,this._globalState)),this._evaluator.globals=t,this._evaluator.feature=r,this._evaluator.featureState=s,this._evaluator.canonical=u,this._evaluator.availableImages=m||null,this._evaluator.formattedSection=_,this.expression.evaluate(this._evaluator)}evaluate(t,r,s,u,m,_){this._globalState&&(t=Jr(t,this._globalState)),this._evaluator.globals=t,this._evaluator.feature=r||null,this._evaluator.featureState=s||null,this._evaluator.canonical=u,this._evaluator.availableImages=m||null,this._evaluator.formattedSection=_||null;try{const y=this.expression.evaluate(this._evaluator);if(y==null||typeof y=="number"&&y!=y)return this._defaultValue;if(this._enumValues&&!(y in this._enumValues))throw new Vi(`Expected value to be one of ${Object.keys(this._enumValues).map((b=>JSON.stringify(b))).join(", ")}, but found ${JSON.stringify(y)} instead.`);return y}catch(y){return this._warningHistory[y.message]||(this._warningHistory[y.message]=!0,typeof console<"u"&&console.warn(y.message)),this._defaultValue}}}function Zl(a){return Array.isArray(a)&&a.length>0&&typeof a[0]=="string"&&a[0]in $l}function Dc(a,t,r){const s=new Ll($l,Ca,[],t?(function(m){const _={color:cn,string:Lt,number:Xe,enum:Lt,boolean:Ft,formatted:Pn,padding:kn,numberArray:un,colorArray:To,projectionDefinition:fc,resolvedImage:pr,variableAnchorOffsetCollection:io};return m.type==="array"?la(_[m.value]||Mt,m.length):_[m.type]})(t):void 0),u=s.parse(a,void 0,void 0,void 0,t&&t.type==="string"?{typeAnnotation:"coerce"}:void 0);return u?Pc(new kc(u,t,r)):hs(s.errors)}class Sa{constructor(t,r,s){this.kind=t,this._styleExpression=r,this.isStateDependent=t!=="constant"&&!Ws(r.expression),this.globalStateRefs=Ta(r.expression),this._globalState=s}evaluateWithoutErrorHandling(t,r,s,u,m,_){return this._globalState&&(t=Jr(t,this._globalState)),this._styleExpression.evaluateWithoutErrorHandling(t,r,s,u,m,_)}evaluate(t,r,s,u,m,_){return this._globalState&&(t=Jr(t,this._globalState)),this._styleExpression.evaluate(t,r,s,u,m,_)}}class ps{constructor(t,r,s,u,m){this.kind=t,this.zoomStops=s,this._styleExpression=r,this.isStateDependent=t!=="camera"&&!Ws(r.expression),this.globalStateRefs=Ta(r.expression),this.interpolationType=u,this._globalState=m}evaluateWithoutErrorHandling(t,r,s,u,m,_){return this._globalState&&(t=Jr(t,this._globalState)),this._styleExpression.evaluateWithoutErrorHandling(t,r,s,u,m,_)}evaluate(t,r,s,u,m,_){return this._globalState&&(t=Jr(t,this._globalState)),this._styleExpression.evaluate(t,r,s,u,m,_)}interpolationFactor(t,r,s){return this.interpolationType?ba.interpolationFactor(this.interpolationType,t,r,s):0}}function el(a,t,r){const s=Dc(a,t,r);if(s.result==="error")return s;const u=s.value.expression,m=Po(u);if(!m&&!mn(t))return hs([new sa("","data expressions not supported")]);const _=Js(u,["zoom"]);if(!_&&!Ch(t))return hs([new sa("","zoom expressions not supported")]);const y=ko(u);return y||_?y instanceof sa?hs([y]):y instanceof ba&&!Fl(t)?hs([new sa("",'"interpolate" expressions cannot be used with this property')]):Pc(y?new ps(m?"camera":"composite",s.value,y.labels,y instanceof ba?y.interpolation:void 0,r):new Sa(m?"constant":"source",s.value,r)):hs([new sa("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class fs{constructor(t,r){this._parameters=t,this._specification=r,er(this,Tu(this._parameters,this._specification))}static deserialize(t){return new fs(t._parameters,t._specification)}static serialize(t){return{_parameters:t._parameters,_specification:t._specification}}}function ko(a){let t=null;if(a instanceof Eo)t=ko(a.result);else if(a instanceof Zs){for(const r of a.args)if(t=ko(r),t)break}else(a instanceof cs||a instanceof ba)&&a.input instanceof Ua&&a.input.name==="zoom"&&(t=a);return t instanceof sa||a.eachChild((r=>{const s=ko(r);s instanceof sa?t=s:!t&&s?t=new sa("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):t&&s&&t!==s&&(t=new sa("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))})),t}function Ta(a,t=new Set){return a instanceof zc&&t.add(a.key),a.eachChild((r=>{Ta(r,t)})),t}function Jr(a,t){const{zoom:r,heatmapDensity:s,elevation:u,lineProgress:m,isSupportedScript:_,accumulated:y}=a??{};return{zoom:r,heatmapDensity:s,elevation:u,lineProgress:m,isSupportedScript:_,accumulated:y,globalState:t}}function jn(a){if(a===!0||a===!1)return!0;if(!Array.isArray(a)||a.length===0)return!1;switch(a[0]){case"has":return a.length>=2&&a[1]!=="$id"&&a[1]!=="$type";case"in":return a.length>=3&&(typeof a[1]!="string"||Array.isArray(a[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return a.length!==3||Array.isArray(a[1])||Array.isArray(a[2]);case"any":case"all":for(const t of a.slice(1))if(!jn(t)&&typeof t!="boolean")return!1;return!0;default:return!0}}const Vn={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function Ma(a,t){if(a==null)return{filter:()=>!0,needGeometry:!1,getGlobalStateRefs:()=>new Set};jn(a)||(a=Hl(a));const r=Dc(a,Vn,t);if(r.result==="error")throw new Error(r.value.map((s=>`${s.key}: ${s.message}`)).join(", "));return{filter:(s,u,m)=>r.value.evaluate(s,u,{},m),needGeometry:Th(a),getGlobalStateRefs:()=>Ta(r.value.expression)}}function Do(a,t){return a<t?-1:a>t?1:0}function Th(a){if(!Array.isArray(a))return!1;if(a[0]==="within"||a[0]==="distance")return!0;for(let t=1;t<a.length;t++)if(Th(a[t]))return!0;return!1}function Hl(a){if(!a)return!0;const t=a[0];return a.length<=1?t!=="any":t==="=="?Lc(a[1],a[2],"=="):t==="!="?Si(Lc(a[1],a[2],"==")):t==="<"||t===">"||t==="<="||t===">="?Lc(a[1],a[2],t):t==="any"?(r=a.slice(1),["any"].concat(r.map(Hl))):t==="all"?["all"].concat(a.slice(1).map(Hl)):t==="none"?["all"].concat(a.slice(1).map(Hl).map(Si)):t==="in"?Au(a[1],a.slice(2)):t==="!in"?Si(Au(a[1],a.slice(2))):t==="has"?jr(a[1]):t!=="!has"||Si(jr(a[1]));var r}function Lc(a,t,r){switch(a){case"$type":return[`filter-type-${r}`,t];case"$id":return[`filter-id-${r}`,t];default:return[`filter-${r}`,a,t]}}function Au(a,t){if(t.length===0)return!1;switch(a){case"$type":return["filter-type-in",["literal",t]];case"$id":return["filter-id-in",["literal",t]];default:return t.length>200&&!t.some((r=>typeof r!=typeof t[0]))?["filter-in-large",a,["literal",t.sort(Do)]]:["filter-in-small",a,["literal",t]]}}function jr(a){switch(a){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",a]}}function Si(a){return["!",a]}function ri(a){const t=typeof a;if(t==="number"||t==="boolean"||t==="string"||a==null)return JSON.stringify(a);if(Array.isArray(a)){let u="[";for(const m of a)u+=`${ri(m)},`;return`${u}]`}const r=Object.keys(a).sort();let s="{";for(let u=0;u<r.length;u++)s+=`${JSON.stringify(r[u])}:${ri(a[r[u]])},`;return`${s}}`}function so(a){let t="";for(const r of qt)t+=`/${ri(a[r])}`;return t}function Aa(a){const t=a.value;return t?[new Fe(a.key,t,"constants have been deprecated as of v8")]:[]}function Fi(a){return a instanceof Number||a instanceof String||a instanceof Boolean?a.valueOf():a}function Ra(a){if(Array.isArray(a))return a.map(Ra);if(a instanceof Object&&!(a instanceof Number||a instanceof String||a instanceof Boolean)){const t={};for(const r in a)t[r]=Ra(a[r]);return t}return Fi(a)}function qa(a){const t=a.key,r=a.value,s=a.valueSpec||{},u=a.objectElementValidators||{},m=a.style,_=a.styleSpec,y=a.validateSpec;let b=[];const T=Nt(r);if(T!=="object")return[new Fe(t,r,`object expected, ${T} found`)];for(const E in r){const L=E.split(".")[0],V=kl(s,L)||s["*"];let $;if(kl(u,L))$=u[L];else if(kl(s,L))$=y;else if(u["*"])$=u["*"];else{if(!s["*"]){b.push(new Fe(t,r[E],`unknown property "${E}"`));continue}$=y}b=b.concat($({key:(t&&`${t}.`)+E,value:r[E],valueSpec:V,style:m,styleSpec:_,object:r,objectKey:E,validateSpec:y},r))}for(const E in s)u[E]||s[E].required&&s[E].default===void 0&&r[E]===void 0&&b.push(new Fe(t,r,`missing required property "${E}"`));return b}function Eu(a){const t=a.value,r=a.valueSpec,s=a.style,u=a.styleSpec,m=a.key,_=a.arrayElementValidator||a.validateSpec;if(Nt(t)!=="array")return[new Fe(m,t,`array expected, ${Nt(t)} found`)];if(r.length&&t.length!==r.length)return[new Fe(m,t,`array length ${r.length} expected, length ${t.length} found`)];if(r["min-length"]&&t.length<r["min-length"])return[new Fe(m,t,`array length at least ${r["min-length"]} expected, length ${t.length} found`)];let y={type:r.value,values:r.values};u.$version<7&&(y.function=r.function),Nt(r.value)==="object"&&(y=r.value);let b=[];for(let T=0;T<t.length;T++)b=b.concat(_({array:t,arrayIndex:T,value:t[T],valueSpec:y,validateSpec:a.validateSpec,style:s,styleSpec:u,key:`${m}[${T}]`}));return b}function Lo(a){const t=a.key,r=a.value,s=a.valueSpec;let u=Nt(r);return u==="number"&&r!=r&&(u="NaN"),u!=="number"?[new Fe(t,r,`number expected, ${u} found`)]:"minimum"in s&&r<s.minimum?[new Fe(t,r,`${r} is less than the minimum value ${s.minimum}`)]:"maximum"in s&&r>s.maximum?[new Fe(t,r,`${r} is greater than the maximum value ${s.maximum}`)]:[]}function ms(a){const t=a.valueSpec,r=Fi(a.value.type);let s,u,m,_={};const y=r!=="categorical"&&a.value.property===void 0,b=!y,T=Nt(a.value.stops)==="array"&&Nt(a.value.stops[0])==="array"&&Nt(a.value.stops[0][0])==="object",E=qa({key:a.key,value:a.value,valueSpec:a.styleSpec.function,validateSpec:a.validateSpec,style:a.style,styleSpec:a.styleSpec,objectElementValidators:{stops:function($){if(r==="identity")return[new Fe($.key,$.value,'identity function may not have a "stops" property')];let N=[];const G=$.value;return N=N.concat(Eu({key:$.key,value:G,valueSpec:$.valueSpec,validateSpec:$.validateSpec,style:$.style,styleSpec:$.styleSpec,arrayElementValidator:L})),Nt(G)==="array"&&G.length===0&&N.push(new Fe($.key,G,"array must have at least one stop")),N},default:function($){return $.validateSpec({key:$.key,value:$.value,valueSpec:t,validateSpec:$.validateSpec,style:$.style,styleSpec:$.styleSpec})}}});return r==="identity"&&y&&E.push(new Fe(a.key,a.value,'missing required property "property"')),r==="identity"||a.value.stops||E.push(new Fe(a.key,a.value,'missing required property "stops"')),r==="exponential"&&a.valueSpec.expression&&!Fl(a.valueSpec)&&E.push(new Fe(a.key,a.value,"exponential functions not supported")),a.styleSpec.$version>=8&&(b&&!mn(a.valueSpec)?E.push(new Fe(a.key,a.value,"property functions not supported")):y&&!Ch(a.valueSpec)&&E.push(new Fe(a.key,a.value,"zoom functions not supported"))),r!=="categorical"&&!T||a.value.property!==void 0||E.push(new Fe(a.key,a.value,'"property" property is required')),E;function L($){let N=[];const G=$.value,Q=$.key;if(Nt(G)!=="array")return[new Fe(Q,G,`array expected, ${Nt(G)} found`)];if(G.length!==2)return[new Fe(Q,G,`array length 2 expected, length ${G.length} found`)];if(T){if(Nt(G[0])!=="object")return[new Fe(Q,G,`object expected, ${Nt(G[0])} found`)];if(G[0].zoom===void 0)return[new Fe(Q,G,"object stop key must have zoom")];if(G[0].value===void 0)return[new Fe(Q,G,"object stop key must have value")];if(m&&m>Fi(G[0].zoom))return[new Fe(Q,G[0].zoom,"stop zoom values must appear in ascending order")];Fi(G[0].zoom)!==m&&(m=Fi(G[0].zoom),u=void 0,_={}),N=N.concat(qa({key:`${Q}[0]`,value:G[0],valueSpec:{zoom:{}},validateSpec:$.validateSpec,style:$.style,styleSpec:$.styleSpec,objectElementValidators:{zoom:Lo,value:V}}))}else N=N.concat(V({key:`${Q}[0]`,value:G[0],validateSpec:$.validateSpec,style:$.style,styleSpec:$.styleSpec},G));return Zl(Ra(G[1]))?N.concat([new Fe(`${Q}[1]`,G[1],"expressions are not allowed in function stops.")]):N.concat($.validateSpec({key:`${Q}[1]`,value:G[1],valueSpec:t,validateSpec:$.validateSpec,style:$.style,styleSpec:$.styleSpec}))}function V($,N){const G=Nt($.value),Q=Fi($.value),ee=$.value!==null?$.value:N;if(s){if(G!==s)return[new Fe($.key,ee,`${G} stop domain type must match previous stop domain type ${s}`)]}else s=G;if(G!=="number"&&G!=="string"&&G!=="boolean")return[new Fe($.key,ee,"stop domain value must be a number, string, or boolean")];if(G!=="number"&&r!=="categorical"){let _e=`number expected, ${G} found`;return mn(t)&&r===void 0&&(_e+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new Fe($.key,ee,_e)]}return r!=="categorical"||G!=="number"||isFinite(Q)&&Math.floor(Q)===Q?r!=="categorical"&&G==="number"&&u!==void 0&&Q<u?[new Fe($.key,ee,"stop domain values must appear in ascending order")]:(u=Q,r==="categorical"&&Q in _?[new Fe($.key,ee,"stop domain values must be unique")]:(_[Q]=!0,[])):[new Fe($.key,ee,`integer expected, found ${Q}`)]}}function gs(a){const t=(a.expressionContext==="property"?el:Dc)(Ra(a.value),a.valueSpec);if(t.result==="error")return t.value.map((s=>new Fe(`${a.key}${s.key}`,a.value,s.message)));const r=t.value.expression||t.value._styleExpression.expression;if(a.expressionContext==="property"&&a.propertyKey==="text-font"&&!r.outputDefined())return[new Fe(a.key,a.value,`Invalid data expression for "${a.propertyKey}". Output values must be contained as literals within the expression.`)];if(a.expressionContext==="property"&&a.propertyType==="layout"&&!Ws(r))return[new Fe(a.key,a.value,'"feature-state" data expressions are not supported with layout properties.')];if(a.expressionContext==="filter"&&!Ws(r))return[new Fe(a.key,a.value,'"feature-state" data expressions are not supported with filters.')];if(a.expressionContext&&a.expressionContext.indexOf("cluster")===0){if(!Js(r,["zoom","feature-state"]))return[new Fe(a.key,a.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(a.expressionContext==="cluster-initial"&&!Po(r))return[new Fe(a.key,a.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function _s(a){const t=a.key,r=a.value,s=Nt(r);return s!=="string"?[new Fe(t,r,`color expected, ${s} found`)]:It.parse(String(r))?[]:[new Fe(t,r,`color expected, "${r}" found`)]}function vs(a){const t=a.key,r=a.value,s=a.valueSpec,u=[];return Array.isArray(s.values)?s.values.indexOf(Fi(r))===-1&&u.push(new Fe(t,r,`expected one of [${s.values.join(", ")}], ${JSON.stringify(r)} found`)):Object.keys(s.values).indexOf(Fi(r))===-1&&u.push(new Fe(t,r,`expected one of [${Object.keys(s.values).join(", ")}], ${JSON.stringify(r)} found`)),u}function gn(a){return jn(Ra(a.value))?gs(er({},a,{expressionContext:"filter",valueSpec:{value:"boolean"}})):lo(a)}function lo(a){const t=a.value,r=a.key;if(Nt(t)!=="array")return[new Fe(r,t,`array expected, ${Nt(t)} found`)];const s=a.styleSpec;let u,m=[];if(t.length<1)return[new Fe(r,t,"filter array must have at least 1 element")];switch(m=m.concat(vs({key:`${r}[0]`,value:t[0],valueSpec:s.filter_operator,style:a.style,styleSpec:a.styleSpec})),Fi(t[0])){case"<":case"<=":case">":case">=":t.length>=2&&Fi(t[1])==="$type"&&m.push(new Fe(r,t,`"$type" cannot be use with operator "${t[0]}"`));case"==":case"!=":t.length!==3&&m.push(new Fe(r,t,`filter array for operator "${t[0]}" must have 3 elements`));case"in":case"!in":t.length>=2&&(u=Nt(t[1]),u!=="string"&&m.push(new Fe(`${r}[1]`,t[1],`string expected, ${u} found`)));for(let _=2;_<t.length;_++)u=Nt(t[_]),Fi(t[1])==="$type"?m=m.concat(vs({key:`${r}[${_}]`,value:t[_],valueSpec:s.geometry_type,style:a.style,styleSpec:a.styleSpec})):u!=="string"&&u!=="number"&&u!=="boolean"&&m.push(new Fe(`${r}[${_}]`,t[_],`string, number, or boolean expected, ${u} found`));break;case"any":case"all":case"none":for(let _=1;_<t.length;_++)m=m.concat(lo({key:`${r}[${_}]`,value:t[_],style:a.style,styleSpec:a.styleSpec}));break;case"has":case"!has":u=Nt(t[1]),t.length!==2?m.push(new Fe(r,t,`filter array for "${t[0]}" operator must have 2 elements`)):u!=="string"&&m.push(new Fe(`${r}[1]`,t[1],`string expected, ${u} found`))}return m}function co(a,t){const r=a.key,s=a.validateSpec,u=a.style,m=a.styleSpec,_=a.value,y=a.objectKey,b=m[`${t}_${a.layerType}`];if(!b)return[];const T=y.match(/^(.*)-transition$/);if(t==="paint"&&T&&b[T[1]]&&b[T[1]].transition)return s({key:r,value:_,valueSpec:m.transition,style:u,styleSpec:m});const E=a.valueSpec||b[y];if(!E)return[new Fe(r,_,`unknown property "${y}"`)];let L;if(Nt(_)==="string"&&mn(E)&&!E.tokens&&(L=/^{([^}]+)}$/.exec(_)))return[new Fe(r,_,`"${y}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(L[1])} }\`.`)];const V=[];return a.layerType==="symbol"&&(y==="text-field"&&u&&!u.glyphs&&V.push(new Fe(r,_,'use of "text-field" requires a style "glyphs" property')),y==="text-font"&&Nl(Ra(_))&&Fi(_.type)==="identity"&&V.push(new Fe(r,_,'"text-font" does not support identity functions'))),V.concat(s({key:a.key,value:_,valueSpec:E,style:u,styleSpec:m,expressionContext:"property",propertyType:t,propertyKey:y}))}function $n(a){return co(a,"paint")}function zu(a){return co(a,"layout")}function Ic(a){let t=[];const r=a.value,s=a.key,u=a.style,m=a.styleSpec;if(Nt(r)!=="object")return[new Fe(s,r,`object expected, ${Nt(r)} found`)];r.type||r.ref||t.push(new Fe(s,r,'either "type" or "ref" is required'));let _=Fi(r.type);const y=Fi(r.ref);if(r.id){const b=Fi(r.id);for(let T=0;T<a.arrayIndex;T++){const E=u.layers[T];Fi(E.id)===b&&t.push(new Fe(s,r.id,`duplicate layer id "${r.id}", previously used at line ${E.id.__line__}`))}}if("ref"in r){let b;["type","source","source-layer","filter","layout"].forEach((T=>{T in r&&t.push(new Fe(s,r[T],`"${T}" is prohibited for ref layers`))})),u.layers.forEach((T=>{Fi(T.id)===y&&(b=T)})),b?b.ref?t.push(new Fe(s,r.ref,"ref cannot reference another ref layer")):_=Fi(b.type):t.push(new Fe(s,r.ref,`ref layer "${y}" not found`))}else if(_!=="background")if(r.source){const b=u.sources&&u.sources[r.source],T=b&&Fi(b.type);b?T==="vector"&&_==="raster"?t.push(new Fe(s,r.source,`layer "${r.id}" requires a raster source`)):T!=="raster-dem"&&_==="hillshade"||T!=="raster-dem"&&_==="color-relief"?t.push(new Fe(s,r.source,`layer "${r.id}" requires a raster-dem source`)):T==="raster"&&_!=="raster"?t.push(new Fe(s,r.source,`layer "${r.id}" requires a vector source`)):T!=="vector"||r["source-layer"]?T==="raster-dem"&&_!=="hillshade"&&_!=="color-relief"?t.push(new Fe(s,r.source,"raster-dem source can only be used with layer type 'hillshade' or 'color-relief'.")):_!=="line"||!r.paint||!r.paint["line-gradient"]||T==="geojson"&&b.lineMetrics||t.push(new Fe(s,r,`layer "${r.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):t.push(new Fe(s,r,`layer "${r.id}" must specify a "source-layer"`)):t.push(new Fe(s,r.source,`source "${r.source}" not found`))}else t.push(new Fe(s,r,'missing required property "source"'));return t=t.concat(qa({key:s,value:r,valueSpec:m.layer,style:a.style,styleSpec:a.styleSpec,validateSpec:a.validateSpec,objectElementValidators:{"*":()=>[],type:()=>a.validateSpec({key:`${s}.type`,value:r.type,valueSpec:m.layer.type,style:a.style,styleSpec:a.styleSpec,validateSpec:a.validateSpec,object:r,objectKey:"type"}),filter:gn,layout:b=>qa({layer:r,key:b.key,value:b.value,style:b.style,styleSpec:b.styleSpec,validateSpec:b.validateSpec,objectElementValidators:{"*":T=>zu(er({layerType:_},T))}}),paint:b=>qa({layer:r,key:b.key,value:b.value,style:b.style,styleSpec:b.styleSpec,validateSpec:b.validateSpec,objectElementValidators:{"*":T=>$n(er({layerType:_},T))}})}})),t}function Xa(a){const t=a.value,r=a.key,s=Nt(t);return s!=="string"?[new Fe(r,t,`string expected, ${s} found`)]:[]}const Io={promoteId:function({key:a,value:t}){if(Nt(t)==="string")return Xa({key:a,value:t});{const r=[];for(const s in t)r.push(...Xa({key:`${a}.${s}`,value:t[s]}));return r}}};function ys(a){const t=a.value,r=a.key,s=a.styleSpec,u=a.style,m=a.validateSpec;if(!t.type)return[new Fe(r,t,'"type" is required')];const _=Fi(t.type);let y;switch(_){case"vector":case"raster":return y=qa({key:r,value:t,valueSpec:s[`source_${_.replace("-","_")}`],style:a.style,styleSpec:s,objectElementValidators:Io,validateSpec:m}),y;case"raster-dem":return y=(function(b){var T;const E=(T=b.sourceName)!==null&&T!==void 0?T:"",L=b.value,V=b.styleSpec,$=V.source_raster_dem,N=b.style;let G=[];const Q=Nt(L);if(L===void 0)return G;if(Q!=="object")return G.push(new Fe("source_raster_dem",L,`object expected, ${Q} found`)),G;const ee=Fi(L.encoding)==="custom",_e=["redFactor","greenFactor","blueFactor","baseShift"],ne=b.value.encoding?`"${b.value.encoding}"`:"Default";for(const ce in L)!ee&&_e.includes(ce)?G.push(new Fe(ce,L[ce],`In "${E}": "${ce}" is only valid when "encoding" is set to "custom". ${ne} encoding found`)):$[ce]?G=G.concat(b.validateSpec({key:ce,value:L[ce],valueSpec:$[ce],validateSpec:b.validateSpec,style:N,styleSpec:V})):G.push(new Fe(ce,L[ce],`unknown property "${ce}"`));return G})({sourceName:r,value:t,style:a.style,styleSpec:s,validateSpec:m}),y;case"geojson":if(y=qa({key:r,value:t,valueSpec:s.source_geojson,style:u,styleSpec:s,validateSpec:m,objectElementValidators:Io}),t.cluster)for(const b in t.clusterProperties){const[T,E]=t.clusterProperties[b],L=typeof T=="string"?[T,["accumulated"],["get",b]]:T;y.push(...gs({key:`${r}.${b}.map`,value:E,expressionContext:"cluster-map"})),y.push(...gs({key:`${r}.${b}.reduce`,value:L,expressionContext:"cluster-reduce"}))}return y;case"video":return qa({key:r,value:t,valueSpec:s.source_video,style:u,validateSpec:m,styleSpec:s});case"image":return qa({key:r,value:t,valueSpec:s.source_image,style:u,validateSpec:m,styleSpec:s});case"canvas":return[new Fe(r,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return vs({key:`${r}.type`,value:t.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]}})}}function Xr(a){const t=a.value,r=a.styleSpec,s=r.light,u=a.style;let m=[];const _=Nt(t);if(t===void 0)return m;if(_!=="object")return m=m.concat([new Fe("light",t,`object expected, ${_} found`)]),m;for(const y in t){const b=y.match(/^(.*)-transition$/);m=m.concat(b&&s[b[1]]&&s[b[1]].transition?a.validateSpec({key:y,value:t[y],valueSpec:r.transition,validateSpec:a.validateSpec,style:u,styleSpec:r}):s[y]?a.validateSpec({key:y,value:t[y],valueSpec:s[y],validateSpec:a.validateSpec,style:u,styleSpec:r}):[new Fe(y,t[y],`unknown property "${y}"`)])}return m}function Rc(a){const t=a.value,r=a.styleSpec,s=r.sky,u=a.style,m=Nt(t);if(t===void 0)return[];if(m!=="object")return[new Fe("sky",t,`object expected, ${m} found`)];let _=[];for(const y in t)_=_.concat(s[y]?a.validateSpec({key:y,value:t[y],valueSpec:s[y],style:u,styleSpec:r}):[new Fe(y,t[y],`unknown property "${y}"`)]);return _}function Mh(a){const t=a.value,r=a.styleSpec,s=r.terrain,u=a.style;let m=[];const _=Nt(t);if(t===void 0)return m;if(_!=="object")return m=m.concat([new Fe("terrain",t,`object expected, ${_} found`)]),m;for(const y in t)m=m.concat(s[y]?a.validateSpec({key:y,value:t[y],valueSpec:s[y],validateSpec:a.validateSpec,style:u,styleSpec:r}):[new Fe(y,t[y],`unknown property "${y}"`)]);return m}function Ad(a){let t=[];const r=a.value,s=a.key;if(Array.isArray(r)){const u=[],m=[];for(const _ in r)r[_].id&&u.includes(r[_].id)&&t.push(new Fe(s,r,`all the sprites' ids must be unique, but ${r[_].id} is duplicated`)),u.push(r[_].id),r[_].url&&m.includes(r[_].url)&&t.push(new Fe(s,r,`all the sprites' URLs must be unique, but ${r[_].url} is duplicated`)),m.push(r[_].url),t=t.concat(qa({key:`${s}[${_}]`,value:r[_],valueSpec:{id:{type:"string",required:!0},url:{type:"string",required:!0}},validateSpec:a.validateSpec}));return t}return Xa({key:s,value:r})}function Ed(a){return t=a.value,t&&t.constructor===Object?[]:[new Fe(a.key,a.value,`object expected, ${Nt(a.value)} found`)];var t}const Gl={"*":()=>[],array:Eu,boolean:function(a){const t=a.value,r=a.key,s=Nt(t);return s!=="boolean"?[new Fe(r,t,`boolean expected, ${s} found`)]:[]},number:Lo,color:_s,constants:Aa,enum:vs,filter:gn,function:ms,layer:Ic,object:qa,source:ys,light:Xr,sky:Rc,terrain:Mh,projection:function(a){const t=a.value,r=a.styleSpec,s=r.projection,u=a.style,m=Nt(t);if(t===void 0)return[];if(m!=="object")return[new Fe("projection",t,`object expected, ${m} found`)];let _=[];for(const y in t)_=_.concat(s[y]?a.validateSpec({key:y,value:t[y],valueSpec:s[y],style:u,styleSpec:r}):[new Fe(y,t[y],`unknown property "${y}"`)]);return _},projectionDefinition:function(a){const t=a.key;let r=a.value;r=r instanceof String?r.valueOf():r;const s=Nt(r);return s!=="array"||(function(u){return Array.isArray(u)&&u.length===3&&typeof u[0]=="string"&&typeof u[1]=="string"&&typeof u[2]=="number"})(r)||(function(u){return!!["interpolate","step","literal"].includes(u[0])})(r)?["array","string"].includes(s)?[]:[new Fe(t,r,`projection expected, invalid type "${s}" found`)]:[new Fe(t,r,`projection expected, invalid array ${JSON.stringify(r)} found`)]},string:Xa,formatted:function(a){return Xa(a).length===0?[]:gs(a)},resolvedImage:function(a){return Xa(a).length===0?[]:gs(a)},padding:function(a){const t=a.key,r=a.value;if(Nt(r)==="array"){if(r.length<1||r.length>4)return[new Fe(t,r,`padding requires 1 to 4 values; ${r.length} values found`)];const s={type:"number"};let u=[];for(let m=0;m<r.length;m++)u=u.concat(a.validateSpec({key:`${t}[${m}]`,value:r[m],validateSpec:a.validateSpec,valueSpec:s}));return u}return Lo({key:t,value:r,valueSpec:{}})},numberArray:function(a){const t=a.key,r=a.value;if(Nt(r)==="array"){const s={type:"number"};if(r.length<1)return[new Fe(t,r,"array length at least 1 expected, length 0 found")];let u=[];for(let m=0;m<r.length;m++)u=u.concat(a.validateSpec({key:`${t}[${m}]`,value:r[m],validateSpec:a.validateSpec,valueSpec:s}));return u}return Lo({key:t,value:r,valueSpec:{}})},colorArray:function(a){const t=a.key,r=a.value;if(Nt(r)==="array"){if(r.length<1)return[new Fe(t,r,"array length at least 1 expected, length 0 found")];let s=[];for(let u=0;u<r.length;u++)s=s.concat(_s({key:`${t}[${u}]`,value:r[u]}));return s}return _s({key:t,value:r})},variableAnchorOffsetCollection:function(a){const t=a.key,r=a.value,s=Nt(r),u=a.styleSpec;if(s!=="array"||r.length<1||r.length%2!=0)return[new Fe(t,r,"variableAnchorOffsetCollection requires a non-empty array of even length")];let m=[];for(let _=0;_<r.length;_+=2)m=m.concat(vs({key:`${t}[${_}]`,value:r[_],valueSpec:u.layout_symbol["text-anchor"]})),m=m.concat(Eu({key:`${t}[${_+1}]`,value:r[_+1],valueSpec:{length:2,value:"number"},validateSpec:a.validateSpec,style:a.style,styleSpec:u}));return m},sprite:Ad,state:Ed};function Ni(a){const t=a.value,r=a.valueSpec,s=a.styleSpec;return a.validateSpec=Ni,r.expression&&Nl(Fi(t))?ms(a):r.expression&&Zl(Ra(t))?gs(a):r.type&&Gl[r.type]?Gl[r.type](a):qa(er({},a,{valueSpec:r.type?s[r.type]:r}))}function ca(a){const t=a.value,r=a.key,s=Xa(a);return s.length||(t.indexOf("{fontstack}")===-1&&s.push(new Fe(r,t,'"glyphs" url must include a "{fontstack}" token')),t.indexOf("{range}")===-1&&s.push(new Fe(r,t,'"glyphs" url must include a "{range}" token'))),s}function Er(a,t=be){let r=[];return r=r.concat(Ni({key:"",value:a,valueSpec:t.$root,styleSpec:t,style:a,validateSpec:Ni,objectElementValidators:{glyphs:ca,"*":()=>[]}})),a.constants&&(r=r.concat(Aa({key:"constants",value:a.constants}))),Pu(r)}function ua(a){return function(t){return a(Object.assign({},t,{validateSpec:Ni}))}}function Pu(a){return[].concat(a).sort(((t,r)=>t.line-r.line))}function ha(a){return function(...t){return Pu(a.apply(this,t))}}Er.source=ha(ua(ys)),Er.sprite=ha(ua(Ad)),Er.glyphs=ha(ua(ca)),Er.light=ha(ua(Xr)),Er.sky=ha(ua(Rc)),Er.terrain=ha(ua(Mh)),Er.state=ha(ua(Ed)),Er.layer=ha(ua(Ic)),Er.filter=ha(ua(gn)),Er.paintProperty=ha(ua($n)),Er.layoutProperty=ha(ua(zu));const Ea=Er,zd=Ea.light,ku=Ea.sky,Mp=Ea.paintProperty,Du=Ea.layoutProperty;function bs(a,t){let r=!1;if(t&&t.length)for(const s of t)a.fire(new Oe(new Error(s.message))),r=!0;return r}class Fn{constructor(t,r,s){const u=this.cells=[];if(t instanceof ArrayBuffer){this.arrayBuffer=t;const _=new Int32Array(this.arrayBuffer);t=_[0],this.d=(r=_[1])+2*(s=_[2]);for(let b=0;b<this.d*this.d;b++){const T=_[3+b],E=_[3+b+1];u.push(T===E?null:_.subarray(T,E))}const y=_[3+u.length+1];this.keys=_.subarray(_[3+u.length],y),this.bboxes=_.subarray(y),this.insert=this._insertReadonly}else{this.d=r+2*s;for(let _=0;_<this.d*this.d;_++)u.push([]);this.keys=[],this.bboxes=[]}this.n=r,this.extent=t,this.padding=s,this.scale=r/t,this.uid=0;const m=s/r*t;this.min=-m,this.max=t+m}insert(t,r,s,u,m){this._forEachCell(r,s,u,m,this._insertCell,this.uid++,void 0,void 0),this.keys.push(t),this.bboxes.push(r),this.bboxes.push(s),this.bboxes.push(u),this.bboxes.push(m)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(t,r,s,u,m,_){this.cells[m].push(_)}query(t,r,s,u,m){const _=this.min,y=this.max;if(t<=_&&r<=_&&y<=s&&y<=u&&!m)return Array.prototype.slice.call(this.keys);{const b=[];return this._forEachCell(t,r,s,u,this._queryCell,b,{},m),b}}_queryCell(t,r,s,u,m,_,y,b){const T=this.cells[m];if(T!==null){const E=this.keys,L=this.bboxes;for(let V=0;V<T.length;V++){const $=T[V];if(y[$]===void 0){const N=4*$;(b?b(L[N+0],L[N+1],L[N+2],L[N+3]):t<=L[N+2]&&r<=L[N+3]&&s>=L[N+0]&&u>=L[N+1])?(y[$]=!0,_.push(E[$])):y[$]=!1}}}}_forEachCell(t,r,s,u,m,_,y,b){const T=this._convertToCellCoord(t),E=this._convertToCellCoord(r),L=this._convertToCellCoord(s),V=this._convertToCellCoord(u);for(let $=T;$<=L;$++)for(let N=E;N<=V;N++){const G=this.d*N+$;if((!b||b(this._convertFromCellCoord($),this._convertFromCellCoord(N),this._convertFromCellCoord($+1),this._convertFromCellCoord(N+1)))&&m.call(this,t,r,s,u,G,_,y,b))return}}_convertFromCellCoord(t){return(t-this.padding)/this.scale}_convertToCellCoord(t){return Math.max(0,Math.min(this.d-1,Math.floor(t*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const t=this.cells,r=3+this.cells.length+1+1;let s=0;for(let _=0;_<this.cells.length;_++)s+=this.cells[_].length;const u=new Int32Array(r+s+this.keys.length+this.bboxes.length);u[0]=this.extent,u[1]=this.n,u[2]=this.padding;let m=r;for(let _=0;_<t.length;_++){const y=t[_];u[3+_]=m,u.set(y,m),m+=y.length}return u[3+t.length]=m,u.set(this.keys,m),m+=this.keys.length,u[3+t.length+1]=m,u.set(this.bboxes,m),m+=this.bboxes.length,u.buffer}static serialize(t,r){const s=t.toArrayBuffer();return r&&r.push(s),{buffer:s}}static deserialize(t){return new Fn(t.buffer)}}const _n={};function st(a,t,r={}){if(_n[a])throw new Error(`${a} is already registered.`);Object.defineProperty(t,"_classRegistryKey",{value:a,writeable:!1}),_n[a]={klass:t,omit:r.omit||[],shallow:r.shallow||[]}}st("Object",Object),st("Set",Set),st("TransferableGridIndex",Fn),st("Color",It),st("Error",Error),st("AJAXError",re),st("ResolvedImage",Br),st("StylePropertyFunction",fs),st("StyleExpression",kc,{omit:["_evaluator"]}),st("ZoomDependentExpression",ps),st("ZoomConstantExpression",Sa),st("CompoundExpression",Ua,{omit:["_evaluate"]});for(const a in $l)$l[a]._classRegistryKey||st(`Expression_${a}`,$l[a]);function tl(a){return a&&typeof ArrayBuffer<"u"&&(a instanceof ArrayBuffer||a.constructor&&a.constructor.name==="ArrayBuffer")}function Ro(a){return a.$name||a.constructor._classRegistryKey}function Bc(a){return!(function(t){if(t===null||typeof t!="object")return!1;const r=Ro(t);return!(!r||r==="Object")})(a)&&(a==null||typeof a=="boolean"||typeof a=="number"||typeof a=="string"||a instanceof Boolean||a instanceof Number||a instanceof String||a instanceof Date||a instanceof RegExp||a instanceof Blob||a instanceof Error||tl(a)||En(a)||ArrayBuffer.isView(a)||a instanceof ImageData)}function xs(a,t){if(Bc(a))return(tl(a)||En(a))&&t&&t.push(a),ArrayBuffer.isView(a)&&t&&t.push(a.buffer),a instanceof ImageData&&t&&t.push(a.data.buffer),a;if(Array.isArray(a)){const m=[];for(const _ of a)m.push(xs(_,t));return m}if(typeof a!="object")throw new Error("can't serialize object of type "+typeof a);const r=Ro(a);if(!r)throw new Error(`can't serialize object of unregistered class ${a.constructor.name}`);if(!_n[r])throw new Error(`${r} is not registered.`);const{klass:s}=_n[r],u=s.serialize?s.serialize(a,t):{};if(s.serialize){if(t&&u===t[t.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const m in a){if(!a.hasOwnProperty(m)||_n[r].omit.indexOf(m)>=0)continue;const _=a[m];u[m]=_n[r].shallow.indexOf(m)>=0?_:xs(_,t)}a instanceof Error&&(u.message=a.message)}if(u.$name)throw new Error("$name property is reserved for worker serialization logic.");return r!=="Object"&&(u.$name=r),u}function Bo(a){if(Bc(a))return a;if(Array.isArray(a))return a.map(Bo);if(typeof a!="object")throw new Error("can't deserialize object of type "+typeof a);const t=Ro(a)||"Object";if(!_n[t])throw new Error(`can't deserialize unregistered class ${t}`);const{klass:r}=_n[t];if(!r)throw new Error(`can't deserialize unregistered class ${t}`);if(r.deserialize)return r.deserialize(a);const s=Object.create(r.prototype);for(const u of Object.keys(a)){if(u==="$name")continue;const m=a[u];s[u]=_n[t].shallow.indexOf(u)>=0?m:Bo(m)}return s}class Lu{constructor(){this.first=!0}update(t,r){const s=Math.floor(t);return this.first?(this.first=!1,this.lastIntegerZoom=s,this.lastIntegerZoomTime=0,this.lastZoom=t,this.lastFloorZoom=s,!0):(this.lastFloorZoom>s?(this.lastIntegerZoom=s+1,this.lastIntegerZoomTime=r):this.lastFloorZoom<s&&(this.lastIntegerZoom=s,this.lastIntegerZoomTime=r),t!==this.lastZoom&&(this.lastZoom=t,this.lastFloorZoom=s,!0))}}const $t={"Latin-1 Supplement":a=>a>=128&&a<=255,"Hangul Jamo":a=>a>=4352&&a<=4607,Khmer:a=>a>=6016&&a<=6143,"General Punctuation":a=>a>=8192&&a<=8303,"Letterlike Symbols":a=>a>=8448&&a<=8527,"Number Forms":a=>a>=8528&&a<=8591,"Miscellaneous Technical":a=>a>=8960&&a<=9215,"Control Pictures":a=>a>=9216&&a<=9279,"Optical Character Recognition":a=>a>=9280&&a<=9311,"Enclosed Alphanumerics":a=>a>=9312&&a<=9471,"Geometric Shapes":a=>a>=9632&&a<=9727,"Miscellaneous Symbols":a=>a>=9728&&a<=9983,"Miscellaneous Symbols and Arrows":a=>a>=11008&&a<=11263,"Ideographic Description Characters":a=>a>=12272&&a<=12287,"CJK Symbols and Punctuation":a=>a>=12288&&a<=12351,Hiragana:a=>a>=12352&&a<=12447,Katakana:a=>a>=12448&&a<=12543,Kanbun:a=>a>=12688&&a<=12703,"CJK Strokes":a=>a>=12736&&a<=12783,"Enclosed CJK Letters and Months":a=>a>=12800&&a<=13055,"CJK Compatibility":a=>a>=13056&&a<=13311,"Yijing Hexagram Symbols":a=>a>=19904&&a<=19967,"CJK Unified Ideographs":a=>a>=19968&&a<=40959,"Hangul Syllables":a=>a>=44032&&a<=55215,"Private Use Area":a=>a>=57344&&a<=63743,"Vertical Forms":a=>a>=65040&&a<=65055,"CJK Compatibility Forms":a=>a>=65072&&a<=65103,"Small Form Variants":a=>a>=65104&&a<=65135,"Halfwidth and Fullwidth Forms":a=>a>=65280&&a<=65519};function vn(a){for(const t of a)if(ws(t.charCodeAt(0)))return!0;return!1}function Ah(a){for(const t of a)if(!ql(t.charCodeAt(0)))return!1;return!0}function Oc(a){const t=a.map((r=>{try{return new RegExp(`\\p{sc=${r}}`,"u").source}catch{return null}})).filter((r=>r));return new RegExp(t.join("|"),"u")}const il=Oc(["Arab","Dupl","Mong","Ougr","Syrc"]);function ql(a){return!il.test(String.fromCodePoint(a))}const rl=Oc(["Bopo","Hani","Hira","Kana","Kits","Nshu","Tang","Yiii"]);function ws(a){return!(a!==746&&a!==747&&(a<4352||!($t["CJK Compatibility Forms"](a)&&!(a>=65097&&a<=65103)||$t["CJK Compatibility"](a)||$t["CJK Strokes"](a)||!(!$t["CJK Symbols and Punctuation"](a)||a>=12296&&a<=12305||a>=12308&&a<=12319||a===12336)||$t["Enclosed CJK Letters and Months"](a)||$t["Ideographic Description Characters"](a)||$t.Kanbun(a)||$t.Katakana(a)&&a!==12540||!(!$t["Halfwidth and Fullwidth Forms"](a)||a===65288||a===65289||a===65293||a>=65306&&a<=65310||a===65339||a===65341||a===65343||a>=65371&&a<=65503||a===65507||a>=65512&&a<=65519)||!(!$t["Small Form Variants"](a)||a>=65112&&a<=65118||a>=65123&&a<=65126)||$t["Vertical Forms"](a)||$t["Yijing Hexagram Symbols"](a)||new RegExp("\\p{sc=Cans}","u").test(String.fromCodePoint(a))||new RegExp("\\p{sc=Hang}","u").test(String.fromCodePoint(a))||rl.test(String.fromCodePoint(a)))))}function jc(a){return!(ws(a)||(function(t){return!!($t["Latin-1 Supplement"](t)&&(t===167||t===169||t===174||t===177||t===188||t===189||t===190||t===215||t===247)||$t["General Punctuation"](t)&&(t===8214||t===8224||t===8225||t===8240||t===8241||t===8251||t===8252||t===8258||t===8263||t===8264||t===8265||t===8273)||$t["Letterlike Symbols"](t)||$t["Number Forms"](t)||$t["Miscellaneous Technical"](t)&&(t>=8960&&t<=8967||t>=8972&&t<=8991||t>=8996&&t<=9e3||t===9003||t>=9085&&t<=9114||t>=9150&&t<=9165||t===9167||t>=9169&&t<=9179||t>=9186&&t<=9215)||$t["Control Pictures"](t)&&t!==9251||$t["Optical Character Recognition"](t)||$t["Enclosed Alphanumerics"](t)||$t["Geometric Shapes"](t)||$t["Miscellaneous Symbols"](t)&&!(t>=9754&&t<=9759)||$t["Miscellaneous Symbols and Arrows"](t)&&(t>=11026&&t<=11055||t>=11088&&t<=11097||t>=11192&&t<=11243)||$t["CJK Symbols and Punctuation"](t)||$t.Katakana(t)||$t["Private Use Area"](t)||$t["CJK Compatibility Forms"](t)||$t["Small Form Variants"](t)||$t["Halfwidth and Fullwidth Forms"](t)||t===8734||t===8756||t===8757||t>=9984&&t<=10087||t>=10102&&t<=10131||t===65532||t===65533)})(a))}const Eh=Oc(["Adlm","Arab","Armi","Avst","Chrs","Cprt","Egyp","Elym","Gara","Hatr","Hebr","Hung","Khar","Lydi","Mand","Mani","Mend","Merc","Mero","Narb","Nbat","Nkoo","Orkh","Palm","Phli","Phlp","Phnx","Prti","Rohg","Samr","Sarb","Sogo","Syrc","Thaa","Todr","Yezi"]);function Cs(a){return Eh.test(String.fromCodePoint(a))}function zh(a,t){return!(!t&&Cs(a)||a>=2304&&a<=3583||a>=3840&&a<=4255||$t.Khmer(a))}function Ss(a){for(const t of a)if(Cs(t.charCodeAt(0)))return!0;return!1}const Nn=new class{constructor(){this.TIMEOUT=5e3,this.applyArabicShaping=null,this.processBidirectionalText=null,this.processStyledBidirectionalText=null,this.pluginStatus="unavailable",this.pluginURL=null,this.loadScriptResolve=()=>{}}setState(a){this.pluginStatus=a.pluginStatus,this.pluginURL=a.pluginURL}getState(){return{pluginStatus:this.pluginStatus,pluginURL:this.pluginURL}}setMethods(a){if(Nn.isParsed())throw new Error("RTL text plugin already registered.");this.applyArabicShaping=a.applyArabicShaping,this.processBidirectionalText=a.processBidirectionalText,this.processStyledBidirectionalText=a.processStyledBidirectionalText,this.loadScriptResolve()}isParsed(){return this.applyArabicShaping!=null&&this.processBidirectionalText!=null&&this.processStyledBidirectionalText!=null}getRTLTextPluginStatus(){return this.pluginStatus}syncState(a,t){return d(this,void 0,void 0,(function*(){if(this.isParsed())return this.getState();if(a.pluginStatus!=="loading")return this.setState(a),a;const r=a.pluginURL,s=new Promise((m=>{this.loadScriptResolve=m}));t(r);const u=new Promise((m=>setTimeout((()=>m()),this.TIMEOUT)));if(yield Promise.race([s,u]),this.isParsed()){const m={pluginStatus:"loaded",pluginURL:r};return this.setState(m),m}throw this.setState({pluginStatus:"error",pluginURL:""}),new Error(`RTL Text Plugin failed to import scripts from ${r}`)}))}};class bi{constructor(t,r){this.isSupportedScript=Ts,this.zoom=t,r?(this.now=r.now||0,this.fadeDuration=r.fadeDuration||0,this.zoomHistory=r.zoomHistory||new Lu,this.transition=r.transition||{}):(this.now=0,this.fadeDuration=0,this.zoomHistory=new Lu,this.transition={})}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const t=this.zoom,r=t-Math.floor(t),s=this.crossFadingFactor();return t>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:r+(1-r)*s}:{fromScale:.5,toScale:1,t:1-(1-s)*r}}}function Ts(a){return(function(t,r){for(const s of t)if(!zh(s.charCodeAt(0),r))return!1;return!0})(a,Nn.getRTLTextPluginStatus()==="loaded")}class Un{constructor(t,r,s){this.property=t,this.value=r,this.expression=(function(u,m,_){if(Nl(u))return new fs(u,m);if(Zl(u)){const y=el(u,m,_);if(y.result==="error")throw new Error(y.value.map((b=>`${b.key}: ${b.message}`)).join(", "));return y.value}{let y=u;return m.type==="color"&&typeof u=="string"?y=It.parse(u):m.type!=="padding"||typeof u!="number"&&!Array.isArray(u)?m.type!=="numberArray"||typeof u!="number"&&!Array.isArray(u)?m.type!=="colorArray"||typeof u!="string"&&!Array.isArray(u)?m.type==="variableAnchorOffsetCollection"&&Array.isArray(u)?y=Qi.parse(u):m.type==="projectionDefinition"&&typeof u=="string"&&(y=qr.parse(u)):y=yr.parse(u):y=Kr.parse(u):y=cr.parse(u),{globalStateRefs:new Set,_globalState:null,kind:"constant",evaluate:()=>y}}})(r===void 0?t.specification.default:r,t.specification,s)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}getGlobalStateRefs(){return this.expression.globalStateRefs||new Set}possiblyEvaluate(t,r,s){return this.property.possiblyEvaluate(this,t,r,s)}}class Ms{constructor(t,r){this.property=t,this.value=new Un(t,void 0,r)}transitioned(t,r){return new $c(this.property,this.value,r,Oi({},t.transition,this.transition),t.now)}untransitioned(){return new $c(this.property,this.value,null,{},0)}}class Vc{constructor(t,r){this._properties=t,this._values=Object.create(t.defaultTransitionablePropertyValues),this._globalState=r}getValue(t){return ya(this._values[t].value.value)}setValue(t,r){Object.prototype.hasOwnProperty.call(this._values,t)||(this._values[t]=new Ms(this._values[t].property,this._globalState)),this._values[t].value=new Un(this._values[t].property,r===null?void 0:ya(r),this._globalState)}getTransition(t){return ya(this._values[t].transition)}setTransition(t,r){Object.prototype.hasOwnProperty.call(this._values,t)||(this._values[t]=new Ms(this._values[t].property,this._globalState)),this._values[t].transition=ya(r)||void 0}serialize(){const t={};for(const r of Object.keys(this._values)){const s=this.getValue(r);s!==void 0&&(t[r]=s);const u=this.getTransition(r);u!==void 0&&(t[`${r}-transition`]=u)}return t}transitioned(t,r){const s=new al(this._properties);for(const u of Object.keys(this._values))s._values[u]=this._values[u].transitioned(t,r._values[u]);return s}untransitioned(){const t=new al(this._properties);for(const r of Object.keys(this._values))t._values[r]=this._values[r].untransitioned();return t}}class $c{constructor(t,r,s,u,m){this.property=t,this.value=r,this.begin=m+u.delay||0,this.end=this.begin+u.duration||0,t.specification.transition&&(u.delay||u.duration)&&(this.prior=s)}possiblyEvaluate(t,r,s){const u=t.now||0,m=this.value.possiblyEvaluate(t,r,s),_=this.prior;if(_){if(u>this.end)return this.prior=null,m;if(this.value.isDataDriven())return this.prior=null,m;if(u<this.begin)return _.possiblyEvaluate(t,r,s);{const y=(u-this.begin)/(this.end-this.begin);return this.property.interpolate(_.possiblyEvaluate(t,r,s),m,at(y))}}return m}}class al{constructor(t){this._properties=t,this._values=Object.create(t.defaultTransitioningPropertyValues)}possiblyEvaluate(t,r,s){const u=new nl(this._properties);for(const m of Object.keys(this._values))u._values[m]=this._values[m].possiblyEvaluate(t,r,s);return u}hasTransition(){for(const t of Object.keys(this._values))if(this._values[t].prior)return!0;return!1}}class As{constructor(t,r){this._properties=t,this._values=Object.create(t.defaultPropertyValues),this._globalState=r}hasValue(t){return this._values[t].value!==void 0}getValue(t){return ya(this._values[t].value)}setValue(t,r){this._values[t]=new Un(this._values[t].property,r===null?void 0:ya(r),this._globalState)}serialize(){const t={};for(const r of Object.keys(this._values)){const s=this.getValue(r);s!==void 0&&(t[r]=s)}return t}possiblyEvaluate(t,r,s){const u=new nl(this._properties);for(const m of Object.keys(this._values))u._values[m]=this._values[m].possiblyEvaluate(t,r,s);return u}}class Zn{constructor(t,r,s){this.property=t,this.value=r,this.parameters=s}isConstant(){return this.value.kind==="constant"}constantOr(t){return this.value.kind==="constant"?this.value.value:t}evaluate(t,r,s,u){return this.property.evaluate(this.value,this.parameters,t,r,s,u)}}class nl{constructor(t){this._properties=t,this._values=Object.create(t.defaultPossiblyEvaluatedValues)}get(t){return this._values[t]}}class ut{constructor(t){this.specification=t}possiblyEvaluate(t,r){if(t.isDataDriven())throw new Error("Value should not be data driven");return t.expression.evaluate(r)}interpolate(t,r,s){const u=xa[this.specification.type];return u?u(t,r,s):t}}class yt{constructor(t,r){this.specification=t,this.overrides=r}possiblyEvaluate(t,r,s,u){return new Zn(this,t.expression.kind==="constant"||t.expression.kind==="camera"?{kind:"constant",value:t.expression.evaluate(r,null,{},s,u)}:t.expression,r)}interpolate(t,r,s){if(t.value.kind!=="constant"||r.value.kind!=="constant")return t;if(t.value.value===void 0||r.value.value===void 0)return new Zn(this,{kind:"constant",value:void 0},t.parameters);const u=xa[this.specification.type];if(u){const m=u(t.value.value,r.value.value,s);return new Zn(this,{kind:"constant",value:m},t.parameters)}return t}evaluate(t,r,s,u,m,_){return t.kind==="constant"?t.value:t.evaluate(r,s,u,m,_)}}class ol extends yt{possiblyEvaluate(t,r,s,u){if(t.value===void 0)return new Zn(this,{kind:"constant",value:void 0},r);if(t.expression.kind==="constant"){const m=t.expression.evaluate(r,null,{},s,u),_=t.property.specification.type==="resolvedImage"&&typeof m!="string"?m.name:m,y=this._calculate(_,_,_,r);return new Zn(this,{kind:"constant",value:y},r)}if(t.expression.kind==="camera"){const m=this._calculate(t.expression.evaluate({zoom:r.zoom-1}),t.expression.evaluate({zoom:r.zoom}),t.expression.evaluate({zoom:r.zoom+1}),r);return new Zn(this,{kind:"constant",value:m},r)}return new Zn(this,t.expression,r)}evaluate(t,r,s,u,m,_){if(t.kind==="source"){const y=t.evaluate(r,s,u,m,_);return this._calculate(y,y,y,r)}return t.kind==="composite"?this._calculate(t.evaluate({zoom:Math.floor(r.zoom)-1},s,u),t.evaluate({zoom:Math.floor(r.zoom)},s,u),t.evaluate({zoom:Math.floor(r.zoom)+1},s,u),r):t.value}_calculate(t,r,s,u){return u.zoom>u.zoomHistory.lastIntegerZoom?{from:t,to:r}:{from:s,to:r}}interpolate(t){return t}}class Fc{constructor(t){this.specification=t}possiblyEvaluate(t,r,s,u){if(t.value!==void 0){if(t.expression.kind==="constant"){const m=t.expression.evaluate(r,null,{},s,u);return this._calculate(m,m,m,r)}return this._calculate(t.expression.evaluate(new bi(Math.floor(r.zoom-1),r)),t.expression.evaluate(new bi(Math.floor(r.zoom),r)),t.expression.evaluate(new bi(Math.floor(r.zoom+1),r)),r)}}_calculate(t,r,s,u){return u.zoom>u.zoomHistory.lastIntegerZoom?{from:t,to:r}:{from:s,to:r}}interpolate(t){return t}}class sl{constructor(t){this.specification=t}possiblyEvaluate(t,r,s,u){return!!t.expression.evaluate(r,null,{},s,u)}interpolate(){return!1}}class Ui{constructor(t){this.properties=t,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const r in t){const s=t[r];s.specification.overridable&&this.overridableProperties.push(r);const u=this.defaultPropertyValues[r]=new Un(s,void 0,void 0),m=this.defaultTransitionablePropertyValues[r]=new Ms(s,void 0);this.defaultTransitioningPropertyValues[r]=m.untransitioned(),this.defaultPossiblyEvaluatedValues[r]=u.possiblyEvaluate({})}}}st("DataDrivenProperty",yt),st("DataConstantProperty",ut),st("CrossFadedDataDrivenProperty",ol),st("CrossFadedProperty",Fc),st("ColorRampProperty",sl);const Ya="-transition";class Yr extends pt{constructor(t,r,s){if(super(),this.id=t.id,this.type=t.type,this._globalState=s,this._featureFilter={filter:()=>!0,needGeometry:!1,getGlobalStateRefs:()=>new Set},t.type!=="custom"&&(this.metadata=t.metadata,this.minzoom=t.minzoom,this.maxzoom=t.maxzoom,t.type!=="background"&&(this.source=t.source,this.sourceLayer=t["source-layer"],this.filter=t.filter,this._featureFilter=Ma(t.filter,s)),r.layout&&(this._unevaluatedLayout=new As(r.layout,s)),r.paint)){this._transitionablePaint=new Vc(r.paint,s);for(const u in t.paint)this.setPaintProperty(u,t.paint[u],{validate:!1});for(const u in t.layout)this.setLayoutProperty(u,t.layout[u],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new nl(r.paint)}}setFilter(t){this.filter=t,this._featureFilter=Ma(t,this._globalState)}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(t){return t==="visibility"?this.visibility:this._unevaluatedLayout.getValue(t)}getLayoutAffectingGlobalStateRefs(){const t=new Set;if(this._unevaluatedLayout)for(const r in this._unevaluatedLayout._values){const s=this._unevaluatedLayout._values[r];for(const u of s.getGlobalStateRefs())t.add(u)}for(const r of this._featureFilter.getGlobalStateRefs())t.add(r);return t}getPaintAffectingGlobalStateRefs(){var t;const r=new globalThis.Map;if(this._transitionablePaint)for(const s in this._transitionablePaint._values){const u=this._transitionablePaint._values[s].value;for(const m of u.getGlobalStateRefs()){const _=(t=r.get(m))!==null&&t!==void 0?t:[];_.push({name:s,value:u.value}),r.set(m,_)}}return r}setLayoutProperty(t,r,s={}){r!=null&&this._validate(Du,`layers.${this.id}.layout.${t}`,t,r,s)||(t!=="visibility"?this._unevaluatedLayout.setValue(t,r):this.visibility=r)}getPaintProperty(t){return t.endsWith(Ya)?this._transitionablePaint.getTransition(t.slice(0,-11)):this._transitionablePaint.getValue(t)}setPaintProperty(t,r,s={}){if(r!=null&&this._validate(Mp,`layers.${this.id}.paint.${t}`,t,r,s))return!1;if(t.endsWith(Ya))return this._transitionablePaint.setTransition(t.slice(0,-11),r||void 0),!1;{const u=this._transitionablePaint._values[t],m=u.property.specification["property-type"]==="cross-faded-data-driven",_=u.value.isDataDriven(),y=u.value;this._transitionablePaint.setValue(t,r),this._handleSpecialPaintPropertyUpdate(t);const b=this._transitionablePaint._values[t].value;return b.isDataDriven()||_||m||this._handleOverridablePaintPropertyUpdate(t,y,b)}}_handleSpecialPaintPropertyUpdate(t){}_handleOverridablePaintPropertyUpdate(t,r,s){return!1}isHidden(t,r=!1){return!!(this.minzoom&&t<(r?Math.floor(this.minzoom):this.minzoom))||!!(this.maxzoom&&t>=this.maxzoom)||this.visibility==="none"}updateTransitions(t){this._transitioningPaint=this._transitionablePaint.transitioned(t,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(t,r){t.getCrossfadeParameters&&(this._crossfadeParameters=t.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(t,void 0,r)),this.paint=this._transitioningPaint.possiblyEvaluate(t,void 0,r)}serialize(){const t={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(t.layout=t.layout||{},t.layout.visibility=this.visibility),es(t,((r,s)=>!(r===void 0||s==="layout"&&!Object.keys(r).length||s==="paint"&&!Object.keys(r).length)))}_validate(t,r,s,u,m={}){return(!m||m.validate!==!1)&&bs(this,t.call(Ea,{key:r,layerType:this.type,objectKey:s,value:u,styleSpec:be,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const t in this.paint._values){const r=this.paint.get(t);if(r instanceof Zn&&mn(r.property.specification)&&(r.value.kind==="source"||r.value.kind==="composite")&&r.value.isStateDependent)return!0}return!1}}let Iu;var Pd={get paint(){return Iu=Iu||new Ui({"raster-opacity":new ut(be.paint_raster["raster-opacity"]),"raster-hue-rotate":new ut(be.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new ut(be.paint_raster["raster-brightness-min"]),"raster-brightness-max":new ut(be.paint_raster["raster-brightness-max"]),"raster-saturation":new ut(be.paint_raster["raster-saturation"]),"raster-contrast":new ut(be.paint_raster["raster-contrast"]),"raster-resampling":new ut(be.paint_raster["raster-resampling"]),"raster-fade-duration":new ut(be.paint_raster["raster-fade-duration"])})}};class Qa extends Yr{constructor(t,r){super(t,Pd,r)}}const Ka={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class Ki{constructor(t,r){this._structArray=t,this._pos1=r*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class Zi{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(t,r){return t._trim(),r&&(t.isTransferred=!0,r.push(t.arrayBuffer)),{length:t.length,arrayBuffer:t.arrayBuffer}}static deserialize(t){const r=Object.create(this.prototype);return r.arrayBuffer=t.arrayBuffer,r.length=t.length,r.capacity=t.arrayBuffer.byteLength/r.bytesPerElement,r._refreshViews(),r}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(t){this.reserve(t),this.length=t}reserve(t){if(t>this.capacity){this.capacity=Math.max(t,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const r=this.uint8;this._refreshViews(),r&&this.uint8.set(r)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function xi(a,t=1){let r=0,s=0;return{members:a.map((u=>{const m=Ka[u.type].BYTES_PER_ELEMENT,_=r=Qt(r,Math.max(t,m)),y=u.components||1;return s=Math.max(s,m),r+=m*y,{name:u.name,type:u.type,components:y,offset:_}})),size:Qt(r,Math.max(s,t)),alignment:t}}function Qt(a,t){return Math.ceil(a/t)*t}class gi extends Zi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,r){const s=this.length;return this.resize(s+1),this.emplace(s,t,r)}emplace(t,r,s){const u=2*t;return this.int16[u+0]=r,this.int16[u+1]=s,t}}gi.prototype.bytesPerElement=4,st("StructArrayLayout2i4",gi);class Ai extends Zi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,r,s){const u=this.length;return this.resize(u+1),this.emplace(u,t,r,s)}emplace(t,r,s,u){const m=3*t;return this.int16[m+0]=r,this.int16[m+1]=s,this.int16[m+2]=u,t}}Ai.prototype.bytesPerElement=6,st("StructArrayLayout3i6",Ai);class ll extends Zi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,r,s,u){const m=this.length;return this.resize(m+1),this.emplace(m,t,r,s,u)}emplace(t,r,s,u,m){const _=4*t;return this.int16[_+0]=r,this.int16[_+1]=s,this.int16[_+2]=u,this.int16[_+3]=m,t}}ll.prototype.bytesPerElement=8,st("StructArrayLayout4i8",ll);class uo extends Zi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,r,s,u,m,_){const y=this.length;return this.resize(y+1),this.emplace(y,t,r,s,u,m,_)}emplace(t,r,s,u,m,_,y){const b=6*t;return this.int16[b+0]=r,this.int16[b+1]=s,this.int16[b+2]=u,this.int16[b+3]=m,this.int16[b+4]=_,this.int16[b+5]=y,t}}uo.prototype.bytesPerElement=12,st("StructArrayLayout2i4i12",uo);class ho extends Zi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,r,s,u,m,_){const y=this.length;return this.resize(y+1),this.emplace(y,t,r,s,u,m,_)}emplace(t,r,s,u,m,_,y){const b=4*t,T=8*t;return this.int16[b+0]=r,this.int16[b+1]=s,this.uint8[T+4]=u,this.uint8[T+5]=m,this.uint8[T+6]=_,this.uint8[T+7]=y,t}}ho.prototype.bytesPerElement=8,st("StructArrayLayout2i4ub8",ho);class po extends Zi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,r){const s=this.length;return this.resize(s+1),this.emplace(s,t,r)}emplace(t,r,s){const u=2*t;return this.float32[u+0]=r,this.float32[u+1]=s,t}}po.prototype.bytesPerElement=8,st("StructArrayLayout2f8",po);class cl extends Zi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,r,s,u,m,_,y,b,T,E){const L=this.length;return this.resize(L+1),this.emplace(L,t,r,s,u,m,_,y,b,T,E)}emplace(t,r,s,u,m,_,y,b,T,E,L){const V=10*t;return this.uint16[V+0]=r,this.uint16[V+1]=s,this.uint16[V+2]=u,this.uint16[V+3]=m,this.uint16[V+4]=_,this.uint16[V+5]=y,this.uint16[V+6]=b,this.uint16[V+7]=T,this.uint16[V+8]=E,this.uint16[V+9]=L,t}}cl.prototype.bytesPerElement=20,st("StructArrayLayout10ui20",cl);class Hn extends Zi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,r,s,u,m,_,y,b){const T=this.length;return this.resize(T+1),this.emplace(T,t,r,s,u,m,_,y,b)}emplace(t,r,s,u,m,_,y,b,T){const E=8*t;return this.uint16[E+0]=r,this.uint16[E+1]=s,this.uint16[E+2]=u,this.uint16[E+3]=m,this.uint16[E+4]=_,this.uint16[E+5]=y,this.uint16[E+6]=b,this.uint16[E+7]=T,t}}Hn.prototype.bytesPerElement=16,st("StructArrayLayout8ui16",Hn);class ul extends Zi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,r,s,u,m,_,y,b,T,E,L,V){const $=this.length;return this.resize($+1),this.emplace($,t,r,s,u,m,_,y,b,T,E,L,V)}emplace(t,r,s,u,m,_,y,b,T,E,L,V,$){const N=12*t;return this.int16[N+0]=r,this.int16[N+1]=s,this.int16[N+2]=u,this.int16[N+3]=m,this.uint16[N+4]=_,this.uint16[N+5]=y,this.uint16[N+6]=b,this.uint16[N+7]=T,this.int16[N+8]=E,this.int16[N+9]=L,this.int16[N+10]=V,this.int16[N+11]=$,t}}ul.prototype.bytesPerElement=24,st("StructArrayLayout4i4ui4i24",ul);class tr extends Zi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,r,s){const u=this.length;return this.resize(u+1),this.emplace(u,t,r,s)}emplace(t,r,s,u){const m=3*t;return this.float32[m+0]=r,this.float32[m+1]=s,this.float32[m+2]=u,t}}tr.prototype.bytesPerElement=12,st("StructArrayLayout3f12",tr);class Xl extends Zi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(t){const r=this.length;return this.resize(r+1),this.emplace(r,t)}emplace(t,r){return this.uint32[1*t+0]=r,t}}Xl.prototype.bytesPerElement=4,st("StructArrayLayout1ul4",Xl);class Oo extends Zi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,r,s,u,m,_,y,b,T){const E=this.length;return this.resize(E+1),this.emplace(E,t,r,s,u,m,_,y,b,T)}emplace(t,r,s,u,m,_,y,b,T,E){const L=10*t,V=5*t;return this.int16[L+0]=r,this.int16[L+1]=s,this.int16[L+2]=u,this.int16[L+3]=m,this.int16[L+4]=_,this.int16[L+5]=y,this.uint32[V+3]=b,this.uint16[L+8]=T,this.uint16[L+9]=E,t}}Oo.prototype.bytesPerElement=20,st("StructArrayLayout6i1ul2ui20",Oo);class Ru extends Zi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,r,s,u,m,_){const y=this.length;return this.resize(y+1),this.emplace(y,t,r,s,u,m,_)}emplace(t,r,s,u,m,_,y){const b=6*t;return this.int16[b+0]=r,this.int16[b+1]=s,this.int16[b+2]=u,this.int16[b+3]=m,this.int16[b+4]=_,this.int16[b+5]=y,t}}Ru.prototype.bytesPerElement=12,st("StructArrayLayout2i2i2i12",Ru);class Bu extends Zi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,r,s,u,m){const _=this.length;return this.resize(_+1),this.emplace(_,t,r,s,u,m)}emplace(t,r,s,u,m,_){const y=4*t,b=8*t;return this.float32[y+0]=r,this.float32[y+1]=s,this.float32[y+2]=u,this.int16[b+6]=m,this.int16[b+7]=_,t}}Bu.prototype.bytesPerElement=16,st("StructArrayLayout2f1f2i16",Bu);class Ou extends Zi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,r,s,u,m,_){const y=this.length;return this.resize(y+1),this.emplace(y,t,r,s,u,m,_)}emplace(t,r,s,u,m,_,y){const b=16*t,T=4*t,E=8*t;return this.uint8[b+0]=r,this.uint8[b+1]=s,this.float32[T+1]=u,this.float32[T+2]=m,this.int16[E+6]=_,this.int16[E+7]=y,t}}Ou.prototype.bytesPerElement=16,st("StructArrayLayout2ub2f2i16",Ou);class Yl extends Zi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,r,s){const u=this.length;return this.resize(u+1),this.emplace(u,t,r,s)}emplace(t,r,s,u){const m=3*t;return this.uint16[m+0]=r,this.uint16[m+1]=s,this.uint16[m+2]=u,t}}Yl.prototype.bytesPerElement=6,st("StructArrayLayout3ui6",Yl);class p extends Zi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,r,s,u,m,_,y,b,T,E,L,V,$,N,G,Q,ee){const _e=this.length;return this.resize(_e+1),this.emplace(_e,t,r,s,u,m,_,y,b,T,E,L,V,$,N,G,Q,ee)}emplace(t,r,s,u,m,_,y,b,T,E,L,V,$,N,G,Q,ee,_e){const ne=24*t,ce=12*t,Te=48*t;return this.int16[ne+0]=r,this.int16[ne+1]=s,this.uint16[ne+2]=u,this.uint16[ne+3]=m,this.uint32[ce+2]=_,this.uint32[ce+3]=y,this.uint32[ce+4]=b,this.uint16[ne+10]=T,this.uint16[ne+11]=E,this.uint16[ne+12]=L,this.float32[ce+7]=V,this.float32[ce+8]=$,this.uint8[Te+36]=N,this.uint8[Te+37]=G,this.uint8[Te+38]=Q,this.uint32[ce+10]=ee,this.int16[ne+22]=_e,t}}p.prototype.bytesPerElement=48,st("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",p);class e extends Zi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,r,s,u,m,_,y,b,T,E,L,V,$,N,G,Q,ee,_e,ne,ce,Te,Le,Ge,rt,We,tt,mt,et){const it=this.length;return this.resize(it+1),this.emplace(it,t,r,s,u,m,_,y,b,T,E,L,V,$,N,G,Q,ee,_e,ne,ce,Te,Le,Ge,rt,We,tt,mt,et)}emplace(t,r,s,u,m,_,y,b,T,E,L,V,$,N,G,Q,ee,_e,ne,ce,Te,Le,Ge,rt,We,tt,mt,et,it){const Ve=32*t,bt=16*t;return this.int16[Ve+0]=r,this.int16[Ve+1]=s,this.int16[Ve+2]=u,this.int16[Ve+3]=m,this.int16[Ve+4]=_,this.int16[Ve+5]=y,this.int16[Ve+6]=b,this.int16[Ve+7]=T,this.uint16[Ve+8]=E,this.uint16[Ve+9]=L,this.uint16[Ve+10]=V,this.uint16[Ve+11]=$,this.uint16[Ve+12]=N,this.uint16[Ve+13]=G,this.uint16[Ve+14]=Q,this.uint16[Ve+15]=ee,this.uint16[Ve+16]=_e,this.uint16[Ve+17]=ne,this.uint16[Ve+18]=ce,this.uint16[Ve+19]=Te,this.uint16[Ve+20]=Le,this.uint16[Ve+21]=Ge,this.uint16[Ve+22]=rt,this.uint32[bt+12]=We,this.float32[bt+13]=tt,this.float32[bt+14]=mt,this.uint16[Ve+30]=et,this.uint16[Ve+31]=it,t}}e.prototype.bytesPerElement=64,st("StructArrayLayout8i15ui1ul2f2ui64",e);class n extends Zi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t){const r=this.length;return this.resize(r+1),this.emplace(r,t)}emplace(t,r){return this.float32[1*t+0]=r,t}}n.prototype.bytesPerElement=4,st("StructArrayLayout1f4",n);class l extends Zi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,r,s){const u=this.length;return this.resize(u+1),this.emplace(u,t,r,s)}emplace(t,r,s,u){const m=3*t;return this.uint16[6*t+0]=r,this.float32[m+1]=s,this.float32[m+2]=u,t}}l.prototype.bytesPerElement=12,st("StructArrayLayout1ui2f12",l);class h extends Zi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,r,s){const u=this.length;return this.resize(u+1),this.emplace(u,t,r,s)}emplace(t,r,s,u){const m=4*t;return this.uint32[2*t+0]=r,this.uint16[m+2]=s,this.uint16[m+3]=u,t}}h.prototype.bytesPerElement=8,st("StructArrayLayout1ul2ui8",h);class g extends Zi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,r){const s=this.length;return this.resize(s+1),this.emplace(s,t,r)}emplace(t,r,s){const u=2*t;return this.uint16[u+0]=r,this.uint16[u+1]=s,t}}g.prototype.bytesPerElement=4,st("StructArrayLayout2ui4",g);class v extends Zi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t){const r=this.length;return this.resize(r+1),this.emplace(r,t)}emplace(t,r){return this.uint16[1*t+0]=r,t}}v.prototype.bytesPerElement=2,st("StructArrayLayout1ui2",v);class w extends Zi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,r,s,u){const m=this.length;return this.resize(m+1),this.emplace(m,t,r,s,u)}emplace(t,r,s,u,m){const _=4*t;return this.float32[_+0]=r,this.float32[_+1]=s,this.float32[_+2]=u,this.float32[_+3]=m,t}}w.prototype.bytesPerElement=16,st("StructArrayLayout4f16",w);class C extends Ki{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new ye(this.anchorPointX,this.anchorPointY)}}C.prototype.size=20;class z extends Oo{get(t){return new C(this,t)}}st("CollisionBoxArray",z);class k extends Ki{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(t){this._structArray.uint8[this._pos1+37]=t}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(t){this._structArray.uint8[this._pos1+38]=t}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(t){this._structArray.uint32[this._pos4+10]=t}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}k.prototype.size=48;class O extends p{get(t){return new k(this,t)}}st("PlacedSymbolArray",O);class I extends Ki{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(t){this._structArray.uint32[this._pos4+12]=t}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+14]}get textAnchorOffsetStartIndex(){return this._structArray.uint16[this._pos2+30]}get textAnchorOffsetEndIndex(){return this._structArray.uint16[this._pos2+31]}}I.prototype.size=64;class F extends e{get(t){return new I(this,t)}}st("SymbolInstanceArray",F);class H extends n{getoffsetX(t){return this.float32[1*t+0]}}st("GlyphOffsetArray",H);class K extends Ai{getx(t){return this.int16[3*t+0]}gety(t){return this.int16[3*t+1]}gettileUnitDistanceFromAnchor(t){return this.int16[3*t+2]}}st("SymbolLineVertexArray",K);class W extends Ki{get textAnchor(){return this._structArray.uint16[this._pos2+0]}get textOffset0(){return this._structArray.float32[this._pos4+1]}get textOffset1(){return this._structArray.float32[this._pos4+2]}}W.prototype.size=12;class J extends l{get(t){return new W(this,t)}}st("TextAnchorOffsetArray",J);class ie extends Ki{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}ie.prototype.size=8;class oe extends h{get(t){return new ie(this,t)}}st("FeatureIndexArray",oe);class te extends gi{}class le extends gi{}class ue extends gi{}class ae extends uo{}class fe extends ho{}class Ae extends po{}class we extends cl{}class Se extends Hn{}class Ee extends ul{}class Qe extends tr{}class Ke extends Xl{}class Ne extends Ru{}class lt extends Ou{}class Tt extends Yl{}class li extends g{}const Ei=xi([{name:"a_pos",components:2,type:"Int16"}],4),{members:Li}=Ei;class Ut{constructor(t=[]){this._forceNewSegmentOnNextPrepare=!1,this.segments=t}prepareSegment(t,r,s,u){const m=this.segments[this.segments.length-1];return t>Ut.MAX_VERTEX_ARRAY_LENGTH&&ji(`Max vertices per segment is ${Ut.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${t}. Consider using the \`fillLargeMeshArrays\` function if you require meshes with more than ${Ut.MAX_VERTEX_ARRAY_LENGTH} vertices.`),this._forceNewSegmentOnNextPrepare||!m||m.vertexLength+t>Ut.MAX_VERTEX_ARRAY_LENGTH||m.sortKey!==u?this.createNewSegment(r,s,u):m}createNewSegment(t,r,s){const u={vertexOffset:t.length,primitiveOffset:r.length,vertexLength:0,primitiveLength:0,vaos:{}};return s!==void 0&&(u.sortKey=s),this._forceNewSegmentOnNextPrepare=!1,this.segments.push(u),u}getOrCreateLatestSegment(t,r,s){return this.prepareSegment(0,t,r,s)}forceNewSegmentOnNextPrepare(){this._forceNewSegmentOnNextPrepare=!0}get(){return this.segments}destroy(){for(const t of this.segments)for(const r in t.vaos)t.vaos[r].destroy()}static simpleSegment(t,r,s,u){return new Ut([{vertexOffset:t,primitiveOffset:r,vertexLength:s,primitiveLength:u,vaos:{},sortKey:0}])}}function Ii(a,t){return 256*(a=Et(Math.floor(a),0,255))+Et(Math.floor(t),0,255)}Ut.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,st("SegmentVector",Ut);const zr=xi([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]),Wi=xi([{name:"a_dasharray_from",components:4,type:"Uint16"},{name:"a_dasharray_to",components:4,type:"Uint16"}]);var Vr,ur,mr,Pr={exports:{}},jo={exports:{}},Vo={exports:{}},$o=(function(){if(mr)return Pr.exports;mr=1;var a=(Vr||(Vr=1,jo.exports=function(r,s){var u,m,_,y,b,T,E,L;for(m=r.length-(u=3&r.length),_=s,b=3432918353,T=461845907,L=0;L<m;)E=255&r.charCodeAt(L)|(255&r.charCodeAt(++L))<<8|(255&r.charCodeAt(++L))<<16|(255&r.charCodeAt(++L))<<24,++L,_=27492+(65535&(y=5*(65535&(_=(_^=E=(65535&(E=(E=(65535&E)*b+(((E>>>16)*b&65535)<<16)&4294967295)<<15|E>>>17))*T+(((E>>>16)*T&65535)<<16)&4294967295)<<13|_>>>19))+((5*(_>>>16)&65535)<<16)&4294967295))+((58964+(y>>>16)&65535)<<16);switch(E=0,u){case 3:E^=(255&r.charCodeAt(L+2))<<16;case 2:E^=(255&r.charCodeAt(L+1))<<8;case 1:_^=E=(65535&(E=(E=(65535&(E^=255&r.charCodeAt(L)))*b+(((E>>>16)*b&65535)<<16)&4294967295)<<15|E>>>17))*T+(((E>>>16)*T&65535)<<16)&4294967295}return _^=r.length,_=2246822507*(65535&(_^=_>>>16))+((2246822507*(_>>>16)&65535)<<16)&4294967295,_=3266489909*(65535&(_^=_>>>13))+((3266489909*(_>>>16)&65535)<<16)&4294967295,(_^=_>>>16)>>>0}),jo.exports),t=(ur||(ur=1,Vo.exports=function(r,s){for(var u,m=r.length,_=s^m,y=0;m>=4;)u=1540483477*(65535&(u=255&r.charCodeAt(y)|(255&r.charCodeAt(++y))<<8|(255&r.charCodeAt(++y))<<16|(255&r.charCodeAt(++y))<<24))+((1540483477*(u>>>16)&65535)<<16),_=1540483477*(65535&_)+((1540483477*(_>>>16)&65535)<<16)^(u=1540483477*(65535&(u^=u>>>24))+((1540483477*(u>>>16)&65535)<<16)),m-=4,++y;switch(m){case 3:_^=(255&r.charCodeAt(y+2))<<16;case 2:_^=(255&r.charCodeAt(y+1))<<8;case 1:_=1540483477*(65535&(_^=255&r.charCodeAt(y)))+((1540483477*(_>>>16)&65535)<<16)}return _=1540483477*(65535&(_^=_>>>13))+((1540483477*(_>>>16)&65535)<<16),(_^=_>>>15)>>>0}),Vo.exports);return Pr.exports=a,Pr.exports.murmur3=a,Pr.exports.murmur2=t,Pr.exports})(),Fo=ke($o);class Es{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(t,r,s,u){this.ids.push(Nc(t)),this.positions.push(r,s,u)}getPositions(t){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const r=Nc(t);let s=0,u=this.ids.length-1;for(;s<u;){const _=s+u>>1;this.ids[_]>=r?u=_:s=_+1}const m=[];for(;this.ids[s]===r;)m.push({index:this.positions[3*s],start:this.positions[3*s+1],end:this.positions[3*s+2]}),s++;return m}static serialize(t,r){const s=new Float64Array(t.ids),u=new Uint32Array(t.positions);return fo(s,u,0,s.length-1),r&&r.push(s.buffer,u.buffer),{ids:s,positions:u}}static deserialize(t){const r=new Es;return r.ids=t.ids,r.positions=t.positions,r.indexed=!0,r}}function Nc(a){const t=+a;return!isNaN(t)&&t<=Number.MAX_SAFE_INTEGER?t:Fo(String(a))}function fo(a,t,r,s){for(;r<s;){const u=a[r+s>>1];let m=r-1,_=s+1;for(;;){do m++;while(a[m]<u);do _--;while(a[_]>u);if(m>=_)break;da(a,m,_),da(t,3*m,3*_),da(t,3*m+1,3*_+1),da(t,3*m+2,3*_+2)}_-r<s-_?(fo(a,t,r,_),r=_+1):(fo(a,t,_+1,s),s=_)}}function da(a,t,r){const s=a[t];a[t]=a[r],a[r]=s}st("FeaturePositionMap",Es);class ea{constructor(t,r){this.gl=t.gl,this.location=r}}class yn extends ea{constructor(t,r){super(t,r),this.current=0}set(t){this.current!==t&&(this.current=t,this.gl.uniform1f(this.location,t))}}class hl extends ea{constructor(t,r){super(t,r),this.current=[0,0,0,0]}set(t){t[0]===this.current[0]&&t[1]===this.current[1]&&t[2]===this.current[2]&&t[3]===this.current[3]||(this.current=t,this.gl.uniform4f(this.location,t[0],t[1],t[2],t[3]))}}class xr extends ea{constructor(t,r){super(t,r),this.current=It.transparent}set(t){t.r===this.current.r&&t.g===this.current.g&&t.b===this.current.b&&t.a===this.current.a||(this.current=t,this.gl.uniform4f(this.location,t.r,t.g,t.b,t.a))}}const Qr=new Float32Array(16);function Ba(a){return[Ii(255*a.r,255*a.g),Ii(255*a.b,255*a.a)]}class hr{constructor(t,r,s){this.value=t,this.uniformNames=r.map((u=>`u_${u}`)),this.type=s}setUniform(t,r,s){t.set(s.constantOr(this.value))}getBinding(t,r,s){return this.type==="color"?new xr(t,r):new yn(t,r)}}class Gn{constructor(t,r){this.uniformNames=r.map((s=>`u_${s}`)),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(t,r){this.pixelRatioFrom=r.pixelRatio,this.pixelRatioTo=t.pixelRatio,this.patternFrom=r.tlbr,this.patternTo=t.tlbr}setConstantDashPositions(t,r){this.dashTo=[0,t.y,t.height,t.width],this.dashFrom=[0,r.y,r.height,r.width]}setUniform(t,r,s,u){let m=null;u==="u_pattern_to"?m=this.patternTo:u==="u_pattern_from"?m=this.patternFrom:u==="u_dasharray_to"?m=this.dashTo:u==="u_dasharray_from"?m=this.dashFrom:u==="u_pixel_ratio_to"?m=this.pixelRatioTo:u==="u_pixel_ratio_from"&&(m=this.pixelRatioFrom),m!==null&&t.set(m)}getBinding(t,r,s){return s.substr(0,9)==="u_pattern"||s.substr(0,12)==="u_dasharray_"?new hl(t,r):new yn(t,r)}}class qn{constructor(t,r,s,u){this.expression=t,this.type=s,this.maxValue=0,this.paintVertexAttributes=r.map((m=>({name:`a_${m}`,type:"Float32",components:s==="color"?2:1,offset:0}))),this.paintVertexArray=new u}populatePaintArray(t,r,s){const u=this.paintVertexArray.length,m=this.expression.evaluate(new bi(0,s),r,{},s.canonical,[],s.formattedSection);this.paintVertexArray.resize(t),this._setPaintValue(u,t,m)}updatePaintArray(t,r,s,u,m){const _=this.expression.evaluate(new bi(0,m),s,u);this._setPaintValue(t,r,_)}_setPaintValue(t,r,s){if(this.type==="color"){const u=Ba(s);for(let m=t;m<r;m++)this.paintVertexArray.emplace(m,u[0],u[1])}else{for(let u=t;u<r;u++)this.paintVertexArray.emplace(u,s);this.maxValue=Math.max(this.maxValue,Math.abs(s))}}upload(t){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=t.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class Oa{constructor(t,r,s,u,m,_){this.expression=t,this.uniformNames=r.map((y=>`u_${y}_t`)),this.type=s,this.useIntegerZoom=u,this.zoom=m,this.maxValue=0,this.paintVertexAttributes=r.map((y=>({name:`a_${y}`,type:"Float32",components:s==="color"?4:2,offset:0}))),this.paintVertexArray=new _}populatePaintArray(t,r,s){const u=this.expression.evaluate(new bi(this.zoom,s),r,{},s.canonical,[],s.formattedSection),m=this.expression.evaluate(new bi(this.zoom+1,s),r,{},s.canonical,[],s.formattedSection),_=this.paintVertexArray.length;this.paintVertexArray.resize(t),this._setPaintValue(_,t,u,m)}updatePaintArray(t,r,s,u,m){const _=this.expression.evaluate(new bi(this.zoom,m),s,u),y=this.expression.evaluate(new bi(this.zoom+1,m),s,u);this._setPaintValue(t,r,_,y)}_setPaintValue(t,r,s,u){if(this.type==="color"){const m=Ba(s),_=Ba(u);for(let y=t;y<r;y++)this.paintVertexArray.emplace(y,m[0],m[1],_[0],_[1])}else{for(let m=t;m<r;m++)this.paintVertexArray.emplace(m,s,u);this.maxValue=Math.max(this.maxValue,Math.abs(s),Math.abs(u))}}upload(t){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=t.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(t,r){const s=this.useIntegerZoom?Math.floor(r.zoom):r.zoom,u=Et(this.expression.interpolationFactor(s,this.zoom,this.zoom+1),0,1);t.set(u)}getBinding(t,r,s){return new yn(t,r)}}class No{constructor(t,r,s,u,m,_){this.expression=t,this.type=r,this.useIntegerZoom=s,this.zoom=u,this.layerId=_,this.zoomInPaintVertexArray=new m,this.zoomOutPaintVertexArray=new m}populatePaintArray(t,r,s){const u=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(t),this.zoomOutPaintVertexArray.resize(t),this._setPaintValues(u,t,this.getPositionIds(r),s)}updatePaintArray(t,r,s,u,m){this._setPaintValues(t,r,this.getPositionIds(s),m)}_setPaintValues(t,r,s,u){const m=this.getPositions(u);if(!m||!s)return;const _=m[s.min],y=m[s.mid],b=m[s.max];if(_&&y&&b)for(let T=t;T<r;T++)this.emplace(this.zoomInPaintVertexArray,T,y,_),this.emplace(this.zoomOutPaintVertexArray,T,y,b)}upload(t){if(this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer){const r=this.getVertexAttributes();this.zoomInPaintVertexBuffer=t.createVertexBuffer(this.zoomInPaintVertexArray,r,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=t.createVertexBuffer(this.zoomOutPaintVertexArray,r,this.expression.isStateDependent)}}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class Ph extends No{getPositions(t){return t.imagePositions}getPositionIds(t){return t.patterns&&t.patterns[this.layerId]}getVertexAttributes(){return zr.members}emplace(t,r,s,u){t.emplace(r,s.tlbr[0],s.tlbr[1],s.tlbr[2],s.tlbr[3],u.tlbr[0],u.tlbr[1],u.tlbr[2],u.tlbr[3],s.pixelRatio,u.pixelRatio)}}class Ql extends No{getPositions(t){return t.dashPositions}getPositionIds(t){return t.dashes&&t.dashes[this.layerId]}getVertexAttributes(){return Wi.members}emplace(t,r,s,u){t.emplace(r,0,s.y,s.height,s.width,0,u.y,u.height,u.width)}}class Uo{constructor(t,r,s){this.binders={},this._buffers=[];const u=[];for(const m in t.paint._values){if(!s(m))continue;const _=t.paint.get(m);if(!(_ instanceof Zn&&mn(_.property.specification)))continue;const y=kh(m,t.type),b=_.value,T=_.property.specification.type,E=_.property.useIntegerZoom,L=_.property.specification["property-type"],V=L==="cross-faded"||L==="cross-faded-data-driven";if(b.kind==="constant")this.binders[m]=V?new Gn(b.value,y):new hr(b.value,y,T),u.push(`/u_${m}`);else if(b.kind==="source"||V){const $=Uc(m,T,"source");this.binders[m]=V?m==="line-dasharray"?new Ql(b,T,E,r,$,t.id):new Ph(b,T,E,r,$,t.id):new qn(b,y,T,$),u.push(`/a_${m}`)}else{const $=Uc(m,T,"composite");this.binders[m]=new Oa(b,y,T,E,r,$),u.push(`/z_${m}`)}}this.cacheKey=u.sort().join("")}getMaxValue(t){const r=this.binders[t];return r instanceof qn||r instanceof Oa?r.maxValue:0}populatePaintArrays(t,r,s){for(const u in this.binders){const m=this.binders[u];(m instanceof qn||m instanceof Oa||m instanceof No)&&m.populatePaintArray(t,r,s)}}setConstantPatternPositions(t,r){for(const s in this.binders){const u=this.binders[s];u instanceof Gn&&u.setConstantPatternPositions(t,r)}}setConstantDashPositions(t,r){for(const s in this.binders){const u=this.binders[s];u instanceof Gn&&u.setConstantDashPositions(t,r)}}updatePaintArrays(t,r,s,u,m){let _=!1;for(const y in t){const b=r.getPositions(y);for(const T of b){const E=s.feature(T.index);for(const L in this.binders){const V=this.binders[L];if((V instanceof qn||V instanceof Oa||V instanceof No)&&V.expression.isStateDependent===!0){const $=u.paint.get(L);V.expression=$.value,V.updatePaintArray(T.start,T.end,E,t[y],m),_=!0}}}}return _}defines(){const t=[];for(const r in this.binders){const s=this.binders[r];(s instanceof hr||s instanceof Gn)&&t.push(...s.uniformNames.map((u=>`#define HAS_UNIFORM_${u}`)))}return t}getBinderAttributes(){const t=[];for(const r in this.binders){const s=this.binders[r];if(s instanceof qn||s instanceof Oa)for(let u=0;u<s.paintVertexAttributes.length;u++)t.push(s.paintVertexAttributes[u].name);else if(s instanceof No){const u=s.getVertexAttributes();for(const m of u)t.push(m.name)}}return t}getBinderUniforms(){const t=[];for(const r in this.binders){const s=this.binders[r];if(s instanceof hr||s instanceof Gn||s instanceof Oa)for(const u of s.uniformNames)t.push(u)}return t}getPaintVertexBuffers(){return this._buffers}getUniforms(t,r){const s=[];for(const u in this.binders){const m=this.binders[u];if(m instanceof hr||m instanceof Gn||m instanceof Oa){for(const _ of m.uniformNames)if(r[_]){const y=m.getBinding(t,r[_],_);s.push({name:_,property:u,binding:y})}}}return s}setUniforms(t,r,s,u){for(const{name:m,property:_,binding:y}of r)this.binders[_].setUniform(y,u,s.get(_),m)}updatePaintBuffers(t){this._buffers=[];for(const r in this.binders){const s=this.binders[r];if(t&&s instanceof No){const u=t.fromScale===2?s.zoomInPaintVertexBuffer:s.zoomOutPaintVertexBuffer;u&&this._buffers.push(u)}else(s instanceof qn||s instanceof Oa)&&s.paintVertexBuffer&&this._buffers.push(s.paintVertexBuffer)}}upload(t){for(const r in this.binders){const s=this.binders[r];(s instanceof qn||s instanceof Oa||s instanceof No)&&s.upload(t)}this.updatePaintBuffers()}destroy(){for(const t in this.binders){const r=this.binders[t];(r instanceof qn||r instanceof Oa||r instanceof No)&&r.destroy()}}}class mo{constructor(t,r,s=()=>!0){this.programConfigurations={};for(const u of t)this.programConfigurations[u.id]=new Uo(u,r,s);this.needsUpload=!1,this._featureMap=new Es,this._bufferOffset=0}populatePaintArrays(t,r,s,u){for(const m in this.programConfigurations)this.programConfigurations[m].populatePaintArrays(t,r,u);r.id!==void 0&&this._featureMap.add(r.id,s,this._bufferOffset,t),this._bufferOffset=t,this.needsUpload=!0}updatePaintArrays(t,r,s,u){for(const m of s)this.needsUpload=this.programConfigurations[m.id].updatePaintArrays(t,this._featureMap,r,m,u)||this.needsUpload}get(t){return this.programConfigurations[t]}upload(t){if(this.needsUpload){for(const r in this.programConfigurations)this.programConfigurations[r].upload(t);this.needsUpload=!1}}destroy(){for(const t in this.programConfigurations)this.programConfigurations[t].destroy()}}function kh(a,t){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-dasharray":["dasharray_to","dasharray_from"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[a]||[a.replace(`${t}-`,"").replace(/-/g,"_")]}function Uc(a,t,r){const s={color:{source:po,composite:w},number:{source:n,composite:po}},u=(function(m){return{"line-pattern":{source:we,composite:we},"fill-pattern":{source:we,composite:we},"fill-extrusion-pattern":{source:we,composite:we},"line-dasharray":{source:Se,composite:Se}}[m]})(a);return u&&u[r]||s[t][r]}st("ConstantBinder",hr),st("CrossFadedConstantBinder",Gn),st("SourceExpressionBinder",qn),st("CrossFadedPatternBinder",Ph),st("CrossFadedDasharrayBinder",Ql),st("CompositeExpressionBinder",Oa),st("ProgramConfiguration",Uo,{omit:["_buffers"]}),st("ProgramConfigurationSet",mo);const dl=Math.pow(2,14)-1,ju=-dl-1;function go(a){const t=wt/a.extent,r=a.loadGeometry();for(let s=0;s<r.length;s++){const u=r[s];for(let m=0;m<u.length;m++){const _=u[m],y=Math.round(_.x*t),b=Math.round(_.y*t);_.x=Et(y,ju,dl),_.y=Et(b,ju,dl),(y<_.x||y>_.x+1||b<_.y||b>_.y+1)&&ji("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return r}function Xn(a,t){return{type:a.type,id:a.id,properties:a.properties,geometry:t?go(a):[]}}const Ap=-32768;function Vf(a,t,r,s,u){a.emplaceBack(Ap+8*t+s,Ap+8*r+u)}class kd{constructor(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((r=>r.id)),this.index=t.index,this.hasDependencies=!1,this.layoutVertexArray=new le,this.indexArray=new Tt,this.segments=new Ut,this.programConfigurations=new mo(t.layers,t.zoom),this.stateDependentLayerIds=this.layers.filter((r=>r.isStateDependent())).map((r=>r.id))}populate(t,r,s){const u=this.layers[0],m=[];let _=null,y=!1,b=u.type==="heatmap";if(u.type==="circle"){const E=u;_=E.layout.get("circle-sort-key"),y=!_.isConstant(),b=b||E.paint.get("circle-pitch-alignment")==="map"}const T=b?r.subdivisionGranularity.circle:1;for(const{feature:E,id:L,index:V,sourceLayerIndex:$}of t){const N=this.layers[0]._featureFilter.needGeometry,G=Xn(E,N);if(!this.layers[0]._featureFilter.filter(new bi(this.zoom),G,s))continue;const Q=y?_.evaluate(G,{},s):void 0,ee={id:L,properties:E.properties,type:E.type,sourceLayerIndex:$,index:V,geometry:N?G.geometry:go(E),patterns:{},sortKey:Q};m.push(ee)}y&&m.sort(((E,L)=>E.sortKey-L.sortKey));for(const E of m){const{geometry:L,index:V,sourceLayerIndex:$}=E,N=t[V].feature;this.addFeature(E,L,V,s,T),r.featureIndex.insert(N,L,V,$,this.index)}}update(t,r,s){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,r,this.stateDependentLayers,{imagePositions:s})}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,Li),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(t,r,s,u,m=1){let _;switch(m){case 1:_=[0,7];break;case 3:_=[0,2,5,7];break;case 5:_=[0,1,3,4,6,7];break;case 7:_=[0,1,2,3,4,5,6,7];break;default:throw new Error(`Invalid circle bucket granularity: ${m}; valid values are 1, 3, 5, 7.`)}const y=_.length;for(const b of r)for(const T of b){const E=T.x,L=T.y;if(E<0||E>=wt||L<0||L>=wt)continue;const V=this.segments.prepareSegment(y*y,this.layoutVertexArray,this.indexArray,t.sortKey),$=V.vertexLength;for(let N=0;N<y;N++)for(let G=0;G<y;G++)Vf(this.layoutVertexArray,E,L,_[G],_[N]);for(let N=0;N<y-1;N++)for(let G=0;G<y-1;G++){const Q=$+N*y+G,ee=$+(N+1)*y+G;this.indexArray.emplaceBack(Q,ee+1,Q+1),this.indexArray.emplaceBack(Q,ee,ee+1)}V.vertexLength+=y*y,V.primitiveLength+=(y-1)*(y-1)*2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,s,{imagePositions:{},canonical:u})}}function Dh(a,t){for(let r=0;r<a.length;r++)if(Zc(t,a[r]))return!0;for(let r=0;r<t.length;r++)if(Zc(a,t[r]))return!0;return!!Ld(a,t)}function Lh(a,t,r){return!!Zc(a,t)||!!Ih(t,a,r)}function Dd(a,t){if(a.length===1)return pa(t,a[0]);for(let r=0;r<t.length;r++){const s=t[r];for(let u=0;u<s.length;u++)if(Zc(a,s[u]))return!0}for(let r=0;r<a.length;r++)if(pa(t,a[r]))return!0;for(let r=0;r<t.length;r++)if(Ld(a,t[r]))return!0;return!1}function $f(a,t,r){if(a.length>1){if(Ld(a,t))return!0;for(let s=0;s<t.length;s++)if(Ih(t[s],a,r))return!0}for(let s=0;s<a.length;s++)if(Ih(a[s],t,r))return!0;return!1}function Ld(a,t){if(a.length===0||t.length===0)return!1;for(let r=0;r<a.length-1;r++){const s=a[r],u=a[r+1];for(let m=0;m<t.length-1;m++)if(cg(s,u,t[m],t[m+1]))return!0}return!1}function cg(a,t,r,s){return Di(a,r,s)!==Di(t,r,s)&&Di(a,t,r)!==Di(a,t,s)}function Ih(a,t,r){const s=r*r;if(t.length===1)return a.distSqr(t[0])<s;for(let u=1;u<t.length;u++)if($r(a,t[u-1],t[u])<s)return!0;return!1}function $r(a,t,r){const s=t.distSqr(r);if(s===0)return a.distSqr(t);const u=((a.x-t.x)*(r.x-t.x)+(a.y-t.y)*(r.y-t.y))/s;return a.distSqr(u<0?t:u>1?r:r.sub(t)._mult(u)._add(t))}function pa(a,t){let r,s,u,m=!1;for(let _=0;_<a.length;_++){r=a[_];for(let y=0,b=r.length-1;y<r.length;b=y++)s=r[y],u=r[b],s.y>t.y!=u.y>t.y&&t.x<(u.x-s.x)*(t.y-s.y)/(u.y-s.y)+s.x&&(m=!m)}return m}function Zc(a,t){let r=!1;for(let s=0,u=a.length-1;s<a.length;u=s++){const m=a[s],_=a[u];m.y>t.y!=_.y>t.y&&t.x<(_.x-m.x)*(t.y-m.y)/(_.y-m.y)+m.x&&(r=!r)}return r}function Ff(a,t,r){const s=r[0],u=r[2];if(a.x<s.x&&t.x<s.x||a.x>u.x&&t.x>u.x||a.y<s.y&&t.y<s.y||a.y>u.y&&t.y>u.y)return!1;const m=Di(a,t,r[0]);return m!==Di(a,t,r[1])||m!==Di(a,t,r[2])||m!==Di(a,t,r[3])}function Hc(a,t,r){const s=t.paint.get(a).value;return s.kind==="constant"?s.value:r.programConfigurations.get(t.id).getMaxValue(a)}function Rh(a){return Math.sqrt(a[0]*a[0]+a[1]*a[1])}function Kl(a,t,r,s,u){if(!t[0]&&!t[1])return a;const m=ye.convert(t)._mult(u);r==="viewport"&&m._rotate(-s);const _=[];for(let y=0;y<a.length;y++)_.push(a[y].sub(m));return _}function Nf({queryGeometry:a,size:t},r){return Lh(a,r,t)}function Id({queryGeometry:a,size:t,transform:r,unwrappedTileID:s,getElevation:u},m){return Lh(a,m,t*(r.projectTileCoordinates(m.x,m.y,s,u).signedDistanceFromCamera/r.cameraToCenterDistance))}function Uf({queryGeometry:a,size:t,transform:r,unwrappedTileID:s,getElevation:u},m){const _=r.projectTileCoordinates(m.x,m.y,s,u).signedDistanceFromCamera,y=t*(r.cameraToCenterDistance/_);return Lh(a,Oh(m,r,s,u),y)}function ug({queryGeometry:a,size:t,transform:r,unwrappedTileID:s,getElevation:u},m){return Lh(a,Oh(m,r,s,u),t)}function Bh({queryGeometry:a,size:t,transform:r,unwrappedTileID:s,getElevation:u,pitchAlignment:m="map",pitchScale:_="map"},y){const b=m==="map"?_==="map"?Nf:Id:_==="map"?Uf:ug,T={queryGeometry:a,size:t,transform:r,unwrappedTileID:s,getElevation:u};for(const E of y)for(const L of E)if(b(T,L))return!0;return!1}function Oh(a,t,r,s){const u=t.projectTileCoordinates(a.x,a.y,r,s).point;return new ye((.5*u.x+.5)*t.width,(.5*-u.y+.5)*t.height)}let Ep,zp;st("CircleBucket",kd,{omit:["layers"]});var Zf={get paint(){return zp=zp||new Ui({"circle-radius":new yt(be.paint_circle["circle-radius"]),"circle-color":new yt(be.paint_circle["circle-color"]),"circle-blur":new yt(be.paint_circle["circle-blur"]),"circle-opacity":new yt(be.paint_circle["circle-opacity"]),"circle-translate":new ut(be.paint_circle["circle-translate"]),"circle-translate-anchor":new ut(be.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new ut(be.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new ut(be.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new yt(be.paint_circle["circle-stroke-width"]),"circle-stroke-color":new yt(be.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new yt(be.paint_circle["circle-stroke-opacity"])})},get layout(){return Ep=Ep||new Ui({"circle-sort-key":new yt(be.layout_circle["circle-sort-key"])})}};class Pp extends Yr{constructor(t,r){super(t,Zf,r)}createBucket(t){return new kd(t)}queryRadius(t){const r=t;return Hc("circle-radius",this,r)+Hc("circle-stroke-width",this,r)+Rh(this.paint.get("circle-translate"))}queryIntersectsFeature({queryGeometry:t,feature:r,featureState:s,geometry:u,transform:m,pixelsToTileUnits:_,unwrappedTileID:y,getElevation:b}){const T=Kl(t,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),-m.bearingInRadians,_),E=this.paint.get("circle-radius").evaluate(r,s)+this.paint.get("circle-stroke-width").evaluate(r,s),L=this.paint.get("circle-pitch-scale"),V=this.paint.get("circle-pitch-alignment");let $,N;return V==="map"?($=T,N=E*_):($=(function(G,Q,ee,_e){return G.map((ne=>Oh(ne,Q,ee,_e)))})(T,m,y,b),N=E),Bh({queryGeometry:$,size:N,transform:m,unwrappedTileID:y,getElevation:b,pitchAlignment:V,pitchScale:L},u)}}class Rd extends kd{}let Bd;st("HeatmapBucket",Rd,{omit:["layers"]});var Hf={get paint(){return Bd=Bd||new Ui({"heatmap-radius":new yt(be.paint_heatmap["heatmap-radius"]),"heatmap-weight":new yt(be.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new ut(be.paint_heatmap["heatmap-intensity"]),"heatmap-color":new sl(be.paint_heatmap["heatmap-color"]),"heatmap-opacity":new ut(be.paint_heatmap["heatmap-opacity"])})}};function jh(a,{width:t,height:r},s,u){if(u){if(u instanceof Uint8ClampedArray)u=new Uint8Array(u.buffer);else if(u.length!==t*r*s)throw new RangeError(`mismatched image size. expected: ${u.length} but got: ${t*r*s}`)}else u=new Uint8Array(t*r*s);return a.width=t,a.height=r,a.data=u,a}function Vh(a,{width:t,height:r},s){if(t===a.width&&r===a.height)return;const u=jh({},{width:t,height:r},s);$h(a,u,{x:0,y:0},{x:0,y:0},{width:Math.min(a.width,t),height:Math.min(a.height,r)},s),a.width=t,a.height=r,a.data=u.data}function $h(a,t,r,s,u,m){if(u.width===0||u.height===0)return t;if(u.width>a.width||u.height>a.height||r.x>a.width-u.width||r.y>a.height-u.height)throw new RangeError("out of range source coordinates for image copy");if(u.width>t.width||u.height>t.height||s.x>t.width-u.width||s.y>t.height-u.height)throw new RangeError("out of range destination coordinates for image copy");const _=a.data,y=t.data;if(_===y)throw new Error("srcData equals dstData, so image is already copied");for(let b=0;b<u.height;b++){const T=((r.y+b)*a.width+r.x)*m,E=((s.y+b)*t.width+s.x)*m;for(let L=0;L<u.width*m;L++)y[E+L]=_[T+L]}return t}class Vu{constructor(t,r){jh(this,t,1,r)}resize(t){Vh(this,t,1)}clone(){return new Vu({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(t,r,s,u,m){$h(t,r,s,u,m,1)}}class za{constructor(t,r){jh(this,t,4,r)}resize(t){Vh(this,t,4)}replace(t,r){r?this.data.set(t):this.data=t instanceof Uint8ClampedArray?new Uint8Array(t.buffer):t}clone(){return new za({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(t,r,s,u,m){$h(t,r,s,u,m,4)}setPixel(t,r,s){const u=4*(t*this.width+r);this.data[u+0]=Math.round(255*s.r/s.a),this.data[u+1]=Math.round(255*s.g/s.a),this.data[u+2]=Math.round(255*s.b/s.a),this.data[u+3]=Math.round(255*s.a)}}function kp(a){const t={},r=a.resolution||256,s=a.clips?a.clips.length:1,u=a.image||new za({width:r,height:s});if(Math.log(r)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${r}`);const m=(_,y,b)=>{t[a.evaluationKey]=b;const T=a.expression.evaluate(t);u.setPixel(_/4/r,y/4,T)};if(a.clips)for(let _=0,y=0;_<s;++_,y+=4*r)for(let b=0,T=0;b<r;b++,T+=4){const E=b/(r-1),{start:L,end:V}=a.clips[_];m(y,T,L*(1-E)+V*E)}else for(let _=0,y=0;_<r;_++,y+=4)m(0,y,_/(r-1));return u}st("AlphaImage",Vu),st("RGBAImage",za);const Zo="big-fb";class Dp extends Yr{createBucket(t){return new Rd(t)}constructor(t,r){super(t,Hf,r),this.heatmapFbos=new Map,this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(t){t==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=kp({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbos.has(Zo)&&this.heatmapFbos.delete(Zo)}queryRadius(t){return Hc("heatmap-radius",this,t)}queryIntersectsFeature({queryGeometry:t,feature:r,featureState:s,geometry:u,transform:m,pixelsToTileUnits:_,unwrappedTileID:y,getElevation:b}){return Bh({queryGeometry:t,size:this.paint.get("heatmap-radius").evaluate(r,s)*_,transform:m,unwrappedTileID:y,getElevation:b},u)}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}}let Gf;var qf={get paint(){return Gf=Gf||new Ui({"hillshade-illumination-direction":new ut(be.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-altitude":new ut(be.paint_hillshade["hillshade-illumination-altitude"]),"hillshade-illumination-anchor":new ut(be.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new ut(be.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new ut(be.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new ut(be.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new ut(be.paint_hillshade["hillshade-accent-color"]),"hillshade-method":new ut(be.paint_hillshade["hillshade-method"])})}};class pl extends Yr{constructor(t,r){super(t,qf,r),this.recalculate({zoom:0,zoomHistory:{}},void 0)}getIlluminationProperties(){let t=this.paint.get("hillshade-illumination-direction").values,r=this.paint.get("hillshade-illumination-altitude").values,s=this.paint.get("hillshade-highlight-color").values,u=this.paint.get("hillshade-shadow-color").values;const m=Math.max(t.length,r.length,s.length,u.length);t=t.concat(Array(m-t.length).fill(t.at(-1))),r=r.concat(Array(m-r.length).fill(r.at(-1))),s=s.concat(Array(m-s.length).fill(s.at(-1))),u=u.concat(Array(m-u.length).fill(u.at(-1)));const _=r.map(Tl);return{directionRadians:t.map(Tl),altitudeRadians:_,shadowColor:u,highlightColor:s}}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}}let Od;var Xf={get paint(){return Od=Od||new Ui({"color-relief-opacity":new ut(be["paint_color-relief"]["color-relief-opacity"]),"color-relief-color":new sl(be["paint_color-relief"]["color-relief-color"])})}};class $u{constructor(t,r,s,u){this.context=t,this.format=s,this.texture=t.gl.createTexture(),this.update(r,u)}update(t,r,s){const{width:u,height:m}=t,_=!(this.size&&this.size[0]===u&&this.size[1]===m||s),{context:y}=this,{gl:b}=y;if(this.useMipmap=!!(r&&r.useMipmap),b.bindTexture(b.TEXTURE_2D,this.texture),y.pixelStoreUnpackFlipY.set(!1),y.pixelStoreUnpack.set(1),y.pixelStoreUnpackPremultiplyAlpha.set(this.format===b.RGBA&&(!r||r.premultiply!==!1)),_)this.size=[u,m],t instanceof HTMLImageElement||t instanceof HTMLCanvasElement||t instanceof HTMLVideoElement||t instanceof ImageData||En(t)?b.texImage2D(b.TEXTURE_2D,0,this.format,this.format,b.UNSIGNED_BYTE,t):b.texImage2D(b.TEXTURE_2D,0,this.format,u,m,0,this.format,b.UNSIGNED_BYTE,t.data);else{const{x:T,y:E}=s||{x:0,y:0};t instanceof HTMLImageElement||t instanceof HTMLCanvasElement||t instanceof HTMLVideoElement||t instanceof ImageData||En(t)?b.texSubImage2D(b.TEXTURE_2D,0,T,E,b.RGBA,b.UNSIGNED_BYTE,t):b.texSubImage2D(b.TEXTURE_2D,0,T,E,u,m,b.RGBA,b.UNSIGNED_BYTE,t.data)}this.useMipmap&&this.isSizePowerOfTwo()&&b.generateMipmap(b.TEXTURE_2D),y.pixelStoreUnpackFlipY.setDefault(),y.pixelStoreUnpack.setDefault(),y.pixelStoreUnpackPremultiplyAlpha.setDefault()}bind(t,r,s){const{context:u}=this,{gl:m}=u;m.bindTexture(m.TEXTURE_2D,this.texture),s!==m.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(s=m.LINEAR),t!==this.filter&&(m.texParameteri(m.TEXTURE_2D,m.TEXTURE_MAG_FILTER,t),m.texParameteri(m.TEXTURE_2D,m.TEXTURE_MIN_FILTER,s||t),this.filter=t),r!==this.wrap&&(m.texParameteri(m.TEXTURE_2D,m.TEXTURE_WRAP_S,r),m.texParameteri(m.TEXTURE_2D,m.TEXTURE_WRAP_T,r),this.wrap=r)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:t}=this.context;t.deleteTexture(this.texture),this.texture=null}}class Fu{constructor(t,r,s,u=1,m=1,_=1,y=0){if(this.uid=t,r.height!==r.width)throw new RangeError("DEM tiles must be square");if(s&&!["mapbox","terrarium","custom"].includes(s))return void ji(`"${s}" is not a valid encoding type. Valid types include "mapbox", "terrarium" and "custom".`);this.stride=r.height;const b=this.dim=r.height-2;switch(this.data=new Uint32Array(r.data.buffer),s){case"terrarium":this.redFactor=256,this.greenFactor=1,this.blueFactor=1/256,this.baseShift=32768;break;case"custom":this.redFactor=u,this.greenFactor=m,this.blueFactor=_,this.baseShift=y;break;default:this.redFactor=6553.6,this.greenFactor=25.6,this.blueFactor=.1,this.baseShift=1e4}for(let T=0;T<b;T++)this.data[this._idx(-1,T)]=this.data[this._idx(0,T)],this.data[this._idx(b,T)]=this.data[this._idx(b-1,T)],this.data[this._idx(T,-1)]=this.data[this._idx(T,0)],this.data[this._idx(T,b)]=this.data[this._idx(T,b-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(b,-1)]=this.data[this._idx(b-1,0)],this.data[this._idx(-1,b)]=this.data[this._idx(0,b-1)],this.data[this._idx(b,b)]=this.data[this._idx(b-1,b-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let T=0;T<b;T++)for(let E=0;E<b;E++){const L=this.get(T,E);L>this.max&&(this.max=L),L<this.min&&(this.min=L)}}get(t,r){const s=new Uint8Array(this.data.buffer),u=4*this._idx(t,r);return this.unpack(s[u],s[u+1],s[u+2])}getUnpackVector(){return[this.redFactor,this.greenFactor,this.blueFactor,this.baseShift]}_idx(t,r){if(t<-1||t>=this.dim+1||r<-1||r>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(r+1)*this.stride+(t+1)}unpack(t,r,s){return t*this.redFactor+r*this.greenFactor+s*this.blueFactor-this.baseShift}pack(t){return ir(t,this.getUnpackVector())}getPixels(){return new za({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(t,r,s){if(this.dim!==t.dim)throw new Error("dem dimension mismatch");let u=r*this.dim,m=r*this.dim+this.dim,_=s*this.dim,y=s*this.dim+this.dim;switch(r){case-1:u=m-1;break;case 1:m=u+1}switch(s){case-1:_=y-1;break;case 1:y=_+1}const b=-r*this.dim,T=-s*this.dim;for(let E=_;E<y;E++)for(let L=u;L<m;L++)this.data[this._idx(L,E)]=t.data[this._idx(L+b,E+T)]}}function ir(a,t){const r=t[0],s=t[1],u=t[2],m=t[3],_=Math.min(r,s,u),y=Math.round((a+m)/_);return{r:Math.floor(y*_/r)%256,g:Math.floor(y*_/s)%256,b:Math.floor(y*_/u)%256}}st("DEMData",Fu);class hg extends Yr{constructor(t,r){super(t,Xf,r)}_createColorRamp(t){const r={elevationStops:[],colorStops:[]},s=this._transitionablePaint._values["color-relief-color"].value.expression;if(s instanceof Sa&&s._styleExpression.expression instanceof ba){this.colorRampExpression=s;const _=s._styleExpression.expression;r.elevationStops=_.labels,r.colorStops=[];for(const y of r.elevationStops)r.colorStops.push(_.evaluate({globals:{elevation:y}}))}if(r.elevationStops.length<1&&(r.elevationStops=[0],r.colorStops=[It.transparent]),r.elevationStops.length<2&&(r.elevationStops.push(r.elevationStops[0]+1),r.colorStops.push(r.colorStops[0])),r.elevationStops.length<=t)return r;const u={elevationStops:[],colorStops:[]},m=(r.elevationStops.length-1)/(t-1);for(let _=0;_<r.elevationStops.length-.5;_+=m)u.elevationStops.push(r.elevationStops[Math.round(_)]),u.colorStops.push(r.colorStops[Math.round(_)]);return ji(`Too many colors in specification of ${this.id} color-relief layer, may not render properly.`),u}_colorRampChanged(){return this.colorRampExpression!=this._transitionablePaint._values["color-relief-color"].value.expression}getColorRampTextures(t,r,s){if(this.colorRampTextures&&!this._colorRampChanged())return this.colorRampTextures;const u=this._createColorRamp(r),m=new za({width:u.colorStops.length,height:1}),_=new za({width:u.colorStops.length,height:1});for(let y=0;y<u.elevationStops.length;y++){const b=ir(u.elevationStops[y],s);_.setPixel(0,y,new It(b.r/255,b.g/255,b.b/255,1)),m.setPixel(0,y,u.colorStops[y])}return this.colorRampTextures={elevationTexture:new $u(t,_,t.gl.RGBA),colorTexture:new $u(t,m,t.gl.RGBA)},this.colorRampTextures}hasOffscreenPass(){return this.visibility!=="none"&&!!this.colorRampTextures}}const dg=xi([{name:"a_pos",components:2,type:"Int16"}],4),{members:Yf}=dg;function Wl(a,t,r){const s=r.patternDependencies;let u=!1;for(const m of t){const _=m.paint.get(`${a}-pattern`);_.isConstant()||(u=!0);const y=_.constantOr(null);y&&(u=!0,s[y.to]=!0,s[y.from]=!0)}return u}function zs(a,t,r,s,u){const{zoom:m}=s,_=u.patternDependencies;for(const y of t){const b=y.paint.get(`${a}-pattern`).value;if(b.kind!=="constant"){let T=b.evaluate({zoom:m-1},r,{},u.availableImages),E=b.evaluate({zoom:m},r,{},u.availableImages),L=b.evaluate({zoom:m+1},r,{},u.availableImages);T=T&&T.name?T.name:T,E=E&&E.name?E.name:E,L=L&&L.name?L.name:L,_[T]=!0,_[E]=!0,_[L]=!0,r.patterns[y.id]={min:T,mid:E,max:L}}}return r}function Lp(a,t,r,s,u){let m;if(u===(function(_,y,b,T){let E=0;for(let L=y,V=b-T;L<b;L+=T)E+=(_[V]-_[L])*(_[L+1]+_[V+1]),V=L;return E})(a,t,r,s)>0)for(let _=t;_<r;_+=s)m=jp(_/s|0,a[_],a[_+1],m);else for(let _=r-s;_>=t;_-=s)m=jp(_/s|0,a[_],a[_+1],m);return m&&Nu(m,m.next)&&(Uu(m),m=m.next),m}function Jl(a,t){if(!a)return a;t||(t=a);let r,s=a;do if(r=!1,s.steiner||!Nu(s,s.next)&&ai(s.prev,s,s.next)!==0)s=s.next;else{if(Uu(s),s=t=s.prev,s===s.next)break;r=!0}while(r||s!==t);return t}function fl(a,t,r,s,u,m,_){if(!a)return;!_&&m&&(function(b,T,E,L){let V=b;do V.z===0&&(V.z=Vd(V.x,V.y,T,E,L)),V.prevZ=V.prev,V.nextZ=V.next,V=V.next;while(V!==b);V.prevZ.nextZ=null,V.prevZ=null,(function($){let N,G=1;do{let Q,ee=$;$=null;let _e=null;for(N=0;ee;){N++;let ne=ee,ce=0;for(let Le=0;Le<G&&(ce++,ne=ne.nextZ,ne);Le++);let Te=G;for(;ce>0||Te>0&&ne;)ce!==0&&(Te===0||!ne||ee.z<=ne.z)?(Q=ee,ee=ee.nextZ,ce--):(Q=ne,ne=ne.nextZ,Te--),_e?_e.nextZ=Q:$=Q,Q.prevZ=_e,_e=Q;ee=ne}_e.nextZ=null,G*=2}while(N>1)})(V)})(a,s,u,m);let y=a;for(;a.prev!==a.next;){const b=a.prev,T=a.next;if(m?Qf(a,s,u,m):Ps(a))t.push(b.i,a.i,T.i),Uu(a),a=T.next,y=T.next;else if((a=T)===y){_?_===1?fl(a=Ip(Jl(a),t),t,r,s,u,m,2):_===2&&Kf(a,t,r,s,u,m):fl(Jl(a),t,r,s,u,m,1);break}}}function Ps(a){const t=a.prev,r=a,s=a.next;if(ai(t,r,s)>=0)return!1;const u=t.x,m=r.x,_=s.x,y=t.y,b=r.y,T=s.y,E=Math.min(u,m,_),L=Math.min(y,b,T),V=Math.max(u,m,_),$=Math.max(y,b,T);let N=s.next;for(;N!==t;){if(N.x>=E&&N.x<=V&&N.y>=L&&N.y<=$&&Gc(u,y,m,b,_,T,N.x,N.y)&&ai(N.prev,N,N.next)>=0)return!1;N=N.next}return!0}function Qf(a,t,r,s){const u=a.prev,m=a,_=a.next;if(ai(u,m,_)>=0)return!1;const y=u.x,b=m.x,T=_.x,E=u.y,L=m.y,V=_.y,$=Math.min(y,b,T),N=Math.min(E,L,V),G=Math.max(y,b,T),Q=Math.max(E,L,V),ee=Vd($,N,t,r,s),_e=Vd(G,Q,t,r,s);let ne=a.prevZ,ce=a.nextZ;for(;ne&&ne.z>=ee&&ce&&ce.z<=_e;){if(ne.x>=$&&ne.x<=G&&ne.y>=N&&ne.y<=Q&&ne!==u&&ne!==_&&Gc(y,E,b,L,T,V,ne.x,ne.y)&&ai(ne.prev,ne,ne.next)>=0||(ne=ne.prevZ,ce.x>=$&&ce.x<=G&&ce.y>=N&&ce.y<=Q&&ce!==u&&ce!==_&&Gc(y,E,b,L,T,V,ce.x,ce.y)&&ai(ce.prev,ce,ce.next)>=0))return!1;ce=ce.nextZ}for(;ne&&ne.z>=ee;){if(ne.x>=$&&ne.x<=G&&ne.y>=N&&ne.y<=Q&&ne!==u&&ne!==_&&Gc(y,E,b,L,T,V,ne.x,ne.y)&&ai(ne.prev,ne,ne.next)>=0)return!1;ne=ne.prevZ}for(;ce&&ce.z<=_e;){if(ce.x>=$&&ce.x<=G&&ce.y>=N&&ce.y<=Q&&ce!==u&&ce!==_&&Gc(y,E,b,L,T,V,ce.x,ce.y)&&ai(ce.prev,ce,ce.next)>=0)return!1;ce=ce.nextZ}return!0}function Ip(a,t){let r=a;do{const s=r.prev,u=r.next.next;!Nu(s,u)&&Op(s,r,r.next,u)&&fa(s,u)&&fa(u,s)&&(t.push(s.i,r.i,u.i),Uu(r),Uu(r.next),r=a=u),r=r.next}while(r!==a);return Jl(r)}function Kf(a,t,r,s,u,m){let _=a;do{let y=_.next.next;for(;y!==_.prev;){if(_.i!==y.i&&Wf(_,y)){let b=ks(_,y);return _=Jl(_,_.next),b=Jl(b,b.next),fl(_,t,r,s,u,m,0),void fl(b,t,r,s,u,m,0)}y=y.next}_=_.next}while(_!==a)}function Rp(a,t){let r=a.x-t.x;return r===0&&(r=a.y-t.y,r===0)&&(r=(a.next.y-a.y)/(a.next.x-a.x)-(t.next.y-t.y)/(t.next.x-t.x)),r}function Bp(a,t){const r=(function(u,m){let _=m;const y=u.x,b=u.y;let T,E=-1/0;if(Nu(u,_))return _;do{if(Nu(u,_.next))return _.next;if(b<=_.y&&b>=_.next.y&&_.next.y!==_.y){const G=_.x+(b-_.y)*(_.next.x-_.x)/(_.next.y-_.y);if(G<=y&&G>E&&(E=G,T=_.x<_.next.x?_:_.next,G===y))return T}_=_.next}while(_!==m);if(!T)return null;const L=T,V=T.x,$=T.y;let N=1/0;_=T;do{if(y>=_.x&&_.x>=V&&y!==_.x&&Fr(b<$?y:E,b,V,$,b<$?E:y,b,_.x,_.y)){const G=Math.abs(b-_.y)/(y-_.x);fa(_,u)&&(G<N||G===N&&(_.x>T.x||_.x===T.x&&jd(T,_)))&&(T=_,N=G)}_=_.next}while(_!==L);return T})(a,t);if(!r)return t;const s=ks(r,a);return Jl(s,s.next),Jl(r,r.next)}function jd(a,t){return ai(a.prev,a,t.prev)<0&&ai(t.next,a,a.next)<0}function Vd(a,t,r,s,u){return(a=1431655765&((a=858993459&((a=252645135&((a=16711935&((a=(a-r)*u|0)|a<<8))|a<<4))|a<<2))|a<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=(t-s)*u|0)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function ml(a){let t=a,r=a;do(t.x<r.x||t.x===r.x&&t.y<r.y)&&(r=t),t=t.next;while(t!==a);return r}function Fr(a,t,r,s,u,m,_,y){return(u-_)*(t-y)>=(a-_)*(m-y)&&(a-_)*(s-y)>=(r-_)*(t-y)&&(r-_)*(m-y)>=(u-_)*(s-y)}function Gc(a,t,r,s,u,m,_,y){return!(a===_&&t===y)&&Fr(a,t,r,s,u,m,_,y)}function Wf(a,t){return a.next.i!==t.i&&a.prev.i!==t.i&&!(function(r,s){let u=r;do{if(u.i!==r.i&&u.next.i!==r.i&&u.i!==s.i&&u.next.i!==s.i&&Op(u,u.next,r,s))return!0;u=u.next}while(u!==r);return!1})(a,t)&&(fa(a,t)&&fa(t,a)&&(function(r,s){let u=r,m=!1;const _=(r.x+s.x)/2,y=(r.y+s.y)/2;do u.y>y!=u.next.y>y&&u.next.y!==u.y&&_<(u.next.x-u.x)*(y-u.y)/(u.next.y-u.y)+u.x&&(m=!m),u=u.next;while(u!==r);return m})(a,t)&&(ai(a.prev,a,t.prev)||ai(a,t.prev,t))||Nu(a,t)&&ai(a.prev,a,a.next)>0&&ai(t.prev,t,t.next)>0)}function ai(a,t,r){return(t.y-a.y)*(r.x-t.x)-(t.x-a.x)*(r.y-t.y)}function Nu(a,t){return a.x===t.x&&a.y===t.y}function Op(a,t,r,s){const u=Ji(ai(a,t,r)),m=Ji(ai(a,t,s)),_=Ji(ai(r,s,a)),y=Ji(ai(r,s,t));return u!==m&&_!==y||!(u!==0||!Fh(a,r,t))||!(m!==0||!Fh(a,s,t))||!(_!==0||!Fh(r,a,s))||!(y!==0||!Fh(r,t,s))}function Fh(a,t,r){return t.x<=Math.max(a.x,r.x)&&t.x>=Math.min(a.x,r.x)&&t.y<=Math.max(a.y,r.y)&&t.y>=Math.min(a.y,r.y)}function Ji(a){return a>0?1:a<0?-1:0}function fa(a,t){return ai(a.prev,a,a.next)<0?ai(a,t,a.next)>=0&&ai(a,a.prev,t)>=0:ai(a,t,a.prev)<0||ai(a,a.next,t)<0}function ks(a,t){const r=$d(a.i,a.x,a.y),s=$d(t.i,t.x,t.y),u=a.next,m=t.prev;return a.next=t,t.prev=a,r.next=u,u.prev=r,s.next=r,r.prev=s,m.next=s,s.prev=m,s}function jp(a,t,r,s){const u=$d(a,t,r);return s?(u.next=s.next,u.prev=s,s.next.prev=u,s.next=u):(u.prev=u,u.next=u),u}function Uu(a){a.next.prev=a.prev,a.prev.next=a.next,a.prevZ&&(a.prevZ.nextZ=a.nextZ),a.nextZ&&(a.nextZ.prevZ=a.prevZ)}function $d(a,t,r){return{i:a,x:t,y:r,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}class Zu{constructor(t,r){if(r>t)throw new Error("Min granularity must not be greater than base granularity.");this._baseZoomGranularity=t,this._minGranularity=r}getGranularityForZoomLevel(t){return Math.max(Math.floor(this._baseZoomGranularity/(1<<t)),this._minGranularity,1)}}class qc{constructor(t){this.fill=t.fill,this.line=t.line,this.tile=t.tile,this.stencil=t.stencil,this.circle=t.circle}}qc.noSubdivision=new qc({fill:new Zu(0,0),line:new Zu(0,0),tile:new Zu(0,0),stencil:new Zu(0,0),circle:1}),st("SubdivisionGranularityExpression",Zu),st("SubdivisionGranularitySetting",qc);const ta=-32768,Wa=32767;class Jf{constructor(t,r){this._vertexBuffer=[],this._vertexDictionary=new Map,this._used=!1,this._granularity=t,this._granularityCellSize=wt/t,this._canonical=r}_getKey(t,r){return(t+=32768)<<16|r+32768}_vertexToIndex(t,r){if(t<-32768||r<-32768||t>32767||r>32767)throw new Error("Vertex coordinates are out of signed 16 bit integer range.");const s=0|Math.round(t),u=0|Math.round(r),m=this._getKey(s,u);if(this._vertexDictionary.has(m))return this._vertexDictionary.get(m);const _=this._vertexBuffer.length/2;return this._vertexDictionary.set(m,_),this._vertexBuffer.push(s,u),_}_subdivideTrianglesScanline(t){if(this._granularity<2)return(function(u,m){const _=[];for(let y=0;y<m.length;y+=3){const b=m[y],T=m[y+1],E=m[y+2],L=u[2*b],V=u[2*b+1];(u[2*T]-L)*(u[2*E+1]-V)-(u[2*T+1]-V)*(u[2*E]-L)>0?(_.push(b),_.push(E),_.push(T)):(_.push(b),_.push(T),_.push(E))}return _})(this._vertexBuffer,t);const r=[],s=t.length;for(let u=0;u<s;u+=3){const m=[t[u+0],t[u+1],t[u+2]],_=[this._vertexBuffer[2*t[u+0]+0],this._vertexBuffer[2*t[u+0]+1],this._vertexBuffer[2*t[u+1]+0],this._vertexBuffer[2*t[u+1]+1],this._vertexBuffer[2*t[u+2]+0],this._vertexBuffer[2*t[u+2]+1]];let y=1/0,b=1/0,T=-1/0,E=-1/0;for(let G=0;G<3;G++){const Q=_[2*G],ee=_[2*G+1];y=Math.min(y,Q),T=Math.max(T,Q),b=Math.min(b,ee),E=Math.max(E,ee)}if(y===T||b===E)continue;const L=Math.floor(y/this._granularityCellSize),V=Math.ceil(T/this._granularityCellSize),$=Math.floor(b/this._granularityCellSize),N=Math.ceil(E/this._granularityCellSize);if(L!==V||$!==N)for(let G=$;G<N;G++){const Q=this._scanlineGenerateVertexRingForCellRow(G,_,m);gl(this._vertexBuffer,Q,r)}else r.push(...m)}return r}_scanlineGenerateVertexRingForCellRow(t,r,s){const u=t*this._granularityCellSize,m=u+this._granularityCellSize,_=[];for(let y=0;y<3;y++){const b=r[2*y],T=r[2*y+1],E=r[2*(y+1)%6],L=r[(2*(y+1)+1)%6],V=r[2*(y+2)%6],$=r[(2*(y+2)+1)%6],N=E-b,G=L-T,Q=N===0,ee=G===0,_e=(u-T)/G,ne=(m-T)/G,ce=Math.min(_e,ne),Te=Math.max(_e,ne);if(!ee&&(ce>=1||Te<=0)||ee&&(T<u||T>m)){L>=u&&L<=m&&_.push(s[(y+1)%3]);continue}!ee&&ce>0&&_.push(this._vertexToIndex(b+N*ce,T+G*ce));const Le=b+N*Math.max(ce,0),Ge=b+N*Math.min(Te,1);Q||this._generateIntraEdgeVertices(_,b,T,E,L,Le,Ge),!ee&&Te<1&&_.push(this._vertexToIndex(b+N*Te,T+G*Te)),(ee||L>=u&&L<=m)&&_.push(s[(y+1)%3]),!ee&&(L<=u||L>=m)&&this._generateInterEdgeVertices(_,b,T,E,L,V,$,Ge,u,m)}return _}_generateIntraEdgeVertices(t,r,s,u,m,_,y){const b=u-r,T=m-s,E=T===0,L=E?Math.min(r,u):Math.min(_,y),V=E?Math.max(r,u):Math.max(_,y),$=Math.floor(L/this._granularityCellSize)+1,N=Math.ceil(V/this._granularityCellSize)-1;if(E?r<u:_<y)for(let G=$;G<=N;G++){const Q=G*this._granularityCellSize;t.push(this._vertexToIndex(Q,s+T*(Q-r)/b))}else for(let G=N;G>=$;G--){const Q=G*this._granularityCellSize;t.push(this._vertexToIndex(Q,s+T*(Q-r)/b))}}_generateInterEdgeVertices(t,r,s,u,m,_,y,b,T,E){const L=m-s,V=_-u,$=y-m,N=(T-m)/$,G=(E-m)/$,Q=Math.min(N,G),ee=Math.max(N,G),_e=u+V*Q;let ne=Math.floor(Math.min(_e,b)/this._granularityCellSize)+1,ce=Math.ceil(Math.max(_e,b)/this._granularityCellSize)-1,Te=b<_e;const Le=$===0;if(Le&&(y===T||y===E))return;if(Le||Q>=1||ee<=0){const rt=s-y,We=_+(r-_)*Math.min((T-y)/rt,(E-y)/rt);ne=Math.floor(Math.min(We,b)/this._granularityCellSize)+1,ce=Math.ceil(Math.max(We,b)/this._granularityCellSize)-1,Te=b<We}const Ge=L>0?E:T;if(Te)for(let rt=ne;rt<=ce;rt++)t.push(this._vertexToIndex(rt*this._granularityCellSize,Ge));else for(let rt=ce;rt>=ne;rt--)t.push(this._vertexToIndex(rt*this._granularityCellSize,Ge))}_generateOutline(t){const r=[];for(const s of t){const u=ec(s,this._granularity,!0),m=this._pointArrayToIndices(u),_=[];for(let y=1;y<m.length;y++)_.push(m[y-1]),_.push(m[y]);r.push(_)}return r}_handlePoles(t){let r=!1,s=!1;this._canonical&&(this._canonical.y===0&&(r=!0),this._canonical.y===(1<<this._canonical.z)-1&&(s=!0)),(r||s)&&this._fillPoles(t,r,s)}_ensureNoPoleVertices(){const t=this._vertexBuffer;for(let r=0;r<t.length;r+=2){const s=t[r+1];s===ta&&(t[r+1]=-32767),s===Wa&&(t[r+1]=32766)}}_generatePoleQuad(t,r,s,u,m,_){u>m!=(_===ta)?(t.push(r),t.push(s),t.push(this._vertexToIndex(u,_)),t.push(s),t.push(this._vertexToIndex(m,_)),t.push(this._vertexToIndex(u,_))):(t.push(s),t.push(r),t.push(this._vertexToIndex(u,_)),t.push(this._vertexToIndex(m,_)),t.push(s),t.push(this._vertexToIndex(u,_)))}_fillPoles(t,r,s){const u=this._vertexBuffer,m=wt,_=t.length;for(let y=2;y<_;y+=3){const b=t[y-2],T=t[y-1],E=t[y],L=u[2*b],V=u[2*b+1],$=u[2*T],N=u[2*T+1],G=u[2*E],Q=u[2*E+1];r&&(V===0&&N===0&&this._generatePoleQuad(t,b,T,L,$,ta),N===0&&Q===0&&this._generatePoleQuad(t,T,E,$,G,ta),Q===0&&V===0&&this._generatePoleQuad(t,E,b,G,L,ta)),s&&(V===m&&N===m&&this._generatePoleQuad(t,b,T,L,$,Wa),N===m&&Q===m&&this._generatePoleQuad(t,T,E,$,G,Wa),Q===m&&V===m&&this._generatePoleQuad(t,E,b,G,L,Wa))}}_initializeVertices(t){for(let r=0;r<t.length;r+=2)this._vertexToIndex(t[r],t[r+1])}subdividePolygonInternal(t,r){if(this._used)throw new Error("Subdivision: multiple use not allowed.");this._used=!0;const{flattened:s,holeIndices:u}=(function(y){const b=[],T=[];for(const E of y)if(E.length!==0){E!==y[0]&&b.push(T.length/2);for(let L=0;L<E.length;L++)T.push(E[L].x),T.push(E[L].y)}return{flattened:T,holeIndices:b}})(t);let m;this._initializeVertices(s);try{const y=(function(T,E,L=2){const V=E&&E.length,$=V?E[0]*L:T.length;let N=Lp(T,0,$,L,!0);const G=[];if(!N||N.next===N.prev)return G;let Q,ee,_e;if(V&&(N=(function(ne,ce,Te,Le){const Ge=[];for(let rt=0,We=ce.length;rt<We;rt++){const tt=Lp(ne,ce[rt]*Le,rt<We-1?ce[rt+1]*Le:ne.length,Le,!1);tt===tt.next&&(tt.steiner=!0),Ge.push(ml(tt))}Ge.sort(Rp);for(let rt=0;rt<Ge.length;rt++)Te=Bp(Ge[rt],Te);return Te})(T,E,N,L)),T.length>80*L){Q=T[0],ee=T[1];let ne=Q,ce=ee;for(let Te=L;Te<$;Te+=L){const Le=T[Te],Ge=T[Te+1];Le<Q&&(Q=Le),Ge<ee&&(ee=Ge),Le>ne&&(ne=Le),Ge>ce&&(ce=Ge)}_e=Math.max(ne-Q,ce-ee),_e=_e!==0?32767/_e:0}return fl(N,G,L,Q,ee,_e,0),G})(s,u),b=this._convertIndices(s,y);m=this._subdivideTrianglesScanline(b)}catch(y){console.error(y)}let _=[];return r&&(_=this._generateOutline(t)),this._ensureNoPoleVertices(),this._handlePoles(m),{verticesFlattened:this._vertexBuffer,indicesTriangles:m,indicesLineList:_}}_convertIndices(t,r){const s=[];for(let u=0;u<r.length;u++)s.push(this._vertexToIndex(t[2*r[u]],t[2*r[u]+1]));return s}_pointArrayToIndices(t){const r=[];for(let s=0;s<t.length;s++){const u=t[s];r.push(this._vertexToIndex(u.x,u.y))}return r}}function Ja(a,t,r,s=!0){return new Jf(r,t).subdividePolygonInternal(a,s)}function ec(a,t,r=!1){if(!a||a.length<1)return[];if(a.length<2)return[];const s=a[0],u=a[a.length-1],m=r&&(s.x!==u.x||s.y!==u.y);if(t<2)return m?[...a,a[0]]:[...a];const _=Math.floor(wt/t),y=[];y.push(new ye(a[0].x,a[0].y));const b=a.length,T=m?b:b-1;for(let E=0;E<T;E++){const L=a[E],V=E<b-1?a[E+1]:a[0],$=L.x,N=L.y,G=V.x,Q=V.y,ee=$!==G,_e=N!==Q;if(!ee&&!_e)continue;const ne=G-$,ce=Q-N,Te=Math.abs(ne),Le=Math.abs(ce);let Ge=$,rt=N;for(;;){const tt=ne>0?(Math.floor(Ge/_)+1)*_:(Math.ceil(Ge/_)-1)*_,mt=ce>0?(Math.floor(rt/_)+1)*_:(Math.ceil(rt/_)-1)*_,et=Math.abs(Ge-tt),it=Math.abs(rt-mt),Ve=Math.abs(Ge-G),bt=Math.abs(rt-Q),Pt=ee?et/Te:Number.POSITIVE_INFINITY,vt=_e?it/Le:Number.POSITIVE_INFINITY;if((Ve<=et||!ee)&&(bt<=it||!_e))break;if(Pt<vt&&ee||!_e){Ge=tt,rt+=ce*Pt;const ht=new ye(Ge,Math.round(rt));y[y.length-1].x===ht.x&&y[y.length-1].y===ht.y||y.push(ht)}else{Ge+=ne*vt,rt=mt;const ht=new ye(Math.round(Ge),rt);y[y.length-1].x===ht.x&&y[y.length-1].y===ht.y||y.push(ht)}}const We=new ye(G,Q);y[y.length-1].x===We.x&&y[y.length-1].y===We.y||y.push(We)}return y}function gl(a,t,r){if(t.length===0)throw new Error("Subdivision vertex ring is empty.");let s=0,u=a[2*t[0]];for(let b=1;b<t.length;b++){const T=a[2*t[b]];T<u&&(u=T,s=b)}const m=t.length;let _=s,y=(_+1)%m;for(;;){const b=_-1>=0?_-1:m-1,T=(y+1)%m,E=a[2*t[b]],L=a[2*t[T]],V=a[2*t[_]],$=a[2*t[_]+1],N=a[2*t[y]+1];let G=!1;if(E<L)G=!0;else if(E>L)G=!1;else{const Q=N-$,ee=-(a[2*t[y]]-V),_e=$<N?1:-1;((E-V)*Q+(a[2*t[b]+1]-$)*ee)*_e>((L-V)*Q+(a[2*t[T]+1]-$)*ee)*_e&&(G=!0)}if(G){const Q=t[b],ee=t[_],_e=t[y];Q!==ee&&Q!==_e&&ee!==_e&&r.push(_e,ee,Q),_--,_<0&&(_=m-1)}else{const Q=t[T],ee=t[_],_e=t[y];Q!==ee&&Q!==_e&&ee!==_e&&r.push(_e,ee,Q),y++,y>=m&&(y=0)}if(b===T)break}}function tc(a,t,r,s,u,m,_,y,b){const T=u.length/2,E=_&&y&&b;if(T<Ut.MAX_VERTEX_ARRAY_LENGTH){const L=t.prepareSegment(T,r,s),V=L.vertexLength;for(let G=0;G<m.length;G+=3)s.emplaceBack(V+m[G],V+m[G+1],V+m[G+2]);let $,N;L.vertexLength+=T,L.primitiveLength+=m.length/3,E&&(N=_.prepareSegment(T,r,y),$=N.vertexLength,N.vertexLength+=T);for(let G=0;G<u.length;G+=2)a(u[G],u[G+1]);if(E)for(let G=0;G<b.length;G++){const Q=b[G];for(let ee=1;ee<Q.length;ee+=2)y.emplaceBack($+Q[ee-1],$+Q[ee]);N.primitiveLength+=Q.length/2}}else(function(L,V,$,N,G,Q){const ee=[];for(let Le=0;Le<N.length/2;Le++)ee.push(-1);const _e={count:0};let ne=0,ce=L.getOrCreateLatestSegment(V,$),Te=ce.vertexLength;for(let Le=2;Le<G.length;Le+=3){const Ge=G[Le-2],rt=G[Le-1],We=G[Le];let tt=ee[Ge]<ne,mt=ee[rt]<ne,et=ee[We]<ne;ce.vertexLength+((tt?1:0)+(mt?1:0)+(et?1:0))>Ut.MAX_VERTEX_ARRAY_LENGTH&&(ce=L.createNewSegment(V,$),ne=_e.count,tt=!0,mt=!0,et=!0,Te=0);const it=Yn(ee,N,Q,_e,Ge,tt,ce),Ve=Yn(ee,N,Q,_e,rt,mt,ce),bt=Yn(ee,N,Q,_e,We,et,ce);$.emplaceBack(Te+it-ne,Te+Ve-ne,Te+bt-ne),ce.primitiveLength++}})(t,r,s,u,m,a),E&&(function(L,V,$,N,G,Q){const ee=[];for(let Le=0;Le<N.length/2;Le++)ee.push(-1);const _e={count:0};let ne=0,ce=L.getOrCreateLatestSegment(V,$),Te=ce.vertexLength;for(let Le=0;Le<G.length;Le++){const Ge=G[Le];for(let rt=1;rt<G[Le].length;rt+=2){const We=Ge[rt-1],tt=Ge[rt];let mt=ee[We]<ne,et=ee[tt]<ne;ce.vertexLength+((mt?1:0)+(et?1:0))>Ut.MAX_VERTEX_ARRAY_LENGTH&&(ce=L.createNewSegment(V,$),ne=_e.count,mt=!0,et=!0,Te=0);const it=Yn(ee,N,Q,_e,We,mt,ce),Ve=Yn(ee,N,Q,_e,tt,et,ce);$.emplaceBack(Te+it-ne,Te+Ve-ne),ce.primitiveLength++}}})(_,r,y,u,b,a),t.forceNewSegmentOnNextPrepare(),_?.forceNewSegmentOnNextPrepare()}function Yn(a,t,r,s,u,m,_){if(m){const y=s.count;return r(t[2*u],t[2*u+1]),a[u]=s.count,s.count++,_.vertexLength++,y}return a[u]}class Nh{constructor(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((r=>r.id)),this.index=t.index,this.hasDependencies=!1,this.patternFeatures=[],this.layoutVertexArray=new ue,this.indexArray=new Tt,this.indexArray2=new li,this.programConfigurations=new mo(t.layers,t.zoom),this.segments=new Ut,this.segments2=new Ut,this.stateDependentLayerIds=this.layers.filter((r=>r.isStateDependent())).map((r=>r.id))}populate(t,r,s){this.hasDependencies=Wl("fill",this.layers,r);const u=this.layers[0].layout.get("fill-sort-key"),m=!u.isConstant(),_=[];for(const{feature:y,id:b,index:T,sourceLayerIndex:E}of t){const L=this.layers[0]._featureFilter.needGeometry,V=Xn(y,L);if(!this.layers[0]._featureFilter.filter(new bi(this.zoom),V,s))continue;const $=m?u.evaluate(V,{},s,r.availableImages):void 0,N={id:b,properties:y.properties,type:y.type,sourceLayerIndex:E,index:T,geometry:L?V.geometry:go(y),patterns:{},sortKey:$};_.push(N)}m&&_.sort(((y,b)=>y.sortKey-b.sortKey));for(const y of _){const{geometry:b,index:T,sourceLayerIndex:E}=y;if(this.hasDependencies){const L=zs("fill",this.layers,y,{zoom:this.zoom},r);this.patternFeatures.push(L)}else this.addFeature(y,b,T,s,{},r.subdivisionGranularity);r.featureIndex.insert(t[T].feature,b,T,E,this.index)}}update(t,r,s){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,r,this.stateDependentLayers,{imagePositions:s})}addFeatures(t,r,s){for(const u of this.patternFeatures)this.addFeature(u,u.geometry,u.index,r,s,t.subdivisionGranularity)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,Yf),this.indexBuffer=t.createIndexBuffer(this.indexArray),this.indexBuffer2=t.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(t),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(t,r,s,u,m,_){for(const y of Xs(r,500)){const b=Ja(y,u,_.fill.getGranularityForZoomLevel(u.z)),T=this.layoutVertexArray;tc(((E,L)=>{T.emplaceBack(E,L)}),this.segments,this.layoutVertexArray,this.indexArray,b.verticesFlattened,b.indicesTriangles,this.segments2,this.indexArray2,b.indicesLineList)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,s,{imagePositions:m,canonical:u})}}let Fd,_o;st("FillBucket",Nh,{omit:["layers","patternFeatures"]});var em={get paint(){return _o=_o||new Ui({"fill-antialias":new ut(be.paint_fill["fill-antialias"]),"fill-opacity":new yt(be.paint_fill["fill-opacity"]),"fill-color":new yt(be.paint_fill["fill-color"]),"fill-outline-color":new yt(be.paint_fill["fill-outline-color"]),"fill-translate":new ut(be.paint_fill["fill-translate"]),"fill-translate-anchor":new ut(be.paint_fill["fill-translate-anchor"]),"fill-pattern":new ol(be.paint_fill["fill-pattern"])})},get layout(){return Fd=Fd||new Ui({"fill-sort-key":new yt(be.layout_fill["fill-sort-key"])})}};class Hu extends Yr{constructor(t,r){super(t,em,r)}recalculate(t,r){super.recalculate(t,r);const s=this.paint._values["fill-outline-color"];s.value.kind==="constant"&&s.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(t){return new Nh(t)}queryRadius(){return Rh(this.paint.get("fill-translate"))}queryIntersectsFeature({queryGeometry:t,geometry:r,transform:s,pixelsToTileUnits:u}){return Dd(Kl(t,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),-s.bearingInRadians,u),r)}isTileClipped(){return!0}}const Uh=xi([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),Zh=xi([{name:"a_centroid",components:2,type:"Int16"}],4),{members:Gu}=Uh;class Xc{constructor(t,r,s,u,m){this.properties={},this.extent=s,this.type=0,this.id=void 0,this._pbf=t,this._geometry=-1,this._keys=u,this._values=m,t.readFields(tm,this,r)}loadGeometry(){const t=this._pbf;t.pos=this._geometry;const r=t.readVarint()+t.pos,s=[];let u,m=1,_=0,y=0,b=0;for(;t.pos<r;){if(_<=0){const T=t.readVarint();m=7&T,_=T>>3}if(_--,m===1||m===2)y+=t.readSVarint(),b+=t.readSVarint(),m===1&&(u&&s.push(u),u=[]),u&&u.push(new ye(y,b));else{if(m!==7)throw new Error(`unknown command ${m}`);u&&u.push(u[0].clone())}}return u&&s.push(u),s}bbox(){const t=this._pbf;t.pos=this._geometry;const r=t.readVarint()+t.pos;let s=1,u=0,m=0,_=0,y=1/0,b=-1/0,T=1/0,E=-1/0;for(;t.pos<r;){if(u<=0){const L=t.readVarint();s=7&L,u=L>>3}if(u--,s===1||s===2)m+=t.readSVarint(),_+=t.readSVarint(),m<y&&(y=m),m>b&&(b=m),_<T&&(T=_),_>E&&(E=_);else if(s!==7)throw new Error(`unknown command ${s}`)}return[y,T,b,E]}toGeoJSON(t,r,s){const u=this.extent*Math.pow(2,s),m=this.extent*t,_=this.extent*r,y=this.loadGeometry();function b(V){return[360*(V.x+m)/u-180,360/Math.PI*Math.atan(Math.exp((1-2*(V.y+_)/u)*Math.PI))-90]}function T(V){return V.map(b)}let E;if(this.type===1){const V=[];for(const N of y)V.push(N[0]);const $=T(V);E=V.length===1?{type:"Point",coordinates:$[0]}:{type:"MultiPoint",coordinates:$}}else if(this.type===2){const V=y.map(T);E=V.length===1?{type:"LineString",coordinates:V[0]}:{type:"MultiLineString",coordinates:V}}else{if(this.type!==3)throw new Error("unknown feature type");{const V=(function(N){const G=N.length;if(G<=1)return[N];const Q=[];let ee,_e;for(let ne=0;ne<G;ne++){const ce=Hh(N[ne]);ce!==0&&(_e===void 0&&(_e=ce<0),_e===ce<0?(ee&&Q.push(ee),ee=[N[ne]]):ee&&ee.push(N[ne]))}return ee&&Q.push(ee),Q})(y),$=[];for(const N of V)$.push(N.map(T));E=$.length===1?{type:"Polygon",coordinates:$[0]}:{type:"MultiPolygon",coordinates:$}}}const L={type:"Feature",geometry:E,properties:this.properties};return this.id!=null&&(L.id=this.id),L}}function tm(a,t,r){a===1?t.id=r.readVarint():a===2?(function(s,u){const m=s.readVarint()+s.pos;for(;s.pos<m;){const _=u._keys[s.readVarint()],y=u._values[s.readVarint()];u.properties[_]=y}})(r,t):a===3?t.type=r.readVarint():a===4&&(t._geometry=r.pos)}function Hh(a){let t=0;for(let r,s,u=0,m=a.length,_=m-1;u<m;_=u++)r=a[u],s=a[_],t+=(s.x-r.x)*(r.y+s.y);return t}Xc.types=["Unknown","Point","LineString","Polygon"];class Vp{constructor(t,r){this.version=1,this.name="",this.extent=4096,this.length=0,this._pbf=t,this._keys=[],this._values=[],this._features=[],t.readFields(Nd,this,r),this.length=this._features.length}feature(t){if(t<0||t>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[t];const r=this._pbf.readVarint()+this._pbf.pos;return new Xc(this._pbf,r,this.extent,this._keys,this._values)}}function Nd(a,t,r){a===15?t.version=r.readVarint():a===1?t.name=r.readString():a===5?t.extent=r.readVarint():a===2?t._features.push(r.pos):a===3?t._keys.push(r.readString()):a===4&&t._values.push((function(s){let u=null;const m=s.readVarint()+s.pos;for(;s.pos<m;){const _=s.readVarint()>>3;u=_===1?s.readString():_===2?s.readFloat():_===3?s.readDouble():_===4?s.readVarint64():_===5?s.readVarint():_===6?s.readSVarint():_===7?s.readBoolean():null}if(u==null)throw new Error("unknown feature value");return u})(r))}class $p{constructor(t,r){this.layers=t.readFields(pg,{},r)}}function pg(a,t,r){if(a===3){const s=new Vp(r,r.readVarint()+r.pos);s.length&&(t[s.name]=s)}}const Fp=Math.pow(2,13);function fi(a,t,r,s,u,m,_,y){a.emplaceBack(t,r,2*Math.floor(s*Fp)+_,u*Fp*2,m*Fp*2,Math.round(y))}class Hi{constructor(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((r=>r.id)),this.index=t.index,this.hasDependencies=!1,this.layoutVertexArray=new ae,this.centroidVertexArray=new te,this.indexArray=new Tt,this.programConfigurations=new mo(t.layers,t.zoom),this.segments=new Ut,this.stateDependentLayerIds=this.layers.filter((r=>r.isStateDependent())).map((r=>r.id))}populate(t,r,s){this.features=[],this.hasDependencies=Wl("fill-extrusion",this.layers,r);for(const{feature:u,id:m,index:_,sourceLayerIndex:y}of t){const b=this.layers[0]._featureFilter.needGeometry,T=Xn(u,b);if(!this.layers[0]._featureFilter.filter(new bi(this.zoom),T,s))continue;const E={id:m,sourceLayerIndex:y,index:_,geometry:b?T.geometry:go(u),properties:u.properties,type:u.type,patterns:{}};this.hasDependencies?this.features.push(zs("fill-extrusion",this.layers,E,{zoom:this.zoom},r)):this.addFeature(E,E.geometry,_,s,{},r.subdivisionGranularity),r.featureIndex.insert(u,E.geometry,_,y,this.index,!0)}}addFeatures(t,r,s){for(const u of this.features){const{geometry:m}=u;this.addFeature(u,m,u.index,r,s,t.subdivisionGranularity)}}update(t,r,s){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,r,this.stateDependentLayers,{imagePositions:s})}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,Gu),this.centroidVertexBuffer=t.createVertexBuffer(this.centroidVertexArray,Zh.members,!0),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(t,r,s,u,m,_){for(const y of Xs(r,500)){const b={x:0,y:0,sampleCount:0},T=this.layoutVertexArray.length;this.processPolygon(b,u,t,y,_);const E=this.layoutVertexArray.length-T,L=Math.floor(b.x/b.sampleCount),V=Math.floor(b.y/b.sampleCount);for(let $=0;$<E;$++)this.centroidVertexArray.emplaceBack(L,V)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,s,{imagePositions:m,canonical:u})}processPolygon(t,r,s,u,m){if(u.length<1||Ri(u[0]))return;for(const L of u)L.length!==0&&ui(t,L);const _={segment:this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray)},y=m.fill.getGranularityForZoomLevel(r.z),b=Xc.types[s.type]==="Polygon";for(const L of u){if(L.length===0||Ri(L))continue;const V=ec(L,y,b);this._generateSideFaces(V,_)}if(!b)return;const T=Ja(u,r,y,!1),E=this.layoutVertexArray;tc(((L,V)=>{fi(E,L,V,0,0,1,1,0)}),this.segments,this.layoutVertexArray,this.indexArray,T.verticesFlattened,T.indicesTriangles)}_generateSideFaces(t,r){let s=0;for(let u=1;u<t.length;u++){const m=t[u],_=t[u-1];if(pi(m,_))continue;r.segment.vertexLength+4>Ut.MAX_VERTEX_ARRAY_LENGTH&&(r.segment=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const y=m.sub(_)._perp()._unit(),b=_.dist(m);s+b>32768&&(s=0),fi(this.layoutVertexArray,m.x,m.y,y.x,y.y,0,0,s),fi(this.layoutVertexArray,m.x,m.y,y.x,y.y,0,1,s),s+=b,fi(this.layoutVertexArray,_.x,_.y,y.x,y.y,0,0,s),fi(this.layoutVertexArray,_.x,_.y,y.x,y.y,0,1,s);const T=r.segment.vertexLength;this.indexArray.emplaceBack(T,T+2,T+1),this.indexArray.emplaceBack(T+1,T+2,T+3),r.segment.vertexLength+=4,r.segment.primitiveLength+=2}}}function ui(a,t){for(let r=0;r<t.length;r++){const s=t[r];r===t.length-1&&t[0].x===s.x&&t[0].y===s.y||(a.x+=s.x,a.y+=s.y,a.sampleCount++)}}function pi(a,t){return a.x===t.x&&(a.x<0||a.x>wt)||a.y===t.y&&(a.y<0||a.y>wt)}function Ri(a){return a.every((t=>t.x<0))||a.every((t=>t.x>wt))||a.every((t=>t.y<0))||a.every((t=>t.y>wt))}let bn;st("FillExtrusionBucket",Hi,{omit:["layers","features"]});var ic={get paint(){return bn=bn||new Ui({"fill-extrusion-opacity":new ut(be["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new yt(be["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new ut(be["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new ut(be["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new ol(be["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new yt(be["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new yt(be["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new ut(be["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})}};class qu extends Yr{constructor(t,r){super(t,ic,r)}createBucket(t){return new Hi(t)}queryRadius(){return Rh(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature({queryGeometry:t,feature:r,featureState:s,geometry:u,transform:m,pixelsToTileUnits:_,pixelPosMatrix:y}){const b=Kl(t,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),-m.bearingInRadians,_),T=this.paint.get("fill-extrusion-height").evaluate(r,s),E=this.paint.get("fill-extrusion-base").evaluate(r,s),L=(function($,N){const G=[];for(const Q of $){const ee=[Q.x,Q.y,0,1];Pa(ee,ee,N),G.push(new ye(ee[0]/ee[3],ee[1]/ee[3]))}return G})(b,y),V=(function($,N,G,Q){const ee=[],_e=[],ne=Q[8]*N,ce=Q[9]*N,Te=Q[10]*N,Le=Q[11]*N,Ge=Q[8]*G,rt=Q[9]*G,We=Q[10]*G,tt=Q[11]*G;for(const mt of $){const et=[],it=[];for(const Ve of mt){const bt=Ve.x,Pt=Ve.y,vt=Q[0]*bt+Q[4]*Pt+Q[12],ht=Q[1]*bt+Q[5]*Pt+Q[13],Wt=Q[2]*bt+Q[6]*Pt+Q[14],Xi=Q[3]*bt+Q[7]*Pt+Q[15],wr=Wt+Te,ra=Xi+Le,rn=vt+Ge,Dr=ht+rt,rr=Wt+We,wi=Xi+tt,_r=new ye((vt+ne)/ra,(ht+ce)/ra);_r.z=wr/ra,et.push(_r);const Cr=new ye(rn/wi,Dr/wi);Cr.z=rr/wi,it.push(Cr)}ee.push(et),_e.push(it)}return[ee,_e]})(u,E,T,y);return(function($,N,G){let Q=1/0;Dd(G,N)&&(Q=Ds(G,N[0]));for(let ee=0;ee<N.length;ee++){const _e=N[ee],ne=$[ee];for(let ce=0;ce<_e.length-1;ce++){const Te=_e[ce],Le=[Te,_e[ce+1],ne[ce+1],ne[ce],Te];Dh(G,Le)&&(Q=Math.min(Q,Ds(G,Le)))}}return Q!==1/0&&Q})(V[0],V[1],L)}}function Yc(a,t){return a.x*t.x+a.y*t.y}function Ds(a,t){if(a.length===1){let r=0;const s=t[r++];let u;for(;!u||s.equals(u);)if(u=t[r++],!u)return 1/0;for(;r<t.length;r++){const m=t[r],_=a[0],y=u.sub(s),b=m.sub(s),T=_.sub(s),E=Yc(y,y),L=Yc(y,b),V=Yc(b,b),$=Yc(T,y),N=Yc(T,b),G=E*V-L*L,Q=(V*$-L*N)/G,ee=(E*N-L*$)/G,_e=s.z*(1-Q-ee)+u.z*Q+m.z*ee;if(isFinite(_e))return _e}return 1/0}{let r=1/0;for(const s of t)r=Math.min(r,s.z);return r}}const kr=xi([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:rc}=kr,Qc=xi([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:Np}=Qc,Qn=Math.cos(Math.PI/180*37.5),Kc=Math.pow(2,14)/.5;class Wc{constructor(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((r=>r.id)),this.index=t.index,this.hasDependencies=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach((r=>{this.gradients[r.id]={}})),this.layoutVertexArray=new fe,this.layoutVertexArray2=new Ae,this.indexArray=new Tt,this.programConfigurations=new mo(t.layers,t.zoom),this.segments=new Ut,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter((r=>r.isStateDependent())).map((r=>r.id))}populate(t,r,s){this.hasDependencies=Wl("line",this.layers,r)||this.hasLineDasharray(this.layers);const u=this.layers[0].layout.get("line-sort-key"),m=!u.isConstant(),_=[];for(const{feature:y,id:b,index:T,sourceLayerIndex:E}of t){const L=this.layers[0]._featureFilter.needGeometry,V=Xn(y,L);if(!this.layers[0]._featureFilter.filter(new bi(this.zoom),V,s))continue;const $=m?u.evaluate(V,{},s):void 0,N={id:b,properties:y.properties,type:y.type,sourceLayerIndex:E,index:T,geometry:L?V.geometry:go(y),patterns:{},dashes:{},sortKey:$};_.push(N)}m&&_.sort(((y,b)=>y.sortKey-b.sortKey));for(const y of _){const{geometry:b,index:T,sourceLayerIndex:E}=y;this.hasDependencies?(Wl("line",this.layers,r)?zs("line",this.layers,y,{zoom:this.zoom},r):this.hasLineDasharray(this.layers)&&this.addLineDashDependencies(this.layers,y,this.zoom,r),this.patternFeatures.push(y)):this.addFeature(y,b,T,s,{},{},r.subdivisionGranularity),r.featureIndex.insert(t[T].feature,b,T,E,this.index)}}update(t,r,s,u){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,r,this.stateDependentLayers,{imagePositions:s,dashPositions:u})}addFeatures(t,r,s,u){for(const m of this.patternFeatures)this.addFeature(m,m.geometry,m.index,r,s,u,t.subdivisionGranularity)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(t){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=t.createVertexBuffer(this.layoutVertexArray2,Np)),this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,rc),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(t){if(t.properties&&Object.prototype.hasOwnProperty.call(t.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(t.properties,"mapbox_clip_end"))return{start:+t.properties.mapbox_clip_start,end:+t.properties.mapbox_clip_end}}addFeature(t,r,s,u,m,_,y){const b=this.layers[0].layout,T=b.get("line-join").evaluate(t,{}),E=b.get("line-cap"),L=b.get("line-miter-limit"),V=b.get("line-round-limit");this.lineClips=this.lineFeatureClips(t);for(const $ of r)this.addLine($,t,T,E,L,V,u,y);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,s,{imagePositions:m,dashPositions:_,canonical:u})}addLine(t,r,s,u,m,_,y,b){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,t=ec(t,y?b.line.getGranularityForZoomLevel(y.z):1),this.lineClips){this.lineClipsArray.push(this.lineClips);for(let ne=0;ne<t.length-1;ne++)this.totalDistance+=t[ne].dist(t[ne+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const T=Xc.types[r.type]==="Polygon";let E=t.length;for(;E>=2&&t[E-1].equals(t[E-2]);)E--;let L=0;for(;L<E-1&&t[L].equals(t[L+1]);)L++;if(E<(T?3:2))return;s==="bevel"&&(m=1.05);const V=this.overscaling<=16?122880/(512*this.overscaling):0,$=this.segments.prepareSegment(10*E,this.layoutVertexArray,this.indexArray);let N,G,Q,ee,_e;this.e1=this.e2=-1,T&&(N=t[E-2],_e=t[L].sub(N)._unit()._perp());for(let ne=L;ne<E;ne++){if(Q=ne===E-1?T?t[L+1]:void 0:t[ne+1],Q&&t[ne].equals(Q))continue;_e&&(ee=_e),N&&(G=N),N=t[ne],_e=Q?Q.sub(N)._unit()._perp():ee,ee=ee||_e;let ce=ee.add(_e);ce.x===0&&ce.y===0||ce._unit();const Te=ee.x*_e.x+ee.y*_e.y,Le=ce.x*_e.x+ce.y*_e.y,Ge=Le!==0?1/Le:1/0,rt=2*Math.sqrt(2-2*Le),We=Le<Qn&&G&&Q,tt=ee.x*_e.y-ee.y*_e.x>0;if(We&&ne>L){const it=N.dist(G);if(it>2*V){const Ve=N.sub(N.sub(G)._mult(V/it)._round());this.updateDistance(G,Ve),this.addCurrentVertex(Ve,ee,0,0,$),G=Ve}}const mt=G&&Q;let et=mt?s:T?"butt":u;if(mt&&et==="round"&&(Ge<_?et="miter":Ge<=2&&(et="fakeround")),et==="miter"&&Ge>m&&(et="bevel"),et==="bevel"&&(Ge>2&&(et="flipbevel"),Ge<m&&(et="miter")),G&&this.updateDistance(G,N),et==="miter")ce._mult(Ge),this.addCurrentVertex(N,ce,0,0,$);else if(et==="flipbevel"){if(Ge>100)ce=_e.mult(-1);else{const it=Ge*ee.add(_e).mag()/ee.sub(_e).mag();ce._perp()._mult(it*(tt?-1:1))}this.addCurrentVertex(N,ce,0,0,$),this.addCurrentVertex(N,ce.mult(-1),0,0,$)}else if(et==="bevel"||et==="fakeround"){const it=-Math.sqrt(Ge*Ge-1),Ve=tt?it:0,bt=tt?0:it;if(G&&this.addCurrentVertex(N,ee,Ve,bt,$),et==="fakeround"){const Pt=Math.round(180*rt/Math.PI/20);for(let vt=1;vt<Pt;vt++){let ht=vt/Pt;if(ht!==.5){const Xi=ht-.5;ht+=ht*Xi*(ht-1)*((1.0904+Te*(Te*(3.55645-1.43519*Te)-3.2452))*Xi*Xi+(.848013+Te*(.215638*Te-1.06021)))}const Wt=_e.sub(ee)._mult(ht)._add(ee)._unit()._mult(tt?-1:1);this.addHalfVertex(N,Wt.x,Wt.y,!1,tt,0,$)}}Q&&this.addCurrentVertex(N,_e,-Ve,-bt,$)}else if(et==="butt")this.addCurrentVertex(N,ce,0,0,$);else if(et==="square"){const it=G?1:-1;this.addCurrentVertex(N,ce,it,it,$)}else et==="round"&&(G&&(this.addCurrentVertex(N,ee,0,0,$),this.addCurrentVertex(N,ee,1,1,$,!0)),Q&&(this.addCurrentVertex(N,_e,-1,-1,$,!0),this.addCurrentVertex(N,_e,0,0,$)));if(We&&ne<E-1){const it=N.dist(Q);if(it>2*V){const Ve=N.add(Q.sub(N)._mult(V/it)._round());this.updateDistance(N,Ve),this.addCurrentVertex(Ve,_e,0,0,$),N=Ve}}}}addCurrentVertex(t,r,s,u,m,_=!1){const y=r.y*u-r.x,b=-r.y-r.x*u;this.addHalfVertex(t,r.x+r.y*s,r.y-r.x*s,_,!1,s,m),this.addHalfVertex(t,y,b,_,!0,-u,m),this.distance>Kc/2&&this.totalDistance===0&&(this.distance=0,this.updateScaledDistance(),this.addCurrentVertex(t,r,s,u,m,_))}addHalfVertex({x:t,y:r},s,u,m,_,y,b){const T=.5*(this.lineClips?this.scaledDistance*(Kc-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((t<<1)+(m?1:0),(r<<1)+(_?1:0),Math.round(63*s)+128,Math.round(63*u)+128,1+(y===0?0:y<0?-1:1)|(63&T)<<2,T>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const E=b.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,E,this.e2),b.primitiveLength++),_?this.e2=E:this.e1=E}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(t,r){this.distance+=t.dist(r),this.updateScaledDistance()}hasLineDasharray(t){for(const r of t){const s=r.paint.get("line-dasharray");if(s&&!s.isConstant())return!0}return!1}addLineDashDependencies(t,r,s,u){for(const m of t){const _=m.paint.get("line-dasharray");if(!_||_.value.kind==="constant")continue;const y=m.layout.get("line-cap")==="round",b={dasharray:_.value.evaluate({zoom:s-1},r,{}),round:y},T={dasharray:_.value.evaluate({zoom:s},r,{}),round:y},E={dasharray:_.value.evaluate({zoom:s+1},r,{}),round:y},L=`${b.dasharray.join(",")},${b.round}`,V=`${T.dasharray.join(",")},${T.round}`,$=`${E.dasharray.join(",")},${E.round}`;u.dashDependencies[L]=b,u.dashDependencies[V]=T,u.dashDependencies[$]=E,r.dashes[m.id]={min:L,mid:V,max:$}}}}let en,Ud;st("LineBucket",Wc,{omit:["layers","patternFeatures"]});var Gh={get paint(){return Ud=Ud||new Ui({"line-opacity":new yt(be.paint_line["line-opacity"]),"line-color":new yt(be.paint_line["line-color"]),"line-translate":new ut(be.paint_line["line-translate"]),"line-translate-anchor":new ut(be.paint_line["line-translate-anchor"]),"line-width":new yt(be.paint_line["line-width"]),"line-gap-width":new yt(be.paint_line["line-gap-width"]),"line-offset":new yt(be.paint_line["line-offset"]),"line-blur":new yt(be.paint_line["line-blur"]),"line-dasharray":new ol(be.paint_line["line-dasharray"]),"line-pattern":new ol(be.paint_line["line-pattern"]),"line-gradient":new sl(be.paint_line["line-gradient"])})},get layout(){return en=en||new Ui({"line-cap":new ut(be.layout_line["line-cap"]),"line-join":new yt(be.layout_line["line-join"]),"line-miter-limit":new ut(be.layout_line["line-miter-limit"]),"line-round-limit":new ut(be.layout_line["line-round-limit"]),"line-sort-key":new yt(be.layout_line["line-sort-key"])})}};class im extends yt{possiblyEvaluate(t,r){return r=new bi(Math.floor(r.zoom),{now:r.now,fadeDuration:r.fadeDuration,zoomHistory:r.zoomHistory,transition:r.transition}),super.possiblyEvaluate(t,r)}evaluate(t,r,s,u){return r=Oi({},r,{zoom:Math.floor(r.zoom)}),super.evaluate(t,r,s,u)}}let Jc;class Zd extends Yr{constructor(t,r){super(t,Gh,r),this.gradientVersion=0,Jc||(Jc=new im(Gh.paint.properties["line-width"].specification),Jc.useIntegerZoom=!0)}_handleSpecialPaintPropertyUpdate(t){if(t==="line-gradient"){const r=this.gradientExpression();this.stepInterpolant=!!(function(s){return s._styleExpression!==void 0})(r)&&r._styleExpression.expression instanceof cs,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(t,r){super.recalculate(t,r),this.paint._values["line-floorwidth"]=Jc.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,t)}createBucket(t){return new Wc(t)}queryRadius(t){const r=t,s=_l(Hc("line-width",this,r),Hc("line-gap-width",this,r)),u=Hc("line-offset",this,r);return s/2+Math.abs(u)+Rh(this.paint.get("line-translate"))}queryIntersectsFeature({queryGeometry:t,feature:r,featureState:s,geometry:u,transform:m,pixelsToTileUnits:_}){const y=Kl(t,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),-m.bearingInRadians,_),b=_/2*_l(this.paint.get("line-width").evaluate(r,s),this.paint.get("line-gap-width").evaluate(r,s)),T=this.paint.get("line-offset").evaluate(r,s);return T&&(u=(function(E,L){const V=[];for(let $=0;$<E.length;$++){const N=E[$],G=[];for(let Q=0;Q<N.length;Q++){const ee=N[Q-1],_e=N[Q],ne=N[Q+1],ce=Q===0?new ye(0,0):_e.sub(ee)._unit()._perp(),Te=Q===N.length-1?new ye(0,0):ne.sub(_e)._unit()._perp(),Le=ce._add(Te)._unit(),Ge=Le.x*Te.x+Le.y*Te.y;Ge!==0&&Le._mult(1/Ge),G.push(Le._mult(L)._add(_e))}V.push(G)}return V})(u,T*_)),(function(E,L,V){for(let $=0;$<L.length;$++){const N=L[$];if(E.length>=3){for(let G=0;G<N.length;G++)if(Zc(E,N[G]))return!0}if($f(E,N,V))return!0}return!1})(y,u,b)}isTileClipped(){return!0}}function _l(a,t){return t>0?t+2*a:a}const ia=xi([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),ac=xi([{name:"a_projected_pos",components:3,type:"Float32"}],4);xi([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const Xu=xi([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"},{name:"a_box_real",components:2,type:"Int16"}]);xi([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const Ls=xi([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),Up=xi([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function Zp(a,t,r){return a.sections.forEach((s=>{s.text=(function(u,m,_){const y=m.layout.get("text-transform").evaluate(_,{});return y==="uppercase"?u=u.toLocaleUpperCase():y==="lowercase"&&(u=u.toLocaleLowerCase()),Nn.applyArabicShaping&&(u=Nn.applyArabicShaping(u)),u})(s.text,t,r)})),a}xi([{name:"triangle",components:3,type:"Uint16"}]),xi([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),xi([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Uint16",name:"textAnchorOffsetStartIndex"},{type:"Uint16",name:"textAnchorOffsetEndIndex"}]),xi([{type:"Float32",name:"offsetX"}]),xi([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]),xi([{type:"Uint16",name:"textAnchor"},{type:"Float32",components:2,name:"textOffset"}]);const Yu={"!":"","#":"",$:"","%":"","&":"","(":"",")":"","*":"","+":"",",":"","-":"",".":"","/":"",":":"",";":"","<":"","=":"",">":"","?":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""};var gr=24;const qh=4294967296,xn=1/qh,Hp=typeof TextDecoder>"u"?null:new TextDecoder("utf-8");class ja{constructor(t=new Uint8Array(16)){this.buf=ArrayBuffer.isView(t)?t:new Uint8Array(t),this.dataView=new DataView(this.buf.buffer),this.pos=0,this.type=0,this.length=this.buf.length}readFields(t,r,s=this.length){for(;this.pos<s;){const u=this.readVarint(),m=u>>3,_=this.pos;this.type=7&u,t(m,r,this),this.pos===_&&this.skip(u)}return r}readMessage(t,r){return this.readFields(t,r,this.readVarint()+this.pos)}readFixed32(){const t=this.dataView.getUint32(this.pos,!0);return this.pos+=4,t}readSFixed32(){const t=this.dataView.getInt32(this.pos,!0);return this.pos+=4,t}readFixed64(){const t=this.dataView.getUint32(this.pos,!0)+this.dataView.getUint32(this.pos+4,!0)*qh;return this.pos+=8,t}readSFixed64(){const t=this.dataView.getUint32(this.pos,!0)+this.dataView.getInt32(this.pos+4,!0)*qh;return this.pos+=8,t}readFloat(){const t=this.dataView.getFloat32(this.pos,!0);return this.pos+=4,t}readDouble(){const t=this.dataView.getFloat64(this.pos,!0);return this.pos+=8,t}readVarint(t){const r=this.buf;let s,u;return u=r[this.pos++],s=127&u,u<128?s:(u=r[this.pos++],s|=(127&u)<<7,u<128?s:(u=r[this.pos++],s|=(127&u)<<14,u<128?s:(u=r[this.pos++],s|=(127&u)<<21,u<128?s:(u=r[this.pos],s|=(15&u)<<28,(function(m,_,y){const b=y.buf;let T,E;if(E=b[y.pos++],T=(112&E)>>4,E<128||(E=b[y.pos++],T|=(127&E)<<3,E<128)||(E=b[y.pos++],T|=(127&E)<<10,E<128)||(E=b[y.pos++],T|=(127&E)<<17,E<128)||(E=b[y.pos++],T|=(127&E)<<24,E<128)||(E=b[y.pos++],T|=(1&E)<<31,E<128))return eu(m,T,_);throw new Error("Expected varint not more than 10 bytes")})(s,t,this)))))}readVarint64(){return this.readVarint(!0)}readSVarint(){const t=this.readVarint();return t%2==1?(t+1)/-2:t/2}readBoolean(){return!!this.readVarint()}readString(){const t=this.readVarint()+this.pos,r=this.pos;return this.pos=t,t-r>=12&&Hp?Hp.decode(this.buf.subarray(r,t)):(function(s,u,m){let _="",y=u;for(;y<m;){const b=s[y];let T,E,L,V=null,$=b>239?4:b>223?3:b>191?2:1;if(y+$>m)break;$===1?b<128&&(V=b):$===2?(T=s[y+1],(192&T)==128&&(V=(31&b)<<6|63&T,V<=127&&(V=null))):$===3?(T=s[y+1],E=s[y+2],(192&T)==128&&(192&E)==128&&(V=(15&b)<<12|(63&T)<<6|63&E,(V<=2047||V>=55296&&V<=57343)&&(V=null))):$===4&&(T=s[y+1],E=s[y+2],L=s[y+3],(192&T)==128&&(192&E)==128&&(192&L)==128&&(V=(15&b)<<18|(63&T)<<12|(63&E)<<6|63&L,(V<=65535||V>=1114112)&&(V=null))),V===null?(V=65533,$=1):V>65535&&(V-=65536,_+=String.fromCharCode(V>>>10&1023|55296),V=56320|1023&V),_+=String.fromCharCode(V),y+=$}return _})(this.buf,r,t)}readBytes(){const t=this.readVarint()+this.pos,r=this.buf.subarray(this.pos,t);return this.pos=t,r}readPackedVarint(t=[],r){const s=this.readPackedEnd();for(;this.pos<s;)t.push(this.readVarint(r));return t}readPackedSVarint(t=[]){const r=this.readPackedEnd();for(;this.pos<r;)t.push(this.readSVarint());return t}readPackedBoolean(t=[]){const r=this.readPackedEnd();for(;this.pos<r;)t.push(this.readBoolean());return t}readPackedFloat(t=[]){const r=this.readPackedEnd();for(;this.pos<r;)t.push(this.readFloat());return t}readPackedDouble(t=[]){const r=this.readPackedEnd();for(;this.pos<r;)t.push(this.readDouble());return t}readPackedFixed32(t=[]){const r=this.readPackedEnd();for(;this.pos<r;)t.push(this.readFixed32());return t}readPackedSFixed32(t=[]){const r=this.readPackedEnd();for(;this.pos<r;)t.push(this.readSFixed32());return t}readPackedFixed64(t=[]){const r=this.readPackedEnd();for(;this.pos<r;)t.push(this.readFixed64());return t}readPackedSFixed64(t=[]){const r=this.readPackedEnd();for(;this.pos<r;)t.push(this.readSFixed64());return t}readPackedEnd(){return this.type===2?this.readVarint()+this.pos:this.pos+1}skip(t){const r=7&t;if(r===0)for(;this.buf[this.pos++]>127;);else if(r===2)this.pos=this.readVarint()+this.pos;else if(r===5)this.pos+=4;else{if(r!==1)throw new Error(`Unimplemented type: ${r}`);this.pos+=8}}writeTag(t,r){this.writeVarint(t<<3|r)}realloc(t){let r=this.length||16;for(;r<this.pos+t;)r*=2;if(r!==this.length){const s=new Uint8Array(r);s.set(this.buf),this.buf=s,this.dataView=new DataView(s.buffer),this.length=r}}finish(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)}writeFixed32(t){this.realloc(4),this.dataView.setInt32(this.pos,t,!0),this.pos+=4}writeSFixed32(t){this.realloc(4),this.dataView.setInt32(this.pos,t,!0),this.pos+=4}writeFixed64(t){this.realloc(8),this.dataView.setInt32(this.pos,-1&t,!0),this.dataView.setInt32(this.pos+4,Math.floor(t*xn),!0),this.pos+=8}writeSFixed64(t){this.realloc(8),this.dataView.setInt32(this.pos,-1&t,!0),this.dataView.setInt32(this.pos+4,Math.floor(t*xn),!0),this.pos+=8}writeVarint(t){(t=+t||0)>268435455||t<0?(function(r,s){let u,m;if(r>=0?(u=r%4294967296|0,m=r/4294967296|0):(u=~(-r%4294967296),m=~(-r/4294967296),4294967295^u?u=u+1|0:(u=0,m=m+1|0)),r>=18446744073709552e3||r<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");s.realloc(10),(function(_,y,b){b.buf[b.pos++]=127&_|128,_>>>=7,b.buf[b.pos++]=127&_|128,_>>>=7,b.buf[b.pos++]=127&_|128,_>>>=7,b.buf[b.pos++]=127&_|128,b.buf[b.pos]=127&(_>>>=7)})(u,0,s),(function(_,y){const b=(7&_)<<4;y.buf[y.pos++]|=b|((_>>>=3)?128:0),_&&(y.buf[y.pos++]=127&_|((_>>>=7)?128:0),_&&(y.buf[y.pos++]=127&_|((_>>>=7)?128:0),_&&(y.buf[y.pos++]=127&_|((_>>>=7)?128:0),_&&(y.buf[y.pos++]=127&_|((_>>>=7)?128:0),_&&(y.buf[y.pos++]=127&_)))))})(m,s)})(t,this):(this.realloc(4),this.buf[this.pos++]=127&t|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=t>>>7&127))))}writeSVarint(t){this.writeVarint(t<0?2*-t-1:2*t)}writeBoolean(t){this.writeVarint(+t)}writeString(t){t=String(t),this.realloc(4*t.length),this.pos++;const r=this.pos;this.pos=(function(u,m,_){for(let y,b,T=0;T<m.length;T++){if(y=m.charCodeAt(T),y>55295&&y<57344){if(!b){y>56319||T+1===m.length?(u[_++]=239,u[_++]=191,u[_++]=189):b=y;continue}if(y<56320){u[_++]=239,u[_++]=191,u[_++]=189,b=y;continue}y=b-55296<<10|y-56320|65536,b=null}else b&&(u[_++]=239,u[_++]=191,u[_++]=189,b=null);y<128?u[_++]=y:(y<2048?u[_++]=y>>6|192:(y<65536?u[_++]=y>>12|224:(u[_++]=y>>18|240,u[_++]=y>>12&63|128),u[_++]=y>>6&63|128),u[_++]=63&y|128)}return _})(this.buf,t,this.pos);const s=this.pos-r;s>=128&&Gp(r,s,this),this.pos=r-1,this.writeVarint(s),this.pos+=s}writeFloat(t){this.realloc(4),this.dataView.setFloat32(this.pos,t,!0),this.pos+=4}writeDouble(t){this.realloc(8),this.dataView.setFloat64(this.pos,t,!0),this.pos+=8}writeBytes(t){const r=t.length;this.writeVarint(r),this.realloc(r);for(let s=0;s<r;s++)this.buf[this.pos++]=t[s]}writeRawMessage(t,r){this.pos++;const s=this.pos;t(r,this);const u=this.pos-s;u>=128&&Gp(s,u,this),this.pos=s-1,this.writeVarint(u),this.pos+=u}writeMessage(t,r,s){this.writeTag(t,2),this.writeRawMessage(r,s)}writePackedVarint(t,r){r.length&&this.writeMessage(t,fg,r)}writePackedSVarint(t,r){r.length&&this.writeMessage(t,nc,r)}writePackedBoolean(t,r){r.length&&this.writeMessage(t,Qu,r)}writePackedFloat(t,r){r.length&&this.writeMessage(t,Hd,r)}writePackedDouble(t,r){r.length&&this.writeMessage(t,qp,r)}writePackedFixed32(t,r){r.length&&this.writeMessage(t,rm,r)}writePackedSFixed32(t,r){r.length&&this.writeMessage(t,am,r)}writePackedFixed64(t,r){r.length&&this.writeMessage(t,nm,r)}writePackedSFixed64(t,r){r.length&&this.writeMessage(t,om,r)}writeBytesField(t,r){this.writeTag(t,2),this.writeBytes(r)}writeFixed32Field(t,r){this.writeTag(t,5),this.writeFixed32(r)}writeSFixed32Field(t,r){this.writeTag(t,5),this.writeSFixed32(r)}writeFixed64Field(t,r){this.writeTag(t,1),this.writeFixed64(r)}writeSFixed64Field(t,r){this.writeTag(t,1),this.writeSFixed64(r)}writeVarintField(t,r){this.writeTag(t,0),this.writeVarint(r)}writeSVarintField(t,r){this.writeTag(t,0),this.writeSVarint(r)}writeStringField(t,r){this.writeTag(t,2),this.writeString(r)}writeFloatField(t,r){this.writeTag(t,5),this.writeFloat(r)}writeDoubleField(t,r){this.writeTag(t,1),this.writeDouble(r)}writeBooleanField(t,r){this.writeVarintField(t,+r)}}function eu(a,t,r){return r?4294967296*t+(a>>>0):4294967296*(t>>>0)+(a>>>0)}function Gp(a,t,r){const s=t<=16383?1:t<=2097151?2:t<=268435455?3:Math.floor(Math.log(t)/(7*Math.LN2));r.realloc(s);for(let u=r.pos-1;u>=a;u--)r.buf[u+s]=r.buf[u]}function fg(a,t){for(let r=0;r<a.length;r++)t.writeVarint(a[r])}function nc(a,t){for(let r=0;r<a.length;r++)t.writeSVarint(a[r])}function Hd(a,t){for(let r=0;r<a.length;r++)t.writeFloat(a[r])}function qp(a,t){for(let r=0;r<a.length;r++)t.writeDouble(a[r])}function Qu(a,t){for(let r=0;r<a.length;r++)t.writeBoolean(a[r])}function rm(a,t){for(let r=0;r<a.length;r++)t.writeFixed32(a[r])}function am(a,t){for(let r=0;r<a.length;r++)t.writeSFixed32(a[r])}function nm(a,t){for(let r=0;r<a.length;r++)t.writeFixed64(a[r])}function om(a,t){for(let r=0;r<a.length;r++)t.writeSFixed64(a[r])}function Gd(a,t,r){a===1&&r.readMessage(Xp,t)}function Xp(a,t,r){if(a===3){const{id:s,bitmap:u,width:m,height:_,left:y,top:b,advance:T}=r.readMessage(mg,{});t.push({id:s,bitmap:new Vu({width:m+6,height:_+6},u),metrics:{width:m,height:_,left:y,top:b,advance:T}})}}function mg(a,t,r){a===1?t.id=r.readVarint():a===2?t.bitmap=r.readBytes():a===3?t.width=r.readVarint():a===4?t.height=r.readVarint():a===5?t.left=r.readSVarint():a===6?t.top=r.readSVarint():a===7&&(t.advance=r.readVarint())}function sm(a){let t=0,r=0;for(const _ of a)t+=_.w*_.h,r=Math.max(r,_.w);a.sort(((_,y)=>y.h-_.h));const s=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(t/.95)),r),h:1/0}];let u=0,m=0;for(const _ of a)for(let y=s.length-1;y>=0;y--){const b=s[y];if(!(_.w>b.w||_.h>b.h)){if(_.x=b.x,_.y=b.y,m=Math.max(m,_.y+_.h),u=Math.max(u,_.x+_.w),_.w===b.w&&_.h===b.h){const T=s.pop();T&&y<s.length&&(s[y]=T)}else _.h===b.h?(b.x+=_.w,b.w-=_.w):_.w===b.w?(b.y+=_.h,b.h-=_.h):(s.push({x:b.x+_.w,y:b.y,w:b.w-_.w,h:_.h}),b.y+=_.h,b.h-=_.h);break}}return{w:u,h:m,fill:t/(u*m)||0}}class Yp{constructor(t,{pixelRatio:r,version:s,stretchX:u,stretchY:m,content:_,textFitWidth:y,textFitHeight:b}){this.paddedRect=t,this.pixelRatio=r,this.stretchX=u,this.stretchY=m,this.content=_,this.version=s,this.textFitWidth=y,this.textFitHeight=b}get tl(){return[this.paddedRect.x+1,this.paddedRect.y+1]}get br(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]}}class Qp{constructor(t,r){const s={},u={};this.haveRenderCallbacks=[];const m=[];this.addImages(t,s,m),this.addImages(r,u,m);const{w:_,h:y}=sm(m),b=new za({width:_||1,height:y||1});for(const T in t){const E=t[T],L=s[T].paddedRect;za.copy(E.data,b,{x:0,y:0},{x:L.x+1,y:L.y+1},E.data)}for(const T in r){const E=r[T],L=u[T].paddedRect,V=L.x+1,$=L.y+1,N=E.data.width,G=E.data.height;za.copy(E.data,b,{x:0,y:0},{x:V,y:$},E.data),za.copy(E.data,b,{x:0,y:G-1},{x:V,y:$-1},{width:N,height:1}),za.copy(E.data,b,{x:0,y:0},{x:V,y:$+G},{width:N,height:1}),za.copy(E.data,b,{x:N-1,y:0},{x:V-1,y:$},{width:1,height:G}),za.copy(E.data,b,{x:0,y:0},{x:V+N,y:$},{width:1,height:G})}this.image=b,this.iconPositions=s,this.patternPositions=u}addImages(t,r,s){for(const u in t){const m=t[u],_={x:0,y:0,w:m.data.width+2,h:m.data.height+2};s.push(_),r[u]=new Yp(_,m),m.hasRenderCallback&&this.haveRenderCallbacks.push(u)}}patchUpdatedImages(t,r){t.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const s in t.updatedImages)this.patchUpdatedImage(this.iconPositions[s],t.getImage(s),r),this.patchUpdatedImage(this.patternPositions[s],t.getImage(s),r)}patchUpdatedImage(t,r,s){if(!t||!r||t.version===r.version)return;t.version=r.version;const[u,m]=t.tl;s.update(r.data,void 0,{x:u,y:m})}}var vl;st("ImagePosition",Yp),st("ImageAtlas",Qp),M.ao=void 0,(vl=M.ao||(M.ao={}))[vl.none=0]="none",vl[vl.horizontal=1]="horizontal",vl[vl.vertical=2]="vertical",vl[vl.horizontalOnly=3]="horizontalOnly";class Is{constructor(){this.scale=1,this.fontStack="",this.imageName=null,this.verticalAlign="bottom"}static forText(t,r,s){const u=new Is;return u.scale=t||1,u.fontStack=r,u.verticalAlign=s||"bottom",u}static forImage(t,r){const s=new Is;return s.imageName=t,s.verticalAlign=r||"bottom",s}}class yl{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(t,r){const s=new yl;for(let u=0;u<t.sections.length;u++){const m=t.sections[u];m.image?s.addImageSection(m):s.addTextSection(m,r)}return s}length(){return this.text.length}getSection(t){return this.sections[this.sectionIndex[t]]}getSectionIndex(t){return this.sectionIndex[t]}getCharCode(t){return this.text.charCodeAt(t)}verticalizePunctuation(){this.text=(function(t){let r="";for(let s=0;s<t.length;s++){const u=t.charCodeAt(s+1)||null,m=t.charCodeAt(s-1)||null;r+=u&&jc(u)&&!Yu[t[s+1]]||m&&jc(m)&&!Yu[t[s-1]]||!Yu[t[s]]?t[s]:Yu[t[s]]}return r})(this.text)}trim(){let t=0;for(let s=0;s<this.text.length&&Yh[this.text.charCodeAt(s)];s++)t++;let r=this.text.length;for(let s=this.text.length-1;s>=0&&s>=t&&Yh[this.text.charCodeAt(s)];s--)r--;this.text=this.text.substring(t,r),this.sectionIndex=this.sectionIndex.slice(t,r)}substring(t,r){const s=new yl;return s.text=this.text.substring(t,r),s.sectionIndex=this.sectionIndex.slice(t,r),s.sections=this.sections,s}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce(((t,r)=>Math.max(t,this.sections[r].scale)),0)}getMaxImageSize(t){let r=0,s=0;for(let u=0;u<this.length();u++){const m=this.getSection(u);if(m.imageName){const _=t[m.imageName];if(!_)continue;const y=_.displaySize;r=Math.max(r,y[0]),s=Math.max(s,y[1])}}return{maxImageWidth:r,maxImageHeight:s}}addTextSection(t,r){this.text+=t.text,this.sections.push(Is.forText(t.scale,t.fontStack||r,t.verticalAlign));const s=this.sections.length-1;for(let u=0;u<t.text.length;++u)this.sectionIndex.push(s)}addImageSection(t){const r=t.image?t.image.name:"";if(r.length===0)return void ji("Can't add FormattedSection with an empty image.");const s=this.getNextImageSectionCharCode();s?(this.text+=String.fromCharCode(s),this.sections.push(Is.forImage(r,t.verticalAlign)),this.sectionIndex.push(this.sections.length-1)):ji("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function Xh(a,t,r,s,u,m,_,y,b,T,E,L,V,$,N){const G=yl.fromFeature(a,u);let Q;L===M.ao.vertical&&G.verticalizePunctuation();const{processBidirectionalText:ee,processStyledBidirectionalText:_e}=Nn;if(ee&&G.sections.length===1){Q=[];const Te=ee(G.toString(),zi(G,T,m,t,s,$));for(const Le of Te){const Ge=new yl;Ge.text=Le,Ge.sections=G.sections;for(let rt=0;rt<Le.length;rt++)Ge.sectionIndex.push(0);Q.push(Ge)}}else if(_e){Q=[];const Te=_e(G.text,G.sectionIndex,zi(G,T,m,t,s,$));for(const Le of Te){const Ge=new yl;Ge.text=Le[0],Ge.sectionIndex=Le[1],Ge.sections=G.sections,Q.push(Ge)}}else Q=(function(Te,Le){const Ge=[],rt=Te.text;let We=0;for(const tt of Le)Ge.push(Te.substring(We,tt)),We=tt;return We<rt.length&&Ge.push(Te.substring(We,rt.length)),Ge})(G,zi(G,T,m,t,s,$));const ne=[],ce={positionedLines:ne,text:G.toString(),top:E[1],bottom:E[1],left:E[0],right:E[0],writingMode:L,iconsInText:!1,verticalizable:!1};return(function(Te,Le,Ge,rt,We,tt,mt,et,it,Ve,bt,Pt){let vt=0,ht=0,Wt=0,Xi=0;const wr=et==="right"?1:et==="left"?0:.5,ra=gr/Pt;let rn=0;for(const wi of We){wi.trim();const _r=wi.getMaxScale(),Cr={positionedGlyphs:[],lineOffset:0};Te.positionedLines[rn]=Cr;const ar=Cr.positionedGlyphs;let Va=0;if(!wi.length()){ht+=tt,++rn;continue}const Cn=gg(rt,wi,ra);for(let an=0;an<wi.length();an++){const Lr=wi.getSection(an),Sr=wi.getSectionIndex(an),Ur=wi.getCharCode(an),Ir=_g(it,bt,Ur);let Pi;if(Lr.imageName){if(Te.iconsInText=!0,Lr.scale=Lr.scale*ra,Pi=yg(Lr,Ir,_r,Cn,rt),!Pi)continue;Va=Math.max(Va,Pi.imageOffset)}else if(Pi=vg(Lr,Ur,Ir,Cn,Le,Ge),!Pi)continue;const{rect:Sn,metrics:ru,baselineOffset:$a}=Pi;ar.push({glyph:Ur,imageName:Lr.imageName,x:vt,y:ht+$a+-17,vertical:Ir,scale:Lr.scale,fontStack:Lr.fontStack,sectionIndex:Sr,metrics:ru,rect:Sn}),Ir?(Te.verticalizable=!0,vt+=(Lr.imageName?ru.advance:gr)*Lr.scale+Ve):vt+=ru.advance*Lr.scale+Ve}ar.length!==0&&(Wt=Math.max(vt-Ve,Wt),Xd(ar,0,ar.length-1,wr)),vt=0,Cr.lineOffset=Math.max(Va,(_r-1)*gr);const vr=tt*_r+Va;ht+=vr,Xi=Math.max(vr,Xi),++rn}const{horizontalAlign:Dr,verticalAlign:rr}=Qh(mt);(function(wi,_r,Cr,ar,Va,Cn,vr,an,Lr){const Sr=(_r-Cr)*Va;let Ur=0;Ur=Cn!==vr?-an*ar- -17:-ar*Lr*vr+.5*vr;for(const Ir of wi)for(const Pi of Ir.positionedGlyphs)Pi.x+=Sr,Pi.y+=Ur})(Te.positionedLines,wr,Dr,rr,Wt,Xi,tt,ht,We.length),Te.top+=-rr*ht,Te.bottom=Te.top+ht,Te.left+=-Dr*Wt,Te.right=Te.left+Wt})(ce,t,r,s,Q,_,y,b,L,T,V,N),!(function(Te){for(const Le of Te)if(Le.positionedGlyphs.length!==0)return!1;return!0})(ne)&&ce}const Yh={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},lm={10:!0,32:!0,38:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0},cm={40:!0};function Kp(a,t,r,s,u,m){if(t.imageName){const _=s[t.imageName];return _?_.displaySize[0]*t.scale*gr/m+u:0}{const _=r[t.fontStack],y=_&&_[a];return y?y.metrics.advance*t.scale+u:0}}function Wp(a,t,r,s){const u=Math.pow(a-t,2);return s?a<t?u/2:2*u:u+Math.abs(r)*r}function qd(a,t,r){let s=0;return a===10&&(s-=1e4),r&&(s+=150),a!==40&&a!==65288||(s+=50),t!==41&&t!==65289||(s+=50),s}function Jp(a,t,r,s,u,m){let _=null,y=Wp(t,r,u,m);for(const b of s){const T=Wp(t-b.x,r,u,m)+b.badness;T<=y&&(_=b,y=T)}return{index:a,x:t,priorBreak:_,badness:y}}function ef(a){return a?ef(a.priorBreak).concat(a.index):[]}function zi(a,t,r,s,u,m){if(!a)return[];const _=[],y=(function(L,V,$,N,G,Q){let ee=0;for(let _e=0;_e<L.length();_e++){const ne=L.getSection(_e);ee+=Kp(L.getCharCode(_e),ne,N,G,V,Q)}return ee/Math.max(1,Math.ceil(ee/$))})(a,t,r,s,u,m),b=a.text.indexOf("")>=0;let T=0;for(let L=0;L<a.length();L++){const V=a.getSection(L),$=a.getCharCode(L);if(Yh[$]||(T+=Kp($,V,s,u,t,m)),L<a.length()-1){const N=!((E=$)<11904)&&(!!$t["CJK Compatibility Forms"](E)||!!$t["CJK Compatibility"](E)||!!$t["CJK Strokes"](E)||!!$t["CJK Symbols and Punctuation"](E)||!!$t["Enclosed CJK Letters and Months"](E)||!!$t["Halfwidth and Fullwidth Forms"](E)||!!$t["Ideographic Description Characters"](E)||!!$t["Vertical Forms"](E)||rl.test(String.fromCodePoint(E)));(lm[$]||N||V.imageName||L!==a.length()-2&&cm[a.getCharCode(L+1)])&&_.push(Jp(L+1,T,y,_,qd($,a.getCharCode(L+1),N&&b),!1))}}var E;return ef(Jp(a.length(),T,y,_,0,!0))}function Qh(a){let t=.5,r=.5;switch(a){case"right":case"top-right":case"bottom-right":t=1;break;case"left":case"top-left":case"bottom-left":t=0}switch(a){case"bottom":case"bottom-right":case"bottom-left":r=1;break;case"top":case"top-right":case"top-left":r=0}return{horizontalAlign:t,verticalAlign:r}}function gg(a,t,r){const s=t.getMaxScale()*gr,{maxImageWidth:u,maxImageHeight:m}=t.getMaxImageSize(a),_=Math.max(s,m*r);return{verticalLineContentWidth:Math.max(s,u*r),horizontalLineContentHeight:_}}function tf(a){switch(a){case"top":return 0;case"center":return .5;default:return 1}}function _g(a,t,r){return!(a===M.ao.horizontal||!t&&!ws(r)||t&&(Yh[r]||(s=r,new RegExp("\\p{sc=Arab}","u").test(String.fromCodePoint(s)))));var s}function vg(a,t,r,s,u,m){const _=m[a.fontStack],y=(function(T,E,L,V){if(T&&T.rect)return T;const $=E[L.fontStack],N=$&&$[V];return N?{rect:null,metrics:N.metrics}:null})(_&&_[t],u,a,t);if(y===null)return null;let b;if(r)b=s.verticalLineContentWidth-a.scale*gr;else{const T=tf(a.verticalAlign);b=(s.horizontalLineContentHeight-a.scale*gr)*T}return{rect:y.rect,metrics:y.metrics,baselineOffset:b}}function yg(a,t,r,s,u){const m=u[a.imageName];if(!m)return null;const _=m.paddedRect,y=m.displaySize,b={width:y[0],height:y[1],left:1,top:-3,advance:t?y[1]:y[0]};let T;if(t)T=s.verticalLineContentWidth-y[1]*a.scale;else{const E=tf(a.verticalAlign);T=(s.horizontalLineContentHeight-y[1]*a.scale)*E}return{rect:_,metrics:b,baselineOffset:T,imageOffset:(t?y[0]:y[1])*a.scale-gr*r}}function Xd(a,t,r,s){if(s===0)return;const u=a[r],m=(a[r].x+u.metrics.advance*u.scale)*s;for(let _=t;_<=r;_++)a[_].x-=m}function Ku(a,t,r){const{horizontalAlign:s,verticalAlign:u}=Qh(r),m=t[0]-a.displaySize[0]*s,_=t[1]-a.displaySize[1]*u;return{image:a,top:_,bottom:_+a.displaySize[1],left:m,right:m+a.displaySize[0]}}function Yd(a){var t,r;let s=a.left,u=a.top,m=a.right-s,_=a.bottom-u;const y=(t=a.image.textFitWidth)!==null&&t!==void 0?t:"stretchOrShrink",b=(r=a.image.textFitHeight)!==null&&r!==void 0?r:"stretchOrShrink",T=(a.image.content[2]-a.image.content[0])/(a.image.content[3]-a.image.content[1]);if(b==="proportional"){if(y==="stretchOnly"&&m/_<T||y==="proportional"){const E=Math.ceil(_*T);s*=E/m,m=E}}else if(y==="proportional"&&b==="stretchOnly"&&T!==0&&m/_>T){const E=Math.ceil(m/T);u*=E/_,_=E}return{x1:s,y1:u,x2:s+m,y2:u+_}}function Kh(a,t,r,s,u,m){const _=a.image;let y;if(_.content){const Q=_.content,ee=_.pixelRatio||1;y=[Q[0]/ee,Q[1]/ee,_.displaySize[0]-Q[2]/ee,_.displaySize[1]-Q[3]/ee]}const b=t.left*m,T=t.right*m;let E,L,V,$;r==="width"||r==="both"?($=u[0]+b-s[3],L=u[0]+T+s[1]):($=u[0]+(b+T-_.displaySize[0])/2,L=$+_.displaySize[0]);const N=t.top*m,G=t.bottom*m;return r==="height"||r==="both"?(E=u[1]+N-s[0],V=u[1]+G+s[2]):(E=u[1]+(N+G-_.displaySize[1])/2,V=E+_.displaySize[1]),{image:_,top:E,right:L,bottom:V,left:$,collisionPadding:y}}const Ho=128,tn=32640;function Go(a,t){const{expression:r}=t;if(r.kind==="constant")return{kind:"constant",layoutSize:r.evaluate(new bi(a+1))};if(r.kind==="source")return{kind:"source"};{const{zoomStops:s,interpolationType:u}=r;let m=0;for(;m<s.length&&s[m]<=a;)m++;m=Math.max(0,m-1);let _=m;for(;_<s.length&&s[_]<a+1;)_++;_=Math.min(s.length-1,_);const y=s[m],b=s[_];return r.kind==="composite"?{kind:"composite",minZoom:y,maxZoom:b,interpolationType:u}:{kind:"camera",minZoom:y,maxZoom:b,minSize:r.evaluate(new bi(y)),maxSize:r.evaluate(new bi(b)),interpolationType:u}}}function tu(a,t,r){let s="never";const u=a.get(t);return u?s=u:a.get(r)&&(s="always"),s}const bg=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function Wh(a,t,r,s,u,m,_,y,b,T,E,L,V){const $=y?Math.min(tn,Math.round(y[0])):0,N=y?Math.min(tn,Math.round(y[1])):0;a.emplaceBack(t,r,Math.round(32*s),Math.round(32*u),m,_,($<<1)+(b?1:0),N,16*T,16*E,256*L,256*V)}function Qd(a,t,r){a.emplaceBack(t.x,t.y,r),a.emplaceBack(t.x,t.y,r),a.emplaceBack(t.x,t.y,r),a.emplaceBack(t.x,t.y,r)}function um(a){for(const t of a.sections)if(Ss(t.text))return!0;return!1}class Kd{constructor(t){this.layoutVertexArray=new Ee,this.indexArray=new Tt,this.programConfigurations=t,this.segments=new Ut,this.dynamicLayoutVertexArray=new Qe,this.opacityVertexArray=new Ke,this.hasVisibleVertices=!1,this.placedSymbolArray=new O}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(t,r,s,u){this.isEmpty()||(s&&(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,ia.members),this.indexBuffer=t.createIndexBuffer(this.indexArray,r),this.dynamicLayoutVertexBuffer=t.createVertexBuffer(this.dynamicLayoutVertexArray,ac.members,!0),this.opacityVertexBuffer=t.createVertexBuffer(this.opacityVertexArray,bg,!0),this.opacityVertexBuffer.itemSize=1),(s||u)&&this.programConfigurations.upload(t))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}st("SymbolBuffers",Kd);class rf{constructor(t,r,s){this.layoutVertexArray=new t,this.layoutAttributes=r,this.indexArray=new s,this.segments=new Ut,this.collisionVertexArray=new lt}upload(t){this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=t.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=t.createVertexBuffer(this.collisionVertexArray,Xu.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}st("CollisionBuffers",rf);class oc{constructor(t){this.collisionBoxArray=t.collisionBoxArray,this.zoom=t.zoom,this.overscaling=xo(globalThis)?Math.min(t.overscaling,128):t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((_=>_.id)),this.index=t.index,this.pixelRatio=t.pixelRatio,this.sourceLayerIndex=t.sourceLayerIndex,this.hasDependencies=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[];const r=this.layers[0]._unevaluatedLayout._values;this.textSizeData=Go(this.zoom,r["text-size"]),this.iconSizeData=Go(this.zoom,r["icon-size"]);const s=this.layers[0].layout,u=s.get("symbol-sort-key"),m=s.get("symbol-z-order");this.canOverlap=tu(s,"text-overlap","text-allow-overlap")!=="never"||tu(s,"icon-overlap","icon-allow-overlap")!=="never"||s.get("text-ignore-placement")||s.get("icon-ignore-placement"),this.sortFeaturesByKey=m!=="viewport-y"&&!u.isConstant(),this.sortFeaturesByY=(m==="viewport-y"||m==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,s.get("symbol-placement")==="point"&&(this.writingModes=s.get("text-writing-mode").map((_=>M.ao[_]))),this.stateDependentLayerIds=this.layers.filter((_=>_.isStateDependent())).map((_=>_.id)),this.sourceID=t.sourceID}createArrays(){this.text=new Kd(new mo(this.layers,this.zoom,(t=>/^text/.test(t)))),this.icon=new Kd(new mo(this.layers,this.zoom,(t=>/^icon/.test(t)))),this.glyphOffsetArray=new H,this.lineVertexArray=new K,this.symbolInstances=new F,this.textAnchorOffsets=new J}calculateGlyphDependencies(t,r,s,u,m){for(let _=0;_<t.length;_++)if(r[t.charCodeAt(_)]=!0,(s||u)&&m){const y=Yu[t.charAt(_)];y&&(r[y.charCodeAt(0)]=!0)}}populate(t,r,s){const u=this.layers[0],m=u.layout,_=m.get("text-font"),y=m.get("text-field"),b=m.get("icon-image"),T=(y.value.kind!=="constant"||y.value.value instanceof fr&&!y.value.value.isEmpty()||y.value.value.toString().length>0)&&(_.value.kind!=="constant"||_.value.value.length>0),E=b.value.kind!=="constant"||!!b.value.value||Object.keys(b.parameters).length>0,L=m.get("symbol-sort-key");if(this.features=[],!T&&!E)return;const V=r.iconDependencies,$=r.glyphDependencies,N=r.availableImages,G=new bi(this.zoom);for(const{feature:Q,id:ee,index:_e,sourceLayerIndex:ne}of t){const ce=u._featureFilter.needGeometry,Te=Xn(Q,ce);if(!u._featureFilter.filter(G,Te,s))continue;let Le,Ge;if(ce||(Te.geometry=go(Q)),T){const We=u.getValueAndResolveTokens("text-field",Te,s,N),tt=fr.factory(We),mt=this.hasRTLText=this.hasRTLText||um(tt);(!mt||Nn.getRTLTextPluginStatus()==="unavailable"||mt&&Nn.isParsed())&&(Le=Zp(tt,u,Te))}if(E){const We=u.getValueAndResolveTokens("icon-image",Te,s,N);Ge=We instanceof Br?We:Br.fromString(We)}if(!Le&&!Ge)continue;const rt=this.sortFeaturesByKey?L.evaluate(Te,{},s):void 0;if(this.features.push({id:ee,text:Le,icon:Ge,index:_e,sourceLayerIndex:ne,geometry:Te.geometry,properties:Q.properties,type:Xc.types[Q.type],sortKey:rt}),Ge&&(V[Ge.name]=!0),Le){const We=_.evaluate(Te,{},s).join(","),tt=m.get("text-rotation-alignment")!=="viewport"&&m.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(M.ao.vertical)>=0;for(const mt of Le.sections)if(mt.image)V[mt.image.name]=!0;else{const et=vn(Le.toString()),it=mt.fontStack||We,Ve=$[it]=$[it]||{};this.calculateGlyphDependencies(mt.text,Ve,tt,this.allowVerticalPlacement,et)}}}m.get("symbol-placement")==="line"&&(this.features=(function(Q){const ee={},_e={},ne=[];let ce=0;function Te(We){ne.push(Q[We]),ce++}function Le(We,tt,mt){const et=_e[We];return delete _e[We],_e[tt]=et,ne[et].geometry[0].pop(),ne[et].geometry[0]=ne[et].geometry[0].concat(mt[0]),et}function Ge(We,tt,mt){const et=ee[tt];return delete ee[tt],ee[We]=et,ne[et].geometry[0].shift(),ne[et].geometry[0]=mt[0].concat(ne[et].geometry[0]),et}function rt(We,tt,mt){const et=mt?tt[0][tt[0].length-1]:tt[0][0];return`${We}:${et.x}:${et.y}`}for(let We=0;We<Q.length;We++){const tt=Q[We],mt=tt.geometry,et=tt.text?tt.text.toString():null;if(!et){Te(We);continue}const it=rt(et,mt),Ve=rt(et,mt,!0);if(it in _e&&Ve in ee&&_e[it]!==ee[Ve]){const bt=Ge(it,Ve,mt),Pt=Le(it,Ve,ne[bt].geometry);delete ee[it],delete _e[Ve],_e[rt(et,ne[Pt].geometry,!0)]=Pt,ne[bt].geometry=null}else it in _e?Le(it,Ve,mt):Ve in ee?Ge(it,Ve,mt):(Te(We),ee[it]=ce-1,_e[Ve]=ce-1)}return ne.filter((We=>We.geometry))})(this.features)),this.sortFeaturesByKey&&this.features.sort(((Q,ee)=>Q.sortKey-ee.sortKey))}update(t,r,s){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(t,r,this.layers,{imagePositions:s}),this.icon.programConfigurations.updatePaintArrays(t,r,this.layers,{imagePositions:s}))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(t){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(t),this.iconCollisionBox.upload(t)),this.text.upload(t,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(t,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(t,r){const s=this.lineVertexArray.length;if(t.segment!==void 0){let u=t.dist(r[t.segment+1]),m=t.dist(r[t.segment]);const _={};for(let y=t.segment+1;y<r.length;y++)_[y]={x:r[y].x,y:r[y].y,tileUnitDistanceFromAnchor:u},y<r.length-1&&(u+=r[y+1].dist(r[y]));for(let y=t.segment||0;y>=0;y--)_[y]={x:r[y].x,y:r[y].y,tileUnitDistanceFromAnchor:m},y>0&&(m+=r[y-1].dist(r[y]));for(let y=0;y<r.length;y++){const b=_[y];this.lineVertexArray.emplaceBack(b.x,b.y,b.tileUnitDistanceFromAnchor)}}return{lineStartIndex:s,lineLength:this.lineVertexArray.length-s}}addSymbols(t,r,s,u,m,_,y,b,T,E,L,V){const $=t.indexArray,N=t.layoutVertexArray,G=t.segments.prepareSegment(4*r.length,N,$,this.canOverlap?_.sortKey:void 0),Q=this.glyphOffsetArray.length,ee=G.vertexLength,_e=this.allowVerticalPlacement&&y===M.ao.vertical?Math.PI/2:0,ne=_.text&&_.text.sections;for(let ce=0;ce<r.length;ce++){const{tl:Te,tr:Le,bl:Ge,br:rt,tex:We,pixelOffsetTL:tt,pixelOffsetBR:mt,minFontScaleX:et,minFontScaleY:it,glyphOffset:Ve,isSDF:bt,sectionIndex:Pt}=r[ce],vt=G.vertexLength,ht=Ve[1];Wh(N,b.x,b.y,Te.x,ht+Te.y,We.x,We.y,s,bt,tt.x,tt.y,et,it),Wh(N,b.x,b.y,Le.x,ht+Le.y,We.x+We.w,We.y,s,bt,mt.x,tt.y,et,it),Wh(N,b.x,b.y,Ge.x,ht+Ge.y,We.x,We.y+We.h,s,bt,tt.x,mt.y,et,it),Wh(N,b.x,b.y,rt.x,ht+rt.y,We.x+We.w,We.y+We.h,s,bt,mt.x,mt.y,et,it),Qd(t.dynamicLayoutVertexArray,b,_e),$.emplaceBack(vt,vt+2,vt+1),$.emplaceBack(vt+1,vt+2,vt+3),G.vertexLength+=4,G.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(Ve[0]),ce!==r.length-1&&Pt===r[ce+1].sectionIndex||t.programConfigurations.populatePaintArrays(N.length,_,_.index,{imagePositions:{},canonical:V,formattedSection:ne&&ne[Pt]})}t.placedSymbolArray.emplaceBack(b.x,b.y,Q,this.glyphOffsetArray.length-Q,ee,T,E,b.segment,s?s[0]:0,s?s[1]:0,u[0],u[1],y,0,!1,0,L)}_addCollisionDebugVertex(t,r,s,u,m,_){return r.emplaceBack(0,0),t.emplaceBack(s.x,s.y,u,m,Math.round(_.x),Math.round(_.y))}addCollisionDebugVertices(t,r,s,u,m,_,y){const b=m.segments.prepareSegment(4,m.layoutVertexArray,m.indexArray),T=b.vertexLength,E=m.layoutVertexArray,L=m.collisionVertexArray,V=y.anchorX,$=y.anchorY;this._addCollisionDebugVertex(E,L,_,V,$,new ye(t,r)),this._addCollisionDebugVertex(E,L,_,V,$,new ye(s,r)),this._addCollisionDebugVertex(E,L,_,V,$,new ye(s,u)),this._addCollisionDebugVertex(E,L,_,V,$,new ye(t,u)),b.vertexLength+=4;const N=m.indexArray;N.emplaceBack(T,T+1),N.emplaceBack(T+1,T+2),N.emplaceBack(T+2,T+3),N.emplaceBack(T+3,T),b.primitiveLength+=4}addDebugCollisionBoxes(t,r,s,u){for(let m=t;m<r;m++){const _=this.collisionBoxArray.get(m);this.addCollisionDebugVertices(_.x1,_.y1,_.x2,_.y2,u?this.textCollisionBox:this.iconCollisionBox,_.anchorPoint,s)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new rf(Ne,Ls.members,li),this.iconCollisionBox=new rf(Ne,Ls.members,li);for(let t=0;t<this.symbolInstances.length;t++){const r=this.symbolInstances.get(t);this.addDebugCollisionBoxes(r.textBoxStartIndex,r.textBoxEndIndex,r,!0),this.addDebugCollisionBoxes(r.verticalTextBoxStartIndex,r.verticalTextBoxEndIndex,r,!0),this.addDebugCollisionBoxes(r.iconBoxStartIndex,r.iconBoxEndIndex,r,!1),this.addDebugCollisionBoxes(r.verticalIconBoxStartIndex,r.verticalIconBoxEndIndex,r,!1)}}_deserializeCollisionBoxesForSymbol(t,r,s,u,m,_,y,b,T){const E={};for(let L=r;L<s;L++){const V=t.get(L);E.textBox={x1:V.x1,y1:V.y1,x2:V.x2,y2:V.y2,anchorPointX:V.anchorPointX,anchorPointY:V.anchorPointY},E.textFeatureIndex=V.featureIndex;break}for(let L=u;L<m;L++){const V=t.get(L);E.verticalTextBox={x1:V.x1,y1:V.y1,x2:V.x2,y2:V.y2,anchorPointX:V.anchorPointX,anchorPointY:V.anchorPointY},E.verticalTextFeatureIndex=V.featureIndex;break}for(let L=_;L<y;L++){const V=t.get(L);E.iconBox={x1:V.x1,y1:V.y1,x2:V.x2,y2:V.y2,anchorPointX:V.anchorPointX,anchorPointY:V.anchorPointY},E.iconFeatureIndex=V.featureIndex;break}for(let L=b;L<T;L++){const V=t.get(L);E.verticalIconBox={x1:V.x1,y1:V.y1,x2:V.x2,y2:V.y2,anchorPointX:V.anchorPointX,anchorPointY:V.anchorPointY},E.verticalIconFeatureIndex=V.featureIndex;break}return E}deserializeCollisionBoxes(t){this.collisionArrays=[];for(let r=0;r<this.symbolInstances.length;r++){const s=this.symbolInstances.get(r);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(t,s.textBoxStartIndex,s.textBoxEndIndex,s.verticalTextBoxStartIndex,s.verticalTextBoxEndIndex,s.iconBoxStartIndex,s.iconBoxEndIndex,s.verticalIconBoxStartIndex,s.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(t,r){const s=t.placedSymbolArray.get(r),u=s.vertexStartIndex+4*s.numGlyphs;for(let m=s.vertexStartIndex;m<u;m+=4)t.indexArray.emplaceBack(m,m+2,m+1),t.indexArray.emplaceBack(m+1,m+2,m+3)}getSortedSymbolIndexes(t){if(this.sortedAngle===t&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const r=Math.sin(t),s=Math.cos(t),u=[],m=[],_=[];for(let y=0;y<this.symbolInstances.length;++y){_.push(y);const b=this.symbolInstances.get(y);u.push(0|Math.round(r*b.anchorX+s*b.anchorY)),m.push(b.featureIndex)}return _.sort(((y,b)=>u[y]-u[b]||m[b]-m[y])),_}addToSortKeyRanges(t,r){const s=this.sortKeyRanges[this.sortKeyRanges.length-1];s&&s.sortKey===r?s.symbolInstanceEnd=t+1:this.sortKeyRanges.push({sortKey:r,symbolInstanceStart:t,symbolInstanceEnd:t+1})}sortFeatures(t){if(this.sortFeaturesByY&&this.sortedAngle!==t&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(t),this.sortedAngle=t,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const r of this.symbolInstanceIndexes){const s=this.symbolInstances.get(r);this.featureSortOrder.push(s.featureIndex),[s.rightJustifiedTextSymbolIndex,s.centerJustifiedTextSymbolIndex,s.leftJustifiedTextSymbolIndex].forEach(((u,m,_)=>{u>=0&&_.indexOf(u)===m&&this.addIndicesForPlacedSymbol(this.text,u)})),s.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,s.verticalPlacedTextSymbolIndex),s.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,s.placedIconSymbolIndex),s.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,s.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let af,nf;st("SymbolBucket",oc,{omit:["layers","collisionBoxArray","features","compareText"]}),oc.MAX_GLYPHS=65535,oc.addDynamicAttributes=Qd;var of={get paint(){return nf=nf||new Ui({"icon-opacity":new yt(be.paint_symbol["icon-opacity"]),"icon-color":new yt(be.paint_symbol["icon-color"]),"icon-halo-color":new yt(be.paint_symbol["icon-halo-color"]),"icon-halo-width":new yt(be.paint_symbol["icon-halo-width"]),"icon-halo-blur":new yt(be.paint_symbol["icon-halo-blur"]),"icon-translate":new ut(be.paint_symbol["icon-translate"]),"icon-translate-anchor":new ut(be.paint_symbol["icon-translate-anchor"]),"text-opacity":new yt(be.paint_symbol["text-opacity"]),"text-color":new yt(be.paint_symbol["text-color"],{runtimeType:cn,getOverride:a=>a.textColor,hasOverride:a=>!!a.textColor}),"text-halo-color":new yt(be.paint_symbol["text-halo-color"]),"text-halo-width":new yt(be.paint_symbol["text-halo-width"]),"text-halo-blur":new yt(be.paint_symbol["text-halo-blur"]),"text-translate":new ut(be.paint_symbol["text-translate"]),"text-translate-anchor":new ut(be.paint_symbol["text-translate-anchor"])})},get layout(){return af=af||new Ui({"symbol-placement":new ut(be.layout_symbol["symbol-placement"]),"symbol-spacing":new ut(be.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new ut(be.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new yt(be.layout_symbol["symbol-sort-key"]),"symbol-z-order":new ut(be.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new ut(be.layout_symbol["icon-allow-overlap"]),"icon-overlap":new ut(be.layout_symbol["icon-overlap"]),"icon-ignore-placement":new ut(be.layout_symbol["icon-ignore-placement"]),"icon-optional":new ut(be.layout_symbol["icon-optional"]),"icon-rotation-alignment":new ut(be.layout_symbol["icon-rotation-alignment"]),"icon-size":new yt(be.layout_symbol["icon-size"]),"icon-text-fit":new ut(be.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new ut(be.layout_symbol["icon-text-fit-padding"]),"icon-image":new yt(be.layout_symbol["icon-image"]),"icon-rotate":new yt(be.layout_symbol["icon-rotate"]),"icon-padding":new yt(be.layout_symbol["icon-padding"]),"icon-keep-upright":new ut(be.layout_symbol["icon-keep-upright"]),"icon-offset":new yt(be.layout_symbol["icon-offset"]),"icon-anchor":new yt(be.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new ut(be.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new ut(be.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new ut(be.layout_symbol["text-rotation-alignment"]),"text-field":new yt(be.layout_symbol["text-field"]),"text-font":new yt(be.layout_symbol["text-font"]),"text-size":new yt(be.layout_symbol["text-size"]),"text-max-width":new yt(be.layout_symbol["text-max-width"]),"text-line-height":new ut(be.layout_symbol["text-line-height"]),"text-letter-spacing":new yt(be.layout_symbol["text-letter-spacing"]),"text-justify":new yt(be.layout_symbol["text-justify"]),"text-radial-offset":new yt(be.layout_symbol["text-radial-offset"]),"text-variable-anchor":new ut(be.layout_symbol["text-variable-anchor"]),"text-variable-anchor-offset":new yt(be.layout_symbol["text-variable-anchor-offset"]),"text-anchor":new yt(be.layout_symbol["text-anchor"]),"text-max-angle":new ut(be.layout_symbol["text-max-angle"]),"text-writing-mode":new ut(be.layout_symbol["text-writing-mode"]),"text-rotate":new yt(be.layout_symbol["text-rotate"]),"text-padding":new ut(be.layout_symbol["text-padding"]),"text-keep-upright":new ut(be.layout_symbol["text-keep-upright"]),"text-transform":new yt(be.layout_symbol["text-transform"]),"text-offset":new yt(be.layout_symbol["text-offset"]),"text-allow-overlap":new ut(be.layout_symbol["text-allow-overlap"]),"text-overlap":new ut(be.layout_symbol["text-overlap"]),"text-ignore-placement":new ut(be.layout_symbol["text-ignore-placement"]),"text-optional":new ut(be.layout_symbol["text-optional"])})}};class Wd{constructor(t){if(t.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=t.property.overrides?t.property.overrides.runtimeType:yi,this.defaultValue=t}evaluate(t){if(t.formattedSection){const r=this.defaultValue.property.overrides;if(r&&r.hasOverride(t.formattedSection))return r.getOverride(t.formattedSection)}return t.feature&&t.featureState?this.defaultValue.evaluate(t.feature,t.featureState):this.defaultValue.property.specification.default}eachChild(t){this.defaultValue.isConstant()||t(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}st("FormatSectionOverride",Wd,{omit:["defaultValue"]});class Wu extends Yr{constructor(t,r){super(t,of,r)}recalculate(t,r){if(super.recalculate(t,r),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){const s=this.layout.get("text-writing-mode");if(s){const u=[];for(const m of s)u.indexOf(m)<0&&u.push(m);this.layout._values["text-writing-mode"]=u}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(t,r,s,u){const m=this.layout.get(t).evaluate(r,{},s,u),_=this._unevaluatedLayout._values[t];return _.isDataDriven()||Zl(_.value)||!m?m:(function(y,b){return b.replace(/{([^{}]+)}/g,((T,E)=>y&&E in y?String(y[E]):""))})(r.properties,m)}createBucket(t){return new oc(t)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const t of of.paint.overridableProperties){if(!Wu.hasPaintOverride(this.layout,t))continue;const r=this.paint.get(t),s=new Wd(r),u=new kc(s,r.property.specification);let m=null;m=r.value.kind==="constant"||r.value.kind==="source"?new Sa("source",u):new ps("composite",u,r.value.zoomStops),this.paint._values[t]=new Zn(r.property,m,r.parameters)}}_handleOverridablePaintPropertyUpdate(t,r,s){return!(!this.layout||r.isDataDriven()||s.isDataDriven())&&Wu.hasPaintOverride(this.layout,t)}static hasPaintOverride(t,r){const s=t.get("text-field"),u=of.paint.properties[r];let m=!1;const _=y=>{for(const b of y)if(u.overrides&&u.overrides.hasOverride(b))return void(m=!0)};if(s.value.kind==="constant"&&s.value.value instanceof fr)_(s.value.value.sections);else if(s.value.kind==="source"||s.value.kind==="composite"){const y=T=>{m||(T instanceof pn&&$i(T.value)===Pn?_(T.value.sections):T instanceof mu?_(T.sections):T.eachChild(y))},b=s.value;b._styleExpression&&y(b._styleExpression.expression)}return m}}let hm;var xg={get paint(){return hm=hm||new Ui({"background-color":new ut(be.paint_background["background-color"]),"background-pattern":new Fc(be.paint_background["background-pattern"]),"background-opacity":new ut(be.paint_background["background-opacity"])})}};class Jh extends Yr{constructor(t,r){super(t,xg,r)}}class wg extends Yr{constructor(t,r){super(t,{},r),this.onAdd=s=>{this.implementation.onAdd&&this.implementation.onAdd(s,s.painter.context.gl)},this.onRemove=s=>{this.implementation.onRemove&&this.implementation.onRemove(s,s.painter.context.gl)},this.implementation=t}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}class dm{constructor(t){this._methodToThrottle=t,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._methodToThrottle()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout((()=>{this._triggered=!1,this._methodToThrottle()}),0))}remove(){delete this._channel,this._methodToThrottle=()=>{}}}const hi={once:!0},ed=63710088e-1;class qo{constructor(t,r){if(isNaN(t)||isNaN(r))throw new Error(`Invalid LngLat object: (${t}, ${r})`);if(this.lng=+t,this.lat=+r,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new qo(si(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(t){const r=Math.PI/180,s=this.lat*r,u=t.lat*r,m=Math.sin(s)*Math.sin(u)+Math.cos(s)*Math.cos(u)*Math.cos((t.lng-this.lng)*r);return ed*Math.acos(Math.min(m,1))}static convert(t){if(t instanceof qo)return t;if(Array.isArray(t)&&(t.length===2||t.length===3))return new qo(Number(t[0]),Number(t[1]));if(!Array.isArray(t)&&typeof t=="object"&&t!==null)return new qo(Number("lng"in t?t.lng:t.lon),Number(t.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const Jd=2*Math.PI*ed;function sf(a){return Jd*Math.cos(a*Math.PI/180)}function ep(a){return(180+a)/360}function Ju(a){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+a*Math.PI/360)))/360}function td(a,t){return a/sf(t)}function lf(a){return 360/Math.PI*Math.atan(Math.exp((180-360*a)*Math.PI/180))-90}function cf(a,t){return a*sf(lf(t))}class id{constructor(t,r,s=0){this.x=+t,this.y=+r,this.z=+s}static fromLngLat(t,r=0){const s=qo.convert(t);return new id(ep(s.lng),Ju(s.lat),td(r,s.lat))}toLngLat(){return new qo(360*this.x-180,lf(this.y))}toAltitude(){return cf(this.z,this.y)}meterInMercatorCoordinateUnits(){return 1/Jd*(t=lf(this.y),1/Math.cos(t*Math.PI/180));var t}}function pm(a,t,r){var s=2*Math.PI*6378137/256/Math.pow(2,r);return[a*s-2*Math.PI*6378137/2,t*s-2*Math.PI*6378137/2]}class tp{constructor(t,r,s){if(!(function(u,m,_){return!(u<0||u>25||_<0||_>=Math.pow(2,u)||m<0||m>=Math.pow(2,u))})(t,r,s))throw new Error(`x=${r}, y=${s}, z=${t} outside of bounds. 0<=x<${Math.pow(2,t)}, 0<=y<${Math.pow(2,t)} 0<=z<=25 `);this.z=t,this.x=r,this.y=s,this.key=sc(0,t,t,r,s)}equals(t){return this.z===t.z&&this.x===t.x&&this.y===t.y}url(t,r,s){const u=(_=this.y,y=this.z,b=pm(256*(m=this.x),256*(_=Math.pow(2,y)-_-1),y),T=pm(256*(m+1),256*(_+1),y),b[0]+","+b[1]+","+T[0]+","+T[1]);var m,_,y,b,T;const E=(function(L,V,$){let N,G="";for(let Q=L;Q>0;Q--)N=1<<Q-1,G+=(V&N?1:0)+($&N?2:0);return G})(this.z,this.x,this.y);return t[(this.x+this.y)%t.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(s==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,r>1?"@2x":"").replace(/{quadkey}/g,E).replace(/{bbox-epsg-3857}/g,u)}isChildOf(t){const r=this.z-t.z;return r>0&&t.x===this.x>>r&&t.y===this.y>>r}getTilePoint(t){const r=Math.pow(2,this.z);return new ye((t.x*r-this.x)*wt,(t.y*r-this.y)*wt)}toString(){return`${this.z}/${this.x}/${this.y}`}}class uf{constructor(t,r){this.wrap=t,this.canonical=r,this.key=sc(t,r.z,r.z,r.x,r.y)}}class ni{constructor(t,r,s,u,m){if(this.terrainRttPosMatrix32f=null,t<s)throw new Error(`overscaledZ should be >= z; overscaledZ = ${t}; z = ${s}`);this.overscaledZ=t,this.wrap=r,this.canonical=new tp(s,+u,+m),this.key=sc(r,t,s,u,m)}clone(){return new ni(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(t){return this.overscaledZ===t.overscaledZ&&this.wrap===t.wrap&&this.canonical.equals(t.canonical)}scaledTo(t){if(t>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${t}; overscaledZ = ${this.overscaledZ}`);const r=this.canonical.z-t;return t>this.canonical.z?new ni(t,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new ni(t,this.wrap,t,this.canonical.x>>r,this.canonical.y>>r)}isOverscaled(){return this.overscaledZ>this.canonical.z}calculateScaledKey(t,r){if(t>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${t}; overscaledZ = ${this.overscaledZ}`);const s=this.canonical.z-t;return t>this.canonical.z?sc(this.wrap*+r,t,this.canonical.z,this.canonical.x,this.canonical.y):sc(this.wrap*+r,t,t,this.canonical.x>>s,this.canonical.y>>s)}isChildOf(t){if(t.wrap!==this.wrap||this.overscaledZ-t.overscaledZ<=0)return!1;if(t.overscaledZ===0)return this.overscaledZ>0;const r=this.canonical.z-t.canonical.z;return!(r<0)&&t.canonical.x===this.canonical.x>>r&&t.canonical.y===this.canonical.y>>r}children(t){if(this.overscaledZ>=t)return[new ni(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const r=this.canonical.z+1,s=2*this.canonical.x,u=2*this.canonical.y;return[new ni(r,this.wrap,r,s,u),new ni(r,this.wrap,r,s+1,u),new ni(r,this.wrap,r,s,u+1),new ni(r,this.wrap,r,s+1,u+1)]}isLessThan(t){return this.wrap<t.wrap||!(this.wrap>t.wrap)&&(this.overscaledZ<t.overscaledZ||!(this.overscaledZ>t.overscaledZ)&&(this.canonical.x<t.canonical.x||!(this.canonical.x>t.canonical.x)&&this.canonical.y<t.canonical.y))}wrapped(){return new ni(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(t){return new ni(this.overscaledZ,t,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new uf(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(t){return this.canonical.getTilePoint(new id(t.x-this.wrap,t.y))}}function sc(a,t,r,s,u){(a*=2)<0&&(a=-1*a-1);const m=1<<r;return(m*m*a+m*u+s).toString(36)+r.toString(36)+t.toString(36)}function Nr(a,t){return t?a.properties[t]:a.id}st("CanonicalTileID",tp),st("OverscaledTileID",ni,{omit:["terrainRttPosMatrix32f"]});class iu{constructor(){this.minX=1/0,this.maxX=-1/0,this.minY=1/0,this.maxY=-1/0}extend(t){return this.minX=Math.min(this.minX,t.x),this.minY=Math.min(this.minY,t.y),this.maxX=Math.max(this.maxX,t.x),this.maxY=Math.max(this.maxY,t.y),this}expandBy(t){return this.minX-=t,this.minY-=t,this.maxX+=t,this.maxY+=t,(this.minX>this.maxX||this.minY>this.maxY)&&(this.minX=1/0,this.maxX=-1/0,this.minY=1/0,this.maxY=-1/0),this}shrinkBy(t){return this.expandBy(-t)}map(t){const r=new iu;return r.extend(t(new ye(this.minX,this.minY))),r.extend(t(new ye(this.maxX,this.minY))),r.extend(t(new ye(this.minX,this.maxY))),r.extend(t(new ye(this.maxX,this.maxY))),r}static fromPoints(t){const r=new iu;for(const s of t)r.extend(s);return r}contains(t){return t.x>=this.minX&&t.x<=this.maxX&&t.y>=this.minY&&t.y<=this.maxY}empty(){return this.minX>this.maxX}width(){return this.maxX-this.minX}height(){return this.maxY-this.minY}covers(t){return!this.empty()&&!t.empty()&&t.minX>=this.minX&&t.maxX<=this.maxX&&t.minY>=this.minY&&t.maxY<=this.maxY}intersects(t){return!this.empty()&&!t.empty()&&t.minX<=this.maxX&&t.maxX>=this.minX&&t.minY<=this.maxY&&t.maxY>=this.minY}}class hf{constructor(t){this._stringToNumber={},this._numberToString=[];for(let r=0;r<t.length;r++){const s=t[r];this._stringToNumber[s]=r,this._numberToString[r]=s}}encode(t){return this._stringToNumber[t]}decode(t){if(t>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${t} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[t]}}class fm{constructor(t,r,s,u,m){this.type="Feature",this._vectorTileFeature=t,t._z=r,t._x=s,t._y=u,this.properties=t.properties,this.id=m}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(t){this._geometry=t}toJSON(){const t={geometry:this.geometry};for(const r in this)r!=="_geometry"&&r!=="_vectorTileFeature"&&(t[r]=this[r]);return t}}class ip{constructor(t,r){this.tileID=t,this.x=t.canonical.x,this.y=t.canonical.y,this.z=t.canonical.z,this.grid=new Fn(wt,16,0),this.grid3D=new Fn(wt,16,0),this.featureIndexArray=new oe,this.promoteId=r}insert(t,r,s,u,m,_){const y=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(s,u,m);const b=_?this.grid3D:this.grid;for(let T=0;T<r.length;T++){const E=r[T],L=[1/0,1/0,-1/0,-1/0];for(let V=0;V<E.length;V++){const $=E[V];L[0]=Math.min(L[0],$.x),L[1]=Math.min(L[1],$.y),L[2]=Math.max(L[2],$.x),L[3]=Math.max(L[3],$.y)}L[0]<wt&&L[1]<wt&&L[2]>=0&&L[3]>=0&&b.insert(y,L[0],L[1],L[2],L[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new $p(new ja(this.rawTileData)).layers,this.sourceLayerCoder=new hf(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(t,r,s,u){this.loadVTLayers();const m=t.params,_=wt/t.tileSize/t.scale,y=Ma(m.filter,m.globalState),b=t.queryGeometry,T=t.queryPadding*_,E=iu.fromPoints(b),L=this.grid.query(E.minX-T,E.minY-T,E.maxX+T,E.maxY+T),V=iu.fromPoints(t.cameraQueryGeometry).expandBy(T),$=this.grid3D.query(V.minX,V.minY,V.maxX,V.maxY,((Q,ee,_e,ne)=>(function(ce,Te,Le,Ge,rt){for(const tt of ce)if(Te<=tt.x&&Le<=tt.y&&Ge>=tt.x&&rt>=tt.y)return!0;const We=[new ye(Te,Le),new ye(Te,rt),new ye(Ge,rt),new ye(Ge,Le)];if(ce.length>2){for(const tt of We)if(Zc(ce,tt))return!0}for(let tt=0;tt<ce.length-1;tt++)if(Ff(ce[tt],ce[tt+1],We))return!0;return!1})(t.cameraQueryGeometry,Q-T,ee-T,_e+T,ne+T)));for(const Q of $)L.push(Q);L.sort(ap);const N={};let G;for(let Q=0;Q<L.length;Q++){const ee=L[Q];if(ee===G)continue;G=ee;const _e=this.featureIndexArray.get(ee);let ne=null;this.loadMatchingFeature(N,_e.bucketIndex,_e.sourceLayerIndex,_e.featureIndex,y,m.layers,m.availableImages,r,s,u,((ce,Te,Le)=>(ne||(ne=go(ce)),Te.queryIntersectsFeature({queryGeometry:b,feature:ce,featureState:Le,geometry:ne,zoom:this.z,transform:t.transform,pixelsToTileUnits:_,pixelPosMatrix:t.pixelPosMatrix,unwrappedTileID:this.tileID.toUnwrapped(),getElevation:t.getElevation}))))}return N}loadMatchingFeature(t,r,s,u,m,_,y,b,T,E,L){const V=this.bucketLayerIDs[r];if(_&&!V.some((Q=>_.has(Q))))return;const $=this.sourceLayerCoder.decode(s),N=this.vtLayers[$].feature(u);if(m.needGeometry){const Q=Xn(N,!0);if(!m.filter(new bi(this.tileID.overscaledZ),Q,this.tileID.canonical))return}else if(!m.filter(new bi(this.tileID.overscaledZ),N))return;const G=this.getId(N,$);for(let Q=0;Q<V.length;Q++){const ee=V[Q];if(_&&!_.has(ee))continue;const _e=b[ee];if(!_e)continue;let ne={};G&&E&&(ne=E.getState(_e.sourceLayer||"_geojsonTileLayer",G));const ce=Oi({},T[ee]);ce.paint=rp(ce.paint,_e.paint,N,ne,y),ce.layout=rp(ce.layout,_e.layout,N,ne,y);const Te=!L||L(N,_e,ne);if(!Te)continue;const Le=new fm(N,this.z,this.x,this.y,G);Le.layer=ce;let Ge=t[ee];Ge===void 0&&(Ge=t[ee]=[]),Ge.push({featureIndex:u,feature:Le,intersectionZ:Te})}}lookupSymbolFeatures(t,r,s,u,m,_,y,b){const T={};this.loadVTLayers();const E=Ma(m.filterSpec,m.globalState);for(const L of t)this.loadMatchingFeature(T,s,u,L,E,_,y,b,r);return T}hasLayer(t){for(const r of this.bucketLayerIDs)for(const s of r)if(t===s)return!0;return!1}getId(t,r){var s;let u=t.id;return this.promoteId&&(u=t.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[r]],typeof u=="boolean"&&(u=Number(u)),u===void 0&&(!((s=t.properties)===null||s===void 0)&&s.cluster)&&this.promoteId&&(u=Number(t.properties.cluster_id))),u}}function rp(a,t,r,s,u){return bo(a,((m,_)=>{const y=t instanceof nl?t.get(_):null;return y&&y.evaluate?y.evaluate(r,s,u):y}))}function ap(a,t){return t-a}function df(a,t,r,s,u){const m=[];for(let _=0;_<a.length;_++){const y=a[_];let b;for(let T=0;T<y.length-1;T++){let E=y[T],L=y[T+1];E.x<t&&L.x<t||(E.x<t?E=new ye(t,E.y+(t-E.x)/(L.x-E.x)*(L.y-E.y))._round():L.x<t&&(L=new ye(t,E.y+(t-E.x)/(L.x-E.x)*(L.y-E.y))._round()),E.y<r&&L.y<r||(E.y<r?E=new ye(E.x+(r-E.y)/(L.y-E.y)*(L.x-E.x),r)._round():L.y<r&&(L=new ye(E.x+(r-E.y)/(L.y-E.y)*(L.x-E.x),r)._round()),E.x>=s&&L.x>=s||(E.x>=s?E=new ye(s,E.y+(s-E.x)/(L.x-E.x)*(L.y-E.y))._round():L.x>=s&&(L=new ye(s,E.y+(s-E.x)/(L.x-E.x)*(L.y-E.y))._round()),E.y>=u&&L.y>=u||(E.y>=u?E=new ye(E.x+(u-E.y)/(L.y-E.y)*(L.x-E.x),u)._round():L.y>=u&&(L=new ye(E.x+(u-E.y)/(L.y-E.y)*(L.x-E.x),u)._round()),b&&E.equals(b[b.length-1])||(b=[E],m.push(b)),b.push(L)))))}}return m}st("FeatureIndex",ip,{omit:["rawTileData","sourceLayerCoder"]});class bl extends ye{constructor(t,r,s,u){super(t,r),this.angle=s,u!==void 0&&(this.segment=u)}clone(){return new bl(this.x,this.y,this.angle,this.segment)}}function np(a,t,r,s,u){if(t.segment===void 0||r===0)return!0;let m=t,_=t.segment+1,y=0;for(;y>-r/2;){if(_--,_<0)return!1;y-=a[_].dist(m),m=a[_]}y+=a[_].dist(a[_+1]),_++;const b=[];let T=0;for(;y<r/2;){const E=a[_],L=a[_+1];if(!L)return!1;let V=a[_-1].angleTo(E)-E.angleTo(L);for(V=Math.abs((V+3*Math.PI)%(2*Math.PI)-Math.PI),b.push({distance:y,angleDelta:V}),T+=V;y-b[0].distance>s;)T-=b.shift().angleDelta;if(T>u)return!1;_++,y+=E.dist(L)}return!0}function op(a){let t=0;for(let r=0;r<a.length-1;r++)t+=a[r].dist(a[r+1]);return t}function mm(a,t,r){return a?.6*t*r:0}function pf(a,t){return Math.max(a?a.right-a.left:0,t?t.right-t.left:0)}function Cg(a,t,r,s,u,m){const _=mm(r,u,m),y=pf(r,s)*m;let b=0;const T=op(a)/2;for(let E=0;E<a.length-1;E++){const L=a[E],V=a[E+1],$=L.dist(V);if(b+$>T){const N=(T-b)/$,G=xa.number(L.x,V.x,N),Q=xa.number(L.y,V.y,N),ee=new bl(G,Q,V.angleTo(L),E);return ee._round(),!_||np(a,ee,y,_,t)?ee:void 0}b+=$}}function gm(a,t,r,s,u,m,_,y,b){const T=mm(s,m,_),E=pf(s,u),L=E*_,V=a[0].x===0||a[0].x===b||a[0].y===0||a[0].y===b;return t-L<t/4&&(t=L+t/4),_m(a,V?t/2*y%t:(E/2+2*m)*_*y%t,t,T,r,L,V,!1,b)}function _m(a,t,r,s,u,m,_,y,b){const T=m/2,E=op(a);let L=0,V=t-r,$=[];for(let N=0;N<a.length-1;N++){const G=a[N],Q=a[N+1],ee=G.dist(Q),_e=Q.angleTo(G);for(;V+r<L+ee;){V+=r;const ne=(V-L)/ee,ce=xa.number(G.x,Q.x,ne),Te=xa.number(G.y,Q.y,ne);if(ce>=0&&ce<b&&Te>=0&&Te<b&&V-T>=0&&V+T<=E){const Le=new bl(ce,Te,_e,N);Le._round(),s&&!np(a,Le,m,s,u)||$.push(Le)}}L+=ee}return y||$.length||_||($=_m(a,L/2,r,s,u,m,_,!0,b)),$}function vm(a,t,r,s){const u=[],m=a.image,_=m.pixelRatio,y=m.paddedRect.w-2,b=m.paddedRect.h-2;let T={x1:a.left,y1:a.top,x2:a.right,y2:a.bottom};const E=m.stretchX||[[0,y]],L=m.stretchY||[[0,b]],V=(Ve,bt)=>Ve+bt[1]-bt[0],$=E.reduce(V,0),N=L.reduce(V,0),G=y-$,Q=b-N;let ee=0,_e=$,ne=0,ce=N,Te=0,Le=G,Ge=0,rt=Q;if(m.content&&s){const Ve=m.content,bt=Ve[2]-Ve[0],Pt=Ve[3]-Ve[1];(m.textFitWidth||m.textFitHeight)&&(T=Yd(a)),ee=Xo(E,0,Ve[0]),ne=Xo(L,0,Ve[1]),_e=Xo(E,Ve[0],Ve[2]),ce=Xo(L,Ve[1],Ve[3]),Te=Ve[0]-ee,Ge=Ve[1]-ne,Le=bt-_e,rt=Pt-ce}const We=T.x1,tt=T.y1,mt=T.x2-We,et=T.y2-tt,it=(Ve,bt,Pt,vt)=>{const ht=rd(Ve.stretch-ee,_e,mt,We),Wt=eh(Ve.fixed-Te,Le,Ve.stretch,$),Xi=rd(bt.stretch-ne,ce,et,tt),wr=eh(bt.fixed-Ge,rt,bt.stretch,N),ra=rd(Pt.stretch-ee,_e,mt,We),rn=eh(Pt.fixed-Te,Le,Pt.stretch,$),Dr=rd(vt.stretch-ne,ce,et,tt),rr=eh(vt.fixed-Ge,rt,vt.stretch,N),wi=new ye(ht,Xi),_r=new ye(ra,Xi),Cr=new ye(ra,Dr),ar=new ye(ht,Dr),Va=new ye(Wt/_,wr/_),Cn=new ye(rn/_,rr/_),vr=t*Math.PI/180;if(vr){const Sr=Math.sin(vr),Ur=Math.cos(vr),Ir=[Ur,-Sr,Sr,Ur];wi._matMult(Ir),_r._matMult(Ir),ar._matMult(Ir),Cr._matMult(Ir)}const an=Ve.stretch+Ve.fixed,Lr=bt.stretch+bt.fixed;return{tl:wi,tr:_r,bl:ar,br:Cr,tex:{x:m.paddedRect.x+1+an,y:m.paddedRect.y+1+Lr,w:Pt.stretch+Pt.fixed-an,h:vt.stretch+vt.fixed-Lr},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Va,pixelOffsetBR:Cn,minFontScaleX:Le/_/mt,minFontScaleY:rt/_/et,isSDF:r}};if(s&&(m.stretchX||m.stretchY)){const Ve=ff(E,G,$),bt=ff(L,Q,N);for(let Pt=0;Pt<Ve.length-1;Pt++){const vt=Ve[Pt],ht=Ve[Pt+1];for(let Wt=0;Wt<bt.length-1;Wt++)u.push(it(vt,bt[Wt],ht,bt[Wt+1]))}}else u.push(it({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:y+1},{fixed:0,stretch:b+1}));return u}function Xo(a,t,r){let s=0;for(const u of a)s+=Math.max(t,Math.min(r,u[1]))-Math.max(t,Math.min(r,u[0]));return s}function ff(a,t,r){const s=[{fixed:-1,stretch:0}];for(const[u,m]of a){const _=s[s.length-1];s.push({fixed:u-_.stretch,stretch:_.stretch}),s.push({fixed:u-_.stretch,stretch:_.stretch+(m-u)})}return s.push({fixed:t+1,stretch:r}),s}function rd(a,t,r,s){return a/t*r+s}function eh(a,t,r,s){return a-t*r/s}st("Anchor",bl);class sp{constructor(t,r,s,u,m,_,y,b,T,E){var L;if(this.boxStartIndex=t.length,T){let V=_.top,$=_.bottom;const N=_.collisionPadding;N&&(V-=N[1],$+=N[3]);let G=$-V;G>0&&(G=Math.max(10,G),this.circleDiameter=G)}else{const V=!((L=_.image)===null||L===void 0)&&L.content&&(_.image.textFitWidth||_.image.textFitHeight)?Yd(_):{x1:_.left,y1:_.top,x2:_.right,y2:_.bottom};V.y1=V.y1*y-b[0],V.y2=V.y2*y+b[2],V.x1=V.x1*y-b[3],V.x2=V.x2*y+b[1];const $=_.collisionPadding;if($&&(V.x1-=$[0]*y,V.y1-=$[1]*y,V.x2+=$[2]*y,V.y2+=$[3]*y),E){const N=new ye(V.x1,V.y1),G=new ye(V.x2,V.y1),Q=new ye(V.x1,V.y2),ee=new ye(V.x2,V.y2),_e=E*Math.PI/180;N._rotate(_e),G._rotate(_e),Q._rotate(_e),ee._rotate(_e),V.x1=Math.min(N.x,G.x,Q.x,ee.x),V.x2=Math.max(N.x,G.x,Q.x,ee.x),V.y1=Math.min(N.y,G.y,Q.y,ee.y),V.y2=Math.max(N.y,G.y,Q.y,ee.y)}t.emplaceBack(r.x,r.y,V.x1,V.y1,V.x2,V.y2,s,u,m)}this.boxEndIndex=t.length}}class Sg{constructor(t=[],r=(s,u)=>s<u?-1:s>u?1:0){if(this.data=t,this.length=this.data.length,this.compare=r,this.length>0)for(let s=(this.length>>1)-1;s>=0;s--)this._down(s)}push(t){this.data.push(t),this._up(this.length++)}pop(){if(this.length===0)return;const t=this.data[0],r=this.data.pop();return--this.length>0&&(this.data[0]=r,this._down(0)),t}peek(){return this.data[0]}_up(t){const{data:r,compare:s}=this,u=r[t];for(;t>0;){const m=t-1>>1,_=r[m];if(s(u,_)>=0)break;r[t]=_,t=m}r[t]=u}_down(t){const{data:r,compare:s}=this,u=this.length>>1,m=r[t];for(;t<u;){let _=1+(t<<1);const y=_+1;if(y<this.length&&s(r[y],r[_])<0&&(_=y),s(r[_],m)>=0)break;r[t]=r[_],t=_}r[t]=m}}function ym(a,t=1,r=!1){const s=iu.fromPoints(a[0]),u=Math.min(s.width(),s.height());let m=u/2;const _=new Sg([],mf),{minX:y,minY:b,maxX:T,maxY:E}=s;if(u===0)return new ye(y,b);for(let $=y;$<T;$+=u)for(let N=b;N<E;N+=u)_.push(new lc($+m,N+m,m,a));let L=(function($){let N=0,G=0,Q=0;const ee=$[0];for(let _e=0,ne=ee.length,ce=ne-1;_e<ne;ce=_e++){const Te=ee[_e],Le=ee[ce],Ge=Te.x*Le.y-Le.x*Te.y;G+=(Te.x+Le.x)*Ge,Q+=(Te.y+Le.y)*Ge,N+=3*Ge}return new lc(G/N,Q/N,0,$)})(a),V=_.length;for(;_.length;){const $=_.pop();($.d>L.d||!L.d)&&(L=$,r&&console.log("found best %d after %d probes",Math.round(1e4*$.d)/1e4,V)),$.max-L.d<=t||(m=$.h/2,_.push(new lc($.p.x-m,$.p.y-m,m,a)),_.push(new lc($.p.x+m,$.p.y-m,m,a)),_.push(new lc($.p.x-m,$.p.y+m,m,a)),_.push(new lc($.p.x+m,$.p.y+m,m,a)),V+=4)}return r&&(console.log(`num probes: ${V}`),console.log(`best distance: ${L.d}`)),L.p}function mf(a,t){return t.max-a.max}function lc(a,t,r,s){this.p=new ye(a,t),this.h=r,this.d=(function(u,m){let _=!1,y=1/0;for(let b=0;b<m.length;b++){const T=m[b];for(let E=0,L=T.length,V=L-1;E<L;V=E++){const $=T[E],N=T[V];$.y>u.y!=N.y>u.y&&u.x<(N.x-$.x)*(u.y-$.y)/(N.y-$.y)+$.x&&(_=!_),y=Math.min(y,$r(u,$,N))}}return(_?1:-1)*Math.sqrt(y)})(this.p,s),this.max=this.d+this.h*Math.SQRT2}var ma;M.aE=void 0,(ma=M.aE||(M.aE={}))[ma.center=1]="center",ma[ma.left=2]="left",ma[ma.right=3]="right",ma[ma.top=4]="top",ma[ma.bottom=5]="bottom",ma[ma["top-left"]=6]="top-left",ma[ma["top-right"]=7]="top-right",ma[ma["bottom-left"]=8]="bottom-left",ma[ma["bottom-right"]=9]="bottom-right";const wn=Number.POSITIVE_INFINITY;function lp(a,t){return t[1]!==wn?(function(r,s,u){let m=0,_=0;switch(s=Math.abs(s),u=Math.abs(u),r){case"top-right":case"top-left":case"top":_=u-7;break;case"bottom-right":case"bottom-left":case"bottom":_=7-u}switch(r){case"top-right":case"bottom-right":case"right":m=-s;break;case"top-left":case"bottom-left":case"left":m=s}return[m,_]})(a,t[0],t[1]):(function(r,s){let u=0,m=0;s<0&&(s=0);const _=s/Math.SQRT2;switch(r){case"top-right":case"top-left":m=_-7;break;case"bottom-right":case"bottom-left":m=7-_;break;case"bottom":m=7-s;break;case"top":m=s-7}switch(r){case"top-right":case"bottom-right":u=-_;break;case"top-left":case"bottom-left":u=_;break;case"left":u=s;break;case"right":u=-s}return[u,m]})(a,t[0])}function gf(a,t,r){var s;const u=a.layout,m=(s=u.get("text-variable-anchor-offset"))===null||s===void 0?void 0:s.evaluate(t,{},r);if(m){const y=m.values,b=[];for(let T=0;T<y.length;T+=2){const E=b[T]=y[T],L=y[T+1].map((V=>V*gr));E.startsWith("top")?L[1]-=7:E.startsWith("bottom")&&(L[1]+=7),b[T+1]=L}return new Qi(b)}const _=u.get("text-variable-anchor");if(_){let y;y=a._unevaluatedLayout.getValue("text-radial-offset")!==void 0?[u.get("text-radial-offset").evaluate(t,{},r)*gr,wn]:u.get("text-offset").evaluate(t,{},r).map((T=>T*gr));const b=[];for(const T of _)b.push(T,lp(T,y));return new Qi(b)}return null}function cp(a){switch(a){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function bm(a,t,r,s,u,m,_,y,b,T,E,L){let V=m.textMaxSize.evaluate(t,{});V===void 0&&(V=_);const $=a.layers[0].layout,N=$.get("icon-offset").evaluate(t,{},E),G=Kn(r.horizontal),Q=_/24,ee=a.tilePixelRatio*Q,_e=a.tilePixelRatio*V/24,ne=a.tilePixelRatio*y,ce=a.tilePixelRatio*$.get("symbol-spacing"),Te=$.get("text-padding")*a.tilePixelRatio,Le=(function(Pt,vt,ht,Wt=1){const Xi=Pt.get("icon-padding").evaluate(vt,{},ht),wr=Xi&&Xi.values;return[wr[0]*Wt,wr[1]*Wt,wr[2]*Wt,wr[3]*Wt]})($,t,E,a.tilePixelRatio),Ge=$.get("text-max-angle")/180*Math.PI,rt=$.get("text-rotation-alignment")!=="viewport"&&$.get("symbol-placement")!=="point",We=$.get("icon-rotation-alignment")==="map"&&$.get("symbol-placement")!=="point",tt=$.get("symbol-placement"),mt=ce/2,et=$.get("icon-text-fit");let it;s&&et!=="none"&&(a.allowVerticalPlacement&&r.vertical&&(it=Kh(s,r.vertical,et,$.get("icon-text-fit-padding"),N,Q)),G&&(s=Kh(s,G,et,$.get("icon-text-fit-padding"),N,Q)));const Ve=E?L.line.getGranularityForZoomLevel(E.z):1,bt=(Pt,vt)=>{vt.x<0||vt.x>=wt||vt.y<0||vt.y>=wt||(function(ht,Wt,Xi,wr,ra,rn,Dr,rr,wi,_r,Cr,ar,Va,Cn,vr,an,Lr,Sr,Ur,Ir,Pi,Sn,ru,$a,Tm){const cc=ht.addToLineVertexArray(Wt,Xi);let Bs,au,ih,xl,i=0,o=0,c=0,f=0,x=-1,S=-1;const j={};let q=Fo("");if(ht.allowVerticalPlacement&&wr.vertical){const ct=rr.layout.get("text-rotate").evaluate(Pi,{},$a)+90;ih=new sp(wi,Wt,_r,Cr,ar,wr.vertical,Va,Cn,vr,ct),Dr&&(xl=new sp(wi,Wt,_r,Cr,ar,Dr,Lr,Sr,vr,ct))}if(ra){const ct=rr.layout.get("icon-rotate").evaluate(Pi,{}),kt=rr.layout.get("icon-text-fit")!=="none",Jt=vm(ra,ct,ru,kt),ei=Dr?vm(Dr,ct,ru,kt):void 0;au=new sp(wi,Wt,_r,Cr,ar,ra,Lr,Sr,!1,ct),i=4*Jt.length;const Tn=ht.iconSizeData;let Os=null;Tn.kind==="source"?(Os=[Ho*rr.layout.get("icon-size").evaluate(Pi,{})],Os[0]>tn&&ji(`${ht.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)):Tn.kind==="composite"&&(Os=[Ho*Sn.compositeIconSizes[0].evaluate(Pi,{},$a),Ho*Sn.compositeIconSizes[1].evaluate(Pi,{},$a)],(Os[0]>tn||Os[1]>tn)&&ji(`${ht.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)),ht.addSymbols(ht.icon,Jt,Os,Ir,Ur,Pi,M.ao.none,Wt,cc.lineStartIndex,cc.lineLength,-1,$a),x=ht.icon.placedSymbolArray.length-1,ei&&(o=4*ei.length,ht.addSymbols(ht.icon,ei,Os,Ir,Ur,Pi,M.ao.vertical,Wt,cc.lineStartIndex,cc.lineLength,-1,$a),S=ht.icon.placedSymbolArray.length-1)}const he=Object.keys(wr.horizontal);for(const ct of he){const kt=wr.horizontal[ct];if(!Bs){q=Fo(kt.text);const ei=rr.layout.get("text-rotate").evaluate(Pi,{},$a);Bs=new sp(wi,Wt,_r,Cr,ar,kt,Va,Cn,vr,ei)}const Jt=kt.positionedLines.length===1;if(c+=th(ht,Wt,kt,rn,rr,vr,Pi,an,cc,wr.vertical?M.ao.horizontal:M.ao.horizontalOnly,Jt?he:[ct],j,x,Sn,$a),Jt)break}wr.vertical&&(f+=th(ht,Wt,wr.vertical,rn,rr,vr,Pi,an,cc,M.ao.vertical,["vertical"],j,S,Sn,$a));const Pe=Bs?Bs.boxStartIndex:ht.collisionBoxArray.length,$e=Bs?Bs.boxEndIndex:ht.collisionBoxArray.length,qe=ih?ih.boxStartIndex:ht.collisionBoxArray.length,Re=ih?ih.boxEndIndex:ht.collisionBoxArray.length,Be=au?au.boxStartIndex:ht.collisionBoxArray.length,_t=au?au.boxEndIndex:ht.collisionBoxArray.length,Rt=xl?xl.boxStartIndex:ht.collisionBoxArray.length,Yi=xl?xl.boxEndIndex:ht.collisionBoxArray.length;let xe=-1;const ge=(ct,kt)=>ct&&ct.circleDiameter?Math.max(ct.circleDiameter,kt):kt;xe=ge(Bs,xe),xe=ge(ih,xe),xe=ge(au,xe),xe=ge(xl,xe);const ze=xe>-1?1:0;ze&&(xe*=Tm/gr),ht.glyphOffsetArray.length>=oc.MAX_GLYPHS&&ji("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),Pi.sortKey!==void 0&&ht.addToSortKeyRanges(ht.symbolInstances.length,Pi.sortKey);const He=gf(rr,Pi,$a),[At,Ti]=(function(ct,kt){const Jt=ct.length,ei=kt?.values;if(ei?.length>0)for(let Tn=0;Tn<ei.length;Tn+=2){const Os=ei[Tn+1];ct.emplaceBack(M.aE[ei[Tn]],Os[0],Os[1])}return[Jt,ct.length]})(ht.textAnchorOffsets,He);ht.symbolInstances.emplaceBack(Wt.x,Wt.y,j.right>=0?j.right:-1,j.center>=0?j.center:-1,j.left>=0?j.left:-1,j.vertical||-1,x,S,q,Pe,$e,qe,Re,Be,_t,Rt,Yi,_r,c,f,i,o,ze,0,Va,xe,At,Ti)})(a,vt,Pt,r,s,u,it,a.layers[0],a.collisionBoxArray,t.index,t.sourceLayerIndex,a.index,ee,[Te,Te,Te,Te],rt,b,ne,Le,We,N,t,m,T,E,_)};if(tt==="line")for(const Pt of df(t.geometry,0,0,wt,wt)){const vt=ec(Pt,Ve),ht=gm(vt,ce,Ge,r.vertical||G,s,24,_e,a.overscaling,wt);for(const Wt of ht)G&&xm(a,G.text,mt,Wt)||bt(vt,Wt)}else if(tt==="line-center"){for(const Pt of t.geometry)if(Pt.length>1){const vt=ec(Pt,Ve),ht=Cg(vt,Ge,r.vertical||G,s,24,_e);ht&&bt(vt,ht)}}else if(t.type==="Polygon")for(const Pt of Xs(t.geometry,0)){const vt=ym(Pt,16);bt(ec(Pt[0],Ve,!0),new bl(vt.x,vt.y,0))}else if(t.type==="LineString")for(const Pt of t.geometry){const vt=ec(Pt,Ve);bt(vt,new bl(vt[0].x,vt[0].y,0))}else if(t.type==="Point")for(const Pt of t.geometry)for(const vt of Pt)bt([vt],new bl(vt.x,vt.y,0))}function th(a,t,r,s,u,m,_,y,b,T,E,L,V,$,N){const G=(function(_e,ne,ce,Te,Le,Ge,rt,We){const tt=Te.layout.get("text-rotate").evaluate(Ge,{})*Math.PI/180,mt=[];for(const et of ne.positionedLines)for(const it of et.positionedGlyphs){if(!it.rect)continue;const Ve=it.rect||{};let bt=4,Pt=!0,vt=1,ht=0;const Wt=(Le||We)&&it.vertical,Xi=it.metrics.advance*it.scale/2;if(We&&ne.verticalizable&&(ht=et.lineOffset/2-(it.imageName?-(gr-it.metrics.width*it.scale)/2:(it.scale-1)*gr)),it.imageName){const Sr=rt[it.imageName];Pt=Sr.sdf,vt=Sr.pixelRatio,bt=1/vt}const wr=Le?[it.x+Xi,it.y]:[0,0];let ra=Le?[0,0]:[it.x+Xi+ce[0],it.y+ce[1]-ht],rn=[0,0];Wt&&(rn=ra,ra=[0,0]);const Dr=it.metrics.isDoubleResolution?2:1,rr=(it.metrics.left-bt)*it.scale-Xi+ra[0],wi=(-it.metrics.top-bt)*it.scale+ra[1],_r=rr+Ve.w/Dr*it.scale/vt,Cr=wi+Ve.h/Dr*it.scale/vt,ar=new ye(rr,wi),Va=new ye(_r,wi),Cn=new ye(rr,Cr),vr=new ye(_r,Cr);if(Wt){const Sr=new ye(-Xi,Xi- -17),Ur=-Math.PI/2,Ir=12-Xi,Pi=new ye(22-Ir,-(it.imageName?Ir:0)),Sn=new ye(...rn);ar._rotateAround(Ur,Sr)._add(Pi)._add(Sn),Va._rotateAround(Ur,Sr)._add(Pi)._add(Sn),Cn._rotateAround(Ur,Sr)._add(Pi)._add(Sn),vr._rotateAround(Ur,Sr)._add(Pi)._add(Sn)}if(tt){const Sr=Math.sin(tt),Ur=Math.cos(tt),Ir=[Ur,-Sr,Sr,Ur];ar._matMult(Ir),Va._matMult(Ir),Cn._matMult(Ir),vr._matMult(Ir)}const an=new ye(0,0),Lr=new ye(0,0);mt.push({tl:ar,tr:Va,bl:Cn,br:vr,tex:Ve,writingMode:ne.writingMode,glyphOffset:wr,sectionIndex:it.sectionIndex,isSDF:Pt,pixelOffsetTL:an,pixelOffsetBR:Lr,minFontScaleX:0,minFontScaleY:0})}return mt})(0,r,y,u,m,_,s,a.allowVerticalPlacement),Q=a.textSizeData;let ee=null;Q.kind==="source"?(ee=[Ho*u.layout.get("text-size").evaluate(_,{})],ee[0]>tn&&ji(`${a.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)):Q.kind==="composite"&&(ee=[Ho*$.compositeTextSizes[0].evaluate(_,{},N),Ho*$.compositeTextSizes[1].evaluate(_,{},N)],(ee[0]>tn||ee[1]>tn)&&ji(`${a.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)),a.addSymbols(a.text,G,ee,y,m,_,T,t,b.lineStartIndex,b.lineLength,V,N);for(const _e of E)L[_e]=a.text.placedSymbolArray.length-1;return 4*G.length}function Kn(a){for(const t in a)return a[t];return null}function xm(a,t,r,s){const u=a.compareText;if(t in u){const m=u[t];for(let _=m.length-1;_>=0;_--)if(s.dist(m[_])<r)return!0}else u[t]=[];return u[t].push(s),!1}const ad=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class Yo{static from(t){if(!(t instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[r,s]=new Uint8Array(t,0,2);if(r!==219)throw new Error("Data does not appear to be in a KDBush format.");const u=s>>4;if(u!==1)throw new Error(`Got v${u} data when expected v1.`);const m=ad[15&s];if(!m)throw new Error("Unrecognized array type.");const[_]=new Uint16Array(t,2,1),[y]=new Uint32Array(t,4,1);return new Yo(y,_,m,t)}constructor(t,r=64,s=Float64Array,u){if(isNaN(t)||t<0)throw new Error(`Unpexpected numItems value: ${t}.`);this.numItems=+t,this.nodeSize=Math.min(Math.max(+r,2),65535),this.ArrayType=s,this.IndexArrayType=t<65536?Uint16Array:Uint32Array;const m=ad.indexOf(this.ArrayType),_=2*t*this.ArrayType.BYTES_PER_ELEMENT,y=t*this.IndexArrayType.BYTES_PER_ELEMENT,b=(8-y%8)%8;if(m<0)throw new Error(`Unexpected typed array class: ${s}.`);u&&u instanceof ArrayBuffer?(this.data=u,this.ids=new this.IndexArrayType(this.data,8,t),this.coords=new this.ArrayType(this.data,8+y+b,2*t),this._pos=2*t,this._finished=!0):(this.data=new ArrayBuffer(8+_+y+b),this.ids=new this.IndexArrayType(this.data,8,t),this.coords=new this.ArrayType(this.data,8+y+b,2*t),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+m]),new Uint16Array(this.data,2,1)[0]=r,new Uint32Array(this.data,4,1)[0]=t)}add(t,r){const s=this._pos>>1;return this.ids[s]=s,this.coords[this._pos++]=t,this.coords[this._pos++]=r,s}finish(){const t=this._pos>>1;if(t!==this.numItems)throw new Error(`Added ${t} items when expected ${this.numItems}.`);return _f(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(t,r,s,u){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:m,coords:_,nodeSize:y}=this,b=[0,m.length-1,0],T=[];for(;b.length;){const E=b.pop()||0,L=b.pop()||0,V=b.pop()||0;if(L-V<=y){for(let Q=V;Q<=L;Q++){const ee=_[2*Q],_e=_[2*Q+1];ee>=t&&ee<=s&&_e>=r&&_e<=u&&T.push(m[Q])}continue}const $=V+L>>1,N=_[2*$],G=_[2*$+1];N>=t&&N<=s&&G>=r&&G<=u&&T.push(m[$]),(E===0?t<=N:r<=G)&&(b.push(V),b.push($-1),b.push(1-E)),(E===0?s>=N:u>=G)&&(b.push($+1),b.push(L),b.push(1-E))}return T}within(t,r,s){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:u,coords:m,nodeSize:_}=this,y=[0,u.length-1,0],b=[],T=s*s;for(;y.length;){const E=y.pop()||0,L=y.pop()||0,V=y.pop()||0;if(L-V<=_){for(let Q=V;Q<=L;Q++)Cm(m[2*Q],m[2*Q+1],t,r)<=T&&b.push(u[Q]);continue}const $=V+L>>1,N=m[2*$],G=m[2*$+1];Cm(N,G,t,r)<=T&&b.push(u[$]),(E===0?t-s<=N:r-s<=G)&&(y.push(V),y.push($-1),y.push(1-E)),(E===0?t+s>=N:r+s>=G)&&(y.push($+1),y.push(L),y.push(1-E))}return b}}function _f(a,t,r,s,u,m){if(u-s<=r)return;const _=s+u>>1;wm(a,t,_,s,u,m),_f(a,t,r,s,_-1,1-m),_f(a,t,r,_+1,u,1-m)}function wm(a,t,r,s,u,m){for(;u>s;){if(u-s>600){const T=u-s+1,E=r-s+1,L=Math.log(T),V=.5*Math.exp(2*L/3),$=.5*Math.sqrt(L*V*(T-V)/T)*(E-T/2<0?-1:1);wm(a,t,r,Math.max(s,Math.floor(r-E*V/T+$)),Math.min(u,Math.floor(r+(T-E)*V/T+$)),m)}const _=t[2*r+m];let y=s,b=u;for(Rs(a,t,s,r),t[2*u+m]>_&&Rs(a,t,s,u);y<b;){for(Rs(a,t,y,b),y++,b--;t[2*y+m]<_;)y++;for(;t[2*b+m]>_;)b--}t[2*s+m]===_?Rs(a,t,s,b):(b++,Rs(a,t,b,u)),b<=r&&(s=b+1),r<=b&&(u=b-1)}}function Rs(a,t,r,s){up(a,r,s),up(t,2*r,2*s),up(t,2*r+1,2*s+1)}function up(a,t,r){const s=a[t];a[t]=a[r],a[r]=s}function Cm(a,t,r,s){const u=a-r,m=t-s;return u*u+m*m}var vf;M.cx=void 0,(vf=M.cx||(M.cx={})).create="create",vf.load="load",vf.fullLoad="fullLoad";let hp=null,nd=[];const yf=1e3/60,bf="loadTime",xf="fullLoadTime",Sm={mark(a){performance.mark(a)},frame(a){const t=a;hp!=null&&nd.push(t-hp),hp=t},clearMetrics(){hp=null,nd=[],performance.clearMeasures(bf),performance.clearMeasures(xf);for(const a in M.cx)performance.clearMarks(M.cx[a])},getPerformanceMetrics(){performance.measure(bf,M.cx.create,M.cx.load),performance.measure(xf,M.cx.create,M.cx.fullLoad);const a=performance.getEntriesByName(bf)[0].duration,t=performance.getEntriesByName(xf)[0].duration,r=nd.length,s=1/(nd.reduce(((m,_)=>m+_),0)/r/1e3),u=nd.filter((m=>m>yf)).reduce(((m,_)=>m+(_-yf)/yf),0);return{loadTime:a,fullLoadTime:t,fps:s,percentDroppedFrames:u/(r+u)*100,totalFrames:r}}};M.$=wt,M.A=oi,M.B=function([a,t,r]){return t+=90,t*=Math.PI/180,r*=Math.PI/180,{x:a*Math.cos(t)*Math.sin(r),y:a*Math.sin(t)*Math.sin(r),z:a*Math.cos(r)}},M.C=xa,M.D=ut,M.E=pt,M.F=bi,M.G=ku,M.H=xo,M.I=Yp,M.J=class{constructor(a,t){this.target=a,this.mapId=t,this.resolveRejects={},this.tasks={},this.taskQueue=[],this.abortControllers={},this.messageHandlers={},this.invoker=new dm((()=>this.process())),this.subscription=Zr(this.target,"message",(r=>this.receive(r)),!1),this.globalScope=An(self)?a:window}registerMessageHandler(a,t){this.messageHandlers[a]=t}sendAsync(a,t){return new Promise(((r,s)=>{const u=Math.round(1e18*Math.random()).toString(36).substring(0,10),m=t?Zr(t.signal,"abort",(()=>{m?.unsubscribe(),delete this.resolveRejects[u];const b={id:u,type:"<cancel>",origin:location.origin,targetMapId:a.targetMapId,sourceMapId:this.mapId};this.target.postMessage(b)}),hi):null;this.resolveRejects[u]={resolve:b=>{m?.unsubscribe(),r(b)},reject:b=>{m?.unsubscribe(),s(b)}};const _=[],y=Object.assign(Object.assign({},a),{id:u,sourceMapId:this.mapId,origin:location.origin,data:xs(a.data,_)});this.target.postMessage(y,{transfer:_})}))}receive(a){const t=a.data,r=t.id;if(!(t.origin!=="file://"&&location.origin!=="file://"&&t.origin!=="resource://android"&&location.origin!=="resource://android"&&t.origin!==location.origin||t.targetMapId&&this.mapId!==t.targetMapId)){if(t.type==="<cancel>"){delete this.tasks[r];const s=this.abortControllers[r];return delete this.abortControllers[r],void(s&&s.abort())}if(An(self)||t.mustQueue)return this.tasks[r]=t,this.taskQueue.push(r),void this.invoker.trigger();this.processTask(r,t)}}process(){if(this.taskQueue.length===0)return;const a=this.taskQueue.shift(),t=this.tasks[a];delete this.tasks[a],this.taskQueue.length>0&&this.invoker.trigger(),t&&this.processTask(a,t)}processTask(a,t){return d(this,void 0,void 0,(function*(){if(t.type==="<response>"){const u=this.resolveRejects[a];return delete this.resolveRejects[a],u?void(t.error?u.reject(Bo(t.error)):u.resolve(Bo(t.data))):void 0}if(!this.messageHandlers[t.type])return void this.completeTask(a,new Error(`Could not find a registered handler for ${t.type}, map ID: ${this.mapId}, available handlers: ${Object.keys(this.messageHandlers).join(", ")}`));const r=Bo(t.data),s=new AbortController;this.abortControllers[a]=s;try{const u=yield this.messageHandlers[t.type](t.sourceMapId,r,s);this.completeTask(a,null,u)}catch(u){this.completeTask(a,u)}}))}completeTask(a,t,r){const s=[];delete this.abortControllers[a];const u={id:a,type:"<response>",sourceMapId:this.mapId,origin:location.origin,error:t?xs(t):null,data:xs(r,s)};this.target.postMessage(u,{transfer:s})}remove(){this.invoker.remove(),this.subscription.unsubscribe()}},M.K=Y,M.L=function(){var a=new oi(16);return oi!=Float32Array&&(a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[11]=0,a[12]=0,a[13]=0,a[14]=0),a[0]=1,a[5]=1,a[10]=1,a[15]=1,a},M.M=function(a,t,r){var s,u,m,_,y,b,T,E,L,V,$,N,G=r[0],Q=r[1],ee=r[2];return t===a?(a[12]=t[0]*G+t[4]*Q+t[8]*ee+t[12],a[13]=t[1]*G+t[5]*Q+t[9]*ee+t[13],a[14]=t[2]*G+t[6]*Q+t[10]*ee+t[14],a[15]=t[3]*G+t[7]*Q+t[11]*ee+t[15]):(u=t[1],m=t[2],_=t[3],y=t[4],b=t[5],T=t[6],E=t[7],L=t[8],V=t[9],$=t[10],N=t[11],a[0]=s=t[0],a[1]=u,a[2]=m,a[3]=_,a[4]=y,a[5]=b,a[6]=T,a[7]=E,a[8]=L,a[9]=V,a[10]=$,a[11]=N,a[12]=s*G+y*Q+L*ee+t[12],a[13]=u*G+b*Q+V*ee+t[13],a[14]=m*G+T*Q+$*ee+t[14],a[15]=_*G+E*Q+N*ee+t[15]),a},M.N=function(a,t,r){var s=r[0],u=r[1],m=r[2];return a[0]=t[0]*s,a[1]=t[1]*s,a[2]=t[2]*s,a[3]=t[3]*s,a[4]=t[4]*u,a[5]=t[5]*u,a[6]=t[6]*u,a[7]=t[7]*u,a[8]=t[8]*m,a[9]=t[9]*m,a[10]=t[10]*m,a[11]=t[11]*m,a[12]=t[12],a[13]=t[13],a[14]=t[14],a[15]=t[15],a},M.O=function(a,t,r){var s=t[0],u=t[1],m=t[2],_=t[3],y=t[4],b=t[5],T=t[6],E=t[7],L=t[8],V=t[9],$=t[10],N=t[11],G=t[12],Q=t[13],ee=t[14],_e=t[15],ne=r[0],ce=r[1],Te=r[2],Le=r[3];return a[0]=ne*s+ce*y+Te*L+Le*G,a[1]=ne*u+ce*b+Te*V+Le*Q,a[2]=ne*m+ce*T+Te*$+Le*ee,a[3]=ne*_+ce*E+Te*N+Le*_e,a[4]=(ne=r[4])*s+(ce=r[5])*y+(Te=r[6])*L+(Le=r[7])*G,a[5]=ne*u+ce*b+Te*V+Le*Q,a[6]=ne*m+ce*T+Te*$+Le*ee,a[7]=ne*_+ce*E+Te*N+Le*_e,a[8]=(ne=r[8])*s+(ce=r[9])*y+(Te=r[10])*L+(Le=r[11])*G,a[9]=ne*u+ce*b+Te*V+Le*Q,a[10]=ne*m+ce*T+Te*$+Le*ee,a[11]=ne*_+ce*E+Te*N+Le*_e,a[12]=(ne=r[12])*s+(ce=r[13])*y+(Te=r[14])*L+(Le=r[15])*G,a[13]=ne*u+ce*b+Te*V+Le*Q,a[14]=ne*m+ce*T+Te*$+Le*ee,a[15]=ne*_+ce*E+Te*N+Le*_e,a},M.P=ye,M.Q=function(a,t){const r={};for(let s=0;s<t.length;s++){const u=t[s];u in a&&(r[u]=a[u])}return r},M.R=za,M.S=qo,M.T=$u,M.U=Ju,M.V=ep,M.W=aa,M.X=dr,M.Y=zn,M.Z=ni,M._=d,M.a=U,M.a$=Jn,M.a0=function(a,t){var r,s,u,m,_;if(!a)return t??{};if(!t)return a;let y=Object.assign({},a);if(t.removeAll&&(y={removeAll:!0}),t.remove){const b=new Set(t.remove);y.add&&(y.add=y.add.filter((E=>!b.has(E.id)))),y.update&&(y.update=y.update.filter((E=>!b.has(E.id))));const T=new Set(((r=a.add)!==null&&r!==void 0?r:[]).map((E=>E.id)));t.remove=t.remove.filter((E=>!T.has(E)))}if(t.remove){const b=new Set(y.remove?y.remove.concat(t.remove):t.remove);y.remove=Array.from(b.values())}if(t.add){const b=y.add?y.add.concat(t.add):t.add,T=new Map(b.map((E=>[E.id,E])));y.add=Array.from(T.values())}if(t.update){const b=new Map((s=y.update)===null||s===void 0?void 0:s.map((T=>[T.id,T])));for(const T of t.update){const E=(u=b.get(T.id))!==null&&u!==void 0?u:{id:T.id};T.newGeometry&&(E.newGeometry=T.newGeometry),T.addOrUpdateProperties&&(E.addOrUpdateProperties=((m=E.addOrUpdateProperties)!==null&&m!==void 0?m:[]).concat(T.addOrUpdateProperties)),T.removeProperties&&(E.removeProperties=((_=E.removeProperties)!==null&&_!==void 0?_:[]).concat(T.removeProperties)),T.removeAllProperties&&(E.removeAllProperties=!0),b.set(T.id,E)}y.update=Array.from(b.values())}return y.remove&&y.add&&(y.remove=y.remove.filter((b=>y.add.findIndex((T=>T.id===b))===-1))),y},M.a1=id,M.a2=iu,M.a3=25,M.a4=tp,M.a5=a=>{const t=window.document.createElement("video");return t.muted=!0,new Promise((r=>{t.onloadstart=()=>{r(t)};for(const s of a){const u=window.document.createElement("source");Me(s)||(t.crossOrigin="Anonymous"),u.src=s,t.appendChild(u)}}))},M.a6=Fe,M.a7=function(){return mi++},M.a8=z,M.a9=oc,M.aA=function(a){let t=1/0,r=1/0,s=-1/0,u=-1/0;for(const m of a)t=Math.min(t,m.x),r=Math.min(r,m.y),s=Math.max(s,m.x),u=Math.max(u,m.y);return[t,r,s,u]},M.aB=gr,M.aC=vi,M.aD=function(a,t,r,s,u=!1){if(!r[0]&&!r[1])return[0,0];const m=u?s==="map"?-a.bearingInRadians:0:s==="viewport"?a.bearingInRadians:0;if(m){const _=Math.sin(m),y=Math.cos(m);r=[r[0]*y-r[1]*_,r[0]*_+r[1]*y]}return[u?r[0]:vi(t,r[0],a.zoom),u?r[1]:vi(t,r[1],a.zoom)]},M.aF=tu,M.aG=cp,M.aH=Qh,M.aI=Yo,M.aJ=xi,M.aK=qc,M.aL=te,M.aM=Ut,M.aN=Tt,M.aO=si,M.aP=Na,M.aQ=cf,M.aR=ln,M.aS=va,M.aT=function(a){var t=new oi(3);return t[0]=a[0],t[1]=a[1],t[2]=a[2],t},M.aU=function(a,t,r){return a[0]=t[0]-r[0],a[1]=t[1]-r[1],a[2]=t[2]-r[2],a},M.aV=function(a,t){var r=t[0],s=t[1],u=t[2],m=r*r+s*s+u*u;return m>0&&(m=1/Math.sqrt(m)),a[0]=t[0]*m,a[1]=t[1]*m,a[2]=t[2]*m,a},M.aW=oa,M.aX=function(a,t){return a[0]*t[0]+a[1]*t[1]+a[2]*t[2]},M.aY=function(a,t,r){return a[0]=t[0]*r[0],a[1]=t[1]*r[1],a[2]=t[2]*r[2],a[3]=t[3]*r[3],a},M.aZ=ii,M.a_=function(a,t,r){const s=t[0]*r[0]+t[1]*r[1]+t[2]*r[2];return s===0?null:(-(a[0]*r[0]+a[1]*r[1]+a[2]*r[2])-r[3])/s},M.aa=Ma,M.ab=Xn,M.ac=fm,M.ad=function(a){const t={};if(a.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,((r,s,u,m)=>{const _=u||m;return t[s]=!_||_.toLowerCase(),""})),t["max-age"]){const r=parseInt(t["max-age"],10);isNaN(r)?delete t["max-age"]:t["max-age"]=r}return t},M.ae=Et,M.af=85.051129,M.ag=Tl,M.ah=function(a){return Math.pow(2,a)},M.ai=_a,M.aj=td,M.ak=function(a){return Math.log(a)/Math.LN2},M.al=function(a){var t=a[0],r=a[1];return t*t+r*r},M.am=function(a){if(!a.length)return new Set;const t=Math.max(...a.map((b=>b.canonical.z)));let r=1/0,s=-1/0,u=1/0,m=-1/0;const _=[];for(const b of a){const{x:T,y:E,z:L}=b.canonical,V=Math.pow(2,t-L),$=T*V,N=E*V;_.push({id:b,x:$,y:N}),$<r&&(r=$),$>s&&(s=$),N<u&&(u=N),N>m&&(m=N)}const y=new Set;for(const b of _)b.x!==r&&b.x!==s&&b.y!==u&&b.y!==m||y.add(b.id);return y},M.an=function(a,t){let r=0,s=0;if(a.kind==="constant")s=a.layoutSize;else if(a.kind!=="source"){const{interpolationType:u,minZoom:m,maxZoom:_}=a,y=u?Et(ba.interpolationFactor(u,t,m,_),0,1):0;a.kind==="camera"?s=xa.number(a.minSize,a.maxSize,y):r=y}return{uSizeT:r,uSize:s}},M.ap=function(a,{uSize:t,uSizeT:r},{lowerSize:s,upperSize:u}){return a.kind==="source"?s/Ho:a.kind==="composite"?xa.number(s/Ho,u/Ho,r):t},M.aq=function(a,t){var r=t[0],s=t[1],u=t[2],m=t[3],_=t[4],y=t[5],b=t[6],T=t[7],E=t[8],L=t[9],V=t[10],$=t[11],N=t[12],G=t[13],Q=t[14],ee=t[15],_e=r*y-s*_,ne=r*b-u*_,ce=r*T-m*_,Te=s*b-u*y,Le=s*T-m*y,Ge=u*T-m*b,rt=E*G-L*N,We=E*Q-V*N,tt=E*ee-$*N,mt=L*Q-V*G,et=L*ee-$*G,it=V*ee-$*Q,Ve=_e*it-ne*et+ce*mt+Te*tt-Le*We+Ge*rt;return Ve?(a[0]=(y*it-b*et+T*mt)*(Ve=1/Ve),a[1]=(u*et-s*it-m*mt)*Ve,a[2]=(G*Ge-Q*Le+ee*Te)*Ve,a[3]=(V*Le-L*Ge-$*Te)*Ve,a[4]=(b*tt-_*it-T*We)*Ve,a[5]=(r*it-u*tt+m*We)*Ve,a[6]=(Q*ce-N*Ge-ee*ne)*Ve,a[7]=(E*Ge-V*ce+$*ne)*Ve,a[8]=(_*et-y*tt+T*rt)*Ve,a[9]=(s*tt-r*et-m*rt)*Ve,a[10]=(N*Le-G*ce+ee*_e)*Ve,a[11]=(L*ce-E*Le-$*_e)*Ve,a[12]=(y*We-_*mt-b*rt)*Ve,a[13]=(r*mt-s*We+u*rt)*Ve,a[14]=(G*ne-N*Te-Q*_e)*Ve,a[15]=(E*Te-L*ne+V*_e)*Ve,a):null},M.ar=nt,M.as=function(a){var t=a[0],r=a[1];return Math.sqrt(t*t+r*r)},M.at=function(a){return a[0]=0,a[1]=0,a},M.au=function(a,t,r){return a[0]=t[0]*r,a[1]=t[1]*r,a},M.av=Qd,M.aw=Pa,M.ax=function(a,t,r,s){const u=t.y-a.y,m=t.x-a.x,_=s.y-r.y,y=s.x-r.x,b=_*m-y*u;if(b===0)return null;const T=(y*(a.y-r.y)-_*(a.x-r.x))/b;return new ye(a.x+T*m,a.y+T*u)},M.ay=df,M.az=Dh,M.b=En,M.b$=class extends ea{constructor(a,t){super(a,t),this.current=new Array}set(a){if(a!=this.current){this.current=a;const t=new Float32Array(a);this.gl.uniform1fv(this.location,t)}}},M.b0=function(a,t,r){return a[0]=t[0]*r,a[1]=t[1]*r,a[2]=t[2]*r,a[3]=t[3]*r,a},M.b1=function(a,t){return a[0]*t[0]+a[1]*t[1]+a[2]*t[2]+a[3]},M.b2=uf,M.b3=sc,M.b4=function(a,t,r,s,u){var m=1/Math.tan(t/2);if(a[0]=m/r,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=m,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[11]=-1,a[12]=0,a[13]=0,a[15]=0,u!=null&&u!==1/0){var _=1/(s-u);a[10]=(u+s)*_,a[14]=2*u*s*_}else a[10]=-1,a[14]=-2*s;return a},M.b5=function(a){var t=new oi(16);return t[0]=a[0],t[1]=a[1],t[2]=a[2],t[3]=a[3],t[4]=a[4],t[5]=a[5],t[6]=a[6],t[7]=a[7],t[8]=a[8],t[9]=a[9],t[10]=a[10],t[11]=a[11],t[12]=a[12],t[13]=a[13],t[14]=a[14],t[15]=a[15],t},M.b6=function(a,t,r){var s=Math.sin(r),u=Math.cos(r),m=t[0],_=t[1],y=t[2],b=t[3],T=t[4],E=t[5],L=t[6],V=t[7];return t!==a&&(a[8]=t[8],a[9]=t[9],a[10]=t[10],a[11]=t[11],a[12]=t[12],a[13]=t[13],a[14]=t[14],a[15]=t[15]),a[0]=m*u+T*s,a[1]=_*u+E*s,a[2]=y*u+L*s,a[3]=b*u+V*s,a[4]=T*u-m*s,a[5]=E*u-_*s,a[6]=L*u-y*s,a[7]=V*u-b*s,a},M.b7=function(a,t,r){var s=Math.sin(r),u=Math.cos(r),m=t[4],_=t[5],y=t[6],b=t[7],T=t[8],E=t[9],L=t[10],V=t[11];return t!==a&&(a[0]=t[0],a[1]=t[1],a[2]=t[2],a[3]=t[3],a[12]=t[12],a[13]=t[13],a[14]=t[14],a[15]=t[15]),a[4]=m*u+T*s,a[5]=_*u+E*s,a[6]=y*u+L*s,a[7]=b*u+V*s,a[8]=T*u-m*s,a[9]=E*u-_*s,a[10]=L*u-y*s,a[11]=V*u-b*s,a},M.b8=function(){const a=new Float32Array(16);return _a(a),a},M.b9=function(){const a=new Float64Array(16);return _a(a),a},M.bA=function(a,t){const r=me(a,360),s=me(t,360),u=s-r,m=s>r?u-360:u+360;return Math.abs(u)<Math.abs(m)?u:m},M.bB=function(a){return a[0]=0,a[1]=0,a[2]=0,a},M.bC=function(a,t,r,s){const u=Math.sqrt(a*a+t*t),m=Math.sqrt(r*r+s*s);a/=u,t/=u,r/=m,s/=m;const _=Math.acos(a*r+t*s);return-t*r+a*s>0?_:-_},M.bD=function(a,t){const r=me(a,2*Math.PI),s=me(t,2*Math.PI);return Math.min(Math.abs(r-s),Math.abs(r-s+2*Math.PI),Math.abs(r-s-2*Math.PI))},M.bE=function(){const a={},t=be.$version;for(const r in be.$root){const s=be.$root[r];if(s.required){let u=null;u=r==="version"?t:s.type==="array"?[]:{},u!=null&&(a[r]=u)}}return a},M.bF=Lu,M.bG=se,M.bH=function a(t,r){if(Array.isArray(t)){if(!Array.isArray(r)||t.length!==r.length)return!1;for(let s=0;s<t.length;s++)if(!a(t[s],r[s]))return!1;return!0}if(typeof t=="object"&&t!==null&&r!==null){if(typeof r!="object"||Object.keys(t).length!==Object.keys(r).length)return!1;for(const s in t)if(!a(t[s],r[s]))return!1;return!0}return t===r},M.bI=function(a){a=a.slice();const t=Object.create(null);for(let r=0;r<a.length;r++)t[a[r].id]=a[r];for(let r=0;r<a.length;r++)"ref"in a[r]&&(a[r]=Mi(a[r],t[a[r].ref]));return a},M.bJ=function(a,t){if(a.type==="custom")return new wg(a,t);switch(a.type){case"background":return new Jh(a,t);case"circle":return new Pp(a,t);case"color-relief":return new hg(a,t);case"fill":return new Hu(a,t);case"fill-extrusion":return new qu(a,t);case"heatmap":return new Dp(a,t);case"hillshade":return new pl(a,t);case"line":return new Zd(a,t);case"raster":return new Qa(a,t);case"symbol":return new Wu(a,t)}},M.bK=a=>a.type==="raster",M.bL=ya,M.bM=function(a,t){if(!a)return[{command:"setStyle",args:[t]}];let r=[];try{if(!gt(a.version,t.version))return[{command:"setStyle",args:[t]}];gt(a.center,t.center)||r.push({command:"setCenter",args:[t.center]}),gt(a.state,t.state)||r.push({command:"setGlobalState",args:[t.state]}),gt(a.centerAltitude,t.centerAltitude)||r.push({command:"setCenterAltitude",args:[t.centerAltitude]}),gt(a.zoom,t.zoom)||r.push({command:"setZoom",args:[t.zoom]}),gt(a.bearing,t.bearing)||r.push({command:"setBearing",args:[t.bearing]}),gt(a.pitch,t.pitch)||r.push({command:"setPitch",args:[t.pitch]}),gt(a.roll,t.roll)||r.push({command:"setRoll",args:[t.roll]}),gt(a.sprite,t.sprite)||r.push({command:"setSprite",args:[t.sprite]}),gt(a.glyphs,t.glyphs)||r.push({command:"setGlyphs",args:[t.glyphs]}),gt(a.transition,t.transition)||r.push({command:"setTransition",args:[t.transition]}),gt(a.light,t.light)||r.push({command:"setLight",args:[t.light]}),gt(a.terrain,t.terrain)||r.push({command:"setTerrain",args:[t.terrain]}),gt(a.sky,t.sky)||r.push({command:"setSky",args:[t.sky]}),gt(a.projection,t.projection)||r.push({command:"setProjection",args:[t.projection]});const s={},u=[];(function(_,y,b,T){let E;for(E in y=y||{},_=_||{})Object.prototype.hasOwnProperty.call(_,E)&&(Object.prototype.hasOwnProperty.call(y,E)||or(E,b,T));for(E in y)Object.prototype.hasOwnProperty.call(y,E)&&(Object.prototype.hasOwnProperty.call(_,E)?gt(_[E],y[E])||(_[E].type==="geojson"&&y[E].type==="geojson"&&Hr(_,y,E)?Yt(b,{command:"setGeoJSONSourceData",args:[E,y[E].data]}):Rr(E,y,b,T)):ci(E,y,b))})(a.sources,t.sources,u,s);const m=[];a.layers&&a.layers.forEach((_=>{"source"in _&&s[_.source]?r.push({command:"removeLayer",args:[_.id]}):m.push(_)})),r=r.concat(u),(function(_,y,b){y=y||[];const T=(_=_||[]).map(qi),E=y.map(qi),L=_.reduce(lr,{}),V=y.reduce(lr,{}),$=T.slice(),N=Object.create(null);let G,Q,ee,_e,ne;for(let ce=0,Te=0;ce<T.length;ce++)G=T[ce],Object.prototype.hasOwnProperty.call(V,G)?Te++:(Yt(b,{command:"removeLayer",args:[G]}),$.splice($.indexOf(G,Te),1));for(let ce=0,Te=0;ce<E.length;ce++)G=E[E.length-1-ce],$[$.length-1-ce]!==G&&(Object.prototype.hasOwnProperty.call(L,G)?(Yt(b,{command:"removeLayer",args:[G]}),$.splice($.lastIndexOf(G,$.length-Te),1)):Te++,_e=$[$.length-ce],Yt(b,{command:"addLayer",args:[V[G],_e]}),$.splice($.length-ce,0,G),N[G]=!0);for(let ce=0;ce<E.length;ce++)if(G=E[ce],Q=L[G],ee=V[G],!N[G]&&!gt(Q,ee))if(gt(Q.source,ee.source)&&gt(Q["source-layer"],ee["source-layer"])&&gt(Q.type,ee.type)){for(ne in sr(Q.layout,ee.layout,b,G,null,"setLayoutProperty"),sr(Q.paint,ee.paint,b,G,null,"setPaintProperty"),gt(Q.filter,ee.filter)||Yt(b,{command:"setFilter",args:[G,ee.filter]}),gt(Q.minzoom,ee.minzoom)&&gt(Q.maxzoom,ee.maxzoom)||Yt(b,{command:"setLayerZoomRange",args:[G,ee.minzoom,ee.maxzoom]}),Q)Object.prototype.hasOwnProperty.call(Q,ne)&&ne!=="layout"&&ne!=="paint"&&ne!=="filter"&&ne!=="metadata"&&ne!=="minzoom"&&ne!=="maxzoom"&&(ne.indexOf("paint.")===0?sr(Q[ne],ee[ne],b,G,ne.slice(6),"setPaintProperty"):gt(Q[ne],ee[ne])||Yt(b,{command:"setLayerProperty",args:[G,ne,ee[ne]]}));for(ne in ee)Object.prototype.hasOwnProperty.call(ee,ne)&&!Object.prototype.hasOwnProperty.call(Q,ne)&&ne!=="layout"&&ne!=="paint"&&ne!=="filter"&&ne!=="metadata"&&ne!=="minzoom"&&ne!=="maxzoom"&&(ne.indexOf("paint.")===0?sr(Q[ne],ee[ne],b,G,ne.slice(6),"setPaintProperty"):gt(Q[ne],ee[ne])||Yt(b,{command:"setLayerProperty",args:[G,ne,ee[ne]]}))}else Yt(b,{command:"removeLayer",args:[G]}),_e=$[$.lastIndexOf(G)+1],Yt(b,{command:"addLayer",args:[ee,_e]})})(m,t.layers,r)}catch(s){console.warn("Unable to compute style diff:",s),r=[{command:"setStyle",args:[t]}]}return r},M.bN=function(a){const t=[],r=a.id;return r===void 0&&t.push({message:`layers.${r}: missing required property "id"`}),a.render===void 0&&t.push({message:`layers.${r}: missing required method "render"`}),a.renderingMode&&a.renderingMode!=="2d"&&a.renderingMode!=="3d"&&t.push({message:`layers.${r}: property "renderingMode" must be either "2d" or "3d"`}),t},M.bO=bo,M.bP=es,M.bQ=class extends ea{constructor(a,t){super(a,t),this.current=0}set(a){this.current!==a&&(this.current=a,this.gl.uniform1i(this.location,a))}},M.bR=xr,M.bS=class extends ea{constructor(a,t){super(a,t),this.current=Qr}set(a){if(a[12]!==this.current[12]||a[0]!==this.current[0])return this.current=a,void this.gl.uniformMatrix4fv(this.location,!1,a);for(let t=1;t<16;t++)if(a[t]!==this.current[t]){this.current=a,this.gl.uniformMatrix4fv(this.location,!1,a);break}}},M.bT=hl,M.bU=class extends ea{constructor(a,t){super(a,t),this.current=[0,0,0]}set(a){a[0]===this.current[0]&&a[1]===this.current[1]&&a[2]===this.current[2]||(this.current=a,this.gl.uniform3f(this.location,a[0],a[1],a[2]))}},M.bV=class extends ea{constructor(a,t){super(a,t),this.current=[0,0]}set(a){a[0]===this.current[0]&&a[1]===this.current[1]||(this.current=a,this.gl.uniform2f(this.location,a[0],a[1]))}},M.bW=na,M.bX=function(a,t){var r=Math.sin(t),s=Math.cos(t);return a[0]=s,a[1]=r,a[2]=0,a[3]=-r,a[4]=s,a[5]=0,a[6]=0,a[7]=0,a[8]=1,a},M.bY=function(a,t,r){var s=t[0],u=t[1],m=t[2];return a[0]=s*r[0]+u*r[3]+m*r[6],a[1]=s*r[1]+u*r[4]+m*r[7],a[2]=s*r[2]+u*r[5]+m*r[8],a},M.bZ=function(a,t,r,s,u,m,_){var y=1/(t-r),b=1/(s-u),T=1/(m-_);return a[0]=-2*y,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=-2*b,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=2*T,a[11]=0,a[12]=(t+r)*y,a[13]=(u+s)*b,a[14]=(_+m)*T,a[15]=1,a},M.b_=class extends ea{constructor(a,t){super(a,t),this.current=new Array}set(a){if(a!=this.current){this.current=a;const t=new Float32Array(4*a.length);for(let r=0;r<a.length;r++)t[4*r]=a[r].r,t[4*r+1]=a[r].g,t[4*r+2]=a[r].b,t[4*r+3]=a[r].a;this.gl.uniform4fv(this.location,t)}}},M.ba=function(){return new Float64Array(16)},M.bb=function(a,t,r){const s=new Float64Array(4);return je(s,a,t-90,r),s},M.bc=function(a,t,r,s){var u,m,_,y,b,T=t[0],E=t[1],L=t[2],V=t[3],$=r[0],N=r[1],G=r[2],Q=r[3];return(m=T*$+E*N+L*G+V*Q)<0&&(m=-m,$=-$,N=-N,G=-G,Q=-Q),1-m>_i?(u=Math.acos(m),_=Math.sin(u),y=Math.sin((1-s)*u)/_,b=Math.sin(s*u)/_):(y=1-s,b=s),a[0]=y*T+b*$,a[1]=y*E+b*N,a[2]=y*L+b*G,a[3]=y*V+b*Q,a},M.bd=function(a){const t=new Float64Array(9);var r,s,u,m,_,y,b,T,E,L,V,$,N,G,Q,ee,_e,ne;L=(u=(s=a)[0])*(b=u+u),V=(m=s[1])*b,N=(_=s[2])*b,G=_*(T=m+m),ee=(y=s[3])*b,_e=y*T,ne=y*(E=_+_),(r=t)[0]=1-($=m*T)-(Q=_*E),r[3]=V-ne,r[6]=N+_e,r[1]=V+ne,r[4]=1-L-Q,r[7]=G-ee,r[2]=N-_e,r[5]=G+ee,r[8]=1-L-$;const ce=Na(-Math.asin(Et(t[2],-1,1)));let Te,Le;return Math.hypot(t[5],t[8])<.001?(Te=0,Le=-Na(Math.atan2(t[3],t[4]))):(Te=Na(t[5]===0&&t[8]===0?0:Math.atan2(t[5],t[8])),Le=Na(t[1]===0&&t[0]===0?0:Math.atan2(t[1],t[0]))),{roll:Te,pitch:ce+90,bearing:Le}},M.be=function(a,t){return a.roll==t.roll&&a.pitch==t.pitch&&a.bearing==t.bearing},M.bf=It,M.bg=yn,M.bh=ta,M.bi=Wa,M.bj=Zu,M.bk=Ue,M.bl=at,M.bm=qr,M.bn=function(a,t,r,s,u){return Ue(s,u,Et((a-t)/(r-t),0,1))},M.bo=me,M.bp=function(){return new Float64Array(3)},M.bq=function(a,t,r,s){return a[0]=t[0]+r[0]*s,a[1]=t[1]+r[1]*s,a[2]=t[2]+r[2]*s,a},M.br=je,M.bs=function(a,t,r){var s=r[0],u=r[1],m=r[2],_=r[3],y=t[0],b=t[1],T=t[2],E=u*T-m*b,L=m*y-s*T,V=s*b-u*y;return a[0]=y+_*(E+=E)+u*(V+=V)-m*(L+=L),a[1]=b+_*L+m*E-s*V,a[2]=T+_*V+s*L-u*E,a},M.bt=function(a,t,r){const s=(u=[a[0],a[1],a[2],t[0],t[1],t[2],r[0],r[1],r[2]])[0]*((E=u[8])*(_=u[4])-(y=u[5])*(T=u[7]))+u[1]*(-E*(m=u[3])+y*(b=u[6]))+u[2]*(T*m-_*b);var u,m,_,y,b,T,E;if(s===0)return null;const L=oa([],[t[0],t[1],t[2]],[r[0],r[1],r[2]]),V=oa([],[r[0],r[1],r[2]],[a[0],a[1],a[2]]),$=oa([],[a[0],a[1],a[2]],[t[0],t[1],t[2]]),N=ln([],L,-a[3]);return va(N,N,ln([],V,-t[3])),va(N,N,ln([],$,-r[3])),ln(N,N,1/s),N},M.bu=ed,M.bv=function(){return new Float64Array(4)},M.bw=function(a,t,r,s){var u=[],m=[];return u[0]=t[0]-r[0],u[1]=t[1]-r[1],u[2]=t[2]-r[2],m[0]=u[0]*Math.cos(s)-u[1]*Math.sin(s),m[1]=u[0]*Math.sin(s)+u[1]*Math.cos(s),m[2]=u[2],a[0]=m[0]+r[0],a[1]=m[1]+r[1],a[2]=m[2]+r[2],a},M.bx=function(a,t,r,s){var u=[],m=[];return u[0]=t[0]-r[0],u[1]=t[1]-r[1],u[2]=t[2]-r[2],m[0]=u[0],m[1]=u[1]*Math.cos(s)-u[2]*Math.sin(s),m[2]=u[1]*Math.sin(s)+u[2]*Math.cos(s),a[0]=m[0]+r[0],a[1]=m[1]+r[1],a[2]=m[2]+r[2],a},M.by=function(a,t,r,s){var u=[],m=[];return u[0]=t[0]-r[0],u[1]=t[1]-r[1],u[2]=t[2]-r[2],m[0]=u[2]*Math.sin(s)+u[0]*Math.cos(s),m[1]=u[1],m[2]=u[2]*Math.cos(s)-u[0]*Math.sin(s),a[0]=m[0]+r[0],a[1]=m[1]+r[1],a[2]=m[2]+r[2],a},M.bz=function(a,t,r){var s=Math.sin(r),u=Math.cos(r),m=t[0],_=t[1],y=t[2],b=t[3],T=t[8],E=t[9],L=t[10],V=t[11];return t!==a&&(a[4]=t[4],a[5]=t[5],a[6]=t[6],a[7]=t[7],a[12]=t[12],a[13]=t[13],a[14]=t[14],a[15]=t[15]),a[0]=m*u-T*s,a[1]=_*u-E*s,a[2]=y*u-L*s,a[3]=b*u-V*s,a[8]=m*s+T*u,a[9]=_*s+E*u,a[10]=y*s+L*u,a[11]=b*s+V*u,a},M.c=pe,M.c0=class extends Bu{},M.c1=Up,M.c2=class extends Yl{},M.c3=Zo,M.c4=function(a){return a<=1?1:Math.pow(2,Math.ceil(Math.log(a)/Math.LN2))},M.c5=kp,M.c6=function(a,t,r){var s=t[0],u=t[1],m=t[2],_=r[3]*s+r[7]*u+r[11]*m+r[15];return a[0]=(r[0]*s+r[4]*u+r[8]*m+r[12])/(_=_||1),a[1]=(r[1]*s+r[5]*u+r[9]*m+r[13])/_,a[2]=(r[2]*s+r[6]*u+r[10]*m+r[14])/_,a},M.c7=class extends ll{},M.c8=class extends v{},M.c9=function(a,t){return a[0]===t[0]&&a[1]===t[1]&&a[2]===t[2]&&a[3]===t[3]&&a[4]===t[4]&&a[5]===t[5]&&a[6]===t[6]&&a[7]===t[7]&&a[8]===t[8]&&a[9]===t[9]&&a[10]===t[10]&&a[11]===t[11]&&a[12]===t[12]&&a[13]===t[13]&&a[14]===t[14]&&a[15]===t[15]},M.cA=function(a,t){U.REGISTERED_PROTOCOLS[a]=t},M.cB=function(a){delete U.REGISTERED_PROTOCOLS[a]},M.cC=function(a,t){const r={};for(let u=0;u<a.length;u++){const m=t&&t[a[u].id]||so(a[u]);t&&(t[a[u].id]=m);let _=r[m];_||(_=r[m]=[]),_.push(a[u])}const s=[];for(const u in r)s.push(r[u]);return s},M.cD=st,M.cE=hf,M.cF=ip,M.cG=Qp,M.cH=function(a){a.bucket.createArrays(),a.bucket.tilePixelRatio=wt/(512*a.bucket.overscaling),a.bucket.compareText={},a.bucket.iconsNeedLinear=!1;const t=a.bucket.layers[0],r=t.layout,s=t._unevaluatedLayout._values,u={layoutIconSize:s["icon-size"].possiblyEvaluate(new bi(a.bucket.zoom+1),a.canonical),layoutTextSize:s["text-size"].possiblyEvaluate(new bi(a.bucket.zoom+1),a.canonical),textMaxSize:s["text-size"].possiblyEvaluate(new bi(18))};if(a.bucket.textSizeData.kind==="composite"){const{minZoom:T,maxZoom:E}=a.bucket.textSizeData;u.compositeTextSizes=[s["text-size"].possiblyEvaluate(new bi(T),a.canonical),s["text-size"].possiblyEvaluate(new bi(E),a.canonical)]}if(a.bucket.iconSizeData.kind==="composite"){const{minZoom:T,maxZoom:E}=a.bucket.iconSizeData;u.compositeIconSizes=[s["icon-size"].possiblyEvaluate(new bi(T),a.canonical),s["icon-size"].possiblyEvaluate(new bi(E),a.canonical)]}const m=r.get("text-line-height")*gr,_=r.get("text-rotation-alignment")!=="viewport"&&r.get("symbol-placement")!=="point",y=r.get("text-keep-upright"),b=r.get("text-size");for(const T of a.bucket.features){const E=r.get("text-font").evaluate(T,{},a.canonical).join(","),L=b.evaluate(T,{},a.canonical),V=u.layoutTextSize.evaluate(T,{},a.canonical),$=u.layoutIconSize.evaluate(T,{},a.canonical),N={horizontal:{},vertical:void 0},G=T.text;let Q,ee=[0,0];if(G){const ce=G.toString(),Te=r.get("text-letter-spacing").evaluate(T,{},a.canonical)*gr,Le=Ah(ce)?Te:0,Ge=r.get("text-anchor").evaluate(T,{},a.canonical),rt=gf(t,T,a.canonical);if(!rt){const et=r.get("text-radial-offset").evaluate(T,{},a.canonical);ee=et?lp(Ge,[et*gr,wn]):r.get("text-offset").evaluate(T,{},a.canonical).map((it=>it*gr))}let We=_?"center":r.get("text-justify").evaluate(T,{},a.canonical);const tt=r.get("symbol-placement")==="point"?r.get("text-max-width").evaluate(T,{},a.canonical)*gr:1/0,mt=()=>{a.bucket.allowVerticalPlacement&&vn(ce)&&(N.vertical=Xh(G,a.glyphMap,a.glyphPositions,a.imagePositions,E,tt,m,Ge,"left",Le,ee,M.ao.vertical,!0,V,L))};if(!_&&rt){const et=new Set;if(We==="auto")for(let Ve=0;Ve<rt.values.length;Ve+=2)et.add(cp(rt.values[Ve]));else et.add(We);let it=!1;for(const Ve of et)if(!N.horizontal[Ve])if(it)N.horizontal[Ve]=N.horizontal[0];else{const bt=Xh(G,a.glyphMap,a.glyphPositions,a.imagePositions,E,tt,m,"center",Ve,Le,ee,M.ao.horizontal,!1,V,L);bt&&(N.horizontal[Ve]=bt,it=bt.positionedLines.length===1)}mt()}else{We==="auto"&&(We=cp(Ge));const et=Xh(G,a.glyphMap,a.glyphPositions,a.imagePositions,E,tt,m,Ge,We,Le,ee,M.ao.horizontal,!1,V,L);et&&(N.horizontal[We]=et),mt(),vn(ce)&&_&&y&&(N.vertical=Xh(G,a.glyphMap,a.glyphPositions,a.imagePositions,E,tt,m,Ge,We,Le,ee,M.ao.vertical,!1,V,L))}}let _e=!1;if(T.icon&&T.icon.name){const ce=a.imageMap[T.icon.name];ce&&(Q=Ku(a.imagePositions[T.icon.name],r.get("icon-offset").evaluate(T,{},a.canonical),r.get("icon-anchor").evaluate(T,{},a.canonical)),_e=!!ce.sdf,a.bucket.sdfIcons===void 0?a.bucket.sdfIcons=_e:a.bucket.sdfIcons!==_e&&ji("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(ce.pixelRatio!==a.bucket.pixelRatio||r.get("icon-rotate").constantOr(1)!==0)&&(a.bucket.iconsNeedLinear=!0))}const ne=Kn(N.horizontal)||N.vertical;a.bucket.iconsInText=!!ne&&ne.iconsInText,(ne||Q)&&bm(a.bucket,T,N,Q,a.imageMap,u,V,$,ee,_e,a.canonical,a.subdivisionGranularity)}a.showCollisionBoxes&&a.bucket.generateCollisionDebugBuffers()},M.cI=Nh,M.cJ=Hi,M.cK=Wc,M.cL=$p,M.cM=ja,M.cN=class{constructor(a){this._marks={start:[a.url,"start"].join("#"),end:[a.url,"end"].join("#"),measure:a.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let a=performance.getEntriesByName(this._marks.measure);return a.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),a=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),a}},M.cO=function(a,t,r,s,u){return d(this,void 0,void 0,(function*(){if(dr())try{return yield zn(a,t,r,s,u)}catch{}return(function(m,_,y,b,T){const E=m.width,L=m.height;rs&&eo||(rs=new OffscreenCanvas(E,L),eo=rs.getContext("2d",{willReadFrequently:!0})),rs.width=E,rs.height=L,eo.drawImage(m,0,0,E,L);const V=eo.getImageData(_,y,b,T);return eo.clearRect(0,0,E,L),V.data})(a,t,r,s,u)}))},M.cP=Fu,M.cQ=ke,M.cR=Vp,M.cS=Xc,M.cT=Dc,M.cU=function(a,t){const r=new Map;if(a!=null)if(a.type==="Feature")r.set(Nr(a,t),a);else for(const s of a.features)r.set(Nr(s,t),s);return r},M.cV=function(a,t){if(a==null)return!0;if(a.type==="Feature")return Nr(a,t)!=null;if(a.type==="FeatureCollection"){const r=new Set;for(const s of a.features){const u=Nr(s,t);if(u==null||r.has(u))return!1;r.add(u)}return!0}return!1},M.cW=function(a,t,r){var s,u,m,_;if(t.removeAll&&a.clear(),t.remove)for(const y of t.remove)a.delete(y);if(t.add)for(const y of t.add){const b=Nr(y,r);b!=null&&a.set(b,y)}if(t.update)for(const y of t.update){let b=a.get(y.id);if(b==null)continue;const T=!y.removeAllProperties&&(((s=y.removeProperties)===null||s===void 0?void 0:s.length)>0||((u=y.addOrUpdateProperties)===null||u===void 0?void 0:u.length)>0);if((y.newGeometry||y.removeAllProperties||T)&&(b=Object.assign({},b),a.set(y.id,b),T&&(b.properties=Object.assign({},b.properties))),y.newGeometry&&(b.geometry=y.newGeometry),y.removeAllProperties)b.properties={};else if(((m=y.removeProperties)===null||m===void 0?void 0:m.length)>0)for(const E of y.removeProperties)Object.prototype.hasOwnProperty.call(b.properties,E)&&delete b.properties[E];if(((_=y.addOrUpdateProperties)===null||_===void 0?void 0:_.length)>0)for(const{key:E,value:L}of y.addOrUpdateProperties)b.properties[E]=L}},M.cX=Nn,M.ca=function(a,t){var r=a[0],s=a[1],u=a[2],m=a[3],_=a[4],y=a[5],b=a[6],T=a[7],E=a[8],L=a[9],V=a[10],$=a[11],N=a[12],G=a[13],Q=a[14],ee=a[15],_e=t[0],ne=t[1],ce=t[2],Te=t[3],Le=t[4],Ge=t[5],rt=t[6],We=t[7],tt=t[8],mt=t[9],et=t[10],it=t[11],Ve=t[12],bt=t[13],Pt=t[14],vt=t[15];return Math.abs(r-_e)<=_i*Math.max(1,Math.abs(r),Math.abs(_e))&&Math.abs(s-ne)<=_i*Math.max(1,Math.abs(s),Math.abs(ne))&&Math.abs(u-ce)<=_i*Math.max(1,Math.abs(u),Math.abs(ce))&&Math.abs(m-Te)<=_i*Math.max(1,Math.abs(m),Math.abs(Te))&&Math.abs(_-Le)<=_i*Math.max(1,Math.abs(_),Math.abs(Le))&&Math.abs(y-Ge)<=_i*Math.max(1,Math.abs(y),Math.abs(Ge))&&Math.abs(b-rt)<=_i*Math.max(1,Math.abs(b),Math.abs(rt))&&Math.abs(T-We)<=_i*Math.max(1,Math.abs(T),Math.abs(We))&&Math.abs(E-tt)<=_i*Math.max(1,Math.abs(E),Math.abs(tt))&&Math.abs(L-mt)<=_i*Math.max(1,Math.abs(L),Math.abs(mt))&&Math.abs(V-et)<=_i*Math.max(1,Math.abs(V),Math.abs(et))&&Math.abs($-it)<=_i*Math.max(1,Math.abs($),Math.abs(it))&&Math.abs(N-Ve)<=_i*Math.max(1,Math.abs(N),Math.abs(Ve))&&Math.abs(G-bt)<=_i*Math.max(1,Math.abs(G),Math.abs(bt))&&Math.abs(Q-Pt)<=_i*Math.max(1,Math.abs(Q),Math.abs(Pt))&&Math.abs(ee-vt)<=_i*Math.max(1,Math.abs(ee),Math.abs(vt))},M.cb=function(a,t){return a[0]=t[0],a[1]=t[1],a[2]=t[2],a[3]=t[3],a[4]=t[4],a[5]=t[5],a[6]=t[6],a[7]=t[7],a[8]=t[8],a[9]=t[9],a[10]=t[10],a[11]=t[11],a[12]=t[12],a[13]=t[13],a[14]=t[14],a[15]=t[15],a},M.cc=a=>a.type==="symbol",M.cd=a=>a.type==="circle",M.ce=a=>a.type==="heatmap",M.cf=a=>a.type==="line",M.cg=a=>a.type==="fill",M.ch=a=>a.type==="fill-extrusion",M.ci=a=>a.type==="hillshade",M.cj=a=>a.type==="color-relief",M.ck=a=>a.type==="background",M.cl=a=>a.type==="custom",M.cm=ft,M.cn=function(a,t,r){const s=zt(t.x-r.x,t.y-r.y),u=zt(a.x-r.x,a.y-r.y);var m,_;return Na(Math.atan2(s[0]*u[1]-s[1]*u[0],(m=s)[0]*(_=u)[0]+m[1]*_[1]))},M.co=Dt,M.cp=function(a,t){return wo[t]&&(a instanceof MouseEvent||a instanceof WheelEvent)},M.cq=function(a,t){return pc[t]&&"touches"in a},M.cr=function(a){return pc[a]||wo[a]},M.cs=function(a,t,r){var s=t[0],u=t[1];return a[0]=r[0]*s+r[4]*u+r[12],a[1]=r[1]*s+r[5]*u+r[13],a},M.ct=function(a,t){const{x:r,y:s}=id.fromLngLat(t);return!(a<0||a>25||s<0||s>=1||r<0||r>=1)},M.cu=function(a,t){return a[0]=t[0],a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=t[1],a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=t[2],a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a},M.cv=class extends Ai{},M.cw=Sm,M.cy=function(a){return a.message===Co},M.cz=re,M.d=Me,M.e=Oi,M.f=a=>d(void 0,void 0,void 0,(function*(){if(a.byteLength===0)return createImageBitmap(new ImageData(1,1));const t=new Blob([new Uint8Array(a)],{type:"image/png"});try{return createImageBitmap(t)}catch(r){throw new Error(`Could not load image because of ${r.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`)}})),M.g=Z,M.h=a=>new Promise(((t,r)=>{const s=new Image;s.onload=()=>{t(s),URL.revokeObjectURL(s.src),s.onload=null,window.requestAnimationFrame((()=>{s.src=is}))},s.onerror=()=>r(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const u=new Blob([new Uint8Array(a)],{type:"image/png"});s.src=a.byteLength?URL.createObjectURL(u):is})),M.i=An,M.j=(a,t)=>de(Oi(a,{type:"json"}),t),M.k=Oe,M.l=Ze,M.m=de,M.n=(a,t)=>de(Oi(a,{type:"arrayBuffer"}),t),M.o=function(a){return new ja(a).readFields(Gd,[])},M.p=sm,M.q=Vu,M.r=Ui,M.s=Zr,M.t=Vc,M.u=$t,M.v=be,M.w=ji,M.x=zd,M.y=bs,M.z=Ea})),D("worker",["./shared"],(function(M){class d{constructor(U,Z){this.keyCache={},U&&this.replace(U,Z)}replace(U,Z){this._layerConfigs={},this._layers={},this.update(U,[],Z)}update(U,Z,Y){for(const se of U){this._layerConfigs[se.id]=se;const de=this._layers[se.id]=M.bJ(se,Y);de._featureFilter=M.aa(de.filter,Y),this.keyCache[se.id]&&delete this.keyCache[se.id]}for(const se of Z)delete this.keyCache[se],delete this._layerConfigs[se],delete this._layers[se];this.familiesBySource={};const re=M.cC(Object.values(this._layerConfigs),this.keyCache);for(const se of re){const de=se.map((pt=>this._layers[pt.id])),Me=de[0];if(Me.visibility==="none")continue;const ve=Me.source||"";let De=this.familiesBySource[ve];De||(De=this.familiesBySource[ve]={});const Ze=Me.sourceLayer||"_geojsonTileLayer";let Oe=De[Ze];Oe||(Oe=De[Ze]=[]),Oe.push(de)}}}class ye{constructor(U){const Z={},Y=[];for(const Me in U){const ve=U[Me],De=Z[Me]={};for(const Ze in ve){const Oe=ve[+Ze];if(!Oe||Oe.bitmap.width===0||Oe.bitmap.height===0)continue;const pt={x:0,y:0,w:Oe.bitmap.width+2,h:Oe.bitmap.height+2};Y.push(pt),De[Ze]={rect:pt,metrics:Oe.metrics}}}const{w:re,h:se}=M.p(Y),de=new M.q({width:re||1,height:se||1});for(const Me in U){const ve=U[Me];for(const De in ve){const Ze=ve[+De];if(!Ze||Ze.bitmap.width===0||Ze.bitmap.height===0)continue;const Oe=Z[Me][De].rect;M.q.copy(Ze.bitmap,de,{x:0,y:0},{x:Oe.x+1,y:Oe.y+1},Ze.bitmap)}}this.image=de,this.positions=Z}}M.cD("GlyphAtlas",ye);class ke{constructor(U){this.tileID=new M.Z(U.tileID.overscaledZ,U.tileID.wrap,U.tileID.canonical.z,U.tileID.canonical.x,U.tileID.canonical.y),this.uid=U.uid,this.zoom=U.zoom,this.pixelRatio=U.pixelRatio,this.tileSize=U.tileSize,this.source=U.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=U.showCollisionBoxes,this.collectResourceTiming=!!U.collectResourceTiming,this.returnDependencies=!!U.returnDependencies,this.promoteId=U.promoteId,this.inFlightDependencies=[]}parse(U,Z,Y,re,se){return M._(this,void 0,void 0,(function*(){this.status="parsing",this.data=U,this.collisionBoxArray=new M.a8;const de=new M.cE(Object.keys(U.layers).sort()),Me=new M.cF(this.tileID,this.promoteId);Me.bucketLayerIDs=[];const ve={},De={featureIndex:Me,iconDependencies:{},patternDependencies:{},glyphDependencies:{},dashDependencies:{},availableImages:Y,subdivisionGranularity:se},Ze=Z.familiesBySource[this.source];for(const Fe in Ze){const er=U.layers[Fe];if(!er)continue;er.version===1&&M.w(`Vector tile source "${this.source}" layer "${Fe}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const sa=de.encode(Fe),ka=[];for(let yi=0;yi<er.length;yi++){const Xe=er.feature(yi),Lt=Me.getId(Xe,Fe);ka.push({feature:Xe,id:Lt,index:yi,sourceLayerIndex:sa})}for(const yi of Ze[Fe]){const Xe=yi[0];Xe.source!==this.source&&M.w(`layer.source = ${Xe.source} does not equal this.source = ${this.source}`),Xe.isHidden(this.zoom,!0)||(ot(yi,this.zoom,Y),(ve[Xe.id]=Xe.createBucket({index:Me.bucketLayerIDs.length,layers:yi,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:sa,sourceID:this.source})).populate(ka,De,this.tileID.canonical),Me.bucketLayerIDs.push(yi.map((Lt=>Lt.id))))}}const Oe=M.bO(De.glyphDependencies,(Fe=>Object.keys(Fe).map(Number)));this.inFlightDependencies.forEach((Fe=>Fe?.abort())),this.inFlightDependencies=[];let pt=Promise.resolve({});if(Object.keys(Oe).length){const Fe=new AbortController;this.inFlightDependencies.push(Fe),pt=re.sendAsync({type:"GG",data:{stacks:Oe,source:this.source,tileID:this.tileID,type:"glyphs"}},Fe)}const be=Object.keys(De.iconDependencies);let qt=Promise.resolve({});if(be.length){const Fe=new AbortController;this.inFlightDependencies.push(Fe),qt=re.sendAsync({type:"GI",data:{icons:be,source:this.source,tileID:this.tileID,type:"icons"}},Fe)}const Mi=Object.keys(De.patternDependencies);let gt=Promise.resolve({});if(Mi.length){const Fe=new AbortController;this.inFlightDependencies.push(Fe),gt=re.sendAsync({type:"GI",data:{icons:Mi,source:this.source,tileID:this.tileID,type:"patterns"}},Fe)}const Yt=De.dashDependencies;let ci=Promise.resolve({});if(Object.keys(Yt).length){const Fe=new AbortController;this.inFlightDependencies.push(Fe),ci=re.sendAsync({type:"GDA",data:{dashes:Yt}},Fe)}const[or,Rr,Hr,sr]=yield Promise.all([pt,qt,gt,ci]),qi=new ye(or),lr=new M.cG(Rr,Hr);for(const Fe in ve){const er=ve[Fe];er instanceof M.a9?(ot(er.layers,this.zoom,Y),M.cH({bucket:er,glyphMap:or,glyphPositions:qi.positions,imageMap:Rr,imagePositions:lr.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical,subdivisionGranularity:De.subdivisionGranularity})):er.hasDependencies&&(er instanceof M.cI||er instanceof M.cJ||er instanceof M.cK)&&(ot(er.layers,this.zoom,Y),er.addFeatures(De,this.tileID.canonical,lr.patternPositions,sr))}return this.status="done",{buckets:Object.values(ve).filter((Fe=>!Fe.isEmpty())),featureIndex:Me,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:qi.image,imageAtlas:lr,dashPositions:sr,glyphMap:this.returnDependencies?or:null,iconMap:this.returnDependencies?Rr:null,glyphPositions:this.returnDependencies?qi.positions:null}}))}}function ot(pe,U,Z){const Y=new M.F(U);for(const re of pe)re.recalculate(Y,Z)}class Je{constructor(U,Z,Y){this.actor=U,this.layerIndex=Z,this.availableImages=Y,this.fetching={},this.loading={},this.loaded={}}loadVectorTile(U,Z){return M._(this,void 0,void 0,(function*(){const Y=yield M.n(U.request,Z);try{return{vectorTile:new M.cL(new M.cM(Y.data)),rawData:Y.data,cacheControl:Y.cacheControl,expires:Y.expires}}catch(re){const se=new Uint8Array(Y.data);let de=`Unable to parse the tile at ${U.request.url}, `;throw de+=se[0]===31&&se[1]===139?"please make sure the data is not gzipped and that you have configured the relevant header in the server":`got error: ${re.message}`,new Error(de)}}))}loadTile(U){return M._(this,void 0,void 0,(function*(){const Z=U.uid,Y=!!(U&&U.request&&U.request.collectResourceTiming)&&new M.cN(U.request),re=new ke(U);this.loading[Z]=re;const se=new AbortController;re.abort=se;try{const de=yield this.loadVectorTile(U,se);if(delete this.loading[Z],!de)return null;const Me=de.rawData,ve={};de.expires&&(ve.expires=de.expires),de.cacheControl&&(ve.cacheControl=de.cacheControl);const De={};if(Y){const Oe=Y.finish();Oe&&(De.resourceTiming=JSON.parse(JSON.stringify(Oe)))}re.vectorTile=de.vectorTile;const Ze=re.parse(de.vectorTile,this.layerIndex,this.availableImages,this.actor,U.subdivisionGranularity);this.loaded[Z]=re,this.fetching[Z]={rawTileData:Me,cacheControl:ve,resourceTiming:De};try{const Oe=yield Ze;return M.e({rawTileData:Me.slice(0)},Oe,ve,De)}finally{delete this.fetching[Z]}}catch(de){throw delete this.loading[Z],re.status="done",this.loaded[Z]=re,de}}))}reloadTile(U){return M._(this,void 0,void 0,(function*(){const Z=U.uid;if(!this.loaded||!this.loaded[Z])throw new Error("Should not be trying to reload a tile that was never loaded or has been removed");const Y=this.loaded[Z];if(Y.showCollisionBoxes=U.showCollisionBoxes,Y.status==="parsing"){const re=yield Y.parse(Y.vectorTile,this.layerIndex,this.availableImages,this.actor,U.subdivisionGranularity);let se;if(this.fetching[Z]){const{rawTileData:de,cacheControl:Me,resourceTiming:ve}=this.fetching[Z];delete this.fetching[Z],se=M.e({rawTileData:de.slice(0)},re,Me,ve)}else se=re;return se}if(Y.status==="done"&&Y.vectorTile)return Y.parse(Y.vectorTile,this.layerIndex,this.availableImages,this.actor,U.subdivisionGranularity)}))}abortTile(U){return M._(this,void 0,void 0,(function*(){const Z=this.loading,Y=U.uid;Z&&Z[Y]&&Z[Y].abort&&(Z[Y].abort.abort(),delete Z[Y])}))}removeTile(U){return M._(this,void 0,void 0,(function*(){this.loaded&&this.loaded[U.uid]&&delete this.loaded[U.uid]}))}}class xt{constructor(){this.loaded={}}loadTile(U){return M._(this,void 0,void 0,(function*(){const{uid:Z,encoding:Y,rawImageData:re,redFactor:se,greenFactor:de,blueFactor:Me,baseShift:ve}=U,De=re.width+2,Ze=re.height+2,Oe=M.b(re)?new M.R({width:De,height:Ze},yield M.cO(re,-1,-1,De,Ze)):re,pt=new M.cP(Z,Oe,Y,se,de,Me,ve);return this.loaded=this.loaded||{},this.loaded[Z]=pt,pt}))}removeTile(U){const Z=this.loaded,Y=U.uid;Z&&Z[Y]&&delete Z[Y]}}var Ot,dt,Ce=(function(){if(dt)return Ot;function pe(Z,Y){if(Z.length!==0){U(Z[0],Y);for(var re=1;re<Z.length;re++)U(Z[re],!Y)}}function U(Z,Y){for(var re=0,se=0,de=0,Me=Z.length,ve=Me-1;de<Me;ve=de++){var De=(Z[de][0]-Z[ve][0])*(Z[ve][1]+Z[de][1]),Ze=re+De;se+=Math.abs(re)>=Math.abs(De)?re-Ze+De:De-Ze+re,re=Ze}re+se>=0!=!!Y&&Z.reverse()}return dt=1,Ot=function Z(Y,re){var se,de=Y&&Y.type;if(de==="FeatureCollection")for(se=0;se<Y.features.length;se++)Z(Y.features[se],re);else if(de==="GeometryCollection")for(se=0;se<Y.geometries.length;se++)Z(Y.geometries[se],re);else if(de==="Feature")Z(Y.geometry,re);else if(de==="Polygon")pe(Y.coordinates,re);else if(de==="MultiPolygon")for(se=0;se<Y.coordinates.length;se++)pe(Y.coordinates[se],re);return Y}})(),aa=M.cQ(Ce);class dr extends M.cS{constructor(U,Z){super(new M.cM,0,Z,[],[]),this.feature=U,this.type=U.type,this.properties=U.tags?U.tags:{},"id"in U&&(typeof U.id=="string"?this.id=parseInt(U.id,10):typeof U.id!="number"||isNaN(U.id)||(this.id=U.id))}loadGeometry(){const U=[],Z=this.feature.type===1?[this.feature.geometry]:this.feature.geometry;for(const Y of Z){const re=[];for(const se of Y)re.push(new M.P(se[0],se[1]));U.push(re)}return U}}class _i extends M.cR{constructor(U,Z){super(new M.cM),this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.version=Z?Z.version:1,this.extent=Z?Z.extent:4096,this.length=U.length,this.features=U}feature(U){return new dr(this.features[U],this.extent)}}function oi(pe,U){U.writeVarintField(15,pe.version||1),U.writeStringField(1,pe.name||""),U.writeVarintField(5,pe.extent||4096);const Z={keys:[],values:[],keycache:{},valuecache:{}};for(let se=0;se<pe.length;se++)Z.feature=pe.feature(se),U.writeMessage(2,na,Z);const Y=Z.keys;for(const se of Y)U.writeStringField(3,se);const re=Z.values;for(const se of re)U.writeMessage(4,va,se)}function na(pe,U){if(!pe.feature)return;const Z=pe.feature;Z.id!==void 0&&U.writeVarintField(1,Z.id),U.writeMessage(2,_a,pe),U.writeVarintField(3,Z.type),U.writeMessage(4,Mr,Z)}function _a(pe,U){for(const Z in pe.feature?.properties){let Y=pe.feature.properties[Z],re=pe.keycache[Z];if(Y===null)continue;re===void 0&&(pe.keys.push(Z),re=pe.keys.length-1,pe.keycache[Z]=re),U.writeVarint(re),typeof Y!="string"&&typeof Y!="boolean"&&typeof Y!="number"&&(Y=JSON.stringify(Y));const se=typeof Y+":"+Y;let de=pe.valuecache[se];de===void 0&&(pe.values.push(Y),de=pe.values.length-1,pe.valuecache[se]=de),U.writeVarint(de)}}function ki(pe,U){return(U<<3)+(7&pe)}function ii(pe){return pe<<1^pe>>31}function Mr(pe,U){const Z=pe.loadGeometry(),Y=pe.type;let re=0,se=0;for(const de of Z){let Me=1;Y===1&&(Me=de.length),U.writeVarint(ki(1,Me));const ve=Y===3?de.length-1:de.length;for(let De=0;De<ve;De++){De===1&&Y!==1&&U.writeVarint(ki(2,ve-1));const Ze=de[De].x-re,Oe=de[De].y-se;U.writeVarint(ii(Ze)),U.writeVarint(ii(Oe)),re+=Ze,se+=Oe}pe.type===3&&U.writeVarint(ki(7,1))}}function va(pe,U){const Z=typeof pe;Z==="string"?U.writeStringField(1,pe):Z==="boolean"?U.writeBooleanField(7,pe):Z==="number"&&(pe%1!=0?U.writeDoubleField(3,pe):pe<0?U.writeSVarintField(6,pe):U.writeVarintField(5,pe))}const ln={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:pe=>pe},oa=Math.fround||(Gi=new Float32Array(1),pe=>(Gi[0]=+pe,Gi[0]));var Gi;class Jn{constructor(U){this.options=Object.assign(Object.create(ln),U),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(U){const{log:Z,minZoom:Y,maxZoom:re}=this.options;Z&&console.time("total time");const se=`prepare ${U.length} points`;Z&&console.time(se),this.points=U;const de=[];for(let ve=0;ve<U.length;ve++){const De=U[ve];if(!De.geometry)continue;const[Ze,Oe]=De.geometry.coordinates,pt=oa(je(Ze)),be=oa(nt(Oe));de.push(pt,be,1/0,ve,-1,1),this.options.reduce&&de.push(0)}let Me=this.trees[re+1]=this._createTree(de);Z&&console.timeEnd(se);for(let ve=re;ve>=Y;ve--){const De=+Date.now();Me=this.trees[ve]=this._createTree(this._cluster(Me,ve)),Z&&console.log("z%d: %d clusters in %dms",ve,Me.numItems,+Date.now()-De)}return Z&&console.timeEnd("total time"),this}getClusters(U,Z){let Y=((U[0]+180)%360+360)%360-180;const re=Math.max(-90,Math.min(90,U[1]));let se=U[2]===180?180:((U[2]+180)%360+360)%360-180;const de=Math.max(-90,Math.min(90,U[3]));if(U[2]-U[0]>=360)Y=-180,se=180;else if(Y>se){const Oe=this.getClusters([Y,re,180,de],Z),pt=this.getClusters([-180,re,se,de],Z);return Oe.concat(pt)}const Me=this.trees[this._limitZoom(Z)],ve=Me.range(je(Y),nt(de),je(se),nt(re)),De=Me.data,Ze=[];for(const Oe of ve){const pt=this.stride*Oe;Ze.push(De[pt+5]>1?Pa(De,pt,this.clusterProps):this.points[De[pt+3]])}return Ze}getChildren(U){const Z=this._getOriginId(U),Y=this._getOriginZoom(U),re="No cluster with the specified id.",se=this.trees[Y];if(!se)throw new Error(re);const de=se.data;if(Z*this.stride>=de.length)throw new Error(re);const Me=this.options.radius/(this.options.extent*Math.pow(2,Y-1)),ve=se.within(de[Z*this.stride],de[Z*this.stride+1],Me),De=[];for(const Ze of ve){const Oe=Ze*this.stride;de[Oe+4]===U&&De.push(de[Oe+5]>1?Pa(de,Oe,this.clusterProps):this.points[de[Oe+3]])}if(De.length===0)throw new Error(re);return De}getLeaves(U,Z,Y){const re=[];return this._appendLeaves(re,U,Z=Z||10,Y=Y||0,0),re}getTile(U,Z,Y){const re=this.trees[this._limitZoom(U)],se=Math.pow(2,U),{extent:de,radius:Me}=this.options,ve=Me/de,De=(Y-ve)/se,Ze=(Y+1+ve)/se,Oe={features:[]};return this._addTileFeatures(re.range((Z-ve)/se,De,(Z+1+ve)/se,Ze),re.data,Z,Y,se,Oe),Z===0&&this._addTileFeatures(re.range(1-ve/se,De,1,Ze),re.data,se,Y,se,Oe),Z===se-1&&this._addTileFeatures(re.range(0,De,ve/se,Ze),re.data,-1,Y,se,Oe),Oe.features.length?Oe:null}getClusterExpansionZoom(U){let Z=this._getOriginZoom(U)-1;for(;Z<=this.options.maxZoom;){const Y=this.getChildren(U);if(Z++,Y.length!==1)break;U=Y[0].properties.cluster_id}return Z}_appendLeaves(U,Z,Y,re,se){const de=this.getChildren(Z);for(const Me of de){const ve=Me.properties;if(ve&&ve.cluster?se+ve.point_count<=re?se+=ve.point_count:se=this._appendLeaves(U,ve.cluster_id,Y,re,se):se<re?se++:U.push(Me),U.length===Y)break}return se}_createTree(U){const Z=new M.aI(U.length/this.stride|0,this.options.nodeSize,Float32Array);for(let Y=0;Y<U.length;Y+=this.stride)Z.add(U[Y],U[Y+1]);return Z.finish(),Z.data=U,Z}_addTileFeatures(U,Z,Y,re,se,de){for(const Me of U){const ve=Me*this.stride,De=Z[ve+5]>1;let Ze,Oe,pt;if(De)Ze=Ar(Z,ve,this.clusterProps),Oe=Z[ve],pt=Z[ve+1];else{const Mi=this.points[Z[ve+3]];Ze=Mi.properties;const[gt,Yt]=Mi.geometry.coordinates;Oe=je(gt),pt=nt(Yt)}const be={type:1,geometry:[[Math.round(this.options.extent*(Oe*se-Y)),Math.round(this.options.extent*(pt*se-re))]],tags:Ze};let qt;qt=De||this.options.generateId?Z[ve+3]:this.points[Z[ve+3]].id,qt!==void 0&&(be.id=qt),de.features.push(be)}}_limitZoom(U){return Math.max(this.options.minZoom,Math.min(Math.floor(+U),this.options.maxZoom+1))}_cluster(U,Z){const{radius:Y,extent:re,reduce:se,minPoints:de}=this.options,Me=Y/(re*Math.pow(2,Z)),ve=U.data,De=[],Ze=this.stride;for(let Oe=0;Oe<ve.length;Oe+=Ze){if(ve[Oe+2]<=Z)continue;ve[Oe+2]=Z;const pt=ve[Oe],be=ve[Oe+1],qt=U.within(ve[Oe],ve[Oe+1],Me),Mi=ve[Oe+5];let gt=Mi;for(const Yt of qt){const ci=Yt*Ze;ve[ci+2]>Z&&(gt+=ve[ci+5])}if(gt>Mi&&gt>=de){let Yt,ci=pt*Mi,or=be*Mi,Rr=-1;const Hr=(Oe/Ze<<5)+(Z+1)+this.points.length;for(const sr of qt){const qi=sr*Ze;if(ve[qi+2]<=Z)continue;ve[qi+2]=Z;const lr=ve[qi+5];ci+=ve[qi]*lr,or+=ve[qi+1]*lr,ve[qi+4]=Hr,se&&(Yt||(Yt=this._map(ve,Oe,!0),Rr=this.clusterProps.length,this.clusterProps.push(Yt)),se(Yt,this._map(ve,qi)))}ve[Oe+4]=Hr,De.push(ci/gt,or/gt,1/0,Hr,-1,gt),se&&De.push(Rr)}else{for(let Yt=0;Yt<Ze;Yt++)De.push(ve[Oe+Yt]);if(gt>1)for(const Yt of qt){const ci=Yt*Ze;if(!(ve[ci+2]<=Z)){ve[ci+2]=Z;for(let or=0;or<Ze;or++)De.push(ve[ci+or])}}}}return De}_getOriginId(U){return U-this.points.length>>5}_getOriginZoom(U){return(U-this.points.length)%32}_map(U,Z,Y){if(U[Z+5]>1){const de=this.clusterProps[U[Z+6]];return Y?Object.assign({},de):de}const re=this.points[U[Z+3]].properties,se=this.options.map(re);return Y&&se===re?Object.assign({},se):se}}function Pa(pe,U,Z){return{type:"Feature",id:pe[U+3],properties:Ar(pe,U,Z),geometry:{type:"Point",coordinates:[(Y=pe[U],360*(Y-.5)),zt(pe[U+1])]}};var Y}function Ar(pe,U,Z){const Y=pe[U+5],re=Y>=1e4?`${Math.round(Y/1e3)}k`:Y>=1e3?Math.round(Y/100)/10+"k":Y,se=pe[U+6],de=se===-1?{}:Object.assign({},Z[se]);return Object.assign(de,{cluster:!0,cluster_id:pe[U+3],point_count:Y,point_count_abbreviated:re})}function je(pe){return pe/360+.5}function nt(pe){const U=Math.sin(pe*Math.PI/180),Z=.5-.25*Math.log((1+U)/(1-U))/Math.PI;return Z<0?0:Z>1?1:Z}function zt(pe){const U=(180-360*pe)*Math.PI/180;return 360*Math.atan(Math.exp(U))/Math.PI-90}function wt(pe,U,Z,Y){let re=Y;const se=U+(Z-U>>1);let de,Me=Z-U;const ve=pe[U],De=pe[U+1],Ze=pe[Z],Oe=pe[Z+1];for(let pt=U+3;pt<Z;pt+=3){const be=vi(pe[pt],pe[pt+1],ve,De,Ze,Oe);if(be>re)de=pt,re=be;else if(be===re){const qt=Math.abs(pt-se);qt<Me&&(de=pt,Me=qt)}}re>Y&&(de-U>3&&wt(pe,U,de,Y),pe[de+2]=re,Z-de>3&&wt(pe,de,Z,Y))}function vi(pe,U,Z,Y,re,se){let de=re-Z,Me=se-Y;if(de!==0||Me!==0){const ve=((pe-Z)*de+(U-Y)*Me)/(de*de+Me*Me);ve>1?(Z=re,Y=se):ve>0&&(Z+=de*ve,Y+=Me*ve)}return de=pe-Z,Me=U-Y,de*de+Me*Me}function me(pe,U,Z,Y){const re={id:pe??null,type:U,geometry:Z,tags:Y,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};if(U==="Point"||U==="MultiPoint"||U==="LineString")Ue(re,Z);else if(U==="Polygon")Ue(re,Z[0]);else if(U==="MultiLineString")for(const se of Z)Ue(re,se);else if(U==="MultiPolygon")for(const se of Z)Ue(re,se[0]);return re}function Ue(pe,U){for(let Z=0;Z<U.length;Z+=3)pe.minX=Math.min(pe.minX,U[Z]),pe.minY=Math.min(pe.minY,U[Z+1]),pe.maxX=Math.max(pe.maxX,U[Z]),pe.maxY=Math.max(pe.maxY,U[Z+1])}function at(pe,U,Z,Y){if(!U.geometry)return;const re=U.geometry.coordinates;if(re&&re.length===0)return;const se=U.geometry.type,de=Math.pow(Z.tolerance/((1<<Z.maxZoom)*Z.extent),2);let Me=[],ve=U.id;if(Z.promoteId?ve=U.properties[Z.promoteId]:Z.generateId&&(ve=Y||0),se==="Point")ft(re,Me);else if(se==="MultiPoint")for(const De of re)ft(De,Me);else if(se==="LineString")Dt(re,Me,de,!1);else if(se==="MultiLineString"){if(Z.lineMetrics){for(const De of re)Me=[],Dt(De,Me,de,!1),pe.push(me(ve,"LineString",Me,U.properties));return}Et(re,Me,de,!1)}else if(se==="Polygon")Et(re,Me,de,!0);else{if(se!=="MultiPolygon"){if(se==="GeometryCollection"){for(const De of U.geometry.geometries)at(pe,{id:ve,geometry:De,properties:U.properties},Z,Y);return}throw new Error("Input data is not a valid GeoJSON object.")}for(const De of re){const Ze=[];Et(De,Ze,de,!0),Me.push(Ze)}}pe.push(me(ve,se,Me,U.properties))}function ft(pe,U){U.push(si(pe[0]),Oi(pe[1]),0)}function Dt(pe,U,Z,Y){let re,se,de=0;for(let ve=0;ve<pe.length;ve++){const De=si(pe[ve][0]),Ze=Oi(pe[ve][1]);U.push(De,Ze,0),ve>0&&(de+=Y?(re*Ze-De*se)/2:Math.sqrt(Math.pow(De-re,2)+Math.pow(Ze-se,2))),re=De,se=Ze}const Me=U.length-3;U[2]=1,wt(U,0,Me,Z),U[Me+2]=1,U.size=Math.abs(de),U.start=0,U.end=U.size}function Et(pe,U,Z,Y){for(let re=0;re<pe.length;re++){const se=[];Dt(pe[re],se,Z,Y),U.push(se)}}function si(pe){return pe/360+.5}function Oi(pe){const U=Math.sin(pe*Math.PI/180),Z=.5-.25*Math.log((1+U)/(1-U))/Math.PI;return Z<0?0:Z>1?1:Z}function mi(pe,U,Z,Y,re,se,de,Me){if(Y/=U,se>=(Z/=U)&&de<Y)return pe;if(de<Z||se>=Y)return null;const ve=[];for(const De of pe){const Ze=De.geometry;let Oe=De.type;const pt=re===0?De.minX:De.minY,be=re===0?De.maxX:De.maxY;if(pt>=Z&&be<Y){ve.push(De);continue}if(be<Z||pt>=Y)continue;let qt=[];if(Oe==="Point"||Oe==="MultiPoint")bo(Ze,qt,Z,Y,re);else if(Oe==="LineString")es(Ze,qt,Z,Y,re,!1,Me.lineMetrics);else if(Oe==="MultiLineString")ts(Ze,qt,Z,Y,re,!1);else if(Oe==="Polygon")ts(Ze,qt,Z,Y,re,!0);else if(Oe==="MultiPolygon")for(const Mi of Ze){const gt=[];ts(Mi,gt,Z,Y,re,!0),gt.length&&qt.push(gt)}if(qt.length){if(Me.lineMetrics&&Oe==="LineString"){for(const Mi of qt)ve.push(me(De.id,Oe,Mi,De.tags));continue}Oe!=="LineString"&&Oe!=="MultiLineString"||(qt.length===1?(Oe="LineString",qt=qt[0]):Oe="MultiLineString"),Oe!=="Point"&&Oe!=="MultiPoint"||(Oe=qt.length===3?"Point":"MultiPoint"),ve.push(me(De.id,Oe,qt,De.tags))}}return ve.length?ve:null}function bo(pe,U,Z,Y,re){for(let se=0;se<pe.length;se+=3){const de=pe[se+re];de>=Z&&de<=Y&&ji(U,pe[se],pe[se+1],pe[se+2])}}function es(pe,U,Z,Y,re,se,de){let Me=ya(pe);const ve=re===0?Di:An;let De,Ze,Oe=pe.start;for(let gt=0;gt<pe.length-3;gt+=3){const Yt=pe[gt],ci=pe[gt+1],or=pe[gt+2],Rr=pe[gt+3],Hr=pe[gt+4],sr=re===0?Yt:ci,qi=re===0?Rr:Hr;let lr=!1;de&&(De=Math.sqrt(Math.pow(Yt-Rr,2)+Math.pow(ci-Hr,2))),sr<Z?qi>Z&&(Ze=ve(Me,Yt,ci,Rr,Hr,Z),de&&(Me.start=Oe+De*Ze)):sr>Y?qi<Y&&(Ze=ve(Me,Yt,ci,Rr,Hr,Y),de&&(Me.start=Oe+De*Ze)):ji(Me,Yt,ci,or),qi<Z&&sr>=Z&&(Ze=ve(Me,Yt,ci,Rr,Hr,Z),lr=!0),qi>Y&&sr<=Y&&(Ze=ve(Me,Yt,ci,Rr,Hr,Y),lr=!0),!se&&lr&&(de&&(Me.end=Oe+De*Ze),U.push(Me),Me=ya(pe)),de&&(Oe+=De)}let pt=pe.length-3;const be=pe[pt],qt=pe[pt+1],Mi=re===0?be:qt;Mi>=Z&&Mi<=Y&&ji(Me,be,qt,pe[pt+2]),pt=Me.length-3,se&&pt>=3&&(Me[pt]!==Me[0]||Me[pt+1]!==Me[1])&&ji(Me,Me[0],Me[1],Me[2]),Me.length&&U.push(Me)}function ya(pe){const U=[];return U.size=pe.size,U.start=pe.start,U.end=pe.end,U}function ts(pe,U,Z,Y,re,se){for(const de of pe)es(de,U,Z,Y,re,se,!1)}function ji(pe,U,Z,Y){pe.push(U,Z,Y)}function Di(pe,U,Z,Y,re,se){const de=(se-U)/(Y-U);return ji(pe,se,Z+(re-Z)*de,1),de}function An(pe,U,Z,Y,re,se){const de=(se-Z)/(re-Z);return ji(pe,U+(Y-U)*de,se,1),de}function Vs(pe,U){const Z=[];for(let Y=0;Y<pe.length;Y++){const re=pe[Y],se=re.type;let de;if(se==="Point"||se==="MultiPoint"||se==="LineString")de=xo(re.geometry,U);else if(se==="MultiLineString"||se==="Polygon"){de=[];for(const Me of re.geometry)de.push(xo(Me,U))}else if(se==="MultiPolygon"){de=[];for(const Me of re.geometry){const ve=[];for(const De of Me)ve.push(xo(De,U));de.push(ve)}}Z.push(me(re.id,se,de,re.tags))}return Z}function xo(pe,U){const Z=[];Z.size=pe.size,pe.start!==void 0&&(Z.start=pe.start,Z.end=pe.end);for(let Y=0;Y<pe.length;Y+=3)Z.push(pe[Y]+U,pe[Y+1],pe[Y+2]);return Z}function En(pe,U){if(pe.transformed)return pe;const Z=1<<pe.z,Y=pe.x,re=pe.y;for(const se of pe.features){const de=se.geometry,Me=se.type;if(se.geometry=[],Me===1)for(let ve=0;ve<de.length;ve+=2)se.geometry.push(is(de[ve],de[ve+1],U,Z,Y,re));else for(let ve=0;ve<de.length;ve++){const De=[];for(let Ze=0;Ze<de[ve].length;Ze+=2)De.push(is(de[ve][Ze],de[ve][Ze+1],U,Z,Y,re));se.geometry.push(De)}}return pe.transformed=!0,pe}function is(pe,U,Z,Y,re,se){return[Math.round(Z*(pe*Y-re)),Math.round(Z*(U*Y-se))]}function zn(pe,U,Z,Y,re){const se=U===re.maxZoom?0:re.tolerance/((1<<U)*re.extent),de={features:[],numPoints:0,numSimplified:0,numFeatures:pe.length,source:null,x:Z,y:Y,z:U,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0};for(const Me of pe)rs(de,Me,se,re);return de}function rs(pe,U,Z,Y){const re=U.geometry,se=U.type,de=[];if(pe.minX=Math.min(pe.minX,U.minX),pe.minY=Math.min(pe.minY,U.minY),pe.maxX=Math.max(pe.maxX,U.maxX),pe.maxY=Math.max(pe.maxY,U.maxY),se==="Point"||se==="MultiPoint")for(let Me=0;Me<re.length;Me+=3)de.push(re[Me],re[Me+1]),pe.numPoints++,pe.numSimplified++;else if(se==="LineString")eo(de,re,pe,Z,!1,!1);else if(se==="MultiLineString"||se==="Polygon")for(let Me=0;Me<re.length;Me++)eo(de,re[Me],pe,Z,se==="Polygon",Me===0);else if(se==="MultiPolygon")for(let Me=0;Me<re.length;Me++){const ve=re[Me];for(let De=0;De<ve.length;De++)eo(de,ve[De],pe,Z,!0,De===0)}if(de.length){let Me=U.tags||null;if(se==="LineString"&&Y.lineMetrics){Me={};for(const De in U.tags)Me[De]=U.tags[De];Me.mapbox_clip_start=re.start/re.size,Me.mapbox_clip_end=re.end/re.size}const ve={geometry:de,type:se==="Polygon"||se==="MultiPolygon"?3:se==="LineString"||se==="MultiLineString"?2:1,tags:Me};U.id!==null&&(ve.id=U.id),pe.features.push(ve)}}function eo(pe,U,Z,Y,re,se){const de=Y*Y;if(Y>0&&U.size<(re?de:Y))return void(Z.numPoints+=U.length/3);const Me=[];for(let ve=0;ve<U.length;ve+=3)(Y===0||U[ve+2]>de)&&(Z.numSimplified++,Me.push(U[ve],U[ve+1])),Z.numPoints++;re&&(function(ve,De){let Ze=0;for(let Oe=0,pt=ve.length,be=pt-2;Oe<pt;be=Oe,Oe+=2)Ze+=(ve[Oe]-ve[be])*(ve[Oe+1]+ve[be+1]);if(Ze>0===De)for(let Oe=0,pt=ve.length;Oe<pt/2;Oe+=2){const be=ve[Oe],qt=ve[Oe+1];ve[Oe]=ve[pt-2-Oe],ve[Oe+1]=ve[pt-1-Oe],ve[pt-2-Oe]=be,ve[pt-1-Oe]=qt}})(Me,se),pe.push(Me)}const Zr={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0};class Tl{constructor(U,Z){const Y=(Z=this.options=(function(se,de){for(const Me in de)se[Me]=de[Me];return se})(Object.create(Zr),Z)).debug;if(Y&&console.time("preprocess data"),Z.maxZoom<0||Z.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(Z.promoteId&&Z.generateId)throw new Error("promoteId and generateId cannot be used together.");let re=(function(se,de){const Me=[];if(se.type==="FeatureCollection")for(let ve=0;ve<se.features.length;ve++)at(Me,se.features[ve],de,ve);else at(Me,se.type==="Feature"?se:{geometry:se},de);return Me})(U,Z);this.tiles={},this.tileCoords=[],Y&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",Z.indexMaxZoom,Z.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),re=(function(se,de){const Me=de.buffer/de.extent;let ve=se;const De=mi(se,1,-1-Me,Me,0,-1,2,de),Ze=mi(se,1,1-Me,2+Me,0,-1,2,de);return(De||Ze)&&(ve=mi(se,1,-Me,1+Me,0,-1,2,de)||[],De&&(ve=Vs(De,1).concat(ve)),Ze&&(ve=ve.concat(Vs(Ze,-1)))),ve})(re,Z),re.length&&this.splitTile(re,0,0,0),Y&&(re.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}splitTile(U,Z,Y,re,se,de,Me){const ve=[U,Z,Y,re],De=this.options,Ze=De.debug;for(;ve.length;){re=ve.pop(),Y=ve.pop(),Z=ve.pop(),U=ve.pop();const Oe=1<<Z,pt=Na(Z,Y,re);let be=this.tiles[pt];if(!be&&(Ze>1&&console.time("creation"),be=this.tiles[pt]=zn(U,Z,Y,re,De),this.tileCoords.push({z:Z,x:Y,y:re}),Ze)){Ze>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",Z,Y,re,be.numFeatures,be.numPoints,be.numSimplified),console.timeEnd("creation"));const lr=`z${Z}`;this.stats[lr]=(this.stats[lr]||0)+1,this.total++}if(be.source=U,se==null){if(Z===De.indexMaxZoom||be.numPoints<=De.indexMaxPoints)continue}else{if(Z===De.maxZoom||Z===se)continue;if(se!=null){const lr=se-Z;if(Y!==de>>lr||re!==Me>>lr)continue}}if(be.source=null,U.length===0)continue;Ze>1&&console.time("clipping");const qt=.5*De.buffer/De.extent,Mi=.5-qt,gt=.5+qt,Yt=1+qt;let ci=null,or=null,Rr=null,Hr=null,sr=mi(U,Oe,Y-qt,Y+gt,0,be.minX,be.maxX,De),qi=mi(U,Oe,Y+Mi,Y+Yt,0,be.minX,be.maxX,De);U=null,sr&&(ci=mi(sr,Oe,re-qt,re+gt,1,be.minY,be.maxY,De),or=mi(sr,Oe,re+Mi,re+Yt,1,be.minY,be.maxY,De),sr=null),qi&&(Rr=mi(qi,Oe,re-qt,re+gt,1,be.minY,be.maxY,De),Hr=mi(qi,Oe,re+Mi,re+Yt,1,be.minY,be.maxY,De),qi=null),Ze>1&&console.timeEnd("clipping"),ve.push(ci||[],Z+1,2*Y,2*re),ve.push(or||[],Z+1,2*Y,2*re+1),ve.push(Rr||[],Z+1,2*Y+1,2*re),ve.push(Hr||[],Z+1,2*Y+1,2*re+1)}}getTile(U,Z,Y){U=+U,Z=+Z,Y=+Y;const re=this.options,{extent:se,debug:de}=re;if(U<0||U>24)return null;const Me=1<<U,ve=Na(U,Z=Z+Me&Me-1,Y);if(this.tiles[ve])return En(this.tiles[ve],se);de>1&&console.log("drilling down to z%d-%d-%d",U,Z,Y);let De,Ze=U,Oe=Z,pt=Y;for(;!De&&Ze>0;)Ze--,Oe>>=1,pt>>=1,De=this.tiles[Na(Ze,Oe,pt)];return De&&De.source?(de>1&&(console.log("found parent tile z%d-%d-%d",Ze,Oe,pt),console.time("drilling down")),this.splitTile(De.source,Ze,Oe,pt,U,Z,Y),de>1&&console.timeEnd("drilling down"),this.tiles[ve]?En(this.tiles[ve],se):null):null}}function Na(pe,U,Z){return 32*((1<<pe)*Z+U)+pe}class pc extends Je{constructor(U,Z,Y,re=wo){super(U,Z,Y),this._dataUpdateable=new Map,this._createGeoJSONIndex=re}loadVectorTile(U,Z){return M._(this,void 0,void 0,(function*(){const Y=U.tileID.canonical;if(!this._geoJSONIndex)throw new Error("Unable to parse the data into a cluster or geojson");const re=this._geoJSONIndex.getTile(Y.z,Y.x,Y.y);if(!re)return null;const se=new _i(re.features,{version:2,extent:M.$});let de=(function(Me){const ve=new M.cM;return(function(De,Ze){for(const Oe in De.layers)Ze.writeMessage(3,oi,De.layers[Oe])})(Me,ve),ve.finish()})(se);return de.byteOffset===0&&de.byteLength===de.buffer.byteLength||(de=new Uint8Array(de)),{vectorTile:se,rawData:de.buffer}}))}loadData(U){return M._(this,void 0,void 0,(function*(){var Z;(Z=this._pendingRequest)===null||Z===void 0||Z.abort();const Y=!!(U&&U.request&&U.request.collectResourceTiming)&&new M.cN(U.request);this._pendingRequest=new AbortController;try{(!this._pendingData||U.request||U.data||U.dataDiff)&&(this._pendingData=this.loadAndProcessGeoJSON(U,this._pendingRequest));const re=yield this._pendingData;this._geoJSONIndex=this._createGeoJSONIndex(re,U),this.loaded={};const se={data:re};if(Y){const de=Y.finish();de&&(se.resourceTiming={},se.resourceTiming[U.source]=JSON.parse(JSON.stringify(de)))}return se}catch(re){if(delete this._pendingRequest,M.cy(re))return{abandoned:!0};throw re}}))}getData(){return M._(this,void 0,void 0,(function*(){return this._pendingData}))}reloadTile(U){const Z=this.loaded;return Z&&Z[U.uid]?super.reloadTile(U):this.loadTile(U)}loadAndProcessGeoJSON(U,Z){return M._(this,void 0,void 0,(function*(){let Y=yield this.loadGeoJSON(U,Z);if(delete this._pendingRequest,typeof Y!="object")throw new Error(`Input data given to '${U.source}' is not a valid GeoJSON object.`);if(aa(Y,!0),U.filter){const re=M.cT(U.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(re.result==="error")throw new Error(re.value.map((de=>`${de.key}: ${de.message}`)).join(", "));Y={type:"FeatureCollection",features:Y.features.filter((de=>re.value.evaluate({zoom:0},de)))}}return Y}))}loadGeoJSON(U,Z){return M._(this,void 0,void 0,(function*(){const{promoteId:Y}=U;if(U.request){const re=yield M.j(U.request,Z);return this._dataUpdateable=M.cV(re.data,Y)?M.cU(re.data,Y):void 0,re.data}if(typeof U.data=="string")try{const re=JSON.parse(U.data);return this._dataUpdateable=M.cV(re,Y)?M.cU(re,Y):void 0,re}catch{throw new Error(`Input data given to '${U.source}' is not a valid GeoJSON object.`)}if(!U.dataDiff)throw new Error(`Input data given to '${U.source}' is not a valid GeoJSON object.`);if(!this._dataUpdateable)throw new Error(`Cannot update existing geojson data in ${U.source}`);return M.cW(this._dataUpdateable,U.dataDiff,Y),{type:"FeatureCollection",features:Array.from(this._dataUpdateable.values())}}))}removeSource(U){return M._(this,void 0,void 0,(function*(){this._pendingRequest&&this._pendingRequest.abort()}))}getClusterExpansionZoom(U){return this._geoJSONIndex.getClusterExpansionZoom(U.clusterId)}getClusterChildren(U){return this._geoJSONIndex.getChildren(U.clusterId)}getClusterLeaves(U){return this._geoJSONIndex.getLeaves(U.clusterId,U.limit,U.offset)}}function wo(pe,U){return U.cluster?new Jn((function({superclusterOptions:Z,clusterProperties:Y}){if(!Y||!Z)return Z;const re={},se={},de={accumulated:null,zoom:0},Me={properties:null},ve=Object.keys(Y);for(const De of ve){const[Ze,Oe]=Y[De],pt=M.cT(Oe),be=M.cT(typeof Ze=="string"?[Ze,["accumulated"],["get",De]]:Ze);re[De]=pt.value,se[De]=be.value}return Z.map=De=>{Me.properties=De;const Ze={};for(const Oe of ve)Ze[Oe]=re[Oe].evaluate(de,Me);return Ze},Z.reduce=(De,Ze)=>{Me.properties=Ze;for(const Oe of ve)de.accumulated=De[Oe],De[Oe]=se[Oe].evaluate(de,Me)},Z})(U)).load(pe.features):(function(Z,Y){return new Tl(Z,Y)})(pe,U.geojsonVtOptions)}class Co{constructor(U){this.self=U,this.actor=new M.J(U),this.layerIndexes={},this.availableImages={},this.workerSources={},this.demWorkerSources={},this.externalWorkerSourceTypes={},this.globalStates=new Map,this.self.registerWorkerSource=(Z,Y)=>{if(this.externalWorkerSourceTypes[Z])throw new Error(`Worker source with name "${Z}" already registered.`);this.externalWorkerSourceTypes[Z]=Y},this.self.addProtocol=M.cA,this.self.removeProtocol=M.cB,this.self.registerRTLTextPlugin=Z=>{M.cX.setMethods(Z)},this.actor.registerMessageHandler("LDT",((Z,Y)=>this._getDEMWorkerSource(Z,Y.source).loadTile(Y))),this.actor.registerMessageHandler("RDT",((Z,Y)=>M._(this,void 0,void 0,(function*(){this._getDEMWorkerSource(Z,Y.source).removeTile(Y)})))),this.actor.registerMessageHandler("GCEZ",((Z,Y)=>M._(this,void 0,void 0,(function*(){return this._getWorkerSource(Z,Y.type,Y.source).getClusterExpansionZoom(Y)})))),this.actor.registerMessageHandler("GCC",((Z,Y)=>M._(this,void 0,void 0,(function*(){return this._getWorkerSource(Z,Y.type,Y.source).getClusterChildren(Y)})))),this.actor.registerMessageHandler("GCL",((Z,Y)=>M._(this,void 0,void 0,(function*(){return this._getWorkerSource(Z,Y.type,Y.source).getClusterLeaves(Y)})))),this.actor.registerMessageHandler("LD",((Z,Y)=>this._getWorkerSource(Z,Y.type,Y.source).loadData(Y))),this.actor.registerMessageHandler("GD",((Z,Y)=>this._getWorkerSource(Z,Y.type,Y.source).getData())),this.actor.registerMessageHandler("LT",((Z,Y)=>this._getWorkerSource(Z,Y.type,Y.source).loadTile(Y))),this.actor.registerMessageHandler("RT",((Z,Y)=>this._getWorkerSource(Z,Y.type,Y.source).reloadTile(Y))),this.actor.registerMessageHandler("AT",((Z,Y)=>this._getWorkerSource(Z,Y.type,Y.source).abortTile(Y))),this.actor.registerMessageHandler("RMT",((Z,Y)=>this._getWorkerSource(Z,Y.type,Y.source).removeTile(Y))),this.actor.registerMessageHandler("RS",((Z,Y)=>M._(this,void 0,void 0,(function*(){if(!this.workerSources[Z]||!this.workerSources[Z][Y.type]||!this.workerSources[Z][Y.type][Y.source])return;const re=this.workerSources[Z][Y.type][Y.source];delete this.workerSources[Z][Y.type][Y.source],re.removeSource!==void 0&&re.removeSource(Y)})))),this.actor.registerMessageHandler("RM",(Z=>M._(this,void 0,void 0,(function*(){delete this.layerIndexes[Z],delete this.availableImages[Z],delete this.workerSources[Z],delete this.demWorkerSources[Z],this.globalStates.delete(Z)})))),this.actor.registerMessageHandler("SR",((Z,Y)=>M._(this,void 0,void 0,(function*(){this.referrer=Y})))),this.actor.registerMessageHandler("SRPS",((Z,Y)=>this._syncRTLPluginState(Z,Y))),this.actor.registerMessageHandler("IS",((Z,Y)=>M._(this,void 0,void 0,(function*(){this.self.importScripts(Y)})))),this.actor.registerMessageHandler("SI",((Z,Y)=>this._setImages(Z,Y))),this.actor.registerMessageHandler("UL",((Z,Y)=>M._(this,void 0,void 0,(function*(){this._getLayerIndex(Z).update(Y.layers,Y.removedIds,this._getGlobalState(Z))})))),this.actor.registerMessageHandler("UGS",((Z,Y)=>M._(this,void 0,void 0,(function*(){const re=this._getGlobalState(Z);for(const se in Y)re[se]=Y[se]})))),this.actor.registerMessageHandler("SL",((Z,Y)=>M._(this,void 0,void 0,(function*(){this._getLayerIndex(Z).replace(Y,this._getGlobalState(Z))}))))}_getGlobalState(U){let Z=this.globalStates.get(U);return Z||(Z={},this.globalStates.set(U,Z)),Z}_setImages(U,Z){return M._(this,void 0,void 0,(function*(){this.availableImages[U]=Z;for(const Y in this.workerSources[U]){const re=this.workerSources[U][Y];for(const se in re)re[se].availableImages=Z}}))}_syncRTLPluginState(U,Z){return M._(this,void 0,void 0,(function*(){return yield M.cX.syncState(Z,this.self.importScripts)}))}_getAvailableImages(U){let Z=this.availableImages[U];return Z||(Z=[]),Z}_getLayerIndex(U){let Z=this.layerIndexes[U];return Z||(Z=this.layerIndexes[U]=new d),Z}_getWorkerSource(U,Z,Y){if(this.workerSources[U]||(this.workerSources[U]={}),this.workerSources[U][Z]||(this.workerSources[U][Z]={}),!this.workerSources[U][Z][Y]){const re={sendAsync:(se,de)=>(se.targetMapId=U,this.actor.sendAsync(se,de))};switch(Z){case"vector":this.workerSources[U][Z][Y]=new Je(re,this._getLayerIndex(U),this._getAvailableImages(U));break;case"geojson":this.workerSources[U][Z][Y]=new pc(re,this._getLayerIndex(U),this._getAvailableImages(U));break;default:this.workerSources[U][Z][Y]=new this.externalWorkerSourceTypes[Z](re,this._getLayerIndex(U),this._getAvailableImages(U))}}return this.workerSources[U][Z][Y]}_getDEMWorkerSource(U,Z){return this.demWorkerSources[U]||(this.demWorkerSources[U]={}),this.demWorkerSources[U][Z]||(this.demWorkerSources[U][Z]=new xt),this.demWorkerSources[U][Z]}}return M.i(self)&&(self.worker=new Co(self)),Co})),D("index",["exports","./shared"],(function(M,d){var ye="5.10.0";function ke(){var p=new d.A(4);return d.A!=Float32Array&&(p[1]=0,p[2]=0),p[0]=1,p[3]=1,p}let ot,Je;const xt={frame(p,e,n){const l=requestAnimationFrame((g=>{h(),e(g)})),{unsubscribe:h}=d.s(p.signal,"abort",(()=>{h(),cancelAnimationFrame(l),n(d.c())}),!1)},frameAsync(p){return new Promise(((e,n)=>{this.frame(p,e,n)}))},getImageData(p,e=0){return this.getImageCanvasContext(p).getImageData(-e,-e,p.width+2*e,p.height+2*e)},getImageCanvasContext(p){const e=window.document.createElement("canvas"),n=e.getContext("2d",{willReadFrequently:!0});if(!n)throw new Error("failed to create canvas 2d context");return e.width=p.width,e.height=p.height,n.drawImage(p,0,0,p.width,p.height),n},resolveURL:p=>(ot||(ot=document.createElement("a")),ot.href=p,ot.href),hardwareConcurrency:typeof navigator<"u"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(Je==null&&(Je=matchMedia("(prefers-reduced-motion: reduce)")),Je.matches)}},Ot=new class{constructor(){this._realTime=typeof performance<"u"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),this._frozenAt=null}getCurrentTime(){return this._frozenAt!==null?this._frozenAt:this._realTime()}setNow(p){this._frozenAt=p}restoreNow(){this._frozenAt=null}isFrozen(){return this._frozenAt!==null}};function dt(){return Ot.getCurrentTime()}class Ce{static testProp(e){if(!Ce.docStyle)return e[0];for(let n=0;n<e.length;n++)if(e[n]in Ce.docStyle)return e[n];return e[0]}static create(e,n,l){const h=window.document.createElement(e);return n!==void 0&&(h.className=n),l&&l.appendChild(h),h}static createNS(e,n){return window.document.createElementNS(e,n)}static disableDrag(){Ce.docStyle&&Ce.selectProp&&(Ce.userSelect=Ce.docStyle[Ce.selectProp],Ce.docStyle[Ce.selectProp]="none")}static enableDrag(){Ce.docStyle&&Ce.selectProp&&(Ce.docStyle[Ce.selectProp]=Ce.userSelect)}static setTransform(e,n){e.style[Ce.transformProp]=n}static addEventListener(e,n,l,h={}){e.addEventListener(n,l,"passive"in h?h:h.capture)}static removeEventListener(e,n,l,h={}){e.removeEventListener(n,l,"passive"in h?h:h.capture)}static suppressClickInternal(e){e.preventDefault(),e.stopPropagation(),window.removeEventListener("click",Ce.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",Ce.suppressClickInternal,!0),window.setTimeout((()=>{window.removeEventListener("click",Ce.suppressClickInternal,!0)}),0)}static getScale(e){const n=e.getBoundingClientRect();return{x:n.width/e.offsetWidth||1,y:n.height/e.offsetHeight||1,boundingClientRect:n}}static getPoint(e,n,l){const h=n.boundingClientRect;return new d.P((l.clientX-h.left)/n.x-e.clientLeft,(l.clientY-h.top)/n.y-e.clientTop)}static mousePos(e,n){const l=Ce.getScale(e);return Ce.getPoint(e,l,n)}static touchPos(e,n){const l=[],h=Ce.getScale(e);for(let g=0;g<n.length;g++)l.push(Ce.getPoint(e,h,n[g]));return l}static mouseButton(e){return e.button}static remove(e){e.parentNode&&e.parentNode.removeChild(e)}static sanitize(e){const n=new DOMParser().parseFromString(e,"text/html").body||document.createElement("body"),l=n.querySelectorAll("script");for(const h of l)h.remove();return Ce.clean(n),n.innerHTML}static isPossiblyDangerous(e,n){const l=n.replace(/\s+/g,"").toLowerCase();return!(!["src","href","xlink:href"].includes(e)||!l.includes("javascript:")&&!l.includes("data:"))||!!e.startsWith("on")||void 0}static clean(e){const n=e.children;for(const l of n)Ce.removeAttributes(l),Ce.clean(l)}static removeAttributes(e){for(const{name:n,value:l}of e.attributes)Ce.isPossiblyDangerous(n,l)&&e.removeAttribute(n)}}Ce.docStyle=typeof window<"u"&&window.document&&window.document.documentElement.style,Ce.selectProp=Ce.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),Ce.transformProp=Ce.testProp(["transform","WebkitTransform"]);const aa={supported:!1,testSupport:function(p){!oi&&_i&&(na?_a(p):dr=p)}};let dr,_i,oi=!1,na=!1;function _a(p){const e=p.createTexture();p.bindTexture(p.TEXTURE_2D,e);try{if(p.texImage2D(p.TEXTURE_2D,0,p.RGBA,p.RGBA,p.UNSIGNED_BYTE,_i),p.isContextLost())return;aa.supported=!0}catch{}p.deleteTexture(e),oi=!0}var ki;typeof document<"u"&&(_i=document.createElement("img"),_i.onload=()=>{dr&&_a(dr),dr=null,na=!0},_i.onerror=()=>{oi=!0,dr=null},_i.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="),(function(p){let e,n,l,h;p.resetRequestQueue=()=>{e=[],n=0,l=0,h={}},p.addThrottleControl=C=>{const z=l++;return h[z]=C,z},p.removeThrottleControl=C=>{delete h[C],v()},p.getImage=(C,z,k=!0)=>new Promise(((O,I)=>{aa.supported&&(C.headers||(C.headers={}),C.headers.accept="image/webp,*/*"),d.e(C,{type:"image"}),e.push({abortController:z,requestParameters:C,supportImageRefresh:k,state:"queued",onError:F=>{I(F)},onSuccess:F=>{O(F)}}),v()}));const g=C=>d._(this,void 0,void 0,(function*(){C.state="running";const{requestParameters:z,supportImageRefresh:k,onError:O,onSuccess:I,abortController:F}=C,H=k===!1&&!d.i(self)&&!d.g(z.url)&&(!z.headers||Object.keys(z.headers).reduce(((J,ie)=>J&&ie==="accept"),!0));n++;const K=H?w(z,F):d.m(z,F);try{const J=yield K;delete C.abortController,C.state="completed",J.data instanceof HTMLImageElement||d.b(J.data)?I(J):J.data&&I({data:yield(W=J.data,typeof createImageBitmap=="function"?d.f(W):d.h(W)),cacheControl:J.cacheControl,expires:J.expires})}catch(J){delete C.abortController,O(J)}finally{n--,v()}var W})),v=()=>{const C=(()=>{for(const z of Object.keys(h))if(h[z]())return!0;return!1})()?d.a.MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:d.a.MAX_PARALLEL_IMAGE_REQUESTS;for(let z=n;z<C&&e.length>0;z++){const k=e.shift();k.abortController.signal.aborted?z--:g(k)}},w=(C,z)=>new Promise(((k,O)=>{const I=new Image,F=C.url,H=C.credentials;H&&H==="include"?I.crossOrigin="use-credentials":(H&&H==="same-origin"||!d.d(F))&&(I.crossOrigin="anonymous"),z.signal.addEventListener("abort",(()=>{I.src="",O(d.c())})),I.fetchPriority="high",I.onload=()=>{I.onerror=I.onload=null,k({data:I})},I.onerror=()=>{I.onerror=I.onload=null,z.signal.aborted||O(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))},I.src=F}))})(ki||(ki={})),ki.resetRequestQueue();class ii{constructor(e){this._transformRequestFn=e??null}transformRequest(e,n){return this._transformRequestFn&&this._transformRequestFn(e,n)||{url:e}}setTransformRequest(e){this._transformRequestFn=e}}function Mr(p){const e=[];if(typeof p=="string")e.push({id:"default",url:p});else if(p&&p.length>0){const n=[];for(const{id:l,url:h}of p){const g=`${l}${h}`;n.indexOf(g)===-1&&(n.push(g),e.push({id:l,url:h}))}}return e}function va(p,e,n){try{const l=new URL(p);return l.pathname+=`${e}${n}`,l.toString()}catch{throw new Error(`Invalid sprite URL "${p}", must be absolute. Modify style specification directly or use TransformStyleFunction to correct the issue dynamically`)}}function ln(p){const{userImage:e}=p;return!!(e&&e.render&&e.render())&&(p.data.replace(new Uint8Array(e.data.buffer)),!0)}class oa extends d.E{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new d.R({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(e){if(this.loaded!==e&&(this.loaded=e,e)){for(const{ids:n,promiseResolve:l}of this.requestors)l(this._getImagesForIds(n));this.requestors=[]}}getImage(e){const n=this.images[e];if(n&&!n.data&&n.spriteData){const l=n.spriteData;n.data=new d.R({width:l.width,height:l.height},l.context.getImageData(l.x,l.y,l.width,l.height).data),n.spriteData=null}return n}addImage(e,n){if(this.images[e])throw new Error(`Image id ${e} already exist, use updateImage instead`);this._validate(e,n)&&(this.images[e]=n)}_validate(e,n){let l=!0;const h=n.data||n.spriteData;return this._validateStretch(n.stretchX,h&&h.width)||(this.fire(new d.k(new Error(`Image "${e}" has invalid "stretchX" value`))),l=!1),this._validateStretch(n.stretchY,h&&h.height)||(this.fire(new d.k(new Error(`Image "${e}" has invalid "stretchY" value`))),l=!1),this._validateContent(n.content,n)||(this.fire(new d.k(new Error(`Image "${e}" has invalid "content" value`))),l=!1),l}_validateStretch(e,n){if(!e)return!0;let l=0;for(const h of e){if(h[0]<l||h[1]<h[0]||n<h[1])return!1;l=h[1]}return!0}_validateContent(e,n){if(!e)return!0;if(e.length!==4)return!1;const l=n.spriteData,h=l&&l.width||n.data.width,g=l&&l.height||n.data.height;return!(e[0]<0||h<e[0]||e[1]<0||g<e[1]||e[2]<0||h<e[2]||e[3]<0||g<e[3]||e[2]<e[0]||e[3]<e[1])}updateImage(e,n,l=!0){const h=this.getImage(e);if(l&&(h.data.width!==n.data.width||h.data.height!==n.data.height))throw new Error(`size mismatch between old image (${h.data.width}x${h.data.height}) and new image (${n.data.width}x${n.data.height}).`);n.version=h.version+1,this.images[e]=n,this.updatedImages[e]=!0}removeImage(e){const n=this.images[e];delete this.images[e],delete this.patterns[e],n.userImage&&n.userImage.onRemove&&n.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(e){return new Promise(((n,l)=>{let h=!0;if(!this.isLoaded())for(const g of e)this.images[g]||(h=!1);this.isLoaded()||h?n(this._getImagesForIds(e)):this.requestors.push({ids:e,promiseResolve:n})}))}_getImagesForIds(e){const n={};for(const l of e){let h=this.getImage(l);h||(this.fire(new d.l("styleimagemissing",{id:l})),h=this.getImage(l)),h?n[l]={data:h.data.clone(),pixelRatio:h.pixelRatio,sdf:h.sdf,version:h.version,stretchX:h.stretchX,stretchY:h.stretchY,content:h.content,textFitWidth:h.textFitWidth,textFitHeight:h.textFitHeight,hasRenderCallback:!!(h.userImage&&h.userImage.render)}:d.w(`Image "${l}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}return n}getPixelSize(){const{width:e,height:n}=this.atlasImage;return{width:e,height:n}}getPattern(e){const n=this.patterns[e],l=this.getImage(e);if(!l)return null;if(n&&n.position.version===l.version)return n.position;if(n)n.position.version=l.version;else{const h={w:l.data.width+2,h:l.data.height+2,x:0,y:0},g=new d.I(h,l);this.patterns[e]={bin:h,position:g}}return this._updatePatternAtlas(),this.patterns[e].position}bind(e){const n=e.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new d.T(e,this.atlasImage,n.RGBA),this.atlasTexture.bind(n.LINEAR,n.CLAMP_TO_EDGE)}_updatePatternAtlas(){const e=[];for(const g in this.patterns)e.push(this.patterns[g].bin);const{w:n,h:l}=d.p(e),h=this.atlasImage;h.resize({width:n||1,height:l||1});for(const g in this.patterns){const{bin:v}=this.patterns[g],w=v.x+1,C=v.y+1,z=this.getImage(g).data,k=z.width,O=z.height;d.R.copy(z,h,{x:0,y:0},{x:w,y:C},{width:k,height:O}),d.R.copy(z,h,{x:0,y:O-1},{x:w,y:C-1},{width:k,height:1}),d.R.copy(z,h,{x:0,y:0},{x:w,y:C+O},{width:k,height:1}),d.R.copy(z,h,{x:k-1,y:0},{x:w-1,y:C},{width:1,height:O}),d.R.copy(z,h,{x:0,y:0},{x:w+k,y:C},{width:1,height:O})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(e){for(const n of e){if(this.callbackDispatchedThisFrame[n])continue;this.callbackDispatchedThisFrame[n]=!0;const l=this.getImage(n);l||d.w(`Image with ID: "${n}" was not found`),ln(l)&&this.updateImage(n,l)}}}const Gi=1e20;function Jn(p,e,n,l,h,g,v,w,C){for(let z=e;z<e+l;z++)Pa(p,n*g+z,g,h,v,w,C);for(let z=n;z<n+h;z++)Pa(p,z*g+e,1,l,v,w,C)}function Pa(p,e,n,l,h,g,v){g[0]=0,v[0]=-Gi,v[1]=Gi,h[0]=p[e];for(let w=1,C=0,z=0;w<l;w++){h[w]=p[e+w*n];const k=w*w;do{const O=g[C];z=(h[w]-h[O]+k-O*O)/(w-O)/2}while(z<=v[C]&&--C>-1);C++,g[C]=w,v[C]=z,v[C+1]=Gi}for(let w=0,C=0;w<l;w++){for(;v[C+1]<w;)C++;const z=g[C],k=w-z;p[e+w*n]=h[z]+k*k}}class Ar{constructor(e,n,l){this.requestManager=e,this.localIdeographFontFamily=n,this.entries={},this.lang=l}setURL(e){this.url=e}getGlyphs(e){return d._(this,void 0,void 0,(function*(){const n=[];for(const g in e)for(const v of e[g])n.push(this._getAndCacheGlyphsPromise(g,v));const l=yield Promise.all(n),h={};for(const{stack:g,id:v,glyph:w}of l)h[g]||(h[g]={}),h[g][v]=w&&{id:w.id,bitmap:w.bitmap.clone(),metrics:w.metrics};return h}))}_getAndCacheGlyphsPromise(e,n){return d._(this,void 0,void 0,(function*(){let l=this.entries[e];l||(l=this.entries[e]={glyphs:{},requests:{},ranges:{}});let h=l.glyphs[n];if(h!==void 0)return{stack:e,id:n,glyph:h};if(h=this._tinySDF(l,e,n),h)return l.glyphs[n]=h,{stack:e,id:n,glyph:h};const g=Math.floor(n/256);if(256*g>65535)throw new Error("glyphs > 65535 not supported");if(l.ranges[g])return{stack:e,id:n,glyph:h};if(!this.url)throw new Error("glyphsUrl is not set");if(!l.requests[g]){const w=Ar.loadGlyphRange(e,g,this.url,this.requestManager);l.requests[g]=w}const v=yield l.requests[g];for(const w in v)this._doesCharSupportLocalGlyph(+w)||(l.glyphs[+w]=v[+w]);return l.ranges[g]=!0,{stack:e,id:n,glyph:v[n]||null}}))}_doesCharSupportLocalGlyph(e){return!!this.localIdeographFontFamily&&(new RegExp("\\p{Ideo}|\\p{sc=Hang}|\\p{sc=Hira}|\\p{sc=Kana}","u").test(String.fromCodePoint(e))||d.u["CJK Unified Ideographs"](e)||d.u["Hangul Syllables"](e)||d.u.Hiragana(e)||d.u.Katakana(e)||d.u["CJK Symbols and Punctuation"](e)||d.u["Halfwidth and Fullwidth Forms"](e))}_tinySDF(e,n,l){const h=this.localIdeographFontFamily;if(!h||!this._doesCharSupportLocalGlyph(l))return;let g=e.tinySDF;if(!g){let w="400";/bold/i.test(n)?w="900":/medium/i.test(n)?w="500":/light/i.test(n)&&(w="200"),g=e.tinySDF=new Ar.TinySDF({fontSize:48,buffer:6,radius:16,cutoff:.25,lang:this.lang,fontFamily:h,fontWeight:w})}const v=g.draw(String.fromCharCode(l));return{id:l,bitmap:new d.q({width:v.width||60,height:v.height||60},v.data),metrics:{width:v.glyphWidth/2||24,height:v.glyphHeight/2||24,left:v.glyphLeft/2+.5||0,top:v.glyphTop/2-27.5||-8,advance:v.glyphAdvance/2||24,isDoubleResolution:!0}}}}Ar.loadGlyphRange=function(p,e,n,l){return d._(this,void 0,void 0,(function*(){const h=256*e,g=h+255,v=l.transformRequest(n.replace("{fontstack}",p).replace("{range}",`${h}-${g}`),"Glyphs"),w=yield d.n(v,new AbortController);if(!w||!w.data)throw new Error(`Could not load glyph range. range: ${e}, ${h}-${g}`);const C={};for(const z of d.o(w.data))C[z.id]=z;return C}))},Ar.TinySDF=class{constructor({fontSize:p=24,buffer:e=3,radius:n=8,cutoff:l=.25,fontFamily:h="sans-serif",fontWeight:g="normal",fontStyle:v="normal",lang:w=null}={}){this.buffer=e,this.cutoff=l,this.radius=n,this.lang=w;const C=this.size=p+4*e,z=this._createCanvas(C),k=this.ctx=z.getContext("2d",{willReadFrequently:!0});k.font=`${v} ${g} ${p}px ${h}`,k.textBaseline="alphabetic",k.textAlign="left",k.fillStyle="black",this.gridOuter=new Float64Array(C*C),this.gridInner=new Float64Array(C*C),this.f=new Float64Array(C),this.z=new Float64Array(C+1),this.v=new Uint16Array(C)}_createCanvas(p){const e=document.createElement("canvas");return e.width=e.height=p,e}draw(p){const{width:e,actualBoundingBoxAscent:n,actualBoundingBoxDescent:l,actualBoundingBoxLeft:h,actualBoundingBoxRight:g}=this.ctx.measureText(p),v=Math.ceil(n),w=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(g-h))),C=Math.min(this.size-this.buffer,v+Math.ceil(l)),z=w+2*this.buffer,k=C+2*this.buffer,O=Math.max(z*k,0),I=new Uint8ClampedArray(O),F={data:I,width:z,height:k,glyphWidth:w,glyphHeight:C,glyphTop:v,glyphLeft:0,glyphAdvance:e};if(w===0||C===0)return F;const{ctx:H,buffer:K,gridInner:W,gridOuter:J}=this;this.lang&&(H.lang=this.lang),H.clearRect(K,K,w,C),H.fillText(p,K,K+v);const ie=H.getImageData(K,K,w,C);J.fill(Gi,0,O),W.fill(0,0,O);for(let oe=0;oe<C;oe++)for(let te=0;te<w;te++){const le=ie.data[4*(oe*w+te)+3]/255;if(le===0)continue;const ue=(oe+K)*z+te+K;if(le===1)J[ue]=0,W[ue]=Gi;else{const ae=.5-le;J[ue]=ae>0?ae*ae:0,W[ue]=ae<0?ae*ae:0}}Jn(J,0,0,z,k,z,this.f,this.v,this.z),Jn(W,K,K,w,C,z,this.f,this.v,this.z);for(let oe=0;oe<O;oe++){const te=Math.sqrt(J[oe])-Math.sqrt(W[oe]);I[oe]=Math.round(255-255*(te/this.radius+this.cutoff))}return F}};class je{constructor(){this.specification=d.v.light.position}possiblyEvaluate(e,n){return d.B(e.expression.evaluate(n))}interpolate(e,n,l){return{x:d.C.number(e.x,n.x,l),y:d.C.number(e.y,n.y,l),z:d.C.number(e.z,n.z,l)}}}let nt;class zt extends d.E{constructor(e){super(),nt=nt||new d.r({anchor:new d.D(d.v.light.anchor),position:new je,color:new d.D(d.v.light.color),intensity:new d.D(d.v.light.intensity)}),this._transitionable=new d.t(nt,void 0),this.setLight(e),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(e,n={}){if(!this._validate(d.x,e,n))for(const l in e){const h=e[l];l.endsWith("-transition")?this._transitionable.setTransition(l.slice(0,-11),h):this._transitionable.setValue(l,h)}}updateTransitions(e){this._transitioning=this._transitionable.transitioned(e,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(e){this.properties=this._transitioning.possiblyEvaluate(e)}_validate(e,n,l){return(!l||l.validate!==!1)&&d.y(this,e.call(d.z,{value:n,style:{glyphs:!0,sprite:!0},styleSpec:d.v}))}}const wt=new d.r({"sky-color":new d.D(d.v.sky["sky-color"]),"horizon-color":new d.D(d.v.sky["horizon-color"]),"fog-color":new d.D(d.v.sky["fog-color"]),"fog-ground-blend":new d.D(d.v.sky["fog-ground-blend"]),"horizon-fog-blend":new d.D(d.v.sky["horizon-fog-blend"]),"sky-horizon-blend":new d.D(d.v.sky["sky-horizon-blend"]),"atmosphere-blend":new d.D(d.v.sky["atmosphere-blend"])});class vi extends d.E{constructor(e){super(),this._transitionable=new d.t(wt,void 0),this.setSky(e),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new d.F(0))}setSky(e,n={}){if(!this._validate(d.G,e,n)){e||(e={"sky-color":"transparent","horizon-color":"transparent","fog-color":"transparent","fog-ground-blend":1,"atmosphere-blend":0});for(const l in e){const h=e[l];l.endsWith("-transition")?this._transitionable.setTransition(l.slice(0,-11),h):this._transitionable.setValue(l,h)}}}getSky(){return this._transitionable.serialize()}updateTransitions(e){this._transitioning=this._transitionable.transitioned(e,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(e){this.properties=this._transitioning.possiblyEvaluate(e)}_validate(e,n,l={}){return l?.validate!==!1&&d.y(this,e.call(d.z,d.e({value:n,style:{glyphs:!0,sprite:!0},styleSpec:d.v})))}calculateFogBlendOpacity(e){return e<60?0:e<70?(e-60)/10:1}}class me{constructor(e,n){this.width=e,this.height=n,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(e,n){const l=e.join(",")+String(n);return this.dashEntry[l]||(this.dashEntry[l]=this.addDash(e,n)),this.dashEntry[l]}getDashRanges(e,n,l){const h=[];let g=e.length%2==1?-e[e.length-1]*l:0,v=e[0]*l,w=!0;h.push({left:g,right:v,isDash:w,zeroLength:e[0]===0});let C=e[0];for(let z=1;z<e.length;z++){w=!w;const k=e[z];g=C*l,C+=k,v=C*l,h.push({left:g,right:v,isDash:w,zeroLength:k===0})}return h}addRoundDash(e,n,l){const h=n/2;for(let g=-l;g<=l;g++){const v=this.width*(this.nextRow+l+g);let w=0,C=e[w];for(let z=0;z<this.width;z++){z/C.right>1&&(C=e[++w]);const k=Math.abs(z-C.left),O=Math.abs(z-C.right),I=Math.min(k,O);let F;const H=g/l*(h+1);if(C.isDash){const K=h-Math.abs(H);F=Math.sqrt(I*I+K*K)}else F=h-Math.sqrt(I*I+H*H);this.data[v+z]=Math.max(0,Math.min(255,F+128))}}}addRegularDash(e){for(let w=e.length-1;w>=0;--w){const C=e[w],z=e[w+1];C.zeroLength?e.splice(w,1):z&&z.isDash===C.isDash&&(z.left=C.left,e.splice(w,1))}const n=e[0],l=e[e.length-1];n.isDash===l.isDash&&(n.left=l.left-this.width,l.right=n.right+this.width);const h=this.width*this.nextRow;let g=0,v=e[g];for(let w=0;w<this.width;w++){w/v.right>1&&(v=e[++g]);const C=Math.abs(w-v.left),z=Math.abs(w-v.right),k=Math.min(C,z);this.data[h+w]=Math.max(0,Math.min(255,(v.isDash?k:-k)+128))}}addDash(e,n){const l=n?7:0,h=2*l+1;if(this.nextRow+h>this.height)return d.w("LineAtlas out of space"),null;let g=0;for(let w=0;w<e.length;w++)g+=e[w];if(g!==0){const w=this.width/g,C=this.getDashRanges(e,this.width,w);n?this.addRoundDash(C,w,l):this.addRegularDash(C)}const v={y:this.nextRow+l,height:2*l,width:g};return this.nextRow+=h,this.dirty=!0,v}bind(e){const n=e.gl;this.texture?(n.bindTexture(n.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,n.texSubImage2D(n.TEXTURE_2D,0,0,0,this.width,this.height,n.ALPHA,n.UNSIGNED_BYTE,this.data))):(this.texture=n.createTexture(),n.bindTexture(n.TEXTURE_2D,this.texture),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.REPEAT),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.REPEAT),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.LINEAR),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,n.LINEAR),n.texImage2D(n.TEXTURE_2D,0,n.ALPHA,this.width,this.height,0,n.ALPHA,n.UNSIGNED_BYTE,this.data))}}const Ue="maplibre_preloaded_worker_pool";class at{constructor(){this.active={}}acquire(e){if(!this.workers)for(this.workers=[];this.workers.length<at.workerCount;)this.workers.push(new Worker(d.a.WORKER_URL));return this.active[e]=!0,this.workers.slice()}release(e){delete this.active[e],this.numActive()===0&&(this.workers.forEach((n=>{n.terminate()})),this.workers=null)}isPreloaded(){return!!this.active[Ue]}numActive(){return Object.keys(this.active).length}}const ft=Math.floor(xt.hardwareConcurrency/2);let Dt,Et;function si(){return Dt||(Dt=new at),Dt}at.workerCount=d.H(globalThis)?Math.max(Math.min(ft,3),1):1;class Oi{constructor(e,n){this.workerPool=e,this.actors=[],this.currentActor=0,this.id=n;const l=this.workerPool.acquire(n);for(let h=0;h<l.length;h++){const g=new d.J(l[h],n);g.name=`Worker ${h}`,this.actors.push(g)}if(!this.actors.length)throw new Error("No actors found")}broadcast(e,n){const l=[];for(const h of this.actors)l.push(h.sendAsync({type:e,data:n}));return Promise.all(l)}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(e=!0){this.actors.forEach((n=>{n.remove()})),this.actors=[],e&&this.workerPool.release(this.id)}registerMessageHandler(e,n){for(const l of this.actors)l.registerMessageHandler(e,n)}}function mi(){return Et||(Et=new Oi(si(),d.K),Et.registerMessageHandler("GR",((p,e,n)=>d.m(e,n)))),Et}function bo(p,e){const n=d.L();return d.M(n,n,[1,1,0]),d.N(n,n,[.5*p.width,.5*p.height,1]),p.calculatePosMatrix?d.O(n,n,p.calculatePosMatrix(e.toUnwrapped())):n}function es(p,e,n,l,h,g,v){var w;const C=(function(I,F,H){if(I)for(const K of I){const W=F[K];if(W&&W.source===H&&W.type==="fill-extrusion")return!0}else for(const K in F){const W=F[K];if(W.source===H&&W.type==="fill-extrusion")return!0}return!1})((w=h?.layers)!==null&&w!==void 0?w:null,e,p.id),z=g.maxPitchScaleFactor(),k=p.tilesIn(l,z,C);k.sort(ya);const O=[];for(const I of k)O.push({wrappedTileID:I.tileID.wrapped().key,queryResults:I.tile.queryRenderedFeatures(e,n,p._state,I.queryGeometry,I.cameraQueryGeometry,I.scale,h,g,z,bo(p.transform,I.tileID),v?(F,H)=>v(I.tileID,F,H):void 0)});return(function(I,F){for(const H in I)for(const K of I[H])ts(K,F);return I})((function(I){const F={},H={};for(const K of I){const W=K.queryResults,J=K.wrappedTileID,ie=H[J]=H[J]||{};for(const oe in W){const te=W[oe],le=ie[oe]=ie[oe]||{},ue=F[oe]=F[oe]||[];for(const ae of te)le[ae.featureIndex]||(le[ae.featureIndex]=!0,ue.push(ae))}}return F})(O),p)}function ya(p,e){const n=p.tileID,l=e.tileID;return n.overscaledZ-l.overscaledZ||n.canonical.y-l.canonical.y||n.wrap-l.wrap||n.canonical.x-l.canonical.x}function ts(p,e){const n=p.feature,l=e.getFeatureState(n.layer["source-layer"],n.id);n.source=n.layer.source,n.layer["source-layer"]&&(n.sourceLayer=n.layer["source-layer"]),n.state=l}function ji(p,e,n){return d._(this,void 0,void 0,(function*(){let l=p;if(p.url?l=(yield d.j(e.transformRequest(p.url,"Source"),n)).data:yield xt.frameAsync(n),!l)return null;const h=d.Q(d.e(l,p),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);return"vector_layers"in l&&l.vector_layers&&(h.vectorLayerIds=l.vector_layers.map((g=>g.id))),h}))}class Di{constructor(e,n){e&&(n?this.setSouthWest(e).setNorthEast(n):Array.isArray(e)&&(e.length===4?this.setSouthWest([e[0],e[1]]).setNorthEast([e[2],e[3]]):this.setSouthWest(e[0]).setNorthEast(e[1])))}setNorthEast(e){return this._ne=e instanceof d.S?new d.S(e.lng,e.lat):d.S.convert(e),this}setSouthWest(e){return this._sw=e instanceof d.S?new d.S(e.lng,e.lat):d.S.convert(e),this}extend(e){const n=this._sw,l=this._ne;let h,g;if(e instanceof d.S)h=e,g=e;else{if(!(e instanceof Di))return Array.isArray(e)?e.length===4||e.every(Array.isArray)?this.extend(Di.convert(e)):this.extend(d.S.convert(e)):e&&("lng"in e||"lon"in e)&&"lat"in e?this.extend(d.S.convert(e)):this;if(h=e._sw,g=e._ne,!h||!g)return this}return n||l?(n.lng=Math.min(h.lng,n.lng),n.lat=Math.min(h.lat,n.lat),l.lng=Math.max(g.lng,l.lng),l.lat=Math.max(g.lat,l.lat)):(this._sw=new d.S(h.lng,h.lat),this._ne=new d.S(g.lng,g.lat)),this}getCenter(){return new d.S((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new d.S(this.getWest(),this.getNorth())}getSouthEast(){return new d.S(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(e){const{lng:n,lat:l}=d.S.convert(e);let h=this._sw.lng<=n&&n<=this._ne.lng;return this._sw.lng>this._ne.lng&&(h=this._sw.lng>=n&&n>=this._ne.lng),this._sw.lat<=l&&l<=this._ne.lat&&h}static convert(e){return e instanceof Di?e:e&&new Di(e)}static fromLngLat(e,n=0){const l=360*n/40075017,h=l/Math.cos(Math.PI/180*e.lat);return new Di(new d.S(e.lng-h,e.lat-l),new d.S(e.lng+h,e.lat+l))}adjustAntiMeridian(){const e=new d.S(this._sw.lng,this._sw.lat),n=new d.S(this._ne.lng,this._ne.lat);return new Di(e,e.lng>n.lng?new d.S(n.lng+360,n.lat):n)}}class An{constructor(e,n,l){this.bounds=Di.convert(this.validateBounds(e)),this.minzoom=n||0,this.maxzoom=l||24}validateBounds(e){return Array.isArray(e)&&e.length===4?[Math.max(-180,e[0]),Math.max(-90,e[1]),Math.min(180,e[2]),Math.min(90,e[3])]:[-180,-90,180,90]}contains(e){const n=Math.pow(2,e.z),l=Math.floor(d.V(this.bounds.getWest())*n),h=Math.floor(d.U(this.bounds.getNorth())*n),g=Math.ceil(d.V(this.bounds.getEast())*n),v=Math.ceil(d.U(this.bounds.getSouth())*n);return e.x>=l&&e.x<g&&e.y>=h&&e.y<v}}class Vs extends d.E{constructor(e,n,l,h){if(super(),this.id=e,this.dispatcher=l,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,d.e(this,d.Q(n,["url","scheme","tileSize","promoteId"])),this._options=d.e({type:"vector"},n),this._collectResourceTiming=n.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(h)}load(){return d._(this,void 0,void 0,(function*(){this._loaded=!1,this.fire(new d.l("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const e=yield ji(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),e&&(d.e(this,e),e.bounds&&(this.tileBounds=new An(e.bounds,this.minzoom,this.maxzoom)),this.fire(new d.l("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new d.l("data",{dataType:"source",sourceDataType:"content"})))}catch(e){this._tileJSONRequest=null,this._loaded=!0,this.fire(new d.k(e))}}))}loaded(){return this._loaded}hasTile(e){return!this.tileBounds||this.tileBounds.contains(e.canonical)}onAdd(e){this.map=e,this.load()}setSourceProperty(e){this._tileJSONRequest&&this._tileJSONRequest.abort(),e(),this.load()}setTiles(e){return this.setSourceProperty((()=>{this._options.tiles=e})),this}setUrl(e){return this.setSourceProperty((()=>{this.url=e,this._options.url=e})),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}serialize(){return d.e({},this._options)}loadTile(e){return d._(this,void 0,void 0,(function*(){const n=e.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),l={request:this.map._requestManager.transformRequest(n,"Tile"),uid:e.uid,tileID:e.tileID,zoom:e.tileID.overscaledZ,tileSize:this.tileSize*e.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,subdivisionGranularity:this.map.style.projection.subdivisionGranularity};l.request.collectResourceTiming=this._collectResourceTiming;let h="RT";if(e.actor&&e.state!=="expired"){if(e.state==="loading")return new Promise(((g,v)=>{e.reloadPromise={resolve:g,reject:v}}))}else e.actor=this.dispatcher.getActor(),h="LT";e.abortController=new AbortController;try{const g=yield e.actor.sendAsync({type:h,data:l},e.abortController);if(delete e.abortController,e.aborted)return;this._afterTileLoadWorkerResponse(e,g)}catch(g){if(delete e.abortController,e.aborted)return;if(g&&g.status!==404)throw g;this._afterTileLoadWorkerResponse(e,null)}}))}_afterTileLoadWorkerResponse(e,n){if(n&&n.resourceTiming&&(e.resourceTiming=n.resourceTiming),n&&this.map._refreshExpiredTiles&&e.setExpiryData(n),e.loadVectorData(n,this.map.painter),e.reloadPromise){const l=e.reloadPromise;e.reloadPromise=null,this.loadTile(e).then(l.resolve).catch(l.reject)}}abortTile(e){return d._(this,void 0,void 0,(function*(){e.abortController&&(e.abortController.abort(),delete e.abortController),e.actor&&(yield e.actor.sendAsync({type:"AT",data:{uid:e.uid,type:this.type,source:this.id}}))}))}unloadTile(e){return d._(this,void 0,void 0,(function*(){e.unloadVectorData(),e.actor&&(yield e.actor.sendAsync({type:"RMT",data:{uid:e.uid,type:this.type,source:this.id}}))}))}hasTransition(){return!1}}class xo extends d.E{constructor(e,n,l,h){super(),this.id=e,this.dispatcher=l,this.setEventedParent(h),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=d.e({type:"raster"},n),d.e(this,d.Q(n,["url","scheme","tileSize"]))}load(){return d._(this,arguments,void 0,(function*(e=!1){this._loaded=!1,this.fire(new d.l("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const n=yield ji(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,n&&(d.e(this,n),n.bounds&&(this.tileBounds=new An(n.bounds,this.minzoom,this.maxzoom)),this.fire(new d.l("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new d.l("data",{dataType:"source",sourceDataType:"content",sourceDataChanged:e})))}catch(n){this._tileJSONRequest=null,this._loaded=!0,this.fire(new d.k(n))}}))}loaded(){return this._loaded}onAdd(e){this.map=e,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}setSourceProperty(e){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null),e(),this.load(!0)}setTiles(e){return this.setSourceProperty((()=>{this._options.tiles=e})),this}setUrl(e){return this.setSourceProperty((()=>{this.url=e,this._options.url=e})),this}serialize(){return d.e({},this._options)}hasTile(e){return!this.tileBounds||this.tileBounds.contains(e.canonical)}loadTile(e){return d._(this,void 0,void 0,(function*(){const n=e.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);e.abortController=new AbortController;try{const l=yield ki.getImage(this.map._requestManager.transformRequest(n,"Tile"),e.abortController,this.map._refreshExpiredTiles);if(delete e.abortController,e.aborted)return void(e.state="unloaded");if(l&&l.data){this.map._refreshExpiredTiles&&(l.cacheControl||l.expires)&&e.setExpiryData({cacheControl:l.cacheControl,expires:l.expires});const h=this.map.painter.context,g=h.gl,v=l.data;e.texture=this.map.painter.getTileTexture(v.width),e.texture?e.texture.update(v,{useMipmap:!0}):(e.texture=new d.T(h,v,g.RGBA,{useMipmap:!0}),e.texture.bind(g.LINEAR,g.CLAMP_TO_EDGE,g.LINEAR_MIPMAP_NEAREST)),e.state="loaded"}}catch(l){if(delete e.abortController,e.aborted)e.state="unloaded";else if(l)throw e.state="errored",l}}))}abortTile(e){return d._(this,void 0,void 0,(function*(){e.abortController&&(e.abortController.abort(),delete e.abortController)}))}unloadTile(e){return d._(this,void 0,void 0,(function*(){e.texture&&this.map.painter.saveTileTexture(e.texture)}))}hasTransition(){return!1}}class En extends xo{constructor(e,n,l,h){super(e,n,l,h),this.type="raster-dem",this.maxzoom=22,this._options=d.e({type:"raster-dem"},n),this.encoding=n.encoding||"mapbox",this.redFactor=n.redFactor,this.greenFactor=n.greenFactor,this.blueFactor=n.blueFactor,this.baseShift=n.baseShift}loadTile(e){return d._(this,void 0,void 0,(function*(){const n=e.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),l=this.map._requestManager.transformRequest(n,"Tile");e.neighboringTiles=this._getNeighboringTiles(e.tileID),e.abortController=new AbortController;try{const h=yield ki.getImage(l,e.abortController,this.map._refreshExpiredTiles);if(delete e.abortController,e.aborted)return void(e.state="unloaded");if(h&&h.data){const g=h.data;this.map._refreshExpiredTiles&&(h.cacheControl||h.expires)&&e.setExpiryData({cacheControl:h.cacheControl,expires:h.expires});const v=d.b(g)&&d.W()?g:yield this.readImageNow(g),w={type:this.type,uid:e.uid,source:this.id,rawImageData:v,encoding:this.encoding,redFactor:this.redFactor,greenFactor:this.greenFactor,blueFactor:this.blueFactor,baseShift:this.baseShift};if(!e.actor||e.state==="expired"){e.actor=this.dispatcher.getActor();const C=yield e.actor.sendAsync({type:"LDT",data:w});e.dem=C,e.needsHillshadePrepare=!0,e.needsTerrainPrepare=!0,e.state="loaded"}}}catch(h){if(delete e.abortController,e.aborted)e.state="unloaded";else if(h)throw e.state="errored",h}}))}readImageNow(e){return d._(this,void 0,void 0,(function*(){if(typeof VideoFrame<"u"&&d.X()){const n=e.width+2,l=e.height+2;try{return new d.R({width:n,height:l},yield d.Y(e,-1,-1,n,l))}catch{}}return xt.getImageData(e,1)}))}_getNeighboringTiles(e){const n=e.canonical,l=Math.pow(2,n.z),h=(n.x-1+l)%l,g=n.x===0?e.wrap-1:e.wrap,v=(n.x+1+l)%l,w=n.x+1===l?e.wrap+1:e.wrap,C={};return C[new d.Z(e.overscaledZ,g,n.z,h,n.y).key]={backfilled:!1},C[new d.Z(e.overscaledZ,w,n.z,v,n.y).key]={backfilled:!1},n.y>0&&(C[new d.Z(e.overscaledZ,g,n.z,h,n.y-1).key]={backfilled:!1},C[new d.Z(e.overscaledZ,e.wrap,n.z,n.x,n.y-1).key]={backfilled:!1},C[new d.Z(e.overscaledZ,w,n.z,v,n.y-1).key]={backfilled:!1}),n.y+1<l&&(C[new d.Z(e.overscaledZ,g,n.z,h,n.y+1).key]={backfilled:!1},C[new d.Z(e.overscaledZ,e.wrap,n.z,n.x,n.y+1).key]={backfilled:!1},C[new d.Z(e.overscaledZ,w,n.z,v,n.y+1).key]={backfilled:!1}),C}unloadTile(e){return d._(this,void 0,void 0,(function*(){e.demTexture&&this.map.painter.saveTileTexture(e.demTexture),e.fbo&&(e.fbo.destroy(),delete e.fbo),e.dem&&delete e.dem,delete e.neighboringTiles,e.state="unloaded",e.actor&&(yield e.actor.sendAsync({type:"RDT",data:{type:this.type,uid:e.uid,source:this.id}}))}))}}class is extends d.E{constructor(e,n,l,h){super(),this.id=e,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._isUpdatingWorker=!1,this._pendingWorkerUpdate={data:n.data},this.actor=l.getActor(),this.setEventedParent(h),this._data=n.data,this._options=d.e({},n),this._collectResourceTiming=n.collectResourceTiming,n.maxzoom!==void 0&&(this.maxzoom=n.maxzoom),n.type&&(this.type=n.type),n.attribution&&(this.attribution=n.attribution),this.promoteId=n.promoteId,n.clusterMaxZoom!==void 0&&this.maxzoom<=n.clusterMaxZoom&&d.w(`The maxzoom value "${this.maxzoom}" is expected to be greater than the clusterMaxZoom value "${n.clusterMaxZoom}".`),this.workerOptions=d.e({source:this.id,cluster:n.cluster||!1,geojsonVtOptions:{buffer:this._pixelsToTileUnits(n.buffer!==void 0?n.buffer:128),tolerance:this._pixelsToTileUnits(n.tolerance!==void 0?n.tolerance:.375),extent:d.$,maxZoom:this.maxzoom,lineMetrics:n.lineMetrics||!1,generateId:n.generateId||!1},superclusterOptions:{maxZoom:this._getClusterMaxZoom(n.clusterMaxZoom),minPoints:Math.max(2,n.clusterMinPoints||2),extent:d.$,radius:this._pixelsToTileUnits(n.clusterRadius||50),log:!1,generateId:n.generateId||!1},clusterProperties:n.clusterProperties,filter:n.filter},n.workerOptions),typeof this.promoteId=="string"&&(this.workerOptions.promoteId=this.promoteId)}_hasPendingWorkerUpdate(){return this._pendingWorkerUpdate.data!==void 0||this._pendingWorkerUpdate.diff!==void 0||this._pendingWorkerUpdate.optionsChanged}_pixelsToTileUnits(e){return e*(d.$/this.tileSize)}_getClusterMaxZoom(e){const n=e?Math.round(e):this.maxzoom-1;return Number.isInteger(e)||e===void 0||d.w(`Integer expected for option 'clusterMaxZoom': provided value "${e}" rounded to "${n}"`),n}load(){return d._(this,void 0,void 0,(function*(){yield this._updateWorkerData()}))}onAdd(e){this.map=e,this.load()}setData(e){return this._data=e,this._pendingWorkerUpdate={data:e},this._updateWorkerData(),this}updateData(e){return this._pendingWorkerUpdate.diff=d.a0(this._pendingWorkerUpdate.diff,e),this._updateWorkerData(),this}getData(){return d._(this,void 0,void 0,(function*(){const e=d.e({type:this.type},this.workerOptions);return this.actor.sendAsync({type:"GD",data:e})}))}getCoordinatesFromGeometry(e){return e.type==="GeometryCollection"?e.geometries.map((n=>n.coordinates)).flat(1/0):e.coordinates.flat(1/0)}getBounds(){return d._(this,void 0,void 0,(function*(){const e=new Di,n=yield this.getData();let l;switch(n.type){case"FeatureCollection":l=n.features.map((h=>this.getCoordinatesFromGeometry(h.geometry))).flat(1/0);break;case"Feature":l=this.getCoordinatesFromGeometry(n.geometry);break;default:l=this.getCoordinatesFromGeometry(n)}if(l.length==0)return e;for(let h=0;h<l.length-1;h+=2)e.extend([l[h],l[h+1]]);return e}))}setClusterOptions(e){return this.workerOptions.cluster=e.cluster,e.clusterRadius!==void 0&&(this.workerOptions.superclusterOptions.radius=this._pixelsToTileUnits(e.clusterRadius)),e.clusterMaxZoom!==void 0&&(this.workerOptions.superclusterOptions.maxZoom=this._getClusterMaxZoom(e.clusterMaxZoom)),this._pendingWorkerUpdate.optionsChanged=!0,this._updateWorkerData(),this}getClusterExpansionZoom(e){return this.actor.sendAsync({type:"GCEZ",data:{type:this.type,clusterId:e,source:this.id}})}getClusterChildren(e){return this.actor.sendAsync({type:"GCC",data:{type:this.type,clusterId:e,source:this.id}})}getClusterLeaves(e,n,l){return this.actor.sendAsync({type:"GCL",data:{type:this.type,source:this.id,clusterId:e,limit:n,offset:l}})}_updateWorkerData(){return d._(this,void 0,void 0,(function*(){if(this._isUpdatingWorker)return;if(!this._hasPendingWorkerUpdate())return void d.w(`No pending worker updates for GeoJSONSource ${this.id}.`);const{data:e,diff:n}=this._pendingWorkerUpdate,l=d.e({type:this.type},this.workerOptions);e?(typeof e=="string"?(l.request=this.map._requestManager.transformRequest(xt.resolveURL(e),"Source"),l.request.collectResourceTiming=this._collectResourceTiming):l.data=JSON.stringify(e),this._pendingWorkerUpdate.data=void 0):n&&(l.dataDiff=n,this._pendingWorkerUpdate.diff=void 0),this._pendingWorkerUpdate.optionsChanged=void 0,this._isUpdatingWorker=!0,this.fire(new d.l("dataloading",{dataType:"source"}));try{const h=yield this.actor.sendAsync({type:"LD",data:l});if(this._isUpdatingWorker=!1,this._removed||h.abandoned)return void this.fire(new d.l("dataabort",{dataType:"source"}));this._data=h.data;let g=null;h.resourceTiming&&h.resourceTiming[this.id]&&(g=h.resourceTiming[this.id].slice(0));const v={dataType:"source"};this._collectResourceTiming&&g&&g.length>0&&d.e(v,{resourceTiming:g}),this.fire(new d.l("data",Object.assign(Object.assign({},v),{sourceDataType:"metadata"}))),this.fire(new d.l("data",Object.assign(Object.assign({},v),{sourceDataType:"content"})))}catch(h){if(this._isUpdatingWorker=!1,this._removed)return void this.fire(new d.l("dataabort",{dataType:"source"}));this.fire(new d.k(h))}finally{this._hasPendingWorkerUpdate()&&this._updateWorkerData()}}))}loaded(){return!this._isUpdatingWorker&&!this._hasPendingWorkerUpdate()}loadTile(e){return d._(this,void 0,void 0,(function*(){const n=e.actor?"RT":"LT";e.actor=this.actor;const l={type:this.type,uid:e.uid,tileID:e.tileID,zoom:e.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,subdivisionGranularity:this.map.style.projection.subdivisionGranularity};e.abortController=new AbortController;const h=yield this.actor.sendAsync({type:n,data:l},e.abortController);delete e.abortController,e.unloadVectorData(),e.aborted||e.loadVectorData(h,this.map.painter,n==="RT")}))}abortTile(e){return d._(this,void 0,void 0,(function*(){e.abortController&&(e.abortController.abort(),delete e.abortController),e.aborted=!0}))}unloadTile(e){return d._(this,void 0,void 0,(function*(){e.unloadVectorData(),yield this.actor.sendAsync({type:"RMT",data:{uid:e.uid,type:this.type,source:this.id}})}))}onRemove(){this._removed=!0,this.actor.sendAsync({type:"RS",data:{type:this.type,source:this.id}})}serialize(){return d.e({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}}class zn extends d.E{constructor(e,n,l,h){super(),this.flippedWindingOrder=!1,this.id=e,this.dispatcher=l,this.coordinates=n.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(h),this.options=n}load(e){return d._(this,void 0,void 0,(function*(){this._loaded=!1,this.fire(new d.l("dataloading",{dataType:"source"})),this.url=this.options.url,this._request=new AbortController;try{const n=yield ki.getImage(this.map._requestManager.transformRequest(this.url,"Image"),this._request);this._request=null,this._loaded=!0,n&&n.data&&(this.image=n.data,e&&(this.coordinates=e),this._finishLoading())}catch(n){this._request=null,this._loaded=!0,this.fire(new d.k(n))}}))}loaded(){return this._loaded}updateImage(e){return e.url?(this._request&&(this._request.abort(),this._request=null),this.options.url=e.url,this.load(e.coordinates).finally((()=>{this.texture=null})),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new d.l("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(e){this.map=e,this.load()}onRemove(){this._request&&(this._request.abort(),this._request=null)}setCoordinates(e){this.coordinates=e;const n=e.map(d.a1.fromLngLat);var l;return this.tileID=(function(h){const g=d.a2.fromPoints(h),v=g.width(),w=g.height(),C=Math.max(v,w),z=Math.max(0,Math.floor(-Math.log(C)/Math.LN2)),k=Math.pow(2,z);return new d.a4(z,Math.floor((g.minX+g.maxX)/2*k),Math.floor((g.minY+g.maxY)/2*k))})(n),this.terrainTileRanges=this._getOverlappingTileRanges(n),this.minzoom=this.maxzoom=this.tileID.z,this.tileCoords=n.map((h=>this.tileID.getTilePoint(h)._round())),this.flippedWindingOrder=((l=this.tileCoords)[1].x-l[0].x)*(l[2].y-l[0].y)-(l[1].y-l[0].y)*(l[2].x-l[0].x)<0,this.fire(new d.l("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;const e=this.map.painter.context,n=e.gl;this.texture||(this.texture=new d.T(e,this.image,n.RGBA),this.texture.bind(n.LINEAR,n.CLAMP_TO_EDGE));let l=!1;for(const h in this.tiles){const g=this.tiles[h];g.state!=="loaded"&&(g.state="loaded",g.texture=this.texture,l=!0)}l&&this.fire(new d.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}loadTile(e){return d._(this,void 0,void 0,(function*(){this.tileID&&this.tileID.equals(e.tileID.canonical)?(this.tiles[String(e.tileID.wrap)]=e,e.buckets={}):e.state="errored"}))}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}_getOverlappingTileRanges(e){const{minX:n,minY:l,maxX:h,maxY:g}=d.a2.fromPoints(e),v={};for(let w=0;w<=d.a3;w++){const C=Math.pow(2,w),z=Math.floor(n*C),k=Math.floor(l*C),O=Math.floor(h*C),I=Math.floor(g*C);v[w]={minTileX:z,minTileY:k,maxTileX:O,maxTileY:I}}return v}}class rs extends zn{constructor(e,n,l,h){super(e,n,l,h),this.roundZoom=!0,this.type="video",this.options=n}load(){return d._(this,void 0,void 0,(function*(){this._loaded=!1;const e=this.options;this.urls=[];for(const n of e.urls)this.urls.push(this.map._requestManager.transformRequest(n,"Source").url);try{const n=yield d.a5(this.urls);if(this._loaded=!0,!n)return;this.video=n,this.video.loop=!0,this.video.addEventListener("playing",(()=>{this.map.triggerRepaint()})),this.map&&this.video.play(),this._finishLoading()}catch(n){this.fire(new d.k(n))}}))}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(e){if(this.video){const n=this.video.seekable;e<n.start(0)||e>n.end(0)?this.fire(new d.k(new d.a6(`sources.${this.id}`,null,`Playback for this video can be set only between the ${n.start(0)} and ${n.end(0)}-second mark.`))):this.video.currentTime=e}}getVideo(){return this.video}onAdd(e){this.map||(this.map=e,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const e=this.map.painter.context,n=e.gl;this.texture?this.video.paused||(this.texture.bind(n.LINEAR,n.CLAMP_TO_EDGE),n.texSubImage2D(n.TEXTURE_2D,0,0,0,n.RGBA,n.UNSIGNED_BYTE,this.video)):(this.texture=new d.T(e,this.video,n.RGBA),this.texture.bind(n.LINEAR,n.CLAMP_TO_EDGE));let l=!1;for(const h in this.tiles){const g=this.tiles[h];g.state!=="loaded"&&(g.state="loaded",g.texture=this.texture,l=!0)}l&&this.fire(new d.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}}class eo extends zn{constructor(e,n,l,h){super(e,n,l,h),n.coordinates?Array.isArray(n.coordinates)&&n.coordinates.length===4&&!n.coordinates.some((g=>!Array.isArray(g)||g.length!==2||g.some((v=>typeof v!="number"))))||this.fire(new d.k(new d.a6(`sources.${e}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new d.k(new d.a6(`sources.${e}`,null,'missing required property "coordinates"'))),n.animate&&typeof n.animate!="boolean"&&this.fire(new d.k(new d.a6(`sources.${e}`,null,'optional "animate" property must be a boolean value'))),n.canvas?typeof n.canvas=="string"||n.canvas instanceof HTMLCanvasElement||this.fire(new d.k(new d.a6(`sources.${e}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new d.k(new d.a6(`sources.${e}`,null,'missing required property "canvas"'))),this.options=n,this.animate=n.animate===void 0||n.animate}load(){return d._(this,void 0,void 0,(function*(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new d.k(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}))}getCanvas(){return this.canvas}onAdd(e){this.map=e,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let e=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,e=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,e=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const n=this.map.painter.context,l=n.gl;this.texture?(e||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new d.T(n,this.canvas,l.RGBA,{premultiply:!0});let h=!1;for(const g in this.tiles){const v=this.tiles[g];v.state!=="loaded"&&(v.state="loaded",v.texture=this.texture,h=!0)}h&&this.fire(new d.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const e of[this.canvas.width,this.canvas.height])if(isNaN(e)||e<=0)return!0;return!1}}const Zr={},Tl=p=>{switch(p){case"geojson":return is;case"image":return zn;case"raster":return xo;case"raster-dem":return En;case"vector":return Vs;case"video":return rs;case"canvas":return eo}return Zr[p]},Na="RTLPluginLoaded";class pc extends d.E{constructor(){super(...arguments),this.status="unavailable",this.url=null,this.dispatcher=mi()}_syncState(e){return this.status=e,this.dispatcher.broadcast("SRPS",{pluginStatus:e,pluginURL:this.url}).catch((n=>{throw this.status="error",n}))}getRTLTextPluginStatus(){return this.status}clearRTLTextPlugin(){this.status="unavailable",this.url=null}setRTLTextPlugin(e){return d._(this,arguments,void 0,(function*(n,l=!1){if(this.url)throw new Error("setRTLTextPlugin cannot be called multiple times.");if(this.url=xt.resolveURL(n),!this.url)throw new Error(`requested url ${n} is invalid`);if(this.status==="unavailable"){if(!l)return this._requestImport();this.status="deferred",this._syncState(this.status)}else if(this.status==="requested")return this._requestImport()}))}_requestImport(){return d._(this,void 0,void 0,(function*(){yield this._syncState("loading"),this.status="loaded",this.fire(new d.l(Na))}))}lazyLoad(){this.status==="unavailable"?this.status="requested":this.status==="deferred"&&this._requestImport()}}let wo=null;function Co(){return wo||(wo=new pc),wo}var pe,U;(function(p){p[p.Base=0]="Base",p[p.Parent=1]="Parent"})(pe||(pe={})),(function(p){p[p.Departing=0]="Departing",p[p.Incoming=1]="Incoming"})(U||(U={}));class Z{constructor(e,n){this.timeAdded=0,this.fadeEndTime=0,this.fadeOpacity=1,this.tileID=e,this.uid=d.a7(),this.uses=0,this.tileSize=n,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.rtt=[],this.rttCoords={},this.expiredRequestCount=0,this.state="loading"}isRenderable(e){return this.hasData()&&(!this.fadeEndTime||this.fadeOpacity>0)&&(e||!this.holdingForSymbolFade())}setCrossFadeLogic({fadingRole:e,fadingDirection:n,fadingParentID:l,fadeEndTime:h}){this.resetFadeLogic(),this.fadingRole=e,this.fadingDirection=n,this.fadingParentID=l,this.fadeEndTime=h}setSelfFadeLogic(e){this.resetFadeLogic(),this.selfFading=!0,this.fadeEndTime=e}resetFadeLogic(){this.fadingRole=null,this.fadingDirection=null,this.fadingParentID=null,this.selfFading=!1,this.timeAdded=dt(),this.fadeEndTime=0,this.fadeOpacity=1}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(e){this.demTexture&&e.saveTileTexture(this.demTexture),this.demTexture=null}loadVectorData(e,n,l){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",e){e.featureIndex&&(this.latestFeatureIndex=e.featureIndex,e.rawTileData?(this.latestRawTileData=e.rawTileData,this.latestFeatureIndex.rawTileData=e.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=e.collisionBoxArray,this.buckets=(function(h,g){const v={};if(!g)return v;for(const w of h){const C=w.layerIds.map((z=>g.getLayer(z))).filter(Boolean);if(C.length!==0){w.layers=C,w.stateDependentLayerIds&&(w.stateDependentLayers=w.stateDependentLayerIds.map((z=>C.filter((k=>k.id===z))[0])));for(const z of C)v[z.id]=w}}return v})(e.buckets,n?.style),this.hasSymbolBuckets=!1;for(const h in this.buckets){const g=this.buckets[h];if(g instanceof d.a9){if(this.hasSymbolBuckets=!0,!l)break;g.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const h in this.buckets){const g=this.buckets[h];if(g instanceof d.a9&&g.hasRTLText){this.hasRTLText=!0,Co().lazyLoad();break}}this.queryPadding=0;for(const h in this.buckets){const g=this.buckets[h];this.queryPadding=Math.max(this.queryPadding,n.style.getLayer(h).queryRadius(g))}e.imageAtlas&&(this.imageAtlas=e.imageAtlas),e.glyphAtlasImage&&(this.glyphAtlasImage=e.glyphAtlasImage),this.dashPositions=e.dashPositions}else this.collisionBoxArray=new d.a8}unloadVectorData(){for(const e in this.buckets)this.buckets[e].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.dashPositions&&(this.dashPositions=null),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(e){return this.buckets[e.id]}upload(e){for(const l in this.buckets){const h=this.buckets[l];h.uploadPending()&&h.upload(e)}const n=e.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new d.T(e,this.imageAtlas.image,n.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new d.T(e,this.glyphAtlasImage,n.ALPHA),this.glyphAtlasImage=null)}prepare(e){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(e,this.imageAtlasTexture)}queryRenderedFeatures(e,n,l,h,g,v,w,C,z,k,O){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:h,cameraQueryGeometry:g,scale:v,tileSize:this.tileSize,pixelPosMatrix:k,transform:C,params:w,queryPadding:this.queryPadding*z,getElevation:O},e,n,l):{}}querySourceFeatures(e,n){const l=this.latestFeatureIndex;if(!l||!l.rawTileData)return;const h=l.loadVTLayers(),g=n&&n.sourceLayer?n.sourceLayer:"",v=h._geojsonTileLayer||h[g];if(!v)return;const w=d.aa(n?.filter,n?.globalState),{z:C,x:z,y:k}=this.tileID.canonical,O={z:C,x:z,y:k};for(let I=0;I<v.length;I++){const F=v.feature(I);if(w.needGeometry){const W=d.ab(F,!0);if(!w.filter(new d.F(this.tileID.overscaledZ),W,this.tileID.canonical))continue}else if(!w.filter(new d.F(this.tileID.overscaledZ),F))continue;const H=l.getId(F,g),K=new d.ac(F,C,z,k,H);K.tile=O,e.push(K)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(e){const n=this.expirationTime;if(e.cacheControl){const l=d.ad(e.cacheControl);l["max-age"]&&(this.expirationTime=Date.now()+1e3*l["max-age"])}else e.expires&&(this.expirationTime=new Date(e.expires).getTime());if(this.expirationTime){const l=Date.now();let h=!1;if(this.expirationTime>l)h=!1;else if(n)if(this.expirationTime<n)h=!0;else{const g=this.expirationTime-n;g?this.expirationTime=l+Math.max(g,3e4):h=!0}else h=!0;h?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(e,n){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(e).length===0)return;const l=this.latestFeatureIndex.loadVTLayers();for(const h in this.buckets){if(!n.style.hasLayer(h))continue;const g=this.buckets[h],v=g.layers[0].sourceLayer||"_geojsonTileLayer",w=l[v],C=e[v];if(!w||!C||Object.keys(C).length===0)continue;g.update(C,w,this.imageAtlas&&this.imageAtlas.patternPositions||{},this.dashPositions||{});const z=n&&n.style&&n.style.getLayer(h);z&&(this.queryPadding=Math.max(this.queryPadding,z.queryRadius(g)))}}holdingForSymbolFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<dt()}clearSymbolFadeHold(){this.symbolFadeHoldUntil=void 0}setSymbolHoldDuration(e){this.symbolFadeHoldUntil=dt()+e}setDependencies(e,n){const l={};for(const h of n)l[h]=!0;this.dependencies[e]=l}hasDependency(e,n){for(const l of e){const h=this.dependencies[l];if(h){for(const g of n)if(h[g])return!0}}return!1}}class Y{constructor(e,n){this.max=e,this.onRemove=n,this.reset()}reset(){for(const e in this.data)for(const n of this.data[e])n.timeout&&clearTimeout(n.timeout),this.onRemove(n.value);return this.data={},this.order=[],this}add(e,n,l){const h=e.wrapped().key;this.data[h]===void 0&&(this.data[h]=[]);const g={value:n,timeout:void 0};if(l!==void 0&&(g.timeout=setTimeout((()=>{this.remove(e,g)}),l)),this.data[h].push(g),this.order.push(h),this.order.length>this.max){const v=this._getAndRemoveByKey(this.order[0]);v&&this.onRemove(v)}return this}has(e){return e.wrapped().key in this.data}getAndRemove(e){return this.has(e)?this._getAndRemoveByKey(e.wrapped().key):null}_getAndRemoveByKey(e){const n=this.data[e].shift();return n.timeout&&clearTimeout(n.timeout),this.data[e].length===0&&delete this.data[e],this.order.splice(this.order.indexOf(e),1),n.value}getByKey(e){const n=this.data[e];return n?n[0].value:null}get(e){return this.has(e)?this.data[e.wrapped().key][0].value:null}remove(e,n){if(!this.has(e))return this;const l=e.wrapped().key,h=n===void 0?0:this.data[l].indexOf(n),g=this.data[l][h];return this.data[l].splice(h,1),g.timeout&&clearTimeout(g.timeout),this.data[l].length===0&&delete this.data[l],this.onRemove(g.value),this.order.splice(this.order.indexOf(l),1),this}setMaxSize(e){for(this.max=e;this.order.length>this.max;){const n=this._getAndRemoveByKey(this.order[0]);n&&this.onRemove(n)}return this}filter(e){const n=[];for(const l in this.data)for(const h of this.data[l])e(h.value)||n.push(h);for(const l of n)this.remove(l.value.tileID,l)}}class re{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(e,n,l){const h=String(n);if(this.stateChanges[e]=this.stateChanges[e]||{},this.stateChanges[e][h]=this.stateChanges[e][h]||{},d.e(this.stateChanges[e][h],l),this.deletedStates[e]===null){this.deletedStates[e]={};for(const g in this.state[e])g!==h&&(this.deletedStates[e][g]=null)}else if(this.deletedStates[e]&&this.deletedStates[e][h]===null){this.deletedStates[e][h]={};for(const g in this.state[e][h])l[g]||(this.deletedStates[e][h][g]=null)}else for(const g in l)this.deletedStates[e]&&this.deletedStates[e][h]&&this.deletedStates[e][h][g]===null&&delete this.deletedStates[e][h][g]}removeFeatureState(e,n,l){if(this.deletedStates[e]===null)return;const h=String(n);if(this.deletedStates[e]=this.deletedStates[e]||{},l&&n!==void 0)this.deletedStates[e][h]!==null&&(this.deletedStates[e][h]=this.deletedStates[e][h]||{},this.deletedStates[e][h][l]=null);else if(n!==void 0)if(this.stateChanges[e]&&this.stateChanges[e][h])for(l in this.deletedStates[e][h]={},this.stateChanges[e][h])this.deletedStates[e][h][l]=null;else this.deletedStates[e][h]=null;else this.deletedStates[e]=null}getState(e,n){const l=String(n),h=d.e({},(this.state[e]||{})[l],(this.stateChanges[e]||{})[l]);if(this.deletedStates[e]===null)return{};if(this.deletedStates[e]){const g=this.deletedStates[e][n];if(g===null)return{};for(const v in g)delete h[v]}return h}initializeTileState(e,n){e.setFeatureState(this.state,n)}coalesceChanges(e,n){const l={};for(const h in this.stateChanges){this.state[h]=this.state[h]||{};const g={};for(const v in this.stateChanges[h])this.state[h][v]||(this.state[h][v]={}),d.e(this.state[h][v],this.stateChanges[h][v]),g[v]=this.state[h][v];l[h]=g}for(const h in this.deletedStates){this.state[h]=this.state[h]||{};const g={};if(this.deletedStates[h]===null)for(const v in this.state[h])g[v]={},this.state[h][v]={};else for(const v in this.deletedStates[h]){if(this.deletedStates[h][v]===null)this.state[h][v]={};else for(const w of Object.keys(this.deletedStates[h][v]))delete this.state[h][v][w];g[v]=this.state[h][v]}l[h]=l[h]||{},d.e(l[h],g)}if(this.stateChanges={},this.deletedStates={},Object.keys(l).length!==0)for(const h in e)e[h].setFeatureState(l,n)}}const se=89.25;function de(p,e){const n=d.ae(e.lat,-d.af,d.af);return new d.P(d.V(e.lng)*p,d.U(n)*p)}function Me(p,e){return new d.a1(e.x/p,e.y/p).toLngLat()}function ve(p){return p.cameraToCenterDistance*Math.min(.85*Math.tan(d.ag(90-p.pitch)),Math.tan(d.ag(se-p.pitch)))}function De(p,e){const n=p.canonical,l=e/d.ah(n.z),h=n.x+Math.pow(2,n.z)*p.wrap,g=d.ai(new Float64Array(16));return d.M(g,g,[h*l,n.y*l,0]),d.N(g,g,[l/d.$,l/d.$,1]),g}function Ze(p,e,n,l,h){const g=d.a1.fromLngLat(p,e),v=h*d.aj(1,p.lat),w=v*Math.cos(d.ag(n)),C=Math.sqrt(v*v-w*w),z=C*Math.sin(d.ag(-l)),k=C*Math.cos(d.ag(-l));return new d.a1(g.x+z,g.y+k,g.z+w)}function Oe(p,e,n){const l=e.intersectsFrustum(p);if(!n||l===0)return l;const h=e.intersectsPlane(n);return h===0?0:l===2&&h===2?2:1}function pt(p,e,n){let l=0;const h=(n-e)/10;for(let g=0;g<10;g++)l+=h*Math.pow(Math.cos(e+(g+.5)/10*(n-e)),p);return l}function be(p,e){return function(n,l,h,g,v){const w=2*((p-1)/d.ak(Math.cos(d.ag(se-v))/Math.cos(d.ag(se)))-1),C=Math.acos(h/g),z=2*pt(w-1,0,d.ag(v/2)),k=Math.min(d.ag(se),C+d.ag(v/2)),O=pt(w-1,Math.min(k,C-d.ag(v/2)),k),I=Math.atan(l/h),F=Math.hypot(l,h);let H=n;return H+=d.ak(g/F/Math.max(.5,Math.cos(d.ag(v/2)))),H+=w*d.ak(Math.cos(I))/2,H-=d.ak(Math.max(1,O/z/e))/2,H}}const qt=be(9.314,3);function Mi(p,e){const n=(e.roundZoom?Math.round:Math.floor)(p.zoom+d.ak(p.tileSize/e.tileSize));return Math.max(0,n)}function gt(p,e){const n=p.getCameraFrustum(),l=p.getClippingPlane(),h=p.screenPointToMercatorCoordinate(p.getCameraPoint()),g=d.a1.fromLngLat(p.center,p.elevation);h.z=g.z+Math.cos(p.pitchInRadians)*p.cameraToCenterDistance/p.worldSize;const v=p.getCoveringTilesDetailsProvider(),w=v.allowVariableZoom(p,e),C=Mi(p,e),z=e.minzoom||0,k=e.maxzoom!==void 0?e.maxzoom:p.maxZoom,O=Math.min(Math.max(0,C),k),I=Math.pow(2,O),F=[I*h.x,I*h.y,0],H=[I*g.x,I*g.y,0],K=Math.hypot(g.x-h.x,g.y-h.y),W=Math.abs(g.z-h.z),J=Math.hypot(K,W),ie=le=>({zoom:0,x:0,y:0,wrap:le,fullyVisible:!1}),oe=[],te=[];if(p.renderWorldCopies&&v.allowWorldCopies())for(let le=1;le<=3;le++)oe.push(ie(-le)),oe.push(ie(le));for(oe.push(ie(0));oe.length>0;){const le=oe.pop(),ue=le.x,ae=le.y;let fe=le.fullyVisible;const Ae={x:ue,y:ae,z:le.zoom},we=v.getTileBoundingVolume(Ae,le.wrap,p.elevation,e);if(!fe){const Ke=Oe(n,we,l);if(Ke===0)continue;fe=Ke===2}const Se=v.distanceToTile2d(h.x,h.y,Ae,we);let Ee=C;w&&(Ee=(e.calculateTileZoom||qt)(p.zoom+d.ak(p.tileSize/e.tileSize),Se,W,J,p.fov)),Ee=(e.roundZoom?Math.round:Math.floor)(Ee),Ee=Math.max(0,Ee);const Qe=Math.min(Ee,k);if(le.wrap=v.getWrap(g,Ae,le.wrap),le.zoom>=Qe){if(le.zoom<z)continue;const Ke=O-le.zoom,Ne=F[0]-.5-(ue<<Ke),lt=F[1]-.5-(ae<<Ke),Tt=e.reparseOverscaled?Math.max(le.zoom,Ee):le.zoom;te.push({tileID:new d.Z(le.zoom===k?Tt:le.zoom,le.wrap,le.zoom,ue,ae),distanceSq:d.al([H[0]-.5-ue,H[1]-.5-ae]),tileDistanceToCamera:Math.sqrt(Ne*Ne+lt*lt)})}else for(let Ke=0;Ke<4;Ke++)oe.push({zoom:le.zoom+1,x:(ue<<1)+Ke%2,y:(ae<<1)+(Ke>>1),wrap:le.wrap,fullyVisible:fe})}return te.sort(((le,ue)=>le.distanceSq-ue.distanceSq)).map((le=>le.tileID))}const Yt=d.a2.fromPoints([new d.P(0,0),new d.P(d.$,d.$)]);class ci extends d.E{constructor(e,n,l){super(),this.id=e,this.dispatcher=l,this.on("data",(h=>this._dataHandler(h))),this.on("dataloading",(()=>{this._sourceErrored=!1})),this.on("error",(()=>{this._sourceErrored=this._source.loaded()})),this._source=((h,g,v,w)=>{const C=new(Tl(g.type))(h,g,v,w);if(C.id!==h)throw new Error(`Expected Source id to be ${h} instead of ${C.id}`);return C})(e,n,l,this),this._tiles={},this._cache=new Y(0,(h=>this._unloadTile(h))),this._timers={},this._maxTileCacheSize=null,this._maxTileCacheZoomLevels=null,this._rasterFadeDuration=0,this._maxFadingAncestorLevels=5,this._state=new re,this._didEmitContent=!1,this._updated=!1}onAdd(e){this.map=e,this._maxTileCacheSize=e?e._maxTileCacheSize:null,this._maxTileCacheZoomLevels=e?e._maxTileCacheZoomLevels:null,this._source&&this._source.onAdd&&this._source.onAdd(e)}onRemove(e){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(e)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;if(!(this.used===void 0&&this.usedForTerrain===void 0||this.used||this.usedForTerrain))return!0;if(!this._updated)return!1;for(const e in this._tiles){const n=this._tiles[e];if(n.state!=="loaded"&&n.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const e=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,e&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(e,n,l){return d._(this,void 0,void 0,(function*(){try{yield this._source.loadTile(e),this._tileLoaded(e,n,l)}catch(h){e.state="errored",h.status!==404?this._source.fire(new d.k(h,{tile:e})):this.update(this.transform,this.terrain)}}))}_unloadTile(e){this._source.unloadTile&&this._source.unloadTile(e)}_abortTile(e){this._source.abortTile&&this._source.abortTile(e),this._source.fire(new d.l("dataabort",{tile:e,coord:e.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(e){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const n in this._tiles){const l=this._tiles[n];l.upload(e),l.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map((e=>e.tileID)).sort(or).map((e=>e.key))}getRenderableIds(e){const n=[];for(const l in this._tiles)this._isIdRenderable(l,e)&&n.push(this._tiles[l]);return e?n.sort(((l,h)=>{const g=l.tileID,v=h.tileID,w=new d.P(g.canonical.x,g.canonical.y)._rotate(-this.transform.bearingInRadians),C=new d.P(v.canonical.x,v.canonical.y)._rotate(-this.transform.bearingInRadians);return g.overscaledZ-v.overscaledZ||C.y-w.y||C.x-w.x})).map((l=>l.tileID.key)):n.map((l=>l.tileID)).sort(or).map((l=>l.key))}hasRenderableParent(e){const n=e.overscaledZ-1;if(n>=this._source.minzoom){const l=this._getLoadedTile(e.scaledTo(n));if(l)return this._isIdRenderable(l.tileID.key)}return!1}_isIdRenderable(e,n=!1){var l;return(l=this._tiles[e])===null||l===void 0?void 0:l.isRenderable(n)}reload(e){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const n in this._tiles)e?this._reloadTile(n,"expired"):this._tiles[n].state!=="errored"&&this._reloadTile(n,"reloading")}}_reloadTile(e,n){return d._(this,void 0,void 0,(function*(){const l=this._tiles[e];l&&(l.state!=="loading"&&(l.state=n),yield this._loadTile(l,e,n))}))}_tileLoaded(e,n,l){e.timeAdded=dt(),l==="expired"&&(e.refreshedUponExpiration=!0),this._setTileReloadTimer(n,e),this.getSource().type==="raster-dem"&&e.dem&&this._backfillDEM(e),this._state.initializeTileState(e,this.map?this.map.painter:null),e.aborted||this._source.fire(new d.l("data",{dataType:"source",tile:e,coord:e.tileID}))}_backfillDEM(e){const n=this.getRenderableIds();for(let h=0;h<n.length;h++){const g=n[h];if(e.neighboringTiles&&e.neighboringTiles[g]){const v=this.getTileByID(g);l(e,v),l(v,e)}}function l(h,g){h.needsHillshadePrepare=!0,h.needsTerrainPrepare=!0;let v=g.tileID.canonical.x-h.tileID.canonical.x;const w=g.tileID.canonical.y-h.tileID.canonical.y,C=Math.pow(2,h.tileID.canonical.z),z=g.tileID.key;v===0&&w===0||Math.abs(w)>1||(Math.abs(v)>1&&(Math.abs(v+C)===1?v+=C:Math.abs(v-C)===1&&(v-=C)),g.dem&&h.dem&&(h.dem.backfillBorder(g.dem,v,w),h.neighboringTiles&&h.neighboringTiles[z]&&(h.neighboringTiles[z].backfilled=!0)))}}getTile(e){return this.getTileByID(e.key)}getTileByID(e){return this._tiles[e]}_retainLoadedChildren(e,n){const l=Object.values(e),h=this._getLoadedDescendents(l),g={};for(const v of l){const w=h[v.key];if(!w?.length){g[v.key]=v;continue}const C=v.overscaledZ+ci.maxUnderzooming,z=w.filter((I=>I.tileID.overscaledZ<=C));if(!z.length){g[v.key]=v;continue}const k=Math.min(...z.map((I=>I.tileID.overscaledZ))),O=z.filter((I=>I.tileID.overscaledZ===k)).map((I=>I.tileID));for(const I of O)n[I.key]=I;this._areDescendentsComplete(O,k,v.overscaledZ)||(g[v.key]=v)}return g}_getLoadedDescendents(e){var n;const l={};for(const h in this._tiles){const g=this._tiles[h];if(g.hasData())for(const v of e)g.tileID.isChildOf(v)&&(l[n=v.key]||(l[n]=[])).push(g)}return l}_areDescendentsComplete(e,n,l){return e.length===1&&e[0].isOverscaled()?e[0].overscaledZ===n:Math.pow(4,n-l)===e.length}_getLoadedTile(e){const n=this._tiles[e.key];return n?.hasData()?n:null}updateCacheSize(e){const n=Math.ceil(e.width/this._source.tileSize)+1,l=Math.ceil(e.height/this._source.tileSize)+1,h=Math.floor(n*l*(this._maxTileCacheZoomLevels===null?d.a.MAX_TILE_CACHE_ZOOM_LEVELS:this._maxTileCacheZoomLevels)),g=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,h):h;this._cache.setMaxSize(g)}handleWrapJump(e){const n=Math.round((e-(this._prevLng===void 0?e:this._prevLng))/360);if(this._prevLng=e,n){const l={};for(const h in this._tiles){const g=this._tiles[h];g.tileID=g.tileID.unwrapTo(g.tileID.wrap+n),l[g.tileID.key]=g}this._tiles=l,this._resetTileReloadTimers()}}update(e,n){if(!this._sourceLoaded||this._paused)return;let l;this.transform=e,this.terrain=n,this.updateCacheSize(e),this.handleWrapJump(this.transform.center.lng),this.used||this.usedForTerrain?this._source.tileID?l=e.getVisibleUnwrappedCoordinates(this._source.tileID).map((C=>new d.Z(C.canonical.z,C.wrap,C.canonical.z,C.canonical.x,C.canonical.y))):(l=gt(e,{tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:n,calculateTileZoom:this._source.calculateTileZoom}),this._source.hasTile&&(l=l.filter((C=>this._source.hasTile(C))))):l=[],this.usedForTerrain&&(l=this._addTerrainIdealTiles(l));const h=l.length===0&&!this._updated&&this._didEmitContent;this._updated=!0,h&&this.fire(new d.l("data",{sourceDataType:"idle",dataType:"source",sourceId:this.id}));const g=Mi(e,this._source),v=this._updateRetainedTiles(l,g),w=Rr(this._source.type);w&&this._rasterFadeDuration>0&&!n&&this._updateFadingTiles(l,v),w?this._cleanUpRasterTiles(v):this._cleanUpVectorTiles(v)}_cleanUpRasterTiles(e){for(const n in this._tiles)e[n]||this._removeTile(n)}_cleanUpVectorTiles(e){for(const n in this._tiles){const l=this._tiles[n];e[n]?l.clearSymbolFadeHold():l.hasSymbolBuckets?l.holdingForSymbolFade()?l.symbolFadeFinished()&&this._removeTile(n):l.setSymbolHoldDuration(this.map._fadeDuration):this._removeTile(n)}}_addTerrainIdealTiles(e){const n=[];for(const l of e)if(l.canonical.z>this._source.minzoom){const h=l.scaledTo(l.canonical.z-1);n.push(h);const g=l.scaledTo(Math.max(this._source.minzoom,Math.min(l.canonical.z,5)));n.push(g)}return e.concat(n)}releaseSymbolFadeTiles(){for(const e in this._tiles)this._tiles[e].holdingForSymbolFade()&&this._removeTile(e)}_updateRetainedTiles(e,n){var l;const h={},g={},v=Math.max(n-ci.maxOverzooming,this._source.minzoom);let w={};for(const C of e){const z=this._addTile(C);h[C.key]=C,z.hasData()||(w[C.key]=C)}w=this._retainLoadedChildren(w,h);for(const C in w){const z=w[C];let k=this._tiles[C],O=k?.wasRequested();for(let I=z.overscaledZ-1;I>=v;--I){const F=z.scaledTo(I);if(g[F.key])break;if(g[F.key]=!0,k=this.getTile(F),!k&&O&&(k=this._addTile(F)),k){const H=k.hasData();if((H||!(!((l=this.map)===null||l===void 0)&&l.cancelPendingTileRequestsWhileZooming)||O)&&(h[F.key]=F),O=k.wasRequested(),H)break}}}return h}_updateFadingTiles(e,n){const l=dt(),h=d.am(e);for(const g of e){const v=this._tiles[g.key];v.fadingDirection!==U.Departing&&v.fadeOpacity!==0||v.resetFadeLogic(),this._updateFadingAncestor(v,n,l)||this._updateFadingDescendents(v,n,l)||this._updateFadingEdge(v,h,l)||v.resetFadeLogic()}}_updateFadingAncestor(e,n,l){if(!e.hasData())return!1;const{tileID:h,fadingRole:g,fadingDirection:v,fadingParentID:w}=e;if(g===pe.Base&&v===U.Incoming&&w)return n[w.key]=w,!0;const C=Math.max(h.overscaledZ-this._maxFadingAncestorLevels,this._source.minzoom);for(let z=h.overscaledZ-1;z>=C;z--){const k=h.scaledTo(z),O=this._getLoadedTile(k);if(O)return e.setCrossFadeLogic({fadingRole:pe.Base,fadingDirection:U.Incoming,fadingParentID:O.tileID,fadeEndTime:l+this._rasterFadeDuration}),O.setCrossFadeLogic({fadingRole:pe.Parent,fadingDirection:U.Departing,fadeEndTime:l+this._rasterFadeDuration}),n[k.key]=k,!0}return!1}_updateFadingDescendents(e,n,l){if(!e.hasData())return!1;const h=e.tileID.children(this._source.maxzoom);let g=this._updateFadingChildren(e,h,n,l);if(g)return!0;for(const v of h){const w=v.children(this._source.maxzoom);this._updateFadingChildren(e,w,n,l)&&(g=!0)}return g}_updateFadingChildren(e,n,l,h){if(n[0].overscaledZ>=this._source.maxzoom)return!1;let g=!1;for(const v of n){const w=this._getLoadedTile(v);if(!w)continue;const{fadingRole:C,fadingDirection:z,fadingParentID:k}=w;C===pe.Base&&z===U.Departing&&k||(w.setCrossFadeLogic({fadingRole:pe.Base,fadingDirection:U.Departing,fadingParentID:e.tileID,fadeEndTime:h+this._rasterFadeDuration}),e.setCrossFadeLogic({fadingRole:pe.Parent,fadingDirection:U.Incoming,fadeEndTime:h+this._rasterFadeDuration})),l[v.key]=v,g=!0}return g}_updateFadingEdge(e,n,l){const h=e.tileID;return!!e.selfFading||!e.hasData()&&!!n.has(h)&&(e.setSelfFadeLogic(l+this._rasterFadeDuration),!0)}_addTile(e){let n=this._tiles[e.key];if(n)return n;n=this._cache.getAndRemove(e),n&&(n.resetFadeLogic(),this._setTileReloadTimer(e.key,n),n.tileID=e,this._state.initializeTileState(n,this.map?this.map.painter:null));const l=n;return n||(n=new Z(e,this._source.tileSize*e.overscaleFactor()),this._loadTile(n,e.key,n.state)),n.uses++,this._tiles[e.key]=n,l||this._source.fire(new d.l("dataloading",{tile:n,coord:n.tileID,dataType:"source"})),n}_setTileReloadTimer(e,n){this._clearTileReloadTimer(e);const l=n.getExpiryTimeout();l&&(this._timers[e]=setTimeout((()=>{this._reloadTile(e,"expired"),delete this._timers[e]}),l))}_clearTileReloadTimer(e){const n=this._timers[e];n&&(clearTimeout(n),delete this._timers[e])}_resetTileReloadTimers(){for(const e in this._timers)clearTimeout(this._timers[e]),delete this._timers[e];for(const e in this._tiles)this._setTileReloadTimer(e,this._tiles[e])}refreshTiles(e){for(const n in this._tiles)(this._isIdRenderable(n)||this._tiles[n].state=="errored")&&e.some((l=>l.equals(this._tiles[n].tileID.canonical)))&&this._reloadTile(n,"expired")}_removeTile(e){const n=this._tiles[e];n&&(n.uses--,delete this._tiles[e],this._clearTileReloadTimer(e),n.uses>0||(n.hasData()&&n.state!=="reloading"?this._cache.add(n.tileID,n,n.getExpiryTimeout()):(n.aborted=!0,this._abortTile(n),this._unloadTile(n))))}_dataHandler(e){e.dataType==="source"&&(e.sourceDataType!=="metadata"?e.sourceDataType==="content"&&this._sourceLoaded&&!this._paused&&(this.reload(e.sourceDataChanged),this.transform&&this.update(this.transform,this.terrain),this._didEmitContent=!0):this._sourceLoaded=!0)}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const e in this._tiles)this._removeTile(e);this._cache.reset()}tilesIn(e,n,l){const h=[],g=this.transform;if(!g)return h;const v=g.getCoveringTilesDetailsProvider().allowWorldCopies(),w=l?g.getCameraQueryGeometry(e):e,C=F=>g.screenPointToMercatorCoordinate(F,this.terrain),z=this.transformBbox(e,C,!v),k=this.transformBbox(w,C,!v),O=this.getIds(),I=d.a2.fromPoints(k);for(let F=0;F<O.length;F++){const H=this._tiles[O[F]];if(H.holdingForSymbolFade())continue;const K=v?[H.tileID]:[H.tileID.unwrapTo(-1),H.tileID.unwrapTo(0)],W=Math.pow(2,g.zoom-H.tileID.overscaledZ),J=n*H.queryPadding*d.$/H.tileSize/W;for(const ie of K){const oe=I.map((te=>ie.getTilePoint(new d.a1(te.x,te.y))));if(oe.expandBy(J),oe.intersects(Yt)){const te=z.map((ue=>ie.getTilePoint(ue))),le=k.map((ue=>ie.getTilePoint(ue)));h.push({tile:H,tileID:v?ie:ie.unwrapTo(0),queryGeometry:te,cameraQueryGeometry:le,scale:W})}}}return h}transformBbox(e,n,l){let h=e.map(n);if(l){const g=d.a2.fromPoints(e);g.shrinkBy(.001*Math.min(g.width(),g.height()));const v=g.map(n);d.a2.fromPoints(h).covers(v)||(h=h.map((w=>w.x>.5?new d.a1(w.x-1,w.y,w.z):w)))}return h}getVisibleCoordinates(e){const n=this.getRenderableIds(e).map((l=>this._tiles[l].tileID));return this.transform&&this.transform.populateCache(n),n}hasTransition(){if(this._source.hasTransition())return!0;if(Rr(this._source.type)&&this._rasterFadeDuration>0){const e=dt();for(const n in this._tiles)if(this._tiles[n].fadeEndTime>=e)return!0}return!1}setRasterFadeDuration(e){this._rasterFadeDuration=e}setFeatureState(e,n,l){this._state.updateState(e=e||"_geojsonTileLayer",n,l)}removeFeatureState(e,n,l){this._state.removeFeatureState(e=e||"_geojsonTileLayer",n,l)}getFeatureState(e,n){return this._state.getState(e=e||"_geojsonTileLayer",n)}setDependencies(e,n,l){const h=this._tiles[e];h&&h.setDependencies(n,l)}reloadTilesForDependencies(e,n){for(const l in this._tiles)this._tiles[l].hasDependency(e,n)&&this._reloadTile(l,"reloading");this._cache.filter((l=>!l.hasDependency(e,n)))}}function or(p,e){const n=Math.abs(2*p.wrap)-+(p.wrap<0),l=Math.abs(2*e.wrap)-+(e.wrap<0);return p.overscaledZ-e.overscaledZ||l-n||e.canonical.y-p.canonical.y||e.canonical.x-p.canonical.x}function Rr(p){return p==="raster"||p==="image"||p==="video"}ci.maxOverzooming=10,ci.maxUnderzooming=3;class Hr{constructor(e,n){this.reset(e,n)}reset(e,n){this.points=e||[],this._distances=[0];for(let l=1;l<this.points.length;l++)this._distances[l]=this._distances[l-1]+this.points[l].dist(this.points[l-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(n||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(e){if(this.points.length===1)return this.points[0];e=d.ae(e,0,1);let n=1,l=this._distances[n];const h=e*this.paddedLength+this.padding;for(;l<h&&n<this._distances.length;)l=this._distances[++n];const g=n-1,v=this._distances[g],w=l-v,C=w>0?(h-v)/w:0;return this.points[g].mult(1-C).add(this.points[n].mult(C))}}function sr(p,e){let n=!0;return p==="always"||p!=="never"&&e!=="never"||(n=!1),n}class qi{constructor(e,n,l){const h=this.boxCells=[],g=this.circleCells=[];this.xCellCount=Math.ceil(e/l),this.yCellCount=Math.ceil(n/l);for(let v=0;v<this.xCellCount*this.yCellCount;v++)h.push([]),g.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=e,this.height=n,this.xScale=this.xCellCount/e,this.yScale=this.yCellCount/n,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(e,n,l,h,g){this._forEachCell(n,l,h,g,this._insertBoxCell,this.boxUid++),this.boxKeys.push(e),this.bboxes.push(n),this.bboxes.push(l),this.bboxes.push(h),this.bboxes.push(g)}insertCircle(e,n,l,h){this._forEachCell(n-h,l-h,n+h,l+h,this._insertCircleCell,this.circleUid++),this.circleKeys.push(e),this.circles.push(n),this.circles.push(l),this.circles.push(h)}_insertBoxCell(e,n,l,h,g,v){this.boxCells[g].push(v)}_insertCircleCell(e,n,l,h,g,v){this.circleCells[g].push(v)}_query(e,n,l,h,g,v,w){if(l<0||e>this.width||h<0||n>this.height)return[];const C=[];if(e<=0&&n<=0&&this.width<=l&&this.height<=h){if(g)return[{key:null,x1:e,y1:n,x2:l,y2:h}];for(let z=0;z<this.boxKeys.length;z++)C.push({key:this.boxKeys[z],x1:this.bboxes[4*z],y1:this.bboxes[4*z+1],x2:this.bboxes[4*z+2],y2:this.bboxes[4*z+3]});for(let z=0;z<this.circleKeys.length;z++){const k=this.circles[3*z],O=this.circles[3*z+1],I=this.circles[3*z+2];C.push({key:this.circleKeys[z],x1:k-I,y1:O-I,x2:k+I,y2:O+I})}}else this._forEachCell(e,n,l,h,this._queryCell,C,{hitTest:g,overlapMode:v,seenUids:{box:{},circle:{}}},w);return C}query(e,n,l,h){return this._query(e,n,l,h,!1,null)}hitTest(e,n,l,h,g,v){return this._query(e,n,l,h,!0,g,v).length>0}hitTestCircle(e,n,l,h,g){const v=e-l,w=e+l,C=n-l,z=n+l;if(w<0||v>this.width||z<0||C>this.height)return!1;const k=[];return this._forEachCell(v,C,w,z,this._queryCellCircle,k,{hitTest:!0,overlapMode:h,circle:{x:e,y:n,radius:l},seenUids:{box:{},circle:{}}},g),k.length>0}_queryCell(e,n,l,h,g,v,w,C){const{seenUids:z,hitTest:k,overlapMode:O}=w,I=this.boxCells[g];if(I!==null){const H=this.bboxes;for(const K of I)if(!z.box[K]){z.box[K]=!0;const W=4*K,J=this.boxKeys[K];if(e<=H[W+2]&&n<=H[W+3]&&l>=H[W+0]&&h>=H[W+1]&&(!C||C(J))&&(!k||!sr(O,J.overlapMode))&&(v.push({key:J,x1:H[W],y1:H[W+1],x2:H[W+2],y2:H[W+3]}),k))return!0}}const F=this.circleCells[g];if(F!==null){const H=this.circles;for(const K of F)if(!z.circle[K]){z.circle[K]=!0;const W=3*K,J=this.circleKeys[K];if(this._circleAndRectCollide(H[W],H[W+1],H[W+2],e,n,l,h)&&(!C||C(J))&&(!k||!sr(O,J.overlapMode))){const ie=H[W],oe=H[W+1],te=H[W+2];if(v.push({key:J,x1:ie-te,y1:oe-te,x2:ie+te,y2:oe+te}),k)return!0}}}return!1}_queryCellCircle(e,n,l,h,g,v,w,C){const{circle:z,seenUids:k,overlapMode:O}=w,I=this.boxCells[g];if(I!==null){const H=this.bboxes;for(const K of I)if(!k.box[K]){k.box[K]=!0;const W=4*K,J=this.boxKeys[K];if(this._circleAndRectCollide(z.x,z.y,z.radius,H[W+0],H[W+1],H[W+2],H[W+3])&&(!C||C(J))&&!sr(O,J.overlapMode))return v.push(!0),!0}}const F=this.circleCells[g];if(F!==null){const H=this.circles;for(const K of F)if(!k.circle[K]){k.circle[K]=!0;const W=3*K,J=this.circleKeys[K];if(this._circlesCollide(H[W],H[W+1],H[W+2],z.x,z.y,z.radius)&&(!C||C(J))&&!sr(O,J.overlapMode))return v.push(!0),!0}}}_forEachCell(e,n,l,h,g,v,w,C){const z=this._convertToXCellCoord(e),k=this._convertToYCellCoord(n),O=this._convertToXCellCoord(l),I=this._convertToYCellCoord(h);for(let F=z;F<=O;F++)for(let H=k;H<=I;H++)if(g.call(this,e,n,l,h,this.xCellCount*H+F,v,w,C))return}_convertToXCellCoord(e){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(e*this.xScale)))}_convertToYCellCoord(e){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(e*this.yScale)))}_circlesCollide(e,n,l,h,g,v){const w=h-e,C=g-n,z=l+v;return z*z>w*w+C*C}_circleAndRectCollide(e,n,l,h,g,v,w){const C=(v-h)/2,z=Math.abs(e-(h+C));if(z>C+l)return!1;const k=(w-g)/2,O=Math.abs(n-(g+k));if(O>k+l)return!1;if(z<=C||O<=k)return!0;const I=z-C,F=O-k;return I*I+F*F<=l*l}}function lr(p,e,n){const l=d.L();if(!p){const{vecSouth:O,vecEast:I}=er(e),F=ke();F[0]=I[0],F[1]=I[1],F[2]=O[0],F[3]=O[1],h=F,(k=(v=(g=F)[0])*(z=g[3])-(C=g[2])*(w=g[1]))&&(h[0]=z*(k=1/k),h[1]=-w*k,h[2]=-C*k,h[3]=v*k),l[0]=F[0],l[1]=F[1],l[4]=F[2],l[5]=F[3]}var h,g,v,w,C,z,k;return d.N(l,l,[1/n,1/n,1]),l}function Fe(p,e,n,l){if(p){const h=d.L();if(!e){const{vecSouth:g,vecEast:v}=er(n);h[0]=v[0],h[1]=v[1],h[4]=g[0],h[5]=g[1]}return d.N(h,h,[l,l,1]),h}return n.pixelsToClipSpaceMatrix}function er(p){const e=Math.cos(p.rollInRadians),n=Math.sin(p.rollInRadians),l=Math.cos(p.pitchInRadians),h=Math.cos(p.bearingInRadians),g=Math.sin(p.bearingInRadians),v=d.ar();v[0]=-h*l*n-g*e,v[1]=-g*l*n+h*e;const w=d.as(v);w<1e-9?d.at(v):d.au(v,v,1/w);const C=d.ar();C[0]=h*l*e-g*n,C[1]=g*l*e+h*n;const z=d.as(C);return z<1e-9?d.at(C):d.au(C,C,1/z),{vecEast:C,vecSouth:v}}function sa(p,e,n,l){let h;l?(h=[p,e,l(p,e),1],d.aw(h,h,n)):(h=[p,e,0,1],la(h,h,n));const g=h[3];return{point:new d.P(h[0]/g,h[1]/g),signedDistanceFromCamera:g,isOccluded:!1}}function ka(p,e){return .5+p/e*.5}function yi(p,e){return p.x>=-e[0]&&p.x<=e[0]&&p.y>=-e[1]&&p.y<=e[1]}function Xe(p,e,n,l,h,g,v,w,C,z,k,O,I){const F=n?p.textSizeData:p.iconSizeData,H=d.an(F,e.transform.zoom),K=[256/e.width*2+1,256/e.height*2+1],W=n?p.text.dynamicLayoutVertexArray:p.icon.dynamicLayoutVertexArray;W.clear();const J=p.lineVertexArray,ie=n?p.text.placedSymbolArray:p.icon.placedSymbolArray,oe=e.transform.width/e.transform.height;let te=!1;for(let le=0;le<ie.length;le++){const ue=ie.get(le);if(ue.hidden||ue.writingMode===d.ao.vertical&&!te){io(ue.numGlyphs,W);continue}te=!1;const ae=new d.P(ue.anchorX,ue.anchorY),fe={getElevation:I,pitchedLabelPlaneMatrix:l,lineVertexArray:J,pitchWithMap:g,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},transform:e.transform,tileAnchorPoint:ae,unwrappedTileID:C,width:z,height:k,translation:O},Ae=Pn(ue.anchorX,ue.anchorY,fe);if(!yi(Ae.point,K)){io(ue.numGlyphs,W);continue}const we=ka(e.transform.cameraToCenterDistance,Ae.signedDistanceFromCamera),Se=d.ap(F,H,ue),Ee=g?Se*e.transform.getPitchedTextCorrection(ue.anchorX,ue.anchorY,C)/we:Se*we,Qe=cn({projectionContext:fe,pitchedLabelPlaneMatrixInverse:h,symbol:ue,fontSize:Ee,flip:!1,keepUpright:v,glyphOffsetArray:p.glyphOffsetArray,dynamicLayoutVertexArray:W,aspectRatio:oe,rotateToLine:w});te=Qe.useVertical,(Qe.notEnoughRoom||te||Qe.needsFlipping&&cn({projectionContext:fe,pitchedLabelPlaneMatrixInverse:h,symbol:ue,fontSize:Ee,flip:!0,keepUpright:v,glyphOffsetArray:p.glyphOffsetArray,dynamicLayoutVertexArray:W,aspectRatio:oe,rotateToLine:w}).notEnoughRoom)&&io(ue.numGlyphs,W)}n?p.text.dynamicLayoutVertexBuffer.updateData(W):p.icon.dynamicLayoutVertexBuffer.updateData(W)}function Lt(p,e,n,l,h,g,v,w){const C=g.glyphStartIndex+g.numGlyphs,z=g.lineStartIndex,k=g.lineStartIndex+g.lineLength,O=e.getoffsetX(g.glyphStartIndex),I=e.getoffsetX(C-1),F=un(p*O,n,l,h,g.segment,z,k,w,v);if(!F)return null;const H=un(p*I,n,l,h,g.segment,z,k,w,v);return H?w.projectionCache.anyProjectionOccluded?null:{first:F,last:H}:null}function Ft(p,e,n,l){return p===d.ao.horizontal&&Math.abs(n.y-e.y)>Math.abs(n.x-e.x)*l?{useVertical:!0}:(p===d.ao.vertical?e.y<n.y:e.x>n.x)?{needsFlipping:!0}:null}function cn(p){const{projectionContext:e,pitchedLabelPlaneMatrixInverse:n,symbol:l,fontSize:h,flip:g,keepUpright:v,glyphOffsetArray:w,dynamicLayoutVertexArray:C,aspectRatio:z,rotateToLine:k}=p,O=h/24,I=l.lineOffsetX*O,F=l.lineOffsetY*O;let H;if(l.numGlyphs>1){const K=l.glyphStartIndex+l.numGlyphs,W=l.lineStartIndex,J=l.lineStartIndex+l.lineLength,ie=Lt(O,w,I,F,g,l,k,e);if(!ie)return{notEnoughRoom:!0};const oe=So(ie.first.point.x,ie.first.point.y,e,n),te=So(ie.last.point.x,ie.last.point.y,e,n);if(v&&!g){const le=Ft(l.writingMode,oe,te,z);if(le)return le}H=[ie.first];for(let le=l.glyphStartIndex+1;le<K-1;le++){const ue=un(O*w.getoffsetX(le),I,F,g,l.segment,W,J,e,k);if(!ue)return{notEnoughRoom:!0};H.push(ue)}H.push(ie.last)}else{if(v&&!g){const W=Mt(e.tileAnchorPoint.x,e.tileAnchorPoint.y,e).point,J=l.lineStartIndex+l.segment+1,ie=new d.P(e.lineVertexArray.getx(J),e.lineVertexArray.gety(J)),oe=Mt(ie.x,ie.y,e),te=oe.signedDistanceFromCamera>0?oe.point:fc(e.tileAnchorPoint,ie,W,1,e),le=So(W.x,W.y,e,n),ue=So(te.x,te.y,e,n),ae=Ft(l.writingMode,le,ue,z);if(ae)return ae}const K=un(O*w.getoffsetX(l.glyphStartIndex),I,F,g,l.segment,l.lineStartIndex,l.lineStartIndex+l.lineLength,e,k);if(!K||e.projectionCache.anyProjectionOccluded)return{notEnoughRoom:!0};H=[K]}for(const K of H)d.av(C,K.point,K.angle);return{}}function fc(p,e,n,l,h){const g=p.add(p.sub(e)._unit()),v=Mt(g.x,g.y,h).point,w=n.sub(v);return n.add(w._mult(l/w.mag()))}function to(p,e,n){const l=e.projectionCache;if(l.projections[p])return l.projections[p];const h=new d.P(e.lineVertexArray.getx(p),e.lineVertexArray.gety(p)),g=Mt(h.x,h.y,e);if(g.signedDistanceFromCamera>0)return l.projections[p]=g.point,l.anyProjectionOccluded=l.anyProjectionOccluded||g.isOccluded,g.point;const v=p-n.direction;return fc(n.distanceFromAnchor===0?e.tileAnchorPoint:new d.P(e.lineVertexArray.getx(v),e.lineVertexArray.gety(v)),h,n.previousVertex,n.absOffsetX-n.distanceFromAnchor+1,e)}function Mt(p,e,n){const l=p+n.translation[0],h=e+n.translation[1];let g;return n.pitchWithMap?(g=sa(l,h,n.pitchedLabelPlaneMatrix,n.getElevation),g.isOccluded=!1):(g=n.transform.projectTileCoordinates(l,h,n.unwrappedTileID,n.getElevation),g.point.x=(.5*g.point.x+.5)*n.width,g.point.y=(.5*-g.point.y+.5)*n.height),g}function So(p,e,n,l){if(n.pitchWithMap){const h=[p,e,0,1];return d.aw(h,h,l),n.transform.projectTileCoordinates(h[0]/h[3],h[1]/h[3],n.unwrappedTileID,n.getElevation).point}return{x:p/n.width*2-1,y:1-e/n.height*2}}function Pn(p,e,n){return n.transform.projectTileCoordinates(p,e,n.unwrappedTileID,n.getElevation)}function kn(p,e,n){return p._unit()._perp()._mult(e*n)}function To(p,e,n,l,h,g,v,w,C){if(w.projectionCache.offsets[p])return w.projectionCache.offsets[p];const z=n.add(e);if(p+C.direction<l||p+C.direction>=h)return w.projectionCache.offsets[p]=z,z;const k=to(p+C.direction,w,C),O=kn(k.sub(n),v,C.direction),I=n.add(O),F=k.add(O);return w.projectionCache.offsets[p]=d.ax(g,z,I,F)||z,w.projectionCache.offsets[p]}function un(p,e,n,l,h,g,v,w,C){const z=l?p-e:p+e;let k=z>0?1:-1,O=0;l&&(k*=-1,O=Math.PI),k<0&&(O+=Math.PI);let I,F=k>0?g+h:g+h+1;w.projectionCache.cachedAnchorPoint?I=w.projectionCache.cachedAnchorPoint:(I=Mt(w.tileAnchorPoint.x,w.tileAnchorPoint.y,w).point,w.projectionCache.cachedAnchorPoint=I);let H,K,W=I,J=I,ie=0,oe=0;const te=Math.abs(z),le=[];let ue;for(;ie+oe<=te;){if(F+=k,F<g||F>=v)return null;ie+=oe,J=W,K=H;const Ae={absOffsetX:te,direction:k,distanceFromAnchor:ie,previousVertex:J};if(W=to(F,w,Ae),n===0)le.push(J),ue=W.sub(J);else{let we;const Se=W.sub(J);we=Se.mag()===0?kn(to(F+k,w,Ae).sub(W),n,k):kn(Se,n,k),K||(K=J.add(we)),H=To(F,we,W,g,v,K,n,w,Ae),le.push(K),ue=H.sub(K)}oe=ue.mag()}const ae=ue._mult((te-ie)/oe)._add(K||J),fe=O+Math.atan2(W.y-J.y,W.x-J.x);return le.push(ae),{point:ae,angle:C?fe:0,path:le}}const pr=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function io(p,e){for(let n=0;n<p;n++){const l=e.length;e.resize(l+4),e.float32.set(pr,3*l)}}function la(p,e,n){const l=e[0],h=e[1];return p[0]=n[0]*l+n[4]*h+n[12],p[1]=n[1]*l+n[5]*h+n[13],p[3]=n[3]*l+n[7]*h+n[15],p}const jt=100;class Ml{constructor(e,n=new qi(e.width+200,e.height+200,25),l=new qi(e.width+200,e.height+200,25)){this.transform=e,this.grid=n,this.ignoredGrid=l,this.pitchFactor=Math.cos(e.pitch*Math.PI/180)*e.cameraToCenterDistance,this.screenRightBoundary=e.width+jt,this.screenBottomBoundary=e.height+jt,this.gridRightBoundary=e.width+200,this.gridBottomBoundary=e.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(e,n,l,h,g,v,w,C,z,k,O,I){const F=this.projectAndGetPerspectiveRatio(e.anchorPointX+C[0],e.anchorPointY+C[1],g,k,I),H=l*F.perspectiveRatio;let K;if(v||w)K=this._projectCollisionBox(e,H,h,g,v,w,C,F,k,O,I);else{const ue=F.x+(O?O.x*H:0),ae=F.y+(O?O.y*H:0);K={allPointsOccluded:!1,box:[ue+e.x1*H,ae+e.y1*H,ue+e.x2*H,ae+e.y2*H]}}const[W,J,ie,oe]=K.box,te=v?K.allPointsOccluded:F.isOccluded;let le=te;return le||(le=F.perspectiveRatio<this.perspectiveRatioCutoff),le||(le=!this.isInsideGrid(W,J,ie,oe)),le||n!=="always"&&this.grid.hitTest(W,J,ie,oe,n,z)?{box:[W,J,ie,oe],placeable:!1,offscreen:!1,occluded:te}:{box:[W,J,ie,oe],placeable:!0,offscreen:this.isOffscreen(W,J,ie,oe),occluded:te}}placeCollisionCircles(e,n,l,h,g,v,w,C,z,k,O,I,F,H){const K=[],W=new d.P(n.anchorX,n.anchorY),J=this.getPerspectiveRatio(W.x,W.y,v,H),ie=(z?g*this.transform.getPitchedTextCorrection(n.anchorX,n.anchorY,v)/J:g*J)/d.aB,oe={getElevation:H,pitchedLabelPlaneMatrix:w,lineVertexArray:l,pitchWithMap:z,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},transform:this.transform,tileAnchorPoint:W,unwrappedTileID:v,width:this.transform.width,height:this.transform.height,translation:F},te=Lt(ie,h,n.lineOffsetX*ie,n.lineOffsetY*ie,!1,n,!1,oe);let le=!1,ue=!1,ae=!0;if(te){const fe=.5*O*J+I,Ae=new d.P(-100,-100),we=new d.P(this.screenRightBoundary,this.screenBottomBoundary),Se=new Hr,Ee=te.first,Qe=te.last;let Ke=[];for(let Tt=Ee.path.length-1;Tt>=1;Tt--)Ke.push(Ee.path[Tt]);for(let Tt=1;Tt<Qe.path.length;Tt++)Ke.push(Qe.path[Tt]);const Ne=2.5*fe;if(z){const Tt=this.projectPathToScreenSpace(Ke,oe);Ke=Tt.some((li=>li.signedDistanceFromCamera<=0))?[]:Tt.map((li=>li.point))}let lt=[];if(Ke.length>0){const Tt=Ke[0].clone(),li=Ke[0].clone();for(let Ei=1;Ei<Ke.length;Ei++)Tt.x=Math.min(Tt.x,Ke[Ei].x),Tt.y=Math.min(Tt.y,Ke[Ei].y),li.x=Math.max(li.x,Ke[Ei].x),li.y=Math.max(li.y,Ke[Ei].y);lt=Tt.x>=Ae.x&&li.x<=we.x&&Tt.y>=Ae.y&&li.y<=we.y?[Ke]:li.x<Ae.x||Tt.x>we.x||li.y<Ae.y||Tt.y>we.y?[]:d.ay([Ke],Ae.x,Ae.y,we.x,we.y)}for(const Tt of lt){Se.reset(Tt,.25*fe);let li=0;li=Se.length<=.5*fe?1:Math.ceil(Se.paddedLength/Ne)+1;for(let Ei=0;Ei<li;Ei++){const Li=Ei/Math.max(li-1,1),Ut=Se.lerp(Li),Ii=Ut.x+jt,zr=Ut.y+jt;K.push(Ii,zr,fe,0);const Wi=Ii-fe,Vr=zr-fe,ur=Ii+fe,mr=zr+fe;if(ae=ae&&this.isOffscreen(Wi,Vr,ur,mr),ue=ue||this.isInsideGrid(Wi,Vr,ur,mr),e!=="always"&&this.grid.hitTestCircle(Ii,zr,fe,e,k)&&(le=!0,!C))return{circles:[],offscreen:!1,collisionDetected:le}}}}return{circles:!C&&le||!ue||J<this.perspectiveRatioCutoff?[]:K,offscreen:ae,collisionDetected:le}}projectPathToScreenSpace(e,n){const l=(function(h,g){const v=d.L();return d.aq(v,g.pitchedLabelPlaneMatrix),h.map((w=>{const C=sa(w.x,w.y,v,g.getElevation),z=g.transform.projectTileCoordinates(C.point.x,C.point.y,g.unwrappedTileID,g.getElevation);return z.point.x=(.5*z.point.x+.5)*g.width,z.point.y=(.5*-z.point.y+.5)*g.height,z}))})(e,n);return(function(h){let g=0,v=0,w=0,C=0;for(let z=0;z<h.length;z++)h[z].isOccluded?(w=z+1,C=0):(C++,C>v&&(v=C,g=w));return h.slice(g,g+v)})(l)}queryRenderedSymbols(e){if(e.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const n=[],l=new d.a2;for(const O of e){const I=new d.P(O.x+jt,O.y+jt);l.extend(I),n.push(I)}const{minX:h,minY:g,maxX:v,maxY:w}=l,C=this.grid.query(h,g,v,w).concat(this.ignoredGrid.query(h,g,v,w)),z={},k={};for(const O of C){const I=O.key;if(z[I.bucketInstanceId]===void 0&&(z[I.bucketInstanceId]={}),z[I.bucketInstanceId][I.featureIndex])continue;const F=[new d.P(O.x1,O.y1),new d.P(O.x2,O.y1),new d.P(O.x2,O.y2),new d.P(O.x1,O.y2)];d.az(n,F)&&(z[I.bucketInstanceId][I.featureIndex]=!0,k[I.bucketInstanceId]===void 0&&(k[I.bucketInstanceId]=[]),k[I.bucketInstanceId].push(I.featureIndex))}return k}insertCollisionBox(e,n,l,h,g,v){(l?this.ignoredGrid:this.grid).insert({bucketInstanceId:h,featureIndex:g,collisionGroupID:v,overlapMode:n},e[0],e[1],e[2],e[3])}insertCollisionCircles(e,n,l,h,g,v){const w=l?this.ignoredGrid:this.grid,C={bucketInstanceId:h,featureIndex:g,collisionGroupID:v,overlapMode:n};for(let z=0;z<e.length;z+=4)w.insertCircle(C,e[z],e[z+1],e[z+2])}projectAndGetPerspectiveRatio(e,n,l,h,g){if(g){let v;h?(v=[e,n,h(e,n),1],d.aw(v,v,g)):(v=[e,n,0,1],la(v,v,g));const w=v[3];return{x:(v[0]/w+1)/2*this.transform.width+jt,y:(-v[1]/w+1)/2*this.transform.height+jt,perspectiveRatio:.5+this.transform.cameraToCenterDistance/w*.5,isOccluded:!1,signedDistanceFromCamera:w}}{const v=this.transform.projectTileCoordinates(e,n,l,h);return{x:(v.point.x+1)/2*this.transform.width+jt,y:(1-v.point.y)/2*this.transform.height+jt,perspectiveRatio:.5+this.transform.cameraToCenterDistance/v.signedDistanceFromCamera*.5,isOccluded:v.isOccluded,signedDistanceFromCamera:v.signedDistanceFromCamera}}}getPerspectiveRatio(e,n,l,h){const g=this.transform.projectTileCoordinates(e,n,l,h);return .5+this.transform.cameraToCenterDistance/g.signedDistanceFromCamera*.5}isOffscreen(e,n,l,h){return l<jt||e>=this.screenRightBoundary||h<jt||n>this.screenBottomBoundary}isInsideGrid(e,n,l,h){return l>=0&&e<this.gridRightBoundary&&h>=0&&n<this.gridBottomBoundary}getViewportMatrix(){const e=d.ai([]);return d.M(e,e,[-100,-100,0]),e}_projectCollisionBox(e,n,l,h,g,v,w,C,z,k,O){let I=1,F=0,H=0,K=1;const W=e.anchorPointX+w[0],J=e.anchorPointY+w[1];if(v&&!g){const Ke=this.projectAndGetPerspectiveRatio(W+1,J,h,z,O),Ne=Ke.x-C.x,lt=Math.atan((Ke.y-C.y)/Ne)+(Ne<0?Math.PI:0),Tt=Math.sin(lt),li=Math.cos(lt);I=li,F=Tt,H=-Tt,K=li}else if(!v&&g){const Ke=er(this.transform);I=Ke.vecEast[0],F=Ke.vecEast[1],H=Ke.vecSouth[0],K=Ke.vecSouth[1]}let ie=C.x,oe=C.y,te=n;g&&(ie=W,oe=J,te=Math.pow(2,-(this.transform.zoom-l.overscaledZ)),te*=this.transform.getPitchedTextCorrection(W,J,h),k||(te*=d.ae(.5+C.signedDistanceFromCamera/this.transform.cameraToCenterDistance*.5,0,4))),k&&(ie+=I*k.x*te+H*k.y*te,oe+=F*k.x*te+K*k.y*te);const le=e.x1*te,ue=e.x2*te,ae=(le+ue)/2,fe=e.y1*te,Ae=e.y2*te,we=(fe+Ae)/2,Se=[{offsetX:le,offsetY:fe},{offsetX:ae,offsetY:fe},{offsetX:ue,offsetY:fe},{offsetX:ue,offsetY:we},{offsetX:ue,offsetY:Ae},{offsetX:ae,offsetY:Ae},{offsetX:le,offsetY:Ae},{offsetX:le,offsetY:we}];let Ee=[];for(const{offsetX:Ke,offsetY:Ne}of Se)Ee.push(new d.P(ie+I*Ke+H*Ne,oe+F*Ke+K*Ne));let Qe=!1;if(g){const Ke=Ee.map((Ne=>this.projectAndGetPerspectiveRatio(Ne.x,Ne.y,h,z,O)));Qe=Ke.some((Ne=>!Ne.isOccluded)),Ee=Ke.map((Ne=>new d.P(Ne.x,Ne.y)))}else Qe=!0;return{box:d.aA(Ee),allPointsOccluded:!Qe}}}class Al{constructor(e,n,l,h){this.opacity=e?Math.max(0,Math.min(1,e.opacity+(e.placed?n:-n))):h&&l?1:0,this.placed=l}isHidden(){return this.opacity===0&&!this.placed}}class as{constructor(e,n,l,h,g){this.text=new Al(e?e.text:null,n,l,g),this.icon=new Al(e?e.icon:null,n,h,g)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class Mo{constructor(e,n,l){this.text=e,this.icon=n,this.skipFade=l}}class ns{constructor(e,n,l,h,g){this.bucketInstanceId=e,this.featureIndex=n,this.sourceLayerIndex=l,this.bucketIndex=h,this.tileID=g}}class mc{constructor(e){this.crossSourceCollisions=e,this.maxGroupID=0,this.collisionGroups={}}get(e){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[e]){const n=++this.maxGroupID;this.collisionGroups[e]={ID:n,predicate:l=>l.collisionGroupID===n}}return this.collisionGroups[e]}}function El(p,e,n,l,h){const{horizontalAlign:g,verticalAlign:v}=d.aH(p);return new d.P(-(g-.5)*e+l[0]*h,-(v-.5)*n+l[1]*h)}class ro{constructor(e,n,l,h,g){this.transform=e.clone(),this.terrain=n,this.collisionIndex=new Ml(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=l,this.retainedQueryData={},this.collisionGroups=new mc(h),this.collisionCircleArrays={},this.collisionBoxArrays=new Map,this.prevPlacement=g,g&&(g.prevPlacement=void 0),this.placedOrientations={}}_getTerrainElevationFunc(e){const n=this.terrain;return n?(l,h)=>n.getElevation(e,l,h):null}getBucketParts(e,n,l,h){const g=l.getBucket(n),v=l.latestFeatureIndex;if(!g||!v||n.id!==g.layerIds[0])return;const w=l.collisionBoxArray,C=g.layers[0].layout,z=g.layers[0].paint,k=Math.pow(2,this.transform.zoom-l.tileID.overscaledZ),O=l.tileSize/d.$,I=l.tileID.toUnwrapped(),F=C.get("text-rotation-alignment")==="map",H=d.aC(l,1,this.transform.zoom),K=d.aD(this.collisionIndex.transform,l,z.get("text-translate"),z.get("text-translate-anchor")),W=d.aD(this.collisionIndex.transform,l,z.get("icon-translate"),z.get("icon-translate-anchor")),J=lr(F,this.transform,H);this.retainedQueryData[g.bucketInstanceId]=new ns(g.bucketInstanceId,v,g.sourceLayerIndex,g.index,l.tileID);const ie={bucket:g,layout:C,translationText:K,translationIcon:W,unwrappedTileID:I,pitchedLabelPlaneMatrix:J,scale:k,textPixelRatio:O,holdingForFade:l.holdingForSymbolFade(),collisionBoxArray:w,partiallyEvaluatedTextSize:d.an(g.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(g.sourceID)};if(h)for(const oe of g.sortKeyRanges){const{sortKey:te,symbolInstanceStart:le,symbolInstanceEnd:ue}=oe;e.push({sortKey:te,symbolInstanceStart:le,symbolInstanceEnd:ue,parameters:ie})}else e.push({symbolInstanceStart:0,symbolInstanceEnd:g.symbolInstances.length,parameters:ie})}attemptAnchorPlacement(e,n,l,h,g,v,w,C,z,k,O,I,F,H,K,W,J,ie,oe,te){const le=d.aE[e.textAnchor],ue=[e.textOffset0,e.textOffset1],ae=El(le,l,h,ue,g),fe=this.collisionIndex.placeCollisionBox(n,I,C,z,k,w,v,W,O.predicate,oe,ae,te);if((!ie||this.collisionIndex.placeCollisionBox(ie,I,C,z,k,w,v,J,O.predicate,oe,ae,te).placeable)&&fe.placeable){let Ae;if(this.prevPlacement&&this.prevPlacement.variableOffsets[F.crossTileID]&&this.prevPlacement.placements[F.crossTileID]&&this.prevPlacement.placements[F.crossTileID].text&&(Ae=this.prevPlacement.variableOffsets[F.crossTileID].anchor),F.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[F.crossTileID]={textOffset:ue,width:l,height:h,anchor:le,textBoxScale:g,prevAnchor:Ae},this.markUsedJustification(H,le,F,K),H.allowVerticalPlacement&&(this.markUsedOrientation(H,K,F),this.placedOrientations[F.crossTileID]=K),{shift:ae,placedGlyphBoxes:fe}}}placeLayerBucketPart(e,n,l){const{bucket:h,layout:g,translationText:v,translationIcon:w,unwrappedTileID:C,pitchedLabelPlaneMatrix:z,textPixelRatio:k,holdingForFade:O,collisionBoxArray:I,partiallyEvaluatedTextSize:F,collisionGroup:H}=e.parameters,K=g.get("text-optional"),W=g.get("icon-optional"),J=d.aF(g,"text-overlap","text-allow-overlap"),ie=J==="always",oe=d.aF(g,"icon-overlap","icon-allow-overlap"),te=oe==="always",le=g.get("text-rotation-alignment")==="map",ue=g.get("text-pitch-alignment")==="map",ae=g.get("icon-text-fit")!=="none",fe=g.get("symbol-z-order")==="viewport-y",Ae=ie&&(te||!h.hasIconData()||W),we=te&&(ie||!h.hasTextData()||K);!h.collisionArrays&&I&&h.deserializeCollisionBoxes(I);const Se=this.retainedQueryData[h.bucketInstanceId].tileID,Ee=this._getTerrainElevationFunc(Se),Qe=this.transform.getFastPathSimpleProjectionMatrix(Se),Ke=(Ne,lt,Tt)=>{var li,Ei;if(n[Ne.crossTileID])return;if(O)return void(this.placements[Ne.crossTileID]=new Mo(!1,!1,!1));let Li=!1,Ut=!1,Ii=!0,zr=null,Wi={box:null,placeable:!1,offscreen:null,occluded:!1},Vr={placeable:!1},ur=null,mr=null,Pr=null,jo=0,Vo=0,$o=0;lt.textFeatureIndex?jo=lt.textFeatureIndex:Ne.useRuntimeCollisionCircles&&(jo=Ne.featureIndex),lt.verticalTextFeatureIndex&&(Vo=lt.verticalTextFeatureIndex);const Fo=lt.textBox;if(Fo){const da=xr=>{let Qr=d.ao.horizontal;if(h.allowVerticalPlacement&&!xr&&this.prevPlacement){const Ba=this.prevPlacement.placedOrientations[Ne.crossTileID];Ba&&(this.placedOrientations[Ne.crossTileID]=Ba,Qr=Ba,this.markUsedOrientation(h,Qr,Ne))}return Qr},ea=(xr,Qr)=>{if(h.allowVerticalPlacement&&Ne.numVerticalGlyphVertices>0&&lt.verticalTextBox){for(const Ba of h.writingModes)if(Ba===d.ao.vertical?(Wi=Qr(),Vr=Wi):Wi=xr(),Wi&&Wi.placeable)break}else Wi=xr()},yn=Ne.textAnchorOffsetStartIndex,hl=Ne.textAnchorOffsetEndIndex;if(hl===yn){const xr=(Qr,Ba)=>{const hr=this.collisionIndex.placeCollisionBox(Qr,J,k,Se,C,ue,le,v,H.predicate,Ee,void 0,Qe);return hr&&hr.placeable&&(this.markUsedOrientation(h,Ba,Ne),this.placedOrientations[Ne.crossTileID]=Ba),hr};ea((()=>xr(Fo,d.ao.horizontal)),(()=>{const Qr=lt.verticalTextBox;return h.allowVerticalPlacement&&Ne.numVerticalGlyphVertices>0&&Qr?xr(Qr,d.ao.vertical):{box:null,offscreen:null}})),da(Wi&&Wi.placeable)}else{let xr=d.aE[(Ei=(li=this.prevPlacement)===null||li===void 0?void 0:li.variableOffsets[Ne.crossTileID])===null||Ei===void 0?void 0:Ei.anchor];const Qr=(hr,Gn,qn)=>{const Oa=hr.x2-hr.x1,No=hr.y2-hr.y1,Ph=Ne.textBoxScale,Ql=ae&&oe==="never"?Gn:null;let Uo=null,mo=J==="never"?1:2,kh="never";xr&&mo++;for(let Uc=0;Uc<mo;Uc++){for(let dl=yn;dl<hl;dl++){const ju=h.textAnchorOffsets.get(dl);if(xr&&ju.textAnchor!==xr)continue;const go=this.attemptAnchorPlacement(ju,hr,Oa,No,Ph,le,ue,k,Se,C,H,kh,Ne,h,qn,v,w,Ql,Ee);if(go&&(Uo=go.placedGlyphBoxes,Uo&&Uo.placeable))return Li=!0,zr=go.shift,Uo}xr?xr=null:kh=J}return l&&!Uo&&(Uo={box:this.collisionIndex.placeCollisionBox(Fo,"always",k,Se,C,ue,le,v,H.predicate,Ee,void 0,Qe).box,offscreen:!1,placeable:!1,occluded:!1}),Uo};ea((()=>Qr(Fo,lt.iconBox,d.ao.horizontal)),(()=>{const hr=lt.verticalTextBox;return h.allowVerticalPlacement&&(!Wi||!Wi.placeable)&&Ne.numVerticalGlyphVertices>0&&hr?Qr(hr,lt.verticalIconBox,d.ao.vertical):{box:null,occluded:!0,offscreen:null}})),Wi&&(Li=Wi.placeable,Ii=Wi.offscreen);const Ba=da(Wi&&Wi.placeable);if(!Li&&this.prevPlacement){const hr=this.prevPlacement.variableOffsets[Ne.crossTileID];hr&&(this.variableOffsets[Ne.crossTileID]=hr,this.markUsedJustification(h,hr.anchor,Ne,Ba))}}}if(ur=Wi,Li=ur&&ur.placeable,Ii=ur&&ur.offscreen,Ne.useRuntimeCollisionCircles&&Ne.centerJustifiedTextSymbolIndex>=0){const da=h.text.placedSymbolArray.get(Ne.centerJustifiedTextSymbolIndex),ea=d.ap(h.textSizeData,F,da),yn=g.get("text-padding");mr=this.collisionIndex.placeCollisionCircles(J,da,h.lineVertexArray,h.glyphOffsetArray,ea,C,z,l,ue,H.predicate,Ne.collisionCircleDiameter,yn,v,Ee),mr.circles.length&&mr.collisionDetected&&!l&&d.w("Collisions detected, but collision boxes are not shown"),Li=ie||mr.circles.length>0&&!mr.collisionDetected,Ii=Ii&&mr.offscreen}if(lt.iconFeatureIndex&&($o=lt.iconFeatureIndex),lt.iconBox){const da=ea=>this.collisionIndex.placeCollisionBox(ea,oe,k,Se,C,ue,le,w,H.predicate,Ee,ae&&zr?zr:void 0,Qe);Vr&&Vr.placeable&&lt.verticalIconBox?(Pr=da(lt.verticalIconBox),Ut=Pr.placeable):(Pr=da(lt.iconBox),Ut=Pr.placeable),Ii=Ii&&Pr.offscreen}const Es=K||Ne.numHorizontalGlyphVertices===0&&Ne.numVerticalGlyphVertices===0,Nc=W||Ne.numIconVertices===0;Es||Nc?Nc?Es||(Ut=Ut&&Li):Li=Ut&&Li:Ut=Li=Ut&&Li;const fo=Ut&&Pr.placeable;if(Li&&ur.placeable&&this.collisionIndex.insertCollisionBox(ur.box,J,g.get("text-ignore-placement"),h.bucketInstanceId,Vr&&Vr.placeable&&Vo?Vo:jo,H.ID),fo&&this.collisionIndex.insertCollisionBox(Pr.box,oe,g.get("icon-ignore-placement"),h.bucketInstanceId,$o,H.ID),mr&&Li&&this.collisionIndex.insertCollisionCircles(mr.circles,J,g.get("text-ignore-placement"),h.bucketInstanceId,jo,H.ID),l&&this.storeCollisionData(h.bucketInstanceId,Tt,lt,ur,Pr,mr),Ne.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(h.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[Ne.crossTileID]=new Mo((Li||Ae)&&!ur?.occluded,(Ut||we)&&!Pr?.occluded,Ii||h.justReloaded),n[Ne.crossTileID]=!0};if(fe){if(e.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");const Ne=h.getSortedSymbolIndexes(-this.transform.bearingInRadians);for(let lt=Ne.length-1;lt>=0;--lt){const Tt=Ne[lt];Ke(h.symbolInstances.get(Tt),h.collisionArrays[Tt],Tt)}}else for(let Ne=e.symbolInstanceStart;Ne<e.symbolInstanceEnd;Ne++)Ke(h.symbolInstances.get(Ne),h.collisionArrays[Ne],Ne);h.justReloaded=!1}storeCollisionData(e,n,l,h,g,v){if(l.textBox||l.iconBox){let w,C;this.collisionBoxArrays.has(e)?w=this.collisionBoxArrays.get(e):(w=new Map,this.collisionBoxArrays.set(e,w)),w.has(n)?C=w.get(n):(C={text:null,icon:null},w.set(n,C)),l.textBox&&(C.text=h.box),l.iconBox&&(C.icon=g.box)}if(v){let w=this.collisionCircleArrays[e];w===void 0&&(w=this.collisionCircleArrays[e]=[]);for(let C=0;C<v.circles.length;C+=4)w.push(v.circles[C+0]-jt),w.push(v.circles[C+1]-jt),w.push(v.circles[C+2]),w.push(v.collisionDetected?1:0)}}markUsedJustification(e,n,l,h){let g;g=h===d.ao.vertical?l.verticalPlacedTextSymbolIndex:{left:l.leftJustifiedTextSymbolIndex,center:l.centerJustifiedTextSymbolIndex,right:l.rightJustifiedTextSymbolIndex}[d.aG(n)];const v=[l.leftJustifiedTextSymbolIndex,l.centerJustifiedTextSymbolIndex,l.rightJustifiedTextSymbolIndex,l.verticalPlacedTextSymbolIndex];for(const w of v)w>=0&&(e.text.placedSymbolArray.get(w).crossTileID=g>=0&&w!==g?0:l.crossTileID)}markUsedOrientation(e,n,l){const h=n===d.ao.horizontal||n===d.ao.horizontalOnly?n:0,g=n===d.ao.vertical?n:0,v=[l.leftJustifiedTextSymbolIndex,l.centerJustifiedTextSymbolIndex,l.rightJustifiedTextSymbolIndex];for(const w of v)e.text.placedSymbolArray.get(w).placedOrientation=h;l.verticalPlacedTextSymbolIndex&&(e.text.placedSymbolArray.get(l.verticalPlacedTextSymbolIndex).placedOrientation=g)}commit(e){this.commitTime=e,this.zoomAtLastRecencyCheck=this.transform.zoom;const n=this.prevPlacement;let l=!1;this.prevZoomAdjustment=n?n.zoomAdjustment(this.transform.zoom):0;const h=n?n.symbolFadeChange(e):1,g=n?n.opacities:{},v=n?n.variableOffsets:{},w=n?n.placedOrientations:{};for(const C in this.placements){const z=this.placements[C],k=g[C];k?(this.opacities[C]=new as(k,h,z.text,z.icon),l=l||z.text!==k.text.placed||z.icon!==k.icon.placed):(this.opacities[C]=new as(null,h,z.text,z.icon,z.skipFade),l=l||z.text||z.icon)}for(const C in g){const z=g[C];if(!this.opacities[C]){const k=new as(z,h,!1,!1);k.isHidden()||(this.opacities[C]=k,l=l||z.text.placed||z.icon.placed)}}for(const C in v)this.variableOffsets[C]||!this.opacities[C]||this.opacities[C].isHidden()||(this.variableOffsets[C]=v[C]);for(const C in w)this.placedOrientations[C]||!this.opacities[C]||this.opacities[C].isHidden()||(this.placedOrientations[C]=w[C]);if(n&&n.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");l?this.lastPlacementChangeTime=e:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=n?n.lastPlacementChangeTime:e)}updateLayerOpacities(e,n){const l={};for(const h of n){const g=h.getBucket(e);g&&h.latestFeatureIndex&&e.id===g.layerIds[0]&&this.updateBucketOpacities(g,h.tileID,l,h.collisionBoxArray)}}updateBucketOpacities(e,n,l,h){e.hasTextData()&&(e.text.opacityVertexArray.clear(),e.text.hasVisibleVertices=!1),e.hasIconData()&&(e.icon.opacityVertexArray.clear(),e.icon.hasVisibleVertices=!1),e.hasIconCollisionBoxData()&&e.iconCollisionBox.collisionVertexArray.clear(),e.hasTextCollisionBoxData()&&e.textCollisionBox.collisionVertexArray.clear();const g=e.layers[0],v=g.layout,w=new as(null,0,!1,!1,!0),C=v.get("text-allow-overlap"),z=v.get("icon-allow-overlap"),k=g._unevaluatedLayout.hasValue("text-variable-anchor")||g._unevaluatedLayout.hasValue("text-variable-anchor-offset"),O=v.get("text-rotation-alignment")==="map",I=v.get("text-pitch-alignment")==="map",F=v.get("icon-text-fit")!=="none",H=new as(null,0,C&&(z||!e.hasIconData()||v.get("icon-optional")),z&&(C||!e.hasTextData()||v.get("text-optional")),!0);!e.collisionArrays&&h&&(e.hasIconCollisionBoxData()||e.hasTextCollisionBoxData())&&e.deserializeCollisionBoxes(h);const K=(J,ie,oe)=>{for(let te=0;te<ie/4;te++)J.opacityVertexArray.emplaceBack(oe);J.hasVisibleVertices=J.hasVisibleVertices||oe!==$s},W=this.collisionBoxArrays.get(e.bucketInstanceId);for(let J=0;J<e.symbolInstances.length;J++){const ie=e.symbolInstances.get(J),{numHorizontalGlyphVertices:oe,numVerticalGlyphVertices:te,crossTileID:le}=ie;let ue=this.opacities[le];l[le]?ue=w:ue||(ue=H,this.opacities[le]=ue),l[le]=!0;const ae=ie.numIconVertices>0,fe=this.placedOrientations[ie.crossTileID],Ae=fe===d.ao.vertical,we=fe===d.ao.horizontal||fe===d.ao.horizontalOnly;if(oe>0||te>0){const Ee=zl(ue.text);K(e.text,oe,Ae?$s:Ee),K(e.text,te,we?$s:Ee);const Qe=ue.text.isHidden();[ie.rightJustifiedTextSymbolIndex,ie.centerJustifiedTextSymbolIndex,ie.leftJustifiedTextSymbolIndex].forEach((lt=>{lt>=0&&(e.text.placedSymbolArray.get(lt).hidden=Qe||Ae?1:0)})),ie.verticalPlacedTextSymbolIndex>=0&&(e.text.placedSymbolArray.get(ie.verticalPlacedTextSymbolIndex).hidden=Qe||we?1:0);const Ke=this.variableOffsets[ie.crossTileID];Ke&&this.markUsedJustification(e,Ke.anchor,ie,fe);const Ne=this.placedOrientations[ie.crossTileID];Ne&&(this.markUsedJustification(e,"left",ie,Ne),this.markUsedOrientation(e,Ne,ie))}if(ae){const Ee=zl(ue.icon),Qe=!(F&&ie.verticalPlacedIconSymbolIndex&&Ae);ie.placedIconSymbolIndex>=0&&(K(e.icon,ie.numIconVertices,Qe?Ee:$s),e.icon.placedSymbolArray.get(ie.placedIconSymbolIndex).hidden=ue.icon.isHidden()),ie.verticalPlacedIconSymbolIndex>=0&&(K(e.icon,ie.numVerticalIconVertices,Qe?$s:Ee),e.icon.placedSymbolArray.get(ie.verticalPlacedIconSymbolIndex).hidden=ue.icon.isHidden())}const Se=W&&W.has(J)?W.get(J):{text:null,icon:null};if(e.hasIconCollisionBoxData()||e.hasTextCollisionBoxData()){const Ee=e.collisionArrays[J];if(Ee){let Qe=new d.P(0,0);if(Ee.textBox||Ee.verticalTextBox){let Ke=!0;if(k){const Ne=this.variableOffsets[le];Ne?(Qe=El(Ne.anchor,Ne.width,Ne.height,Ne.textOffset,Ne.textBoxScale),O&&Qe._rotate(I?-this.transform.bearingInRadians:this.transform.bearingInRadians)):Ke=!1}if(Ee.textBox||Ee.verticalTextBox){let Ne;Ee.textBox&&(Ne=Ae),Ee.verticalTextBox&&(Ne=we),Gr(e.textCollisionBox.collisionVertexArray,ue.text.placed,!Ke||Ne,Se.text,Qe.x,Qe.y)}}if(Ee.iconBox||Ee.verticalIconBox){const Ke=!!(!we&&Ee.verticalIconBox);let Ne;Ee.iconBox&&(Ne=Ke),Ee.verticalIconBox&&(Ne=!Ke),Gr(e.iconCollisionBox.collisionVertexArray,ue.icon.placed,Ne,Se.icon,F?Qe.x:0,F?Qe.y:0)}}}}if(e.sortFeatures(-this.transform.bearingInRadians),this.retainedQueryData[e.bucketInstanceId]&&(this.retainedQueryData[e.bucketInstanceId].featureSortOrder=e.featureSortOrder),e.hasTextData()&&e.text.opacityVertexBuffer&&e.text.opacityVertexBuffer.updateData(e.text.opacityVertexArray),e.hasIconData()&&e.icon.opacityVertexBuffer&&e.icon.opacityVertexBuffer.updateData(e.icon.opacityVertexArray),e.hasIconCollisionBoxData()&&e.iconCollisionBox.collisionVertexBuffer&&e.iconCollisionBox.collisionVertexBuffer.updateData(e.iconCollisionBox.collisionVertexArray),e.hasTextCollisionBoxData()&&e.textCollisionBox.collisionVertexBuffer&&e.textCollisionBox.collisionVertexBuffer.updateData(e.textCollisionBox.collisionVertexArray),e.text.opacityVertexArray.length!==e.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${e.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${e.text.layoutVertexArray.length}) / 4`);if(e.icon.opacityVertexArray.length!==e.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${e.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${e.icon.layoutVertexArray.length}) / 4`);e.bucketInstanceId in this.collisionCircleArrays&&(e.collisionCircleArray=this.collisionCircleArrays[e.bucketInstanceId],delete this.collisionCircleArrays[e.bucketInstanceId])}symbolFadeChange(e){return this.fadeDuration===0?1:(e-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(e){return Math.max(0,(this.transform.zoom-e)/1.5)}hasTransitions(e){return this.stale||e-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(e,n){const l=this.zoomAtLastRecencyCheck===n?1-this.zoomAdjustment(n):1;return this.zoomAtLastRecencyCheck=n,this.commitTime+this.fadeDuration*l>e}setStale(){this.stale=!0}}function Gr(p,e,n,l,h,g){l&&l.length!==0||(l=[0,0,0,0]);const v=l[0]-jt,w=l[1]-jt,C=l[2]-jt,z=l[3]-jt;p.emplaceBack(e?1:0,n?1:0,h||0,g||0,v,w),p.emplaceBack(e?1:0,n?1:0,h||0,g||0,C,w),p.emplaceBack(e?1:0,n?1:0,h||0,g||0,C,z),p.emplaceBack(e?1:0,n?1:0,h||0,g||0,v,z)}const sh=Math.pow(2,25),wp=Math.pow(2,24),lh=Math.pow(2,17),pd=Math.pow(2,16),gc=Math.pow(2,9),fd=Math.pow(2,8),Da=Math.pow(2,1);function zl(p){if(p.opacity===0&&!p.placed)return 0;if(p.opacity===1&&p.placed)return 4294967295;const e=p.placed?1:0,n=Math.floor(127*p.opacity);return n*sh+e*wp+n*lh+e*pd+n*gc+e*fd+n*Da+e}const $s=0;class _c{constructor(e){this._sortAcrossTiles=e.layout.get("symbol-z-order")!=="viewport-y"&&!e.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(e,n,l,h,g){const v=this._bucketParts;for(;this._currentTileIndex<e.length;)if(n.getBucketParts(v,h,e[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,g())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,v.sort(((w,C)=>w.sortKey-C.sortKey)));this._currentPartIndex<v.length;)if(n.placeLayerBucketPart(v[this._currentPartIndex],this._seenCrossTileIDs,l),this._currentPartIndex++,g())return!0;return!1}}class os{constructor(e,n,l,h,g,v,w,C){this.placement=new ro(e,n,v,w,C),this._currentPlacementIndex=l.length-1,this._forceFullPlacement=h,this._showCollisionBoxes=g,this._done=!1}isDone(){return this._done}continuePlacement(e,n,l){const h=dt(),g=()=>!this._forceFullPlacement&&dt()-h>2;for(;this._currentPlacementIndex>=0;){const v=n[e[this._currentPlacementIndex]],w=this.placement.collisionIndex.transform.zoom;if(v.type==="symbol"&&(!v.minzoom||v.minzoom<=w)&&(!v.maxzoom||v.maxzoom>w)){if(this._inProgressLayer||(this._inProgressLayer=new _c(v)),this._inProgressLayer.continuePlacement(l[v.source],this.placement,this._showCollisionBoxes,v,g))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(e){return this.placement.commit(e),this.placement}}const Pl=512/d.$/2;class kl{constructor(e,n,l){this.tileID=e,this.bucketInstanceId=l,this._symbolsByKey={};const h=new Map;for(let g=0;g<n.length;g++){const v=n.get(g),w=v.key,C=h.get(w);C?C.push(v):h.set(w,[v])}for(const[g,v]of h){const w={positions:v.map((C=>({x:Math.floor(C.anchorX*Pl),y:Math.floor(C.anchorY*Pl)}))),crossTileIDs:v.map((C=>C.crossTileID))};if(w.positions.length>128){const C=new d.aI(w.positions.length,16,Uint16Array);for(const{x:z,y:k}of w.positions)C.add(z,k);C.finish(),delete w.positions,w.index=C}this._symbolsByKey[g]=w}}getScaledCoordinates(e,n){const{x:l,y:h,z:g}=this.tileID.canonical,{x:v,y:w,z:C}=n.canonical,z=Pl/Math.pow(2,C-g),k=(w*d.$+e.anchorY)*z,O=h*d.$*Pl;return{x:Math.floor((v*d.$+e.anchorX)*z-l*d.$*Pl),y:Math.floor(k-O)}}findMatches(e,n,l){const h=this.tileID.canonical.z<n.canonical.z?1:Math.pow(2,this.tileID.canonical.z-n.canonical.z);for(let g=0;g<e.length;g++){const v=e.get(g);if(v.crossTileID)continue;const w=this._symbolsByKey[v.key];if(!w)continue;const C=this.getScaledCoordinates(v,n);if(w.index){const z=w.index.range(C.x-h,C.y-h,C.x+h,C.y+h).sort();for(const k of z){const O=w.crossTileIDs[k];if(!l[O]){l[O]=!0,v.crossTileID=O;break}}}else if(w.positions)for(let z=0;z<w.positions.length;z++){const k=w.positions[z],O=w.crossTileIDs[z];if(Math.abs(k.x-C.x)<=h&&Math.abs(k.y-C.y)<=h&&!l[O]){l[O]=!0,v.crossTileID=O;break}}}}getCrossTileIDsLists(){return Object.values(this._symbolsByKey).map((({crossTileIDs:e})=>e))}}class Ao{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class md{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(e){const n=Math.round((e-this.lng)/360);if(n!==0)for(const l in this.indexes){const h=this.indexes[l],g={};for(const v in h){const w=h[v];w.tileID=w.tileID.unwrapTo(w.tileID.wrap+n),g[w.tileID.key]=w}this.indexes[l]=g}this.lng=e}addBucket(e,n,l){if(this.indexes[e.overscaledZ]&&this.indexes[e.overscaledZ][e.key]){if(this.indexes[e.overscaledZ][e.key].bucketInstanceId===n.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(e.overscaledZ,this.indexes[e.overscaledZ][e.key])}for(let g=0;g<n.symbolInstances.length;g++)n.symbolInstances.get(g).crossTileID=0;this.usedCrossTileIDs[e.overscaledZ]||(this.usedCrossTileIDs[e.overscaledZ]={});const h=this.usedCrossTileIDs[e.overscaledZ];for(const g in this.indexes){const v=this.indexes[g];if(Number(g)>e.overscaledZ)for(const w in v){const C=v[w];C.tileID.isChildOf(e)&&C.findMatches(n.symbolInstances,e,h)}else{const w=v[e.scaledTo(Number(g)).key];w&&w.findMatches(n.symbolInstances,e,h)}}for(let g=0;g<n.symbolInstances.length;g++){const v=n.symbolInstances.get(g);v.crossTileID||(v.crossTileID=l.generate(),h[v.crossTileID]=!0)}return this.indexes[e.overscaledZ]===void 0&&(this.indexes[e.overscaledZ]={}),this.indexes[e.overscaledZ][e.key]=new kl(e,n.symbolInstances,n.bucketInstanceId),!0}removeBucketCrossTileIDs(e,n){for(const l of n.getCrossTileIDsLists())for(const h of l)delete this.usedCrossTileIDs[e][h]}removeStaleBuckets(e){let n=!1;for(const l in this.indexes){const h=this.indexes[l];for(const g in h)e[h[g].bucketInstanceId]||(this.removeBucketCrossTileIDs(l,h[g]),delete h[g],n=!0)}return n}}class ss{constructor(){this.layerIndexes={},this.crossTileIDs=new Ao,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(e,n,l){let h=this.layerIndexes[e.id];h===void 0&&(h=this.layerIndexes[e.id]=new md);let g=!1;const v={};h.handleWrapJump(l);for(const w of n){const C=w.getBucket(e);C&&e.id===C.layerIds[0]&&(C.bucketInstanceId||(C.bucketInstanceId=++this.maxBucketInstanceId),h.addBucket(w.tileID,C,this.crossTileIDs)&&(g=!0),v[C.bucketInstanceId]=!0)}return h.removeStaleBuckets(v)&&(g=!0),g}pruneUnusedLayers(e){const n={};e.forEach((l=>{n[l]=!0}));for(const l in this.layerIndexes)n[l]||delete this.layerIndexes[l]}}var lu="void main() {fragColor=vec4(1.0);}";const hn={prelude:Xt(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
out highp vec4 fragColor;`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}mat3 rotationMatrixFromAxisAngle(vec3 u,float angle) {float c=cos(angle);float s=sin(angle);float c2=1.0-c;return mat3(u.x*u.x*c2+      c,u.x*u.y*c2-u.z*s,u.x*u.z*c2+u.y*s,u.y*u.x*c2+u.z*s,u.y*u.y*c2+    c,u.y*u.z*c2-u.x*s,u.z*u.x*c2-u.y*s,u.z*u.y*c2+u.x*s,u.z*u.z*c2+    c
);}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
#ifdef GLOBE
if ((pos.y <-32767.5) || (pos.y > 32766.5)) {return 0.0;}
#endif
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;
#else
return 0.0;
#endif
}const float PI=3.141592653589793;uniform mat4 u_projection_matrix;`),projectionMercator:Xt("","float projectLineThickness(float tileY) {return 1.0;}float projectCircleRadius(float tileY) {return 1.0;}vec4 projectTile(vec2 p) {vec4 result=u_projection_matrix*vec4(p,0.0,1.0);return result;}vec4 projectTile(vec2 p,vec2 rawPos) {vec4 result=u_projection_matrix*vec4(p,0.0,1.0);if (rawPos.y <-32767.5 || rawPos.y > 32766.5) {result.z=-10000000.0;}return result;}vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_projection_matrix*vec4(posInTile,elevation,1.0);}vec4 projectTileFor3D(vec2 posInTile,float elevation) {return projectTileWithElevation(posInTile,elevation);}"),projectionGlobe:Xt("",`#define GLOBE_RADIUS 6371008.8
uniform highp vec4 u_projection_tile_mercator_coords;uniform highp vec4 u_projection_clipping_plane;uniform highp float u_projection_transition;uniform mat4 u_projection_fallback_matrix;vec3 globeRotateVector(vec3 vec,vec2 angles) {vec3 axisRight=vec3(vec.z,0.0,-vec.x);vec3 axisUp=cross(axisRight,vec);axisRight=normalize(axisRight);axisUp=normalize(axisUp);vec2 t=tan(angles);return normalize(vec+axisRight*t.x+axisUp*t.y);}mat3 globeGetRotationMatrix(vec3 spherePos) {vec3 axisRight=vec3(spherePos.z,0.0,-spherePos.x);vec3 axisDown=cross(axisRight,spherePos);axisRight=normalize(axisRight);axisDown=normalize(axisDown);return mat3(axisRight,axisDown,spherePos
);}float circumferenceRatioAtTileY(float tileY) {float mercator_pos_y=u_projection_tile_mercator_coords.y+u_projection_tile_mercator_coords.w*tileY;float spherical_y=2.0*atan(exp(PI-(mercator_pos_y*PI*2.0)))-PI*0.5;return cos(spherical_y);}float projectLineThickness(float tileY) {float thickness=1.0/circumferenceRatioAtTileY(tileY); 
if (u_projection_transition < 0.999) {return mix(1.0,thickness,u_projection_transition);} else {return thickness;}}vec3 projectToSphere(vec2 translatedPos,vec2 rawPos) {vec2 mercator_pos=u_projection_tile_mercator_coords.xy+u_projection_tile_mercator_coords.zw*translatedPos;vec2 spherical;spherical.x=mercator_pos.x*PI*2.0+PI;spherical.y=2.0*atan(exp(PI-(mercator_pos.y*PI*2.0)))-PI*0.5;float len=cos(spherical.y);vec3 pos=vec3(sin(spherical.x)*len,sin(spherical.y),cos(spherical.x)*len
);if (rawPos.y <-32767.5) {pos=vec3(0.0,1.0,0.0);}if (rawPos.y > 32766.5) {pos=vec3(0.0,-1.0,0.0);}return pos;}vec3 projectToSphere(vec2 posInTile) {return projectToSphere(posInTile,vec2(0.0,0.0));}float globeComputeClippingZ(vec3 spherePos) {return (1.0-(dot(spherePos,u_projection_clipping_plane.xyz)+u_projection_clipping_plane.w));}vec4 interpolateProjection(vec2 posInTile,vec3 spherePos,float elevation) {vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);vec4 globePosition=u_projection_matrix*vec4(elevatedPos,1.0);globePosition.z=globeComputeClippingZ(elevatedPos)*globePosition.w;if (u_projection_transition > 0.999) {return globePosition;}vec4 flatPosition=u_projection_fallback_matrix*vec4(posInTile,elevation,1.0);const float z_globeness_threshold=0.2;vec4 result=globePosition;result.z=mix(0.0,globePosition.z,clamp((u_projection_transition-z_globeness_threshold)/(1.0-z_globeness_threshold),0.0,1.0));result.xyw=mix(flatPosition.xyw,globePosition.xyw,u_projection_transition);if ((posInTile.y <-32767.5) || (posInTile.y > 32766.5)) {result=globePosition;const float poles_hidden_anim_percentage=0.02;result.z=mix(globePosition.z,100.0,pow(max((1.0-u_projection_transition)/poles_hidden_anim_percentage,0.0),8.0));}return result;}vec4 interpolateProjectionFor3D(vec2 posInTile,vec3 spherePos,float elevation) {vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);vec4 globePosition=u_projection_matrix*vec4(elevatedPos,1.0);if (u_projection_transition > 0.999) {return globePosition;}vec4 fallbackPosition=u_projection_fallback_matrix*vec4(posInTile,elevation,1.0);return mix(fallbackPosition,globePosition,u_projection_transition);}vec4 projectTile(vec2 posInTile) {return interpolateProjection(posInTile,projectToSphere(posInTile),0.0);}vec4 projectTile(vec2 posInTile,vec2 rawPos) {return interpolateProjection(posInTile,projectToSphere(posInTile,rawPos),0.0);}vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return interpolateProjection(posInTile,projectToSphere(posInTile),elevation);}vec4 projectTileFor3D(vec2 posInTile,float elevation) {vec3 spherePos=projectToSphere(posInTile,posInTile);return interpolateProjectionFor3D(posInTile,spherePos,elevation);}`),background:Xt(`uniform vec4 u_color;uniform float u_opacity;void main() {fragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"in vec2 a_pos;void main() {gl_Position=projectTile(a_pos);}"),backgroundPattern:Xt(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);fragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;void main() {gl_Position=projectTile(a_pos);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:Xt(`in vec3 v_data;in float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);float antialiased_blur=v_data.z;float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));fragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);const float epsilon=0.5/255.0;if (fragColor.r < epsilon && fragColor.g < epsilon && fragColor.b < epsilon && fragColor.a < epsilon) {discard;}
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform highp float u_globe_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;uniform vec2 u_translate;in vec2 a_pos;out vec3 v_data;out float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 pos_raw=a_pos+32768.0;vec2 extrude=vec2(mod(pos_raw,8.0)/7.0*2.0-1.0);vec2 circle_center=floor(pos_raw/8.0)+u_translate;float ele=get_elevation(circle_center);v_visibility=calculate_visibility(projectTileWithElevation(circle_center,ele));if (u_pitch_with_map) {
#ifdef GLOBE
vec3 center_vector=projectToSphere(circle_center);
#endif
float angle_scale=u_globe_extrude_scale;vec2 corner_position=circle_center;if (u_scale_with_map) {angle_scale*=(radius+stroke_width);corner_position+=extrude*u_extrude_scale*(radius+stroke_width);} else {
#ifdef GLOBE
vec4 projected_center=interpolateProjection(circle_center,center_vector,ele);
#else
vec4 projected_center=projectTileWithElevation(circle_center,ele);
#endif
corner_position+=extrude*u_extrude_scale*(radius+stroke_width)*(projected_center.w/u_camera_to_center_distance);angle_scale*=(radius+stroke_width)*(projected_center.w/u_camera_to_center_distance);}
#ifdef GLOBE
vec2 angles=extrude*angle_scale;vec3 corner_vector=globeRotateVector(center_vector,angles);gl_Position=interpolateProjection(corner_position,corner_vector,ele);
#else
gl_Position=projectTileWithElevation(corner_position,ele);
#endif
} else {gl_Position=projectTileWithElevation(circle_center,ele);if (gl_Position.z/gl_Position.w > 1.0) {gl_Position.xy=vec2(10000.0);}if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}float antialiasblur=-max(1.0/u_device_pixel_ratio/(radius+stroke_width),blur);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:Xt(lu,"in vec2 a_pos;void main() {gl_Position=projectTile(a_pos);}"),heatmap:Xt(`uniform highp float u_intensity;in vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);fragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;uniform highp float u_globe_extrude_scale;in vec2 a_pos;out vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 pos_raw=a_pos+32768.0;vec2 unscaled_extrude=vec2(mod(pos_raw,8.0)/7.0*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec2 circle_center=floor(pos_raw/8.0);
#ifdef GLOBE
vec2 angles=v_extrude*radius*u_globe_extrude_scale;vec3 center_vector=projectToSphere(circle_center);vec3 corner_vector=globeRotateVector(center_vector,angles);gl_Position=interpolateProjection(circle_center+extrude,corner_vector,0.0);
#else
gl_Position=projectTileFor3D(circle_center+extrude,get_elevation(circle_center));
#endif
}`),heatmapTexture:Xt(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;in vec2 v_pos;void main() {float t=texture(u_image,v_pos).r;vec4 color=texture(u_color_ramp,vec2(t,0.5));fragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:Xt("in float v_placed;in float v_notUsed;void main() {float alpha=0.5;fragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {fragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {fragColor*=.1;}}","in vec2 a_anchor_pos;in vec2 a_placed;in vec2 a_box_real;uniform vec2 u_pixel_extrude_scale;out float v_placed;out float v_notUsed;void main() {gl_Position=projectTileWithElevation(a_anchor_pos,get_elevation(a_anchor_pos));gl_Position.xy=((a_box_real+0.5)*u_pixel_extrude_scale*2.0-1.0)*vec2(1.0,-1.0)*gl_Position.w;if (gl_Position.z/gl_Position.w < 1.1) {gl_Position.z=0.5;}v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:Xt("in float v_radius;in vec2 v_extrude;in float v_collision;void main() {float alpha=0.5;float stroke_radius=0.9;float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);fragColor=color*alpha*opacity_t;}","in vec2 a_pos;in float a_radius;in vec2 a_flags;uniform vec2 u_viewport_size;out float v_radius;out vec2 v_extrude;out float v_collision;void main() {float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_collision=collision;gl_Position=vec4((a_pos/u_viewport_size*2.0-1.0)*vec2(1.0,-1.0),0.0,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),colorRelief:Xt(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;uniform vec4 u_unpack;uniform sampler2D u_elevation_stops;uniform sampler2D u_color_stops;uniform int u_color_ramp_size;uniform float u_opacity;in vec2 v_pos;float getElevation(vec2 coord) {vec4 data=texture(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack);}float getElevationStop(int stop) {float x=(float(stop)+0.5)/float(u_color_ramp_size);vec4 data=texture(u_elevation_stops,vec2(x,0))*255.0;data.a=-1.0;return dot(data,u_unpack);}void main() {float el=getElevation(v_pos);int r=(u_color_ramp_size-1);int l=0;float el_l=getElevationStop(l);float el_r=getElevationStop(r);while(r-l > 1){int m=(r+l)/2;float el_m=getElevationStop(m);if(el < el_m){r=m;el_r=el_m;}else
{l=m;el_l=el_m;}}float x=(float(l)+(el-el_l)/(el_r-el_l)+0.5)/float(u_color_ramp_size);fragColor=u_opacity*texture(u_color_stops,vec2(x,0));
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform vec2 u_dimension;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=projectTile(a_pos,a_pos);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_pos/8192.0)*scale+epsilon;if (a_pos.y <-32767.5) {v_pos.y=0.0;}if (a_pos.y > 32766.5) {v_pos.y=1.0;}}"),debug:Xt("uniform highp vec4 u_color;uniform sampler2D u_overlay;in vec2 v_uv;void main() {vec4 overlay_color=texture(u_overlay,v_uv);fragColor=mix(u_color,overlay_color,overlay_color.a);}","in vec2 a_pos;out vec2 v_uv;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=projectTileWithElevation(a_pos*u_overlay_scale,get_elevation(a_pos));}"),depth:Xt(lu,`in vec2 a_pos;void main() {
#ifdef GLOBE
gl_Position=projectTileFor3D(a_pos,0.0);
#else
gl_Position=u_projection_matrix*vec4(a_pos,0.0,1.0);
#endif
}`),fill:Xt(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
fragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_fill_translate;in vec2 a_pos;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=projectTile(a_pos+u_fill_translate,a_pos);}`),fillOutline:Xt(`in vec2 v_pos;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);fragColor=outline_color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_world;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=projectTile(a_pos+u_fill_translate,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
}`),fillOutlinePattern:Xt(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;in vec2 v_pos_a;in vec2 v_pos_b;in vec2 v_pos;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);fragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;out vec2 v_pos;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=projectTile(a_pos+u_fill_translate,a_pos);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
}`),fillPattern:Xt(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);fragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=projectTile(a_pos+u_fill_translate,a_pos);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:Xt(`in vec4 v_color;void main() {fragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp vec3 u_lightpos_globe;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec2 u_fill_translate;in vec2 a_pos;in vec4 a_normal_ed;
#ifdef TERRAIN3D
in vec2 a_centroid;
#endif
out vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float elevation=t > 0.0 ? height : base;vec2 posInTile=a_pos+u_fill_translate;
#ifdef GLOBE
vec3 spherePos=projectToSphere(posInTile,a_pos);gl_Position=interpolateProjectionFor3D(posInTile,spherePos,elevation);
#else
gl_Position=u_projection_matrix*vec4(posInTile,elevation,1.0);
#endif
float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;vec3 normalForLighting=normal/16384.0;float directional=clamp(dot(normalForLighting,u_lightpos),0.0,1.0);
#ifdef GLOBE
mat3 rotMatrix=globeGetRotationMatrix(spherePos);normalForLighting=rotMatrix*normalForLighting;directional=mix(directional,clamp(dot(normalForLighting,u_lightpos_globe),0.0,1.0),u_projection_transition);
#endif
directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:Xt(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;in vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);fragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec2 u_fill_translate;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp vec3 u_lightpos_globe;uniform lowp float u_lightintensity;in vec2 a_pos;in vec4 a_normal_ed;
#ifdef TERRAIN3D
in vec2 a_centroid;
#endif
#ifdef GLOBE
out vec3 v_sphere_pos;
#endif
out vec2 v_pos_a;out vec2 v_pos_b;out vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float elevation=t > 0.0 ? height : base;vec2 posInTile=a_pos+u_fill_translate;
#ifdef GLOBE
vec3 spherePos=projectToSphere(posInTile,a_pos);vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);v_sphere_pos=elevatedPos;gl_Position=interpolateProjectionFor3D(posInTile,spherePos,elevation);
#else
gl_Position=u_projection_matrix*vec4(posInTile,elevation,1.0);
#endif
vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,elevation*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:Xt(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack);}void main() {vec2 epsilon=1.0/u_dimension;float tileSize=u_dimension.x-2.0;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))*tileSize/pow(2.0,exaggeration+(28.2562-u_zoom));fragColor=clamp(vec4(deriv.x/8.0+0.5,deriv.y/8.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;in vec2 a_pos;in vec2 a_texture_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:Xt(`uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_latrange;uniform float u_exaggeration;uniform vec4 u_accent;uniform int u_method;uniform float u_altitudes[NUM_ILLUMINATION_SOURCES];uniform float u_azimuths[NUM_ILLUMINATION_SOURCES];uniform vec4 u_shadows[NUM_ILLUMINATION_SOURCES];uniform vec4 u_highlights[NUM_ILLUMINATION_SOURCES];
#define PI 3.141592653589793
#define STANDARD 0
#define COMBINED 1
#define IGOR 2
#define MULTIDIRECTIONAL 3
#define BASIC 4
float get_aspect(vec2 deriv){return deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);}void igor_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float aspect=get_aspect(deriv);float azimuth=u_azimuths[0]+PI;float slope_stength=atan(length(deriv))*2.0/PI;float aspect_strength=1.0-abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);float shadow_strength=slope_stength*aspect_strength;float highlight_strength=slope_stength*(1.0-aspect_strength);fragColor=u_shadows[0]*shadow_strength+u_highlights[0]*highlight_strength;}void standard_hillshade(vec2 deriv){float azimuth=u_azimuths[0]+PI;float slope=atan(0.625*length(deriv));float aspect=get_aspect(deriv);float intensity=u_exaggeration;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadows[0],u_highlights[0],shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);fragColor=accent_color*(1.0-shade_color.a)+shade_color;}void basic_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float azimuth=u_azimuths[0]+PI;float cos_az=cos(azimuth);float sin_az=sin(azimuth);float cos_alt=cos(u_altitudes[0]);float sin_alt=sin(u_altitudes[0]);float cang=(sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv));float shade=clamp(cang,0.0,1.0);if(shade > 0.5){fragColor=u_highlights[0]*(2.0*shade-1.0);}else
{fragColor=u_shadows[0]*(1.0-2.0*shade);}}void multidirectional_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;fragColor=vec4(0,0,0,0);for(int i=0; i < NUM_ILLUMINATION_SOURCES; i++){float cos_alt=cos(u_altitudes[i]);float sin_alt=sin(u_altitudes[i]);float cos_az=-cos(u_azimuths[i]);float sin_az=-sin(u_azimuths[i]);float cang=(sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv));float shade=clamp(cang,0.0,1.0);if(shade > 0.5){fragColor+=u_highlights[i]*(2.0*shade-1.0)/float(NUM_ILLUMINATION_SOURCES);}else
{fragColor+=u_shadows[i]*(1.0-2.0*shade)/float(NUM_ILLUMINATION_SOURCES);}}}void combined_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float azimuth=u_azimuths[0]+PI;float cos_az=cos(azimuth);float sin_az=sin(azimuth);float cos_alt=cos(u_altitudes[0]);float sin_alt=sin(u_altitudes[0]);float cang=acos((sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv)));cang=clamp(cang,0.0,PI/2.0);float shade=cang*atan(length(deriv))*4.0/PI/PI;float highlight=(PI/2.0-cang)*atan(length(deriv))*4.0/PI/PI;fragColor=u_shadows[0]*shade+u_highlights[0]*highlight;}void main() {vec4 pixel=texture(u_image,v_pos);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));vec2 deriv=((pixel.rg*8.0)-4.0)/scaleFactor;if (u_method==BASIC) {basic_hillshade(deriv);} else if (u_method==COMBINED) {combined_hillshade(deriv);} else if (u_method==IGOR) {igor_hillshade(deriv);} else if (u_method==MULTIDIRECTIONAL) {multidirectional_hillshade(deriv);} else if (u_method==STANDARD) {standard_hillshade(deriv);} else {standard_hillshade(deriv);}
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=projectTile(a_pos,a_pos);v_pos=a_pos/8192.0;if (a_pos.y <-32767.5) {v_pos.y=0.0;}if (a_pos.y > 32766.5) {v_pos.y=1.0;}}"),line:Xt(`uniform lowp float u_device_pixel_ratio;in vec2 v_width2;in vec2 v_normal;in float v_gamma_scale;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp float v_linesofar;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:Xt(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;in vec2 v_width2;in vec2 v_normal;in float v_gamma_scale;in highp vec2 v_uv;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture(u_image,v_uv);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
in vec2 a_pos_normal;in vec4 a_data;in float a_uv_x;in float a_split_index;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp vec2 v_uv;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:Xt(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;in vec2 v_normal;in vec2 v_width2;in float v_linesofar;in float v_gamma_scale;in float v_width;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture(u_image,pos_a),texture(u_image,pos_b),u_fade);fragColor=color*alpha*opacity;
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;out vec2 v_normal;out vec2 v_width2;out float v_linesofar;out float v_gamma_scale;out float v_width;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:Xt(`uniform lowp float u_device_pixel_ratio;uniform lowp float u_lineatlas_width;uniform sampler2D u_image;uniform float u_mix;in vec2 v_normal;in vec2 v_width2;in vec2 v_tex_a;in vec2 v_tex_b;in float v_gamma_scale;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define mediump vec4 dasharray_from
#pragma mapbox: define mediump vec4 dasharray_to
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 dasharray_from
#pragma mapbox: initialize mediump vec4 dasharray_to
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture(u_image,v_tex_a).a;float sdfdist_b=texture(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);float sdfgamma=(u_lineatlas_width/256.0/u_device_pixel_ratio)/min(dasharray_from.w,dasharray_to.w);alpha*=smoothstep(0.5-sdfgamma/floorwidth,0.5+sdfgamma/floorwidth,sdfdist);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_tileratio;uniform float u_crossfade_from;uniform float u_crossfade_to;uniform float u_lineatlas_height;out vec2 v_normal;out vec2 v_width2;out vec2 v_tex_a;out vec2 v_tex_b;out float v_gamma_scale;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define mediump vec4 dasharray_from
#pragma mapbox: define mediump vec4 dasharray_to
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 dasharray_from
#pragma mapbox: initialize mediump vec4 dasharray_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
float u_patternscale_a_x=u_tileratio/dasharray_from.w/u_crossfade_from;float u_patternscale_a_y=-dasharray_from.z/2.0/u_lineatlas_height;float u_patternscale_b_x=u_tileratio/dasharray_to.w/u_crossfade_to;float u_patternscale_b_y=-dasharray_to.z/2.0/u_lineatlas_height;v_tex_a=vec2(a_linesofar*u_patternscale_a_x/floorwidth,normal.y*u_patternscale_a_y+(float(dasharray_from.y)+0.5)/u_lineatlas_height);v_tex_b=vec2(a_linesofar*u_patternscale_b_x/floorwidth,normal.y*u_patternscale_b_y+(float(dasharray_to.y)+0.5)/u_lineatlas_height);v_width2=vec2(outset,inset);}`),lineGradientSDF:Xt(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform sampler2D u_image_dash;uniform float u_mix;uniform lowp float u_lineatlas_width;in vec2 v_normal;in vec2 v_width2;in vec2 v_tex_a;in vec2 v_tex_b;in float v_gamma_scale;in highp vec2 v_uv;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define mediump vec4 dasharray_from
#pragma mapbox: define mediump vec4 dasharray_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 dasharray_from
#pragma mapbox: initialize mediump vec4 dasharray_to
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture(u_image,v_uv);float sdfdist_a=texture(u_image_dash,v_tex_a).a;float sdfdist_b=texture(u_image_dash,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);float sdfgamma=(u_lineatlas_width/256.0)/min(dasharray_from.w,dasharray_to.w);float dash_alpha=smoothstep(0.5-sdfgamma/floorwidth,0.5+sdfgamma/floorwidth,sdfdist);fragColor=color*(alpha*dash_alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
in vec2 a_pos_normal;in vec4 a_data;in float a_uv_x;in float a_split_index;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;uniform float u_tileratio;uniform float u_crossfade_from;uniform float u_crossfade_to;uniform float u_lineatlas_height;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp vec2 v_uv;out vec2 v_tex_a;out vec2 v_tex_b;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define mediump vec4 dasharray_from
#pragma mapbox: define mediump vec4 dasharray_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 dasharray_from
#pragma mapbox: initialize mediump vec4 dasharray_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;float texel_height=1.0/u_image_height;float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
float u_patternscale_a_x=u_tileratio/dasharray_from.w/u_crossfade_from;float u_patternscale_a_y=-dasharray_from.z/2.0/u_lineatlas_height;float u_patternscale_b_x=u_tileratio/dasharray_to.w/u_crossfade_to;float u_patternscale_b_y=-dasharray_to.z/2.0/u_lineatlas_height;v_tex_a=vec2(a_linesofar*u_patternscale_a_x/floorwidth,normal.y*u_patternscale_a_y+(float(dasharray_from.y)+0.5)/u_lineatlas_height);v_tex_b=vec2(a_linesofar*u_patternscale_b_x/floorwidth,normal.y*u_patternscale_b_y+(float(dasharray_to.y)+0.5)/u_lineatlas_height);v_width2=vec2(outset,inset);}`),raster:Xt(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;in vec2 v_pos0;in vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture(u_image0,v_pos0);vec4 color1=texture(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);fragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;uniform vec4 u_coords_top;uniform vec4 u_coords_bottom;in vec2 a_pos;out vec2 v_pos0;out vec2 v_pos1;void main() {vec2 fractionalPos=a_pos/8192.0;vec2 position=mix(mix(u_coords_top.xy,u_coords_top.zw,fractionalPos.x),mix(u_coords_bottom.xy,u_coords_bottom.zw,fractionalPos.x),fractionalPos.y);gl_Position=projectTile(position,position);v_pos0=((fractionalPos-0.5)/u_buffer_scale)+0.5;
#ifdef GLOBE
if (a_pos.y <-32767.5) {v_pos0.y=0.0;}if (a_pos.y > 32766.5) {v_pos0.y=1.0;}
#endif
v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}`),symbolIcon:Xt(`uniform sampler2D u_texture;in vec2 v_tex;in float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;fragColor=texture(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec4 a_pixeloffset;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;out vec2 v_tex;out float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}gl_Position=finalPos;v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:Xt(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;in vec2 v_data0;in vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float inner_edge=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);inner_edge=inner_edge+gamma*gamma_scale;}lowp float dist=texture(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(inner_edge-gamma_scaled,inner_edge+gamma_scaled,dist);if (u_is_halo) {lowp float halo_edge=(6.0-halo_width/fontScale)/SDF_PX;alpha=min(smoothstep(halo_edge-gamma_scaled,halo_edge+gamma_scaled,dist),1.0-alpha);}fragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec4 a_pixeloffset;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_translation;uniform float u_pitched_scale;out vec2 v_data0;out vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:Xt(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;in vec4 v_data0;in vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;fragColor=texture(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);fragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;out vec4 v_data0;out vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map && !u_is_along_line) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:Xt("uniform sampler2D u_texture;uniform vec4 u_fog_color;uniform vec4 u_horizon_color;uniform float u_fog_ground_blend;uniform float u_fog_ground_blend_opacity;uniform float u_horizon_fog_blend;uniform bool u_is_globe_mode;in vec2 v_texture_pos;in float v_fog_depth;const float gamma=2.2;vec4 gammaToLinear(vec4 color) {return pow(color,vec4(gamma));}vec4 linearToGamma(vec4 color) {return pow(color,vec4(1.0/gamma));}void main() {vec4 surface_color=texture(u_texture,vec2(v_texture_pos.x,1.0-v_texture_pos.y));if (!u_is_globe_mode && v_fog_depth > u_fog_ground_blend) {vec4 surface_color_linear=gammaToLinear(surface_color);float blend_color=smoothstep(0.0,1.0,max((v_fog_depth-u_horizon_fog_blend)/(1.0-u_horizon_fog_blend),0.0));vec4 fog_horizon_color_linear=mix(gammaToLinear(u_fog_color),gammaToLinear(u_horizon_color),blend_color);float factor_fog=max(v_fog_depth-u_fog_ground_blend,0.0)/(1.0-u_fog_ground_blend);fragColor=linearToGamma(mix(surface_color_linear,fog_horizon_color_linear,pow(factor_fog,2.0)*u_fog_ground_blend_opacity));} else {fragColor=surface_color;}}","in vec3 a_pos3d;uniform mat4 u_fog_matrix;uniform float u_ele_delta;out vec2 v_texture_pos;out float v_fog_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=projectTileFor3D(a_pos3d.xy,get_elevation(a_pos3d.xy)-ele_delta);vec4 pos=u_fog_matrix*vec4(a_pos3d.xy,ele,1.0);v_fog_depth=pos.z/pos.w*0.5+0.5;}"),terrainDepth:Xt("in float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {fragColor=pack(v_depth);}","in vec3 a_pos3d;uniform float u_ele_delta;out float v_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;gl_Position=projectTileFor3D(a_pos3d.xy,ele-ele_delta);v_depth=gl_Position.z/gl_Position.w;}"),terrainCoords:Xt("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;in vec2 v_texture_pos;void main() {vec4 rgba=texture(u_texture,v_texture_pos);fragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}","in vec3 a_pos3d;uniform float u_ele_delta;out vec2 v_texture_pos;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=projectTileFor3D(a_pos3d.xy,ele-ele_delta);}"),projectionErrorMeasurement:Xt("in vec4 v_output_error_encoded;void main() {fragColor=v_output_error_encoded;}","in vec2 a_pos;uniform highp float u_input;uniform highp float u_output_expected;out vec4 v_output_error_encoded;void main() {float real_output=2.0*atan(exp(PI-(u_input*PI*2.0)))-PI*0.5;float error=real_output-u_output_expected;float abs_error=abs(error)*128.0;v_output_error_encoded.x=min(floor(abs_error*256.0),255.0)/255.0;abs_error-=v_output_error_encoded.x;v_output_error_encoded.y=min(floor(abs_error*65536.0),255.0)/255.0;abs_error-=v_output_error_encoded.x/255.0;v_output_error_encoded.z=min(floor(abs_error*16777216.0),255.0)/255.0;v_output_error_encoded.w=error >=0.0 ? 1.0 : 0.0;gl_Position=vec4(a_pos,0.0,1.0);}"),atmosphere:Xt(`in vec3 view_direction;uniform vec3 u_sun_pos;uniform vec3 u_globe_position;uniform float u_globe_radius;uniform float u_atmosphere_blend;/**Shader use from https:*Made some change to adapt to MapLibre Globe geometry*/const float PI=3.141592653589793;const int iSteps=5;const int jSteps=3;/*radius of the planet*/const float EARTH_RADIUS=6371e3;/*radius of the atmosphere*/const float ATMOS_RADIUS=6471e3;vec2 rsi(vec3 r0,vec3 rd,float sr) {float a=dot(rd,rd);float b=2.0*dot(rd,r0);float c=dot(r0,r0)-(sr*sr);float d=(b*b)-4.0*a*c;if (d < 0.0) return vec2(1e5,-1e5);return vec2((-b-sqrt(d))/(2.0*a),(-b+sqrt(d))/(2.0*a));}vec4 atmosphere(vec3 r,vec3 r0,vec3 pSun,float iSun,float rPlanet,float rAtmos,vec3 kRlh,float kMie,float shRlh,float shMie,float g) {pSun=normalize(pSun);r=normalize(r);vec2 p=rsi(r0,r,rAtmos);if (p.x > p.y) {return vec4(0.0,0.0,0.0,1.0);}if (p.x < 0.0) {p.x=0.0;}vec3 pos=r0+r*p.x;vec2 p2=rsi(r0,r,rPlanet);if (p2.x <=p2.y && p2.x > 0.0) {p.y=min(p.y,p2.x);}float iStepSize=(p.y-p.x)/float(iSteps);float iTime=p.x+iStepSize*0.5;vec3 totalRlh=vec3(0,0,0);vec3 totalMie=vec3(0,0,0);float iOdRlh=0.0;float iOdMie=0.0;float mu=dot(r,pSun);float mumu=mu*mu;float gg=g*g;float pRlh=3.0/(16.0*PI)*(1.0+mumu);float pMie=3.0/(8.0*PI)*((1.0-gg)*(mumu+1.0))/(pow(1.0+gg-2.0*mu*g,1.5)*(2.0+gg));for (int i=0; i < iSteps; i++) {vec3 iPos=r0+r*iTime;float iHeight=length(iPos)-rPlanet;float odStepRlh=exp(-iHeight/shRlh)*iStepSize;float odStepMie=exp(-iHeight/shMie)*iStepSize;iOdRlh+=odStepRlh;iOdMie+=odStepMie;float jStepSize=rsi(iPos,pSun,rAtmos).y/float(jSteps);float jTime=jStepSize*0.5;float jOdRlh=0.0;float jOdMie=0.0;for (int j=0; j < jSteps; j++) {vec3 jPos=iPos+pSun*jTime;float jHeight=length(jPos)-rPlanet;jOdRlh+=exp(-jHeight/shRlh)*jStepSize;jOdMie+=exp(-jHeight/shMie)*jStepSize;jTime+=jStepSize;}vec3 attn=exp(-(kMie*(iOdMie+jOdMie)+kRlh*(iOdRlh+jOdRlh)));totalRlh+=odStepRlh*attn;totalMie+=odStepMie*attn;iTime+=iStepSize;}float opacity=exp(-(length(kRlh)*length(totalRlh)+kMie*length(totalMie)));vec3 color=iSun*(pRlh*kRlh*totalRlh+pMie*kMie*totalMie);return vec4(color,opacity);}void main() {vec3 scale_camera_pos=-u_globe_position*EARTH_RADIUS/u_globe_radius;vec4 color=atmosphere(normalize(view_direction),scale_camera_pos,u_sun_pos,22.0,EARTH_RADIUS,ATMOS_RADIUS,vec3(5.5e-6,13.0e-6,22.4e-6),21e-6,8e3,1.2e3,0.758
);color.rgb=1.0-exp(-1.0*color.rgb);color=pow(color,vec4(1.0/2.2));fragColor=vec4(color.rgb,1.0-color.a)*u_atmosphere_blend;}`,"in vec2 a_pos;uniform mat4 u_inv_proj_matrix;out vec3 view_direction;void main() {view_direction=(u_inv_proj_matrix*vec4(a_pos,0.0,1.0)).xyz;gl_Position=vec4(a_pos,0.0,1.0);}"),sky:Xt("uniform vec4 u_sky_color;uniform vec4 u_horizon_color;uniform vec2 u_horizon;uniform vec2 u_horizon_normal;uniform float u_sky_horizon_blend;uniform float u_sky_blend;void main() {float x=gl_FragCoord.x;float y=gl_FragCoord.y;float blend=(y-u_horizon.y)*u_horizon_normal.y+(x-u_horizon.x)*u_horizon_normal.x;if (blend > 0.0) {if (blend < u_sky_horizon_blend) {fragColor=mix(u_sky_color,u_horizon_color,pow(1.0-blend/u_sky_horizon_blend,2.0));} else {fragColor=u_sky_color;}}fragColor=mix(fragColor,vec4(vec3(0.0),0.0),u_sky_blend);}","in vec2 a_pos;void main() {gl_Position=vec4(a_pos,1.0,1.0);}")};function Xt(p,e){const n=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,l=e.match(/in ([\w]+) ([\w]+)/g),h=p.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),g=e.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),v=g?g.concat(h):h,w={};return{fragmentSource:p=p.replace(n,((C,z,k,O,I)=>(w[I]=!0,z==="define"?`
#ifndef HAS_UNIFORM_u_${I}
in ${k} ${O} ${I};
#else
uniform ${k} ${O} u_${I};
#endif
`:`
#ifdef HAS_UNIFORM_u_${I}
    ${k} ${O} ${I} = u_${I};
#endif
`))),vertexSource:e=e.replace(n,((C,z,k,O,I)=>{const F=O==="float"?"vec2":"vec4",H=I.match(/color/)?"color":F;return w[I]?z==="define"?`
#ifndef HAS_UNIFORM_u_${I}
uniform lowp float u_${I}_t;
in ${k} ${F} a_${I};
out ${k} ${O} ${I};
#else
uniform ${k} ${O} u_${I};
#endif
`:H==="vec4"?`
#ifndef HAS_UNIFORM_u_${I}
    ${I} = a_${I};
#else
    ${k} ${O} ${I} = u_${I};
#endif
`:`
#ifndef HAS_UNIFORM_u_${I}
    ${I} = unpack_mix_${H}(a_${I}, u_${I}_t);
#else
    ${k} ${O} ${I} = u_${I};
#endif
`:z==="define"?`
#ifndef HAS_UNIFORM_u_${I}
uniform lowp float u_${I}_t;
in ${k} ${F} a_${I};
#else
uniform ${k} ${O} u_${I};
#endif
`:H==="vec4"?`
#ifndef HAS_UNIFORM_u_${I}
    ${k} ${O} ${I} = a_${I};
#else
    ${k} ${O} ${I} = u_${I};
#endif
`:`
#ifndef HAS_UNIFORM_u_${I}
    ${k} ${O} ${I} = unpack_mix_${H}(a_${I}, u_${I}_t);
#else
    ${k} ${O} ${I} = u_${I};
#endif
`})),staticAttributes:l,staticUniforms:v}}class Dn{constructor(e,n,l){this.vertexBuffer=e,this.indexBuffer=n,this.segments=l}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.vertexBuffer=null,this.indexBuffer=null,this.segments=null}}var It=d.aJ([{name:"a_pos",type:"Int16",components:2}]);const dn="#define PROJECTION_MERCATOR",cu="mercator";class Fs{constructor(){this._cachedMesh=null}get name(){return"mercator"}get useSubdivision(){return!1}get shaderVariantName(){return cu}get shaderDefine(){return dn}get shaderPreludeCode(){return hn.projectionMercator}get vertexShaderPreludeCode(){return hn.projectionMercator.vertexSource}get subdivisionGranularity(){return d.aK.noSubdivision}get useGlobeControls(){return!1}get transitionState(){return 0}get latitudeErrorCorrectionRadians(){return 0}destroy(){}updateGPUdependent(e){}getMeshFromTileID(e,n,l,h,g){if(this._cachedMesh)return this._cachedMesh;const v=new d.aL;v.emplaceBack(0,0),v.emplaceBack(d.$,0),v.emplaceBack(0,d.$),v.emplaceBack(d.$,d.$);const w=e.createVertexBuffer(v,It.members),C=d.aM.simpleSegment(0,0,4,2),z=new d.aN;z.emplaceBack(1,0,2),z.emplaceBack(1,2,3);const k=e.createIndexBuffer(z);return this._cachedMesh=new Dn(w,k,C),this._cachedMesh}recalculate(){}hasTransition(){return!1}setErrorQueryLatitudeDegrees(e){}}class fr{constructor(e=0,n=0,l=0,h=0){if(isNaN(e)||e<0||isNaN(n)||n<0||isNaN(l)||l<0||isNaN(h)||h<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=e,this.bottom=n,this.left=l,this.right=h}interpolate(e,n,l){return n.top!=null&&e.top!=null&&(this.top=d.C.number(e.top,n.top,l)),n.bottom!=null&&e.bottom!=null&&(this.bottom=d.C.number(e.bottom,n.bottom,l)),n.left!=null&&e.left!=null&&(this.left=d.C.number(e.left,n.left,l)),n.right!=null&&e.right!=null&&(this.right=d.C.number(e.right,n.right,l)),this}getCenter(e,n){const l=d.ae((this.left+e-this.right)/2,0,e),h=d.ae((this.top+n-this.bottom)/2,0,n);return new d.P(l,h)}equals(e){return this.top===e.top&&this.bottom===e.bottom&&this.left===e.left&&this.right===e.right}clone(){return new fr(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}function cr(p,e){if(!p.renderWorldCopies||p.lngRange)return;const n=e.lng-p.center.lng;e.lng+=n>180?-360:n<-180?360:0}function Kr(p){return Math.max(0,Math.floor(p))}class yr{constructor(e,n){var l;this._callbacks=e,this._tileSize=512,this._renderWorldCopies=n?.renderWorldCopies===void 0||!!n?.renderWorldCopies,this._minZoom=n?.minZoom||0,this._maxZoom=n?.maxZoom||22,this._minPitch=n?.minPitch==null?0:n?.minPitch,this._maxPitch=n?.maxPitch==null?60:n?.maxPitch,this._constrain=(l=n?.constrain)!==null&&l!==void 0?l:this._callbacks.constrain,this.setMaxBounds(),this._width=0,this._height=0,this._center=new d.S(0,0),this._elevation=0,this._zoom=0,this._tileZoom=Kr(this._zoom),this._scale=d.ah(this._zoom),this._bearingInRadians=0,this._fovInRadians=.6435011087932844,this._pitchInRadians=0,this._rollInRadians=0,this._unmodified=!0,this._edgeInsets=new fr,this._minElevationForCurrentTile=0,this._autoCalculateNearFarZ=!0}apply(e,n,l){this._latRange=e.latRange,this._lngRange=e.lngRange,this._width=e.width,this._height=e.height,this._center=e.center,this._elevation=e.elevation,this._minElevationForCurrentTile=e.minElevationForCurrentTile,this._zoom=e.zoom,this._tileZoom=Kr(this._zoom),this._scale=d.ah(this._zoom),this._bearingInRadians=e.bearingInRadians,this._fovInRadians=e.fovInRadians,this._pitchInRadians=e.pitchInRadians,this._rollInRadians=e.rollInRadians,this._unmodified=e.unmodified,this._edgeInsets=new fr(e.padding.top,e.padding.bottom,e.padding.left,e.padding.right),this._minZoom=e.minZoom,this._maxZoom=e.maxZoom,this._minPitch=e.minPitch,this._maxPitch=e.maxPitch,this._renderWorldCopies=e.renderWorldCopies,this._cameraToCenterDistance=e.cameraToCenterDistance,this._nearZ=e.nearZ,this._farZ=e.farZ,this._autoCalculateNearFarZ=!l&&e.autoCalculateNearFarZ,n&&this.constrainInternal(),this._calcMatrices()}get pixelsToClipSpaceMatrix(){return this._pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._clipSpaceToPixelsMatrix}get minElevationForCurrentTile(){return this._minElevationForCurrentTile}setMinElevationForCurrentTile(e){this._minElevationForCurrentTile=e}get tileSize(){return this._tileSize}get tileZoom(){return this._tileZoom}get scale(){return this._scale}get width(){return this._width}get height(){return this._height}get bearingInRadians(){return this._bearingInRadians}get lngRange(){return this._lngRange}get latRange(){return this._latRange}get pixelsToGLUnits(){return this._pixelsToGLUnits}get minZoom(){return this._minZoom}setMinZoom(e){this._minZoom!==e&&(this._minZoom=e,this.setZoom(this.constrain(this._center,this.zoom).zoom))}get maxZoom(){return this._maxZoom}setMaxZoom(e){this._maxZoom!==e&&(this._maxZoom=e,this.setZoom(this.constrain(this._center,this.zoom).zoom))}get minPitch(){return this._minPitch}setMinPitch(e){this._minPitch!==e&&(this._minPitch=e,this.setPitch(Math.max(this.pitch,e)))}get maxPitch(){return this._maxPitch}setMaxPitch(e){this._maxPitch!==e&&(this._maxPitch=e,this.setPitch(Math.min(this.pitch,e)))}get renderWorldCopies(){return this._renderWorldCopies}setRenderWorldCopies(e){e===void 0?e=!0:e===null&&(e=!1),this._renderWorldCopies=e}get constrain(){return this._constrain}setConstrain(e){e||(e=this._callbacks.constrain),this._constrain=e,this.constrainInternal(),this._calcMatrices()}get worldSize(){return this._tileSize*this._scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new d.P(this._width,this._height)}get bearing(){return this._bearingInRadians/Math.PI*180}setBearing(e){const n=d.aO(e,-180,180)*Math.PI/180;var l,h,g,v,w,C,z,k,O;this._bearingInRadians!==n&&(this._unmodified=!1,this._bearingInRadians=n,this._calcMatrices(),this._rotationMatrix=ke(),l=this._rotationMatrix,g=-this._bearingInRadians,v=(h=this._rotationMatrix)[0],w=h[1],C=h[2],z=h[3],k=Math.sin(g),O=Math.cos(g),l[0]=v*O+C*k,l[1]=w*O+z*k,l[2]=v*-k+C*O,l[3]=w*-k+z*O)}get rotationMatrix(){return this._rotationMatrix}get pitchInRadians(){return this._pitchInRadians}get pitch(){return this._pitchInRadians/Math.PI*180}setPitch(e){const n=d.ae(e,this.minPitch,this.maxPitch)/180*Math.PI;this._pitchInRadians!==n&&(this._unmodified=!1,this._pitchInRadians=n,this._calcMatrices())}get rollInRadians(){return this._rollInRadians}get roll(){return this._rollInRadians/Math.PI*180}setRoll(e){const n=e/180*Math.PI;this._rollInRadians!==n&&(this._unmodified=!1,this._rollInRadians=n,this._calcMatrices())}get fovInRadians(){return this._fovInRadians}get fov(){return d.aP(this._fovInRadians)}setFov(e){e=d.ae(e,.1,150),this.fov!==e&&(this._unmodified=!1,this._fovInRadians=d.ag(e),this._calcMatrices())}get zoom(){return this._zoom}setZoom(e){const n=this.constrain(this._center,e).zoom;this._zoom!==n&&(this._unmodified=!1,this._zoom=n,this._tileZoom=Math.max(0,Math.floor(n)),this._scale=d.ah(n),this.constrainInternal(),this._calcMatrices())}get center(){return this._center}setCenter(e){e.lat===this._center.lat&&e.lng===this._center.lng||(this._unmodified=!1,this._center=e,this.constrainInternal(),this._calcMatrices())}get elevation(){return this._elevation}setElevation(e){e!==this._elevation&&(this._elevation=e,this.constrainInternal(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}setPadding(e){this._edgeInsets.equals(e)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,e,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this._width,this._height)}get pixelsPerMeter(){return this._pixelPerMeter}get unmodified(){return this._unmodified}get cameraToCenterDistance(){return this._cameraToCenterDistance}get nearZ(){return this._nearZ}get farZ(){return this._farZ}get autoCalculateNearFarZ(){return this._autoCalculateNearFarZ}overrideNearFarZ(e,n){this._autoCalculateNearFarZ=!1,this._nearZ=e,this._farZ=n,this._calcMatrices()}clearNearFarZOverride(){this._autoCalculateNearFarZ=!0,this._calcMatrices()}isPaddingEqual(e){return this._edgeInsets.equals(e)}interpolatePadding(e,n,l){this._unmodified=!1,this._edgeInsets.interpolate(e,n,l),this.constrainInternal(),this._calcMatrices()}resize(e,n,l=!0){this._width=e,this._height=n,l&&this.constrainInternal(),this._calcMatrices()}getMaxBounds(){return this._latRange&&this._latRange.length===2&&this._lngRange&&this._lngRange.length===2?new Di([this._lngRange[0],this._latRange[0]],[this._lngRange[1],this._latRange[1]]):null}setMaxBounds(e){e?(this._lngRange=[e.getWest(),e.getEast()],this._latRange=[e.getSouth(),e.getNorth()],this.constrainInternal()):(this._lngRange=null,this._latRange=[-d.af,d.af])}getCameraQueryGeometry(e,n){if(n.length===1)return[n[0],e];{const{minX:l,minY:h,maxX:g,maxY:v}=d.a2.fromPoints(n).extend(e);return[new d.P(l,h),new d.P(g,h),new d.P(g,v),new d.P(l,v),new d.P(l,h)]}}constrainInternal(){if(!this.center||!this._width||!this._height||this._constraining)return;this._constraining=!0;const e=this._unmodified,{center:n,zoom:l}=this.constrain(this.center,this.zoom);this.setCenter(n),this.setZoom(l),this._unmodified=e,this._constraining=!1}_calcMatrices(){if(this._width&&this._height){this._pixelsToGLUnits=[2/this._width,-2/this._height];let e=d.ai(new Float64Array(16));d.N(e,e,[this._width/2,-this._height/2,1]),d.M(e,e,[1,-1,0]),this._clipSpaceToPixelsMatrix=e,e=d.ai(new Float64Array(16)),d.N(e,e,[1,-1,1]),d.M(e,e,[-1,-1,0]),d.N(e,e,[2/this._width,2/this._height,1]),this._pixelsToClipSpaceMatrix=e,this._cameraToCenterDistance=.5/Math.tan(this.fovInRadians/2)*this._height}this._callbacks.calcMatrices()}calculateCenterFromCameraLngLatAlt(e,n,l,h){const g=l!==void 0?l:this.bearing,v=h=h!==void 0?h:this.pitch,w=d.a1.fromLngLat(e,n),C=-Math.cos(d.ag(v)),z=Math.sin(d.ag(v)),k=z*Math.sin(d.ag(g)),O=-z*Math.cos(d.ag(g));let I=this.elevation;const F=n-I;let H;C*F>=0||Math.abs(C)<.1?(H=1e4,I=n+H*C):H=-F/C;let K,W,J=d.aQ(1,w.y),ie=0;do{if(ie+=1,ie>10)break;W=H/J,K=new d.a1(w.x+k*W,w.y+O*W),J=1/K.meterInMercatorCoordinateUnits()}while(Math.abs(H-W*J)>1e-12);return{center:K.toLngLat(),elevation:I,zoom:d.ak(this.height/2/Math.tan(this.fovInRadians/2)/W/this.tileSize)}}recalculateZoomAndCenter(e){if(this.elevation-e==0)return;const n=d.aj(1,this.center.lat)*this.worldSize,l=this.cameraToCenterDistance/n,h=d.a1.fromLngLat(this.center,this.elevation),g=Ze(this.center,this.elevation,this.pitch,this.bearing,l);this._elevation=e;const v=this.calculateCenterFromCameraLngLatAlt(g.toLngLat(),d.aQ(g.z,h.y),this.bearing,this.pitch);this._elevation=v.elevation,this._center=v.center,this.setZoom(v.zoom)}getCameraPoint(){const e=Math.tan(this.pitchInRadians)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new d.P(e*Math.sin(this.rollInRadians),e*Math.cos(this.rollInRadians)))}getCameraAltitude(){return Math.cos(this.pitchInRadians)*this._cameraToCenterDistance/this._pixelPerMeter+this.elevation}getCameraLngLat(){const e=d.aj(1,this.center.lat)*this.worldSize;return Ze(this.center,this.elevation,this.pitch,this.bearing,this.cameraToCenterDistance/e).toLngLat()}getMercatorTileCoordinates(e){if(!e)return[0,0,1,1];const n=e.canonical.z>=0?1<<e.canonical.z:Math.pow(2,e.canonical.z);return[e.canonical.x/n,e.canonical.y/n,1/n/d.$,1/n/d.$]}}class Vi{constructor(e,n){this.min=e,this.max=n,this.center=d.aR([],d.aS([],this.min,this.max),.5)}quadrant(e){const n=[e%2==0,e<2],l=d.aT(this.min),h=d.aT(this.max);for(let g=0;g<n.length;g++)l[g]=n[g]?this.min[g]:this.center[g],h[g]=n[g]?this.center[g]:this.max[g];return h[2]=this.max[2],new Vi(l,h)}distanceX(e){return Math.max(Math.min(this.max[0],e[0]),this.min[0])-e[0]}distanceY(e){return Math.max(Math.min(this.max[1],e[1]),this.min[1])-e[1]}intersectsFrustum(e){let n=!0;for(let l=0;l<e.planes.length;l++){const h=this.intersectsPlane(e.planes[l]);if(h===0)return 0;h===1&&(n=!1)}return n?2:e.aabb.min[0]>this.max[0]||e.aabb.min[1]>this.max[1]||e.aabb.min[2]>this.max[2]||e.aabb.max[0]<this.min[0]||e.aabb.max[1]<this.min[1]||e.aabb.max[2]<this.min[2]?0:1}intersectsPlane(e){let n=e[3],l=e[3];for(let h=0;h<3;h++)e[h]>0?(n+=e[h]*this.min[h],l+=e[h]*this.max[h]):(l+=e[h]*this.min[h],n+=e[h]*this.max[h]);return n>=0?2:l<0?0:1}}class vc{distanceToTile2d(e,n,l,h){const g=h.distanceX([e,n]),v=h.distanceY([e,n]);return Math.hypot(g,v)}getWrap(e,n,l){return l}getTileBoundingVolume(e,n,l,h){var g,v;let w=0,C=0;if(h?.terrain){const k=new d.Z(e.z,n,e.z,e.x,e.y),O=h.terrain.getMinMaxElevation(k);w=(g=O.minElevation)!==null&&g!==void 0?g:Math.min(0,l),C=(v=O.maxElevation)!==null&&v!==void 0?v:Math.max(0,l)}const z=1<<e.z;return new Vi([n+e.x/z,e.y/z,w],[n+(e.x+1)/z,(e.y+1)/z,C])}allowVariableZoom(e,n){const l=e.fov*(Math.abs(Math.cos(e.rollInRadians))*e.height+Math.abs(Math.sin(e.rollInRadians))*e.width)/e.height,h=d.ae(78.5-l/2,0,60);return!!n.terrain||e.pitch>h}allowWorldCopies(){return!0}prepareNextFrame(){}}class Qi{constructor(e,n,l){this.points=e,this.planes=n,this.aabb=l}static fromInvProjectionMatrix(e,n=1,l=0,h,g){const v=g?[[6,5,4],[0,1,2],[0,3,7],[2,1,5],[3,2,6],[0,4,5]]:[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]],w=Math.pow(2,l),C=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map((I=>(function(F,H,K,W){const J=d.aw([],F,H),ie=1/J[3]/K*W;return d.aY(J,J,[ie,ie,1/J[3],ie])})(I,e,n,w)));h&&(function(I,F,H,K){const W=K?4:0,J=K?0:4;let ie=0;const oe=[],te=[];for(let ae=0;ae<4;ae++){const fe=d.aU([],I[ae+J],I[ae+W]),Ae=d.aZ(fe);d.aR(fe,fe,1/Ae),oe.push(Ae),te.push(fe)}for(let ae=0;ae<4;ae++){const fe=d.a_(I[ae+W],te[ae],H);ie=fe!==null&&fe>=0?Math.max(ie,fe):Math.max(ie,oe[ae])}const le=(function(ae,fe){const Ae=d.aU([],ae[fe[0]],ae[fe[1]]),we=d.aU([],ae[fe[2]],ae[fe[1]]),Se=[0,0,0,0];return d.aV(Se,d.aW([],Ae,we)),Se[3]=-d.aX(Se,ae[fe[0]]),Se})(I,F),ue=(function(ae,fe){const Ae=d.a$(ae),we=d.b0([],ae,1/Ae),Se=d.aU([],fe,d.aR([],we,d.aX(fe,we))),Ee=d.a$(Se);if(Ee>0){const Qe=Math.sqrt(1-we[3]*we[3]),Ke=d.aR([],we,-we[3]),Ne=d.aS([],Ke,d.aR([],Se,Qe/Ee));return d.b1(fe,Ne)}return null})(H,le);if(ue!==null){const ae=ue/d.aX(te[0],le);ie=Math.min(ie,ae)}for(let ae=0;ae<4;ae++){const fe=Math.min(ie,oe[ae]);I[ae+J]=[I[ae+W][0]+te[ae][0]*fe,I[ae+W][1]+te[ae][1]*fe,I[ae+W][2]+te[ae][2]*fe,1]}})(C,v[0],h,g);const z=v.map((I=>{const F=d.aU([],C[I[0]],C[I[1]]),H=d.aU([],C[I[2]],C[I[1]]),K=d.aV([],d.aW([],F,H)),W=-d.aX(K,C[I[1]]);return K.concat(W)})),k=[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY],O=[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY];for(const I of C)for(let F=0;F<3;F++)k[F]=Math.min(k[F],I[F]),O[F]=Math.max(O[F],I[F]);return new Qi(C,z,new Vi(k,O))}}class Br{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(e){this._helper.setMinZoom(e)}setMaxZoom(e){this._helper.setMaxZoom(e)}setMinPitch(e){this._helper.setMinPitch(e)}setMaxPitch(e){this._helper.setMaxPitch(e)}setRenderWorldCopies(e){this._helper.setRenderWorldCopies(e)}setBearing(e){this._helper.setBearing(e)}setPitch(e){this._helper.setPitch(e)}setRoll(e){this._helper.setRoll(e)}setFov(e){this._helper.setFov(e)}setZoom(e){this._helper.setZoom(e)}setCenter(e){this._helper.setCenter(e)}setElevation(e){this._helper.setElevation(e)}setMinElevationForCurrentTile(e){this._helper.setMinElevationForCurrentTile(e)}setPadding(e){this._helper.setPadding(e)}interpolatePadding(e,n,l){return this._helper.interpolatePadding(e,n,l)}isPaddingEqual(e){return this._helper.isPaddingEqual(e)}resize(e,n,l=!0){this._helper.resize(e,n,l)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(e){this._helper.setMaxBounds(e)}setConstrain(e){this._helper.setConstrain(e)}overrideNearFarZ(e,n){this._helper.overrideNearFarZ(e,n)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(e){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),e)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}get constrain(){return this._helper.constrain}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}setTransitionState(e,n){}constructor(e){this._posMatrixCache=new Map,this._alignedPosMatrixCache=new Map,this._fogMatrixCacheF32=new Map,this.defaultConstrain=(n,l)=>{l=d.ae(+l,this.minZoom,this.maxZoom);const h={center:new d.S(n.lng,n.lat),zoom:l};let g=this._helper._lngRange;if(!this._helper._renderWorldCopies&&g===null){const te=179.9999999999;g=[-te,te]}const v=this.tileSize*d.ah(h.zoom);let w=0,C=v,z=0,k=v,O=0,I=0;const{x:F,y:H}=this.size;if(this._helper._latRange){const te=this._helper._latRange;w=d.U(te[1])*v,C=d.U(te[0])*v,C-w<H&&(O=H/(C-w))}g&&(z=d.aO(d.V(g[0])*v,0,v),k=d.aO(d.V(g[1])*v,0,v),k<z&&(k+=v),k-z<F&&(I=F/(k-z)));const{x:K,y:W}=de(v,n);let J,ie;const oe=Math.max(I||0,O||0);if(oe){const te=new d.P(I?(k+z)/2:K,O?(C+w)/2:W);return h.center=Me(v,te).wrap(),h.zoom+=d.ak(oe),h}if(this._helper._latRange){const te=H/2;W-te<w&&(ie=w+te),W+te>C&&(ie=C-te)}if(g){const te=(z+k)/2;let le=K;this._helper._renderWorldCopies&&(le=d.aO(K,te-v/2,te+v/2));const ue=F/2;le-ue<z&&(J=z+ue),le+ue>k&&(J=k-ue)}if(J!==void 0||ie!==void 0){const te=new d.P(J??K,ie??W);h.center=Me(v,te).wrap()}return h},this._helper=new yr({calcMatrices:()=>{this._calcMatrices()},constrain:(n,l)=>this.defaultConstrain(n,l)},e),this._coveringTilesDetailsProvider=new vc}clone(){const e=new Br;return e.apply(this),e}apply(e,n,l){this._helper.apply(e,n,l)}get cameraPosition(){return this._cameraPosition}get projectionMatrix(){return this._projectionMatrix}get modelViewProjectionMatrix(){return this._viewProjMatrix}get inverseProjectionMatrix(){return this._invProjMatrix}get mercatorMatrix(){return this._mercatorMatrix}getVisibleUnwrappedCoordinates(e){const n=[new d.b2(0,e)];if(this._helper._renderWorldCopies){const l=this.screenPointToMercatorCoordinate(new d.P(0,0)),h=this.screenPointToMercatorCoordinate(new d.P(this._helper._width,0)),g=this.screenPointToMercatorCoordinate(new d.P(this._helper._width,this._helper._height)),v=this.screenPointToMercatorCoordinate(new d.P(0,this._helper._height)),w=Math.floor(Math.min(l.x,h.x,g.x,v.x)),C=Math.floor(Math.max(l.x,h.x,g.x,v.x)),z=1;for(let k=w-z;k<=C+z;k++)k!==0&&n.push(new d.b2(k,e))}return n}getCameraFrustum(){return Qi.fromInvProjectionMatrix(this._invViewProjMatrix,this.worldSize)}getClippingPlane(){return null}getCoveringTilesDetailsProvider(){return this._coveringTilesDetailsProvider}recalculateZoomAndCenter(e){const n=this.screenPointToLocation(this.centerPoint,e),l=e?e.getElevationForLngLatZoom(n,this._helper._tileZoom):0;this._helper.recalculateZoomAndCenter(l)}setLocationAtPoint(e,n){const l=d.aj(this.elevation,this.center.lat),h=this.screenPointToMercatorCoordinateAtZ(n,l),g=this.screenPointToMercatorCoordinateAtZ(this.centerPoint,l),v=d.a1.fromLngLat(e),w=new d.a1(v.x-(h.x-g.x),v.y-(h.y-g.y));this.setCenter(w?.toLngLat()),this._helper._renderWorldCopies&&this.setCenter(this.center.wrap())}locationToScreenPoint(e,n){return n?this.coordinatePoint(d.a1.fromLngLat(e),n.getElevationForLngLatZoom(e,this._helper._tileZoom),this._pixelMatrix3D):this.coordinatePoint(d.a1.fromLngLat(e))}screenPointToLocation(e,n){var l;return(l=this.screenPointToMercatorCoordinate(e,n))===null||l===void 0?void 0:l.toLngLat()}screenPointToMercatorCoordinate(e,n){if(n){const l=n.pointCoordinate(e);if(l!=null)return l}return this.screenPointToMercatorCoordinateAtZ(e)}screenPointToMercatorCoordinateAtZ(e,n){const l=n||0,h=[e.x,e.y,0,1],g=[e.x,e.y,1,1];d.aw(h,h,this._pixelMatrixInverse),d.aw(g,g,this._pixelMatrixInverse);const v=h[3],w=g[3],C=h[1]/v,z=g[1]/w,k=h[2]/v,O=g[2]/w,I=k===O?0:(l-k)/(O-k);return new d.a1(d.C.number(h[0]/v,g[0]/w,I)/this.worldSize,d.C.number(C,z,I)/this.worldSize,l)}coordinatePoint(e,n=0,l=this._pixelMatrix){const h=[e.x*this.worldSize,e.y*this.worldSize,n,1];return d.aw(h,h,l),new d.P(h[0]/h[3],h[1]/h[3])}getBounds(){const e=Math.max(0,this._helper._height/2-ve(this));return new Di().extend(this.screenPointToLocation(new d.P(0,e))).extend(this.screenPointToLocation(new d.P(this._helper._width,e))).extend(this.screenPointToLocation(new d.P(this._helper._width,this._helper._height))).extend(this.screenPointToLocation(new d.P(0,this._helper._height)))}isPointOnMapSurface(e,n){return n?n.pointCoordinate(e)!=null:e.y>this.height/2-ve(this)}calculatePosMatrix(e,n=!1,l){var h;const g=(h=e.key)!==null&&h!==void 0?h:d.b3(e.wrap,e.canonical.z,e.canonical.z,e.canonical.x,e.canonical.y),v=n?this._alignedPosMatrixCache:this._posMatrixCache;if(v.has(g)){const z=v.get(g);return l?z.f32:z.f64}const w=De(e,this.worldSize);d.O(w,n?this._alignedProjMatrix:this._viewProjMatrix,w);const C={f64:w,f32:new Float32Array(w)};return v.set(g,C),l?C.f32:C.f64}calculateFogMatrix(e){const n=e.key,l=this._fogMatrixCacheF32;if(l.has(n))return l.get(n);const h=De(e,this.worldSize);return d.O(h,this._fogMatrix,h),l.set(n,new Float32Array(h)),l.get(n)}calculateCenterFromCameraLngLatAlt(e,n,l,h){return this._helper.calculateCenterFromCameraLngLatAlt(e,n,l,h)}_calculateNearFarZIfNeeded(e,n,l){if(!this._helper.autoCalculateNearFarZ)return;const h=Math.min(this.elevation,this.minElevationForCurrentTile,this.getCameraAltitude()-100),g=e-h*this._helper._pixelPerMeter/Math.cos(n),v=h<0?g:e,w=Math.PI/2+this.pitchInRadians,C=d.ag(this.fov)*(Math.abs(Math.cos(d.ag(this.roll)))*this.height+Math.abs(Math.sin(d.ag(this.roll)))*this.width)/this.height*(.5+l.y/this.height),z=Math.sin(C)*v/Math.sin(d.ae(Math.PI-w-C,.01,Math.PI-.01)),k=ve(this),O=Math.atan(k/this._helper.cameraToCenterDistance),I=d.ag(.75),F=O>I?2*O*(.5+l.y/(2*k)):I,H=Math.sin(F)*v/Math.sin(d.ae(Math.PI-w-F,.01,Math.PI-.01)),K=Math.min(z,H);this._helper._farZ=1.01*(Math.cos(Math.PI/2-n)*K+v),this._helper._nearZ=this._helper._height/50}_calcMatrices(){if(!this._helper._height)return;const e=this.centerOffset,n=de(this.worldSize,this.center),l=n.x,h=n.y;this._helper._pixelPerMeter=d.aj(1,this.center.lat)*this.worldSize;const g=d.ag(Math.min(this.pitch,se)),v=Math.max(this._helper.cameraToCenterDistance/2,this._helper.cameraToCenterDistance+this._helper._elevation*this._helper._pixelPerMeter/Math.cos(g));let w;this._calculateNearFarZIfNeeded(v,g,e),w=new Float64Array(16),d.b4(w,this.fovInRadians,this._helper._width/this._helper._height,this._helper._nearZ,this._helper._farZ),this._invProjMatrix=new Float64Array(16),d.aq(this._invProjMatrix,w),w[8]=2*-e.x/this._helper._width,w[9]=2*e.y/this._helper._height,this._projectionMatrix=d.b5(w),d.N(w,w,[1,-1,1]),d.M(w,w,[0,0,-this._helper.cameraToCenterDistance]),d.b6(w,w,-this.rollInRadians),d.b7(w,w,this.pitchInRadians),d.b6(w,w,-this.bearingInRadians),d.M(w,w,[-l,-h,0]),this._mercatorMatrix=d.N([],w,[this.worldSize,this.worldSize,this.worldSize]),d.N(w,w,[1,1,this._helper._pixelPerMeter]),this._pixelMatrix=d.O(new Float64Array(16),this.clipSpaceToPixelsMatrix,w),d.M(w,w,[0,0,-this.elevation]),this._viewProjMatrix=w,this._invViewProjMatrix=d.aq([],w);const C=[0,0,-1,1];d.aw(C,C,this._invViewProjMatrix),this._cameraPosition=[C[0]/C[3],C[1]/C[3],C[2]/C[3]],this._fogMatrix=new Float64Array(16),d.b4(this._fogMatrix,this.fovInRadians,this.width/this.height,v,this._helper._farZ),this._fogMatrix[8]=2*-e.x/this.width,this._fogMatrix[9]=2*e.y/this.height,d.N(this._fogMatrix,this._fogMatrix,[1,-1,1]),d.M(this._fogMatrix,this._fogMatrix,[0,0,-this.cameraToCenterDistance]),d.b6(this._fogMatrix,this._fogMatrix,-this.rollInRadians),d.b7(this._fogMatrix,this._fogMatrix,this.pitchInRadians),d.b6(this._fogMatrix,this._fogMatrix,-this.bearingInRadians),d.M(this._fogMatrix,this._fogMatrix,[-l,-h,0]),d.N(this._fogMatrix,this._fogMatrix,[1,1,this._helper._pixelPerMeter]),d.M(this._fogMatrix,this._fogMatrix,[0,0,-this.elevation]),this._pixelMatrix3D=d.O(new Float64Array(16),this.clipSpaceToPixelsMatrix,w);const z=this._helper._width%2/2,k=this._helper._height%2/2,O=Math.cos(this.bearingInRadians),I=Math.sin(-this.bearingInRadians),F=l-Math.round(l)+O*z+I*k,H=h-Math.round(h)+O*k+I*z,K=new Float64Array(w);if(d.M(K,K,[F>.5?F-1:F,H>.5?H-1:H,0]),this._alignedProjMatrix=K,w=d.aq(new Float64Array(16),this._pixelMatrix),!w)throw new Error("failed to invert matrix");this._pixelMatrixInverse=w,this._clearMatrixCaches()}_clearMatrixCaches(){this._posMatrixCache.clear(),this._alignedPosMatrixCache.clear(),this._fogMatrixCacheF32.clear()}maxPitchScaleFactor(){if(!this._pixelMatrixInverse)return 1;const e=this.screenPointToMercatorCoordinate(new d.P(0,0)),n=[e.x*this.worldSize,e.y*this.worldSize,0,1];return d.aw(n,n,this._pixelMatrix)[3]/this._helper.cameraToCenterDistance}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){const e=d.aj(1,this.center.lat)*this.worldSize;return Ze(this.center,this.elevation,this.pitch,this.bearing,this._helper.cameraToCenterDistance/e).toLngLat()}lngLatToCameraDepth(e,n){const l=d.a1.fromLngLat(e),h=[l.x*this.worldSize,l.y*this.worldSize,n,1];return d.aw(h,h,this._viewProjMatrix),h[2]/h[3]}getProjectionData(e){const{overscaledTileID:n,aligned:l,applyTerrainMatrix:h}=e,g=this._helper.getMercatorTileCoordinates(n),v=n?this.calculatePosMatrix(n,l,!0):null;let w;return w=n&&n.terrainRttPosMatrix32f&&h?n.terrainRttPosMatrix32f:v||d.b8(),{mainMatrix:w,tileMercatorCoords:g,clippingPlane:[0,0,0,0],projectionTransition:0,fallbackMatrix:w}}isLocationOccluded(e){return!1}getPixelScale(){return 1}getCircleRadiusCorrection(){return 1}getPitchedTextCorrection(e,n,l){return 1}transformLightDirection(e){return d.aT(e)}getRayDirectionFromPixel(e){throw new Error("Not implemented.")}projectTileCoordinates(e,n,l,h){const g=this.calculatePosMatrix(l);let v;h?(v=[e,n,h(e,n),1],d.aw(v,v,g)):(v=[e,n,0,1],la(v,v,g));const w=v[3];return{point:new d.P(v[0]/w,v[1]/w),signedDistanceFromCamera:w,isOccluded:!1}}populateCache(e){for(const n of e)this.calculatePosMatrix(n)}getMatrixForModel(e,n){const l=d.a1.fromLngLat(e,n),h=l.meterInMercatorCoordinateUnits(),g=d.b9();return d.M(g,g,[l.x,l.y,l.z]),d.b6(g,g,Math.PI),d.b7(g,g,Math.PI/2),d.N(g,g,[-h,h,h]),g}getProjectionDataForCustomLayer(e=!0){const n=new d.Z(0,0,0,0,0),l=this.getProjectionData({overscaledTileID:n,applyGlobeMatrix:e}),h=De(n,this.worldSize);d.O(h,this._viewProjMatrix,h),l.tileMercatorCoords=[0,0,1,1];const g=[d.$,d.$,this.worldSize/this._helper.pixelsPerMeter],v=d.ba();return d.N(v,h,g),l.fallbackMatrix=v,l.mainMatrix=v,l}getFastPathSimpleProjectionMatrix(e){return this.calculatePosMatrix(e)}}function qr(){d.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.")}function ao(p){if(p.useSlerp)if(p.k<1){const e=d.bb(p.startEulerAngles.roll,p.startEulerAngles.pitch,p.startEulerAngles.bearing),n=d.bb(p.endEulerAngles.roll,p.endEulerAngles.pitch,p.endEulerAngles.bearing),l=new Float64Array(4);d.bc(l,e,n,p.k);const h=d.bd(l);p.tr.setRoll(h.roll),p.tr.setPitch(h.pitch),p.tr.setBearing(h.bearing)}else p.tr.setRoll(p.endEulerAngles.roll),p.tr.setPitch(p.endEulerAngles.pitch),p.tr.setBearing(p.endEulerAngles.bearing);else p.tr.setRoll(d.C.number(p.startEulerAngles.roll,p.endEulerAngles.roll,p.k)),p.tr.setPitch(d.C.number(p.startEulerAngles.pitch,p.endEulerAngles.pitch,p.k)),p.tr.setBearing(d.C.number(p.startEulerAngles.bearing,p.endEulerAngles.bearing,p.k))}function ls(p,e,n,l,h){const g=h.padding,v=de(h.worldSize,n.getNorthWest()),w=de(h.worldSize,n.getNorthEast()),C=de(h.worldSize,n.getSouthEast()),z=de(h.worldSize,n.getSouthWest()),k=d.ag(-l),O=v.rotate(k),I=w.rotate(k),F=C.rotate(k),H=z.rotate(k),K=new d.P(Math.max(O.x,I.x,H.x,F.x),Math.max(O.y,I.y,H.y,F.y)),W=new d.P(Math.min(O.x,I.x,H.x,F.x),Math.min(O.y,I.y,H.y,F.y)),J=K.sub(W),ie=(h.width-(g.left+g.right+e.left+e.right))/J.x,oe=(h.height-(g.top+g.bottom+e.top+e.bottom))/J.y;if(oe<0||ie<0)return void qr();const te=Math.min(d.ak(h.scale*Math.min(ie,oe)),p.maxZoom),le=d.P.convert(p.offset),ue=new d.P((e.left-e.right)/2,(e.top-e.bottom)/2).rotate(d.ag(l)),ae=le.add(ue).mult(h.scale/d.ah(te));return{center:Me(h.worldSize,v.add(C).div(2).sub(ae)),zoom:te,bearing:l}}class $i{get useGlobeControls(){return!1}handlePanInertia(e,n){const l=e.mag(),h=Math.abs(ve(n));return{easingOffset:e.mult(Math.min(.75*h/l,1)),easingCenter:n.center}}handleMapControlsRollPitchBearingZoom(e,n){e.bearingDelta&&n.setBearing(n.bearing+e.bearingDelta),e.pitchDelta&&n.setPitch(n.pitch+e.pitchDelta),e.rollDelta&&n.setRoll(n.roll+e.rollDelta),e.zoomDelta&&n.setZoom(n.zoom+e.zoomDelta)}handleMapControlsPan(e,n,l){e.around.distSqr(n.centerPoint)<.01||n.setLocationAtPoint(l,e.around)}cameraForBoxAndBearing(e,n,l,h,g){return ls(e,n,l,h,g)}handleJumpToCenterZoom(e,n){e.zoom!==(n.zoom!==void 0?+n.zoom:e.zoom)&&e.setZoom(+n.zoom),n.center!==void 0&&e.setCenter(d.S.convert(n.center))}handleEaseTo(e,n){const l=e.zoom,h=e.padding,g={roll:e.roll,pitch:e.pitch,bearing:e.bearing},v={roll:n.roll===void 0?e.roll:n.roll,pitch:n.pitch===void 0?e.pitch:n.pitch,bearing:n.bearing===void 0?e.bearing:n.bearing},w=n.zoom!==void 0,C=!e.isPaddingEqual(n.padding);let z=!1;const k=w?+n.zoom:e.zoom;let O=e.centerPoint.add(n.offsetAsPoint);const I=e.screenPointToLocation(O),{center:F,zoom:H}=e.constrain(d.S.convert(n.center||I),k??l);cr(e,F);const K=de(e.worldSize,I),W=de(e.worldSize,F).sub(K),J=d.ah(H-l);return z=H!==l,{easeFunc:ie=>{if(z&&e.setZoom(d.C.number(l,H,ie)),d.be(g,v)||ao({startEulerAngles:g,endEulerAngles:v,tr:e,k:ie,useSlerp:g.roll!=v.roll}),C&&(e.interpolatePadding(h,n.padding,ie),O=e.centerPoint.add(n.offsetAsPoint)),n.around)e.setLocationAtPoint(n.around,n.aroundPoint);else{const oe=d.ah(e.zoom-l),te=H>l?Math.min(2,J):Math.max(.5,J),le=Math.pow(te,1-ie),ue=Me(e.worldSize,K.add(W.mult(ie*le)).mult(oe));e.setLocationAtPoint(e.renderWorldCopies?ue.wrap():ue,O)}},isZooming:z,elevationCenter:F}}handleFlyTo(e,n){const l=n.zoom!==void 0,h=e.zoom,g=e.constrain(d.S.convert(n.center||n.locationAtOffset),l?+n.zoom:h),v=g.center,w=g.zoom;cr(e,v);const C=de(e.worldSize,n.locationAtOffset),z=de(e.worldSize,v).sub(C),k=z.mag(),O=d.ah(w-h);let I;if(n.minZoom!==void 0){const F=Math.min(+n.minZoom,h,w),H=e.constrain(v,F).zoom;I=d.ah(H-h)}return{easeFunc:(F,H,K,W)=>{e.setZoom(F===1?w:h+d.ak(H));const J=F===1?v:Me(e.worldSize,C.add(z.mult(K)).mult(H));e.setLocationAtPoint(e.renderWorldCopies?J.wrap():J,W)},scaleOfZoom:O,targetCenter:v,scaleOfMinZoom:I,pixelPathLength:k}}}class Ci{constructor(e,n,l){this.blendFunction=e,this.blendColor=n,this.mask=l}}Ci.Replace=[1,0],Ci.disabled=new Ci(Ci.Replace,d.bf.transparent,[!1,!1,!1,!1]),Ci.unblended=new Ci(Ci.Replace,d.bf.transparent,[!0,!0,!0,!0]),Ci.alphaBlended=new Ci([1,771],d.bf.transparent,[!0,!0,!0,!0]);const pn=2305;class Kt{constructor(e,n,l){this.enable=e,this.mode=n,this.frontFace=l}}Kt.disabled=new Kt(!1,1029,pn),Kt.backCCW=new Kt(!0,1029,pn),Kt.frontCCW=new Kt(!0,1028,pn);class St{constructor(e,n,l){this.func=e,this.mask=n,this.range=l}}St.ReadOnly=!1,St.ReadWrite=!0,St.disabled=new St(519,St.ReadOnly,[0,1]);const Wr=7680;class Vt{constructor(e,n,l,h,g,v){this.test=e,this.ref=n,this.mask=l,this.fail=h,this.depthFail=g,this.pass=v}}Vt.disabled=new Vt({func:519,mask:0},0,0,Wr,Wr,Wr);const Dl=new WeakMap;function La(p){var e;if(Dl.has(p))return Dl.get(p);{const n=(e=p.getParameter(p.VERSION))===null||e===void 0?void 0:e.startsWith("WebGL 2.0");return Dl.set(p,n),n}}class Ll{get awaitingQuery(){return!!this._readbackQueue}constructor(e){this._readbackWaitFrames=4,this._measureWaitFrames=6,this._texWidth=1,this._texHeight=1,this._measuredError=0,this._updateCount=0,this._lastReadbackFrame=-1e3,this._readbackQueue=null,this._cachedRenderContext=e;const n=e.context,l=n.gl;this._texFormat=l.RGBA,this._texType=l.UNSIGNED_BYTE;const h=new d.aL;h.emplaceBack(-1,-1),h.emplaceBack(2,-1),h.emplaceBack(-1,2);const g=new d.aN;g.emplaceBack(0,1,2),this._fullscreenTriangle=new Dn(n.createVertexBuffer(h,It.members),n.createIndexBuffer(g),d.aM.simpleSegment(0,0,h.length,g.length)),this._resultBuffer=new Uint8Array(4),n.activeTexture.set(l.TEXTURE1);const v=l.createTexture();l.bindTexture(l.TEXTURE_2D,v),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_WRAP_S,l.CLAMP_TO_EDGE),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_WRAP_T,l.CLAMP_TO_EDGE),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_MIN_FILTER,l.NEAREST),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_MAG_FILTER,l.NEAREST),l.texImage2D(l.TEXTURE_2D,0,this._texFormat,this._texWidth,this._texHeight,0,this._texFormat,this._texType,null),this._fbo=n.createFramebuffer(this._texWidth,this._texHeight,!1,!1),this._fbo.colorAttachment.set(v),La(l)&&(this._pbo=l.createBuffer(),l.bindBuffer(l.PIXEL_PACK_BUFFER,this._pbo),l.bufferData(l.PIXEL_PACK_BUFFER,4,l.STREAM_READ),l.bindBuffer(l.PIXEL_PACK_BUFFER,null))}destroy(){const e=this._cachedRenderContext.context.gl;this._fullscreenTriangle.destroy(),this._fbo.destroy(),e.deleteBuffer(this._pbo),this._fullscreenTriangle=null,this._fbo=null,this._pbo=null,this._resultBuffer=null}updateErrorLoop(e,n){const l=this._updateCount;return this._readbackQueue?l>=this._readbackQueue.frameNumberIssued+this._readbackWaitFrames&&this._tryReadback():l>=this._lastReadbackFrame+this._measureWaitFrames&&this._renderErrorTexture(e,n),this._updateCount++,this._measuredError}_bindFramebuffer(){const e=this._cachedRenderContext.context,n=e.gl;e.activeTexture.set(n.TEXTURE1),n.bindTexture(n.TEXTURE_2D,this._fbo.colorAttachment.get()),e.bindFramebuffer.set(this._fbo.framebuffer)}_renderErrorTexture(e,n){const l=this._cachedRenderContext.context,h=l.gl;if(this._bindFramebuffer(),l.viewport.set([0,0,this._texWidth,this._texHeight]),l.clear({color:d.bf.transparent}),this._cachedRenderContext.useProgram("projectionErrorMeasurement").draw(l,h.TRIANGLES,St.disabled,Vt.disabled,Ci.unblended,Kt.disabled,((g,v)=>({u_input:g,u_output_expected:v}))(e,n),null,null,"$clipping",this._fullscreenTriangle.vertexBuffer,this._fullscreenTriangle.indexBuffer,this._fullscreenTriangle.segments),this._pbo&&La(h)){h.bindBuffer(h.PIXEL_PACK_BUFFER,this._pbo),h.readBuffer(h.COLOR_ATTACHMENT0),h.readPixels(0,0,this._texWidth,this._texHeight,this._texFormat,this._texType,0),h.bindBuffer(h.PIXEL_PACK_BUFFER,null);const g=h.fenceSync(h.SYNC_GPU_COMMANDS_COMPLETE,0);h.flush(),this._readbackQueue={frameNumberIssued:this._updateCount,sync:g}}else this._readbackQueue={frameNumberIssued:this._updateCount,sync:null}}_tryReadback(){const e=this._cachedRenderContext.context.gl;if(this._pbo&&this._readbackQueue&&La(e)){const n=e.clientWaitSync(this._readbackQueue.sync,0,0);if(n===e.WAIT_FAILED)return d.w("WebGL2 clientWaitSync failed."),this._readbackQueue=null,void(this._lastReadbackFrame=this._updateCount);if(n===e.TIMEOUT_EXPIRED)return;e.bindBuffer(e.PIXEL_PACK_BUFFER,this._pbo),e.getBufferSubData(e.PIXEL_PACK_BUFFER,0,this._resultBuffer,0,4),e.bindBuffer(e.PIXEL_PACK_BUFFER,null)}else this._bindFramebuffer(),e.readPixels(0,0,this._texWidth,this._texHeight,this._texFormat,this._texType,this._resultBuffer);this._readbackQueue=null,this._measuredError=Ll._parseRGBA8float(this._resultBuffer),this._lastReadbackFrame=this._updateCount}static _parseRGBA8float(e){let n=0;return n+=e[0]/256,n+=e[1]/65536,n+=e[2]/16777216,e[3]<127&&(n=-n),n/128}}const Eo=d.$/128;function Ns(p,e){const n=p.granularity!==void 0?Math.max(p.granularity,1):1,l=n+(p.generateBorders?2:0),h=n+(p.extendToNorthPole||p.generateBorders?1:0)+(p.extendToSouthPole||p.generateBorders?1:0),g=l+1,v=h+1,w=p.generateBorders?-1:0,C=p.generateBorders||p.extendToNorthPole?-1:0,z=n+(p.generateBorders?1:0),k=n+(p.generateBorders||p.extendToSouthPole?1:0),O=g*v,I=l*h*6,F=g*v>65536;if(F&&e==="16bit")throw new Error("Granularity is too large and meshes would not fit inside 16 bit vertex indices.");const H=F||e==="32bit",K=new Int16Array(2*O);let W=0;for(let oe=C;oe<=k;oe++)for(let te=w;te<=z;te++){let le=te/n*d.$;te===-1&&(le=-Eo),te===n+1&&(le=d.$+Eo);let ue=oe/n*d.$;oe===-1&&(ue=p.extendToNorthPole?d.bh:-Eo),oe===n+1&&(ue=p.extendToSouthPole?d.bi:d.$+Eo),K[W++]=le,K[W++]=ue}const J=H?new Uint32Array(I):new Uint16Array(I);let ie=0;for(let oe=0;oe<h;oe++)for(let te=0;te<l;te++){const le=te+1+oe*g,ue=te+(oe+1)*g,ae=te+1+(oe+1)*g;J[ie++]=te+oe*g,J[ie++]=ue,J[ie++]=le,J[ie++]=le,J[ie++]=ue,J[ie++]=ae}return{vertices:K.buffer.slice(0),indices:J.buffer.slice(0),uses32bitIndices:H}}const zo=new d.aK({fill:new d.bj(128,2),line:new d.bj(512,0),tile:new d.bj(128,32),stencil:new d.bj(128,1),circle:3});class Us{constructor(){this._tileMeshCache={},this._errorCorrectionUsable=0,this._errorMeasurementLastValue=0,this._errorCorrectionPreviousValue=0,this._errorMeasurementLastChangeTime=-1e3}get name(){return"vertical-perspective"}get transitionState(){return 1}get useSubdivision(){return!0}get shaderVariantName(){return"globe"}get shaderDefine(){return"#define GLOBE"}get shaderPreludeCode(){return hn.projectionGlobe}get vertexShaderPreludeCode(){return hn.projectionMercator.vertexSource}get subdivisionGranularity(){return zo}get useGlobeControls(){return!0}get latitudeErrorCorrectionRadians(){return this._errorCorrectionUsable}destroy(){this._errorMeasurement&&this._errorMeasurement.destroy()}updateGPUdependent(e){this._errorMeasurement||(this._errorMeasurement=new Ll(e));const n=d.U(this._errorQueryLatitudeDegrees),l=2*Math.atan(Math.exp(Math.PI-n*Math.PI*2))-.5*Math.PI,h=this._errorMeasurement.updateErrorLoop(n,l),g=dt();h!==this._errorMeasurementLastValue&&(this._errorCorrectionPreviousValue=this._errorCorrectionUsable,this._errorMeasurementLastValue=h,this._errorMeasurementLastChangeTime=g);const v=Math.min(Math.max((g-this._errorMeasurementLastChangeTime)/1e3/.5,0),1);this._errorCorrectionUsable=d.bk(this._errorCorrectionPreviousValue,-this._errorMeasurementLastValue,d.bl(v))}_getMeshKey(e){return`${e.granularity.toString(36)}_${e.generateBorders?"b":""}${e.extendToNorthPole?"n":""}${e.extendToSouthPole?"s":""}`}getMeshFromTileID(e,n,l,h,g){const v=(g==="stencil"?zo.stencil:zo.tile).getGranularityForZoomLevel(n.z);return this._getMesh(e,{granularity:v,generateBorders:l,extendToNorthPole:n.y===0&&h,extendToSouthPole:n.y===(1<<n.z)-1&&h})}_getMesh(e,n){const l=this._getMeshKey(n);if(l in this._tileMeshCache)return this._tileMeshCache[l];const h=(function(g,v){const w=Ns(v,"16bit"),C=d.aL.deserialize({arrayBuffer:w.vertices,length:w.vertices.byteLength/2/2}),z=d.aN.deserialize({arrayBuffer:w.indices,length:w.indices.byteLength/2/3});return new Dn(g.createVertexBuffer(C,It.members),g.createIndexBuffer(z),d.aM.simpleSegment(0,0,C.length,z.length))})(e,n);return this._tileMeshCache[l]=h,h}recalculate(e){}hasTransition(){const e=dt();let n=!1;return n=n||(e-this._errorMeasurementLastChangeTime)/1e3<.7,n=n||this._errorMeasurement&&this._errorMeasurement.awaitingQuery,n}setErrorQueryLatitudeDegrees(e){this._errorQueryLatitudeDegrees=e}}const yc=new d.r({type:new d.D(d.v.projection.type)});class uu extends d.E{constructor(e){super(),this._transitionable=new d.t(yc,void 0),this.setProjection(e),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new d.F(0)),this._mercatorProjection=new Fs,this._verticalPerspectiveProjection=new Us}get transitionState(){const e=this.properties.get("type");if(typeof e=="string"&&e==="mercator")return 0;if(typeof e=="string"&&e==="vertical-perspective")return 1;if(e instanceof d.bm){if(e.from==="vertical-perspective"&&e.to==="mercator")return 1-e.transition;if(e.from==="mercator"&&e.to==="vertical-perspective")return e.transition}return 1}get useGlobeRendering(){return this.transitionState>0}get latitudeErrorCorrectionRadians(){return this._verticalPerspectiveProjection.latitudeErrorCorrectionRadians}get currentProjection(){return this.useGlobeRendering?this._verticalPerspectiveProjection:this._mercatorProjection}get name(){return"globe"}get useSubdivision(){return this.currentProjection.useSubdivision}get shaderVariantName(){return this.currentProjection.shaderVariantName}get shaderDefine(){return this.currentProjection.shaderDefine}get shaderPreludeCode(){return this.currentProjection.shaderPreludeCode}get vertexShaderPreludeCode(){return this.currentProjection.vertexShaderPreludeCode}get subdivisionGranularity(){return this.currentProjection.subdivisionGranularity}get useGlobeControls(){return this.transitionState>0}destroy(){this._mercatorProjection.destroy(),this._verticalPerspectiveProjection.destroy()}updateGPUdependent(e){this._mercatorProjection.updateGPUdependent(e),this._verticalPerspectiveProjection.updateGPUdependent(e)}getMeshFromTileID(e,n,l,h,g){return this.currentProjection.getMeshFromTileID(e,n,l,h,g)}setProjection(e){this._transitionable.setValue("type",e?.type||"mercator")}updateTransitions(e){this._transitioning=this._transitionable.transitioned(e,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()||this.currentProjection.hasTransition()}recalculate(e){this.properties=this._transitioning.possiblyEvaluate(e)}setErrorQueryLatitudeDegrees(e){this._verticalPerspectiveProjection.setErrorQueryLatitudeDegrees(e),this._mercatorProjection.setErrorQueryLatitudeDegrees(e)}}function hu(p){const e=cs(p.worldSize,p.center.lat);return 2*Math.PI*e}function Ln(p,e,n,l,h){const g=1/(1<<h),v=e/d.$*g+l*g,w=d.bo((p/d.$*g+n*g)*Math.PI*2+Math.PI,2*Math.PI),C=2*Math.atan(Math.exp(Math.PI-v*Math.PI*2))-.5*Math.PI,z=Math.cos(C),k=new Float64Array(3);return k[0]=Math.sin(w)*z,k[1]=Math.sin(C),k[2]=Math.cos(w)*z,k}function br(p){return(function(e,n){const l=Math.cos(n),h=new Float64Array(3);return h[0]=Math.sin(e)*l,h[1]=Math.sin(n),h[2]=Math.cos(e)*l,h})(p.lng*Math.PI/180,p.lat*Math.PI/180)}function cs(p,e){return p/(2*Math.PI)/Math.cos(e*Math.PI/180)}function gd(p){const e=Math.asin(p[1])/Math.PI*180,n=Math.sqrt(p[0]*p[0]+p[2]*p[2]);if(n>1e-6){const l=p[0]/n,h=Math.acos(p[2]/n),g=(l>0?h:-h)/Math.PI*180;return new d.S(d.aO(g,-180,180),e)}return new d.S(0,e)}function Il(p){return Math.cos(p*Math.PI/180)}function Or(p,e){const n=Il(p),l=Il(e);return d.ak(l/n)}function _d(p,e){const n=p.rotate(e.bearingInRadians),l=e.zoom+Or(e.center.lat,0),h=d.bk(1/Il(e.center.lat),1/Il(Math.min(Math.abs(e.center.lat),60)),d.bn(l,7,3,0,1)),g=360/hu({worldSize:e.worldSize,center:{lat:e.center.lat}});return new d.S(e.center.lng-n.x*g*h,d.ae(e.center.lat+n.y*g,-d.af,d.af))}function du(p){const e=.5*p,n=Math.sin(e),l=Math.cos(e);return Math.log(n+l)-Math.log(l-n)}function ba(p,e,n,l){const h=p.lat+n*l;if(Math.abs(n)>1){const g=(Math.sign(p.lat+n)!==Math.sign(p.lat)?-Math.abs(p.lat):Math.abs(p.lat))*Math.PI/180,v=Math.abs(p.lat+n)*Math.PI/180,w=du(g+l*(v-g)),C=du(g),z=du(v);return new d.S(p.lng+e*((w-C)/(z-C)),h)}return new d.S(p.lng+e*l,h)}class ch{constructor(e){this._cachePrevious=new Map,this._cache=new Map,this._hadAnyChanges=!1,this._boundingVolumeFactory=e}swapBuffers(){if(!this._hadAnyChanges)return;const e=this._cachePrevious;this._cachePrevious=this._cache,this._cache=e,this._cache.clear(),this._hadAnyChanges=!1}getTileBoundingVolume(e,n,l,h){const g=`${e.z}_${e.x}_${e.y}_${h?.terrain?"t":""}`,v=this._cache.get(g);if(v)return v;const w=this._cachePrevious.get(g);if(w)return this._cache.set(g,w),w;const C=this._boundingVolumeFactory(e,n,l,h);return this._cache.set(g,C),this._hadAnyChanges=!0,C}}class xa{constructor(e,n,l,h){this.min=l,this.max=h,this.points=e,this.planes=n}static fromAabb(e,n){const l=[];for(let h=0;h<8;h++)l.push([1&~h?e[0]:n[0],(h>>1&1)==1?n[1]:e[1],(h>>2&1)==1?n[2]:e[2]]);return new xa(l,[[-1,0,0,n[0]],[1,0,0,-e[0]],[0,-1,0,n[1]],[0,1,0,-e[1]],[0,0,-1,n[2]],[0,0,1,-e[2]]],e,n)}static fromCenterSizeAngles(e,n,l){const h=d.br([],l[0],l[1],l[2]),g=d.bs([],[n[0],0,0],h),v=d.bs([],[0,n[1],0],h),w=d.bs([],[0,0,n[2]],h),C=[...e],z=[...e];for(let O=0;O<8;O++)for(let I=0;I<3;I++){const F=e[I]+g[I]*(1&~O?-1:1)+v[I]*((O>>1&1)==1?1:-1)+w[I]*((O>>2&1)==1?1:-1);C[I]=Math.min(C[I],F),z[I]=Math.max(z[I],F)}const k=[];for(let O=0;O<8;O++){const I=[...e];d.aS(I,I,d.aR([],g,1&~O?-1:1)),d.aS(I,I,d.aR([],v,(O>>1&1)==1?1:-1)),d.aS(I,I,d.aR([],w,(O>>2&1)==1?1:-1)),k.push(I)}return new xa(k,[[...g,-d.aX(g,k[0])],[...v,-d.aX(v,k[0])],[...w,-d.aX(w,k[0])],[-g[0],-g[1],-g[2],-d.aX(g,k[7])],[-v[0],-v[1],-v[2],-d.aX(v,k[7])],[-w[0],-w[1],-w[2],-d.aX(w,k[7])]],C,z)}intersectsFrustum(e){let n=!0;const l=this.points.length,h=this.planes.length,g=e.planes.length,v=e.points.length;for(let w=0;w<g;w++){const C=e.planes[w];let z=0;for(let k=0;k<l;k++){const O=this.points[k];C[0]*O[0]+C[1]*O[1]+C[2]*O[2]+C[3]>=0&&z++}if(z===0)return 0;z<l&&(n=!1)}if(n)return 2;for(let w=0;w<h;w++){const C=this.planes[w];let z=0;for(let k=0;k<v;k++){const O=e.points[k];C[0]*O[0]+C[1]*O[1]+C[2]*O[2]+C[3]>=0&&z++}if(z===0)return 0}return 1}intersectsPlane(e){const n=this.points.length;let l=0;for(let h=0;h<n;h++){const g=this.points[h];e[0]*g[0]+e[1]*g[1]+e[2]*g[2]+e[3]>=0&&l++}return l===n?2:l===0?0:1}}function Zs(p,e,n){const l=p-e;return l<0?-l:Math.max(0,l-n)}function Rl(p,e,n,l,h){const g=p-n;let v;return v=g<0?Math.min(-g,1+g-h):g>1?Math.min(Math.max(g-h,0),1-g):0,Math.max(v,Zs(e,l,h))}class vd{constructor(){this._boundingVolumeCache=new ch(this._computeTileBoundingVolume)}prepareNextFrame(){this._boundingVolumeCache.swapBuffers()}distanceToTile2d(e,n,l,h){const g=1<<l.z,v=1/g,w=l.x/g,C=l.y/g;let z=2;return z=Math.min(z,Rl(e,n,w,C,v)),z=Math.min(z,Rl(e,n,w+.5,-C-v,v)),z=Math.min(z,Rl(e,n,w+.5,2-C-v,v)),z}getWrap(e,n,l){const h=1<<n.z,g=1/h,v=n.x/h,w=Zs(e.x,v,g),C=Zs(e.x,v-1,g),z=Zs(e.x,v+1,g),k=Math.min(w,C,z);return k===z?1:k===C?-1:0}allowVariableZoom(e,n){return Mi(e,n)>4}allowWorldCopies(){return!1}getTileBoundingVolume(e,n,l,h){return this._boundingVolumeCache.getTileBoundingVolume(e,n,l,h)}_computeTileBoundingVolume(e,n,l,h){var g,v;let w=0,C=0;if(h?.terrain){const z=new d.Z(e.z,n,e.z,e.x,e.y),k=h.terrain.getMinMaxElevation(z);w=(g=k.minElevation)!==null&&g!==void 0?g:Math.min(0,l),C=(v=k.maxElevation)!==null&&v!==void 0?v:Math.max(0,l)}if(w/=d.bu,C/=d.bu,w+=1,C+=1,e.z<=0)return xa.fromAabb([-C,-C,-C],[C,C,C]);if(e.z===1)return xa.fromAabb([e.x===0?-C:0,e.y===0?0:-C,-C],[e.x===0?0:C,e.y===0?C:0,C]);{const z=[Ln(0,0,e.x,e.y,e.z),Ln(d.$,0,e.x,e.y,e.z),Ln(d.$,d.$,e.x,e.y,e.z),Ln(0,d.$,e.x,e.y,e.z)],k=[];for(const Se of z)k.push(d.aR([],Se,C));if(C!==w)for(const Se of z)k.push(d.aR([],Se,w));e.y===0&&k.push([0,1,0]),e.y===(1<<e.z)-1&&k.push([0,-1,0]);const O=[1,1,1],I=[-1,-1,-1];for(const Se of k)for(let Ee=0;Ee<3;Ee++)O[Ee]=Math.min(O[Ee],Se[Ee]),I[Ee]=Math.max(I[Ee],Se[Ee]);const F=Ln(d.$/2,d.$/2,e.x,e.y,e.z),H=d.aW([],[0,1,0],F);d.aV(H,H);const K=d.aW([],F,H);d.aV(K,K);const W=d.aW([],z[2],z[1]);d.aV(W,W);const J=d.aW([],z[0],z[3]);d.aV(J,J),k.push(d.aR([],F,C)),e.y>=(1<<e.z)/2&&k.push(d.aR([],Ln(d.$/2,0,e.x,e.y,e.z),C)),e.y<(1<<e.z)/2&&k.push(d.aR([],Ln(d.$/2,d.$,e.x,e.y,e.z),C));const ie=Hs(F,k),oe=Hs(K,k),te=[-F[0],-F[1],-F[2],ie.max],le=[F[0],F[1],F[2],-ie.min],ue=[-K[0],-K[1],-K[2],oe.max],ae=[K[0],K[1],K[2],-oe.min],fe=[...W,0],Ae=[...J,0],we=[];return e.y===0?we.push(d.bt(Ae,fe,te),d.bt(Ae,fe,le)):we.push(d.bt(ue,fe,te),d.bt(ue,fe,le),d.bt(ue,Ae,te),d.bt(ue,Ae,le)),e.y===(1<<e.z)-1?we.push(d.bt(Ae,fe,te),d.bt(Ae,fe,le)):we.push(d.bt(ae,fe,te),d.bt(ae,fe,le),d.bt(ae,Ae,te),d.bt(ae,Ae,le)),new xa(we,[te,le,ue,ae,fe,Ae],O,I)}}}function Hs(p,e){let n=1/0,l=-1/0;for(const h of e){const g=d.aX(p,h);n=Math.min(n,g),l=Math.max(l,g)}return{min:n,max:l}}class pu{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(e){this._helper.setMinZoom(e)}setMaxZoom(e){this._helper.setMaxZoom(e)}setMinPitch(e){this._helper.setMinPitch(e)}setMaxPitch(e){this._helper.setMaxPitch(e)}setRenderWorldCopies(e){this._helper.setRenderWorldCopies(e)}setBearing(e){this._helper.setBearing(e)}setPitch(e){this._helper.setPitch(e)}setRoll(e){this._helper.setRoll(e)}setFov(e){this._helper.setFov(e)}setZoom(e){this._helper.setZoom(e)}setCenter(e){this._helper.setCenter(e)}setElevation(e){this._helper.setElevation(e)}setMinElevationForCurrentTile(e){this._helper.setMinElevationForCurrentTile(e)}setPadding(e){this._helper.setPadding(e)}interpolatePadding(e,n,l){return this._helper.interpolatePadding(e,n,l)}isPaddingEqual(e){return this._helper.isPaddingEqual(e)}resize(e,n){this._helper.resize(e,n)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(e){this._helper.setMaxBounds(e)}setConstrain(e){this._helper.setConstrain(e)}overrideNearFarZ(e,n){this._helper.overrideNearFarZ(e,n)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(e){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),e)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get constrain(){return this._helper.constrain}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}setTransitionState(e){}constructor(e){this._cachedClippingPlane=d.bv(),this._projectionMatrix=d.b9(),this._globeViewProjMatrix32f=d.b8(),this._globeViewProjMatrixNoCorrection=d.b9(),this._globeViewProjMatrixNoCorrectionInverted=d.b9(),this._globeProjMatrixInverted=d.b9(),this._cameraPosition=d.bp(),this._globeLatitudeErrorCorrectionRadians=0,this.defaultConstrain=(n,l)=>{const h=d.ae(n.lat,-d.af,d.af),g=d.ae(+l,this.minZoom+Or(0,h),this.maxZoom);return{center:new d.S(n.lng,h),zoom:g}},this._helper=new yr({calcMatrices:()=>{this._calcMatrices()},constrain:(n,l)=>this.defaultConstrain(n,l)},e),this._coveringTilesDetailsProvider=new vd}clone(){const e=new pu;return e.apply(this),e}apply(e,n){this._globeLatitudeErrorCorrectionRadians=n||0,this._helper.apply(e)}get projectionMatrix(){return this._projectionMatrix}get modelViewProjectionMatrix(){return this._globeViewProjMatrixNoCorrection}get inverseProjectionMatrix(){return this._globeProjMatrixInverted}get cameraPosition(){const e=d.bp();return e[0]=this._cameraPosition[0],e[1]=this._cameraPosition[1],e[2]=this._cameraPosition[2],e}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}getProjectionData(e){const{overscaledTileID:n,applyGlobeMatrix:l}=e,h=this._helper.getMercatorTileCoordinates(n);return{mainMatrix:this._globeViewProjMatrix32f,tileMercatorCoords:h,clippingPlane:this._cachedClippingPlane,projectionTransition:l?1:0,fallbackMatrix:this._globeViewProjMatrix32f}}_computeClippingPlane(e){const n=this.pitchInRadians,l=this.cameraToCenterDistance/e,h=Math.sin(n)*l,g=Math.cos(n)*l+1,v=1/Math.sqrt(h*h+g*g)*1;let w=-h,C=g;const z=Math.sqrt(w*w+C*C);w/=z,C/=z;const k=[0,w,C];d.bw(k,k,[0,0,0],-this.bearingInRadians),d.bx(k,k,[0,0,0],-1*this.center.lat*Math.PI/180),d.by(k,k,[0,0,0],this.center.lng*Math.PI/180);const O=1/d.aZ(k);return d.aR(k,k,O),[...k,-v*O]}isLocationOccluded(e){return!this.isSurfacePointVisible(br(e))}transformLightDirection(e){const n=this._helper._center.lng*Math.PI/180,l=this._helper._center.lat*Math.PI/180,h=Math.cos(l),g=[Math.sin(n)*h,Math.sin(l),Math.cos(n)*h],v=[g[2],0,-g[0]],w=[0,0,0];d.aW(w,v,g),d.aV(v,v),d.aV(w,w);const C=[0,0,0];return d.aV(C,[v[0]*e[0]+w[0]*e[1]+g[0]*e[2],v[1]*e[0]+w[1]*e[1]+g[1]*e[2],v[2]*e[0]+w[2]*e[1]+g[2]*e[2]]),C}getPixelScale(){return 1/Math.cos(this._helper._center.lat*Math.PI/180)}getCircleRadiusCorrection(){return Math.cos(this._helper._center.lat*Math.PI/180)}getPitchedTextCorrection(e,n,l){const h=(function(w,C,z){const k=1/(1<<z.z);return new d.a1(w/d.$*k+z.x*k,C/d.$*k+z.y*k)})(e,n,l.canonical),g=(v=h.y,[d.bo(h.x*Math.PI*2+Math.PI,2*Math.PI),2*Math.atan(Math.exp(Math.PI-v*Math.PI*2))-.5*Math.PI]);var v;return this.getCircleRadiusCorrection()/Math.cos(g[1])}projectTileCoordinates(e,n,l,h){const g=l.canonical,v=Ln(e,n,g.x,g.y,g.z),w=1+(h?h(e,n):0)/d.bu,C=[v[0]*w,v[1]*w,v[2]*w,1];d.aw(C,C,this._globeViewProjMatrixNoCorrection);const z=this._cachedClippingPlane,k=z[0]*v[0]+z[1]*v[1]+z[2]*v[2]+z[3]<0;return{point:new d.P(C[0]/C[3],C[1]/C[3]),signedDistanceFromCamera:C[3],isOccluded:k}}_calcMatrices(){if(!this._helper._width||!this._helper._height)return;const e=cs(this.worldSize,this.center.lat),n=d.ba(),l=d.ba();this._helper.autoCalculateNearFarZ&&(this._helper._nearZ=.5,this._helper._farZ=this.cameraToCenterDistance+2*e),d.b4(n,this.fovInRadians,this.width/this.height,this._helper._nearZ,this._helper._farZ);const h=this.centerOffset;n[8]=2*-h.x/this._helper._width,n[9]=2*h.y/this._helper._height,this._projectionMatrix=d.b5(n),this._globeProjMatrixInverted=d.ba(),d.aq(this._globeProjMatrixInverted,n),d.M(n,n,[0,0,-this.cameraToCenterDistance]),d.b6(n,n,this.rollInRadians),d.b7(n,n,-this.pitchInRadians),d.b6(n,n,this.bearingInRadians),d.M(n,n,[0,0,-e]);const g=d.bp();g[0]=e,g[1]=e,g[2]=e,d.b7(l,n,this.center.lat*Math.PI/180),d.bz(l,l,-this.center.lng*Math.PI/180),d.N(l,l,g),this._globeViewProjMatrixNoCorrection=l,d.b7(n,n,this.center.lat*Math.PI/180-this._globeLatitudeErrorCorrectionRadians),d.bz(n,n,-this.center.lng*Math.PI/180),d.N(n,n,g),this._globeViewProjMatrix32f=new Float32Array(n),this._globeViewProjMatrixNoCorrectionInverted=d.ba(),d.aq(this._globeViewProjMatrixNoCorrectionInverted,l);const v=d.bp();this._cameraPosition=d.bp(),this._cameraPosition[2]=this.cameraToCenterDistance/e,d.bw(this._cameraPosition,this._cameraPosition,v,-this.rollInRadians),d.bx(this._cameraPosition,this._cameraPosition,v,this.pitchInRadians),d.bw(this._cameraPosition,this._cameraPosition,v,-this.bearingInRadians),d.aS(this._cameraPosition,this._cameraPosition,[0,0,1]),d.bx(this._cameraPosition,this._cameraPosition,v,-this.center.lat*Math.PI/180),d.by(this._cameraPosition,this._cameraPosition,v,this.center.lng*Math.PI/180),this._cachedClippingPlane=this._computeClippingPlane(e);const w=d.b5(this._globeViewProjMatrixNoCorrectionInverted);d.N(w,w,[1,1,-1]),this._cachedFrustum=Qi.fromInvProjectionMatrix(w,1,0,this._cachedClippingPlane,!0)}calculateFogMatrix(e){d.w("calculateFogMatrix is not supported on globe projection.");const n=d.ba();return d.ai(n),n}getVisibleUnwrappedCoordinates(e){return[new d.b2(0,e)]}getCameraFrustum(){return this._cachedFrustum}getClippingPlane(){return this._cachedClippingPlane}getCoveringTilesDetailsProvider(){return this._coveringTilesDetailsProvider}recalculateZoomAndCenter(e){e&&d.w("terrain is not fully supported on vertical perspective projection."),this._helper.recalculateZoomAndCenter(0)}maxPitchScaleFactor(){return 1}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){return this._helper.getCameraLngLat()}lngLatToCameraDepth(e,n){if(!this._globeViewProjMatrixNoCorrection)return 1;const l=br(e);d.aR(l,l,1+n/d.bu);const h=d.bv();return d.aw(h,[l[0],l[1],l[2],1],this._globeViewProjMatrixNoCorrection),h[2]/h[3]}populateCache(e){}getBounds(){const e=.5*this.width,n=.5*this.height,l=[new d.P(0,0),new d.P(e,0),new d.P(this.width,0),new d.P(this.width,n),new d.P(this.width,this.height),new d.P(e,this.height),new d.P(0,this.height),new d.P(0,n)],h=[];for(const O of l)h.push(this.unprojectScreenPoint(O));let g=0,v=0,w=0,C=0;const z=this.center;for(const O of h){const I=d.bA(z.lng,O.lng),F=d.bA(z.lat,O.lat);I<v&&(v=I),I>g&&(g=I),F<C&&(C=F),F>w&&(w=F)}const k=[z.lng+v,z.lat+C,z.lng+g,z.lat+w];return this.isSurfacePointOnScreen([0,1,0])&&(k[3]=90,k[0]=-180,k[2]=180),this.isSurfacePointOnScreen([0,-1,0])&&(k[1]=-90,k[0]=-180,k[2]=180),new Di(k)}calculateCenterFromCameraLngLatAlt(e,n,l,h){return this._helper.calculateCenterFromCameraLngLatAlt(e,n,l,h)}setLocationAtPoint(e,n){const l=br(this.unprojectScreenPoint(n)),h=br(e),g=d.bp();d.bB(g);const v=d.bp();d.by(v,l,g,-this.center.lng*Math.PI/180),d.bx(v,v,g,this.center.lat*Math.PI/180);const w=h[0]*h[0]+h[2]*h[2],C=v[0]*v[0];if(w<C)return;const z=Math.sqrt(w-C),k=-z,O=d.bC(h[0],h[2],v[0],z),I=d.bC(h[0],h[2],v[0],k),F=d.bp();d.by(F,h,g,-O);const H=d.bC(F[1],F[2],v[1],v[2]),K=d.bp();d.by(K,h,g,-I);const W=d.bC(K[1],K[2],v[1],v[2]),J=.5*Math.PI,ie=H>=-J&&H<=J,oe=W>=-J&&W<=J;let te,le;if(ie&&oe){const Ae=this.center.lng*Math.PI/180,we=this.center.lat*Math.PI/180;d.bD(O,Ae)+d.bD(H,we)<d.bD(I,Ae)+d.bD(W,we)?(te=O,le=H):(te=I,le=W)}else if(ie)te=O,le=H;else{if(!oe)return;te=I,le=W}const ue=te/Math.PI*180,ae=le/Math.PI*180,fe=this.center.lat;this.setCenter(new d.S(ue,d.ae(ae,-90,90))),this.setZoom(this.zoom+Or(fe,this.center.lat))}locationToScreenPoint(e,n){const l=br(e);if(n){const h=n.getElevationForLngLatZoom(e,this._helper._tileZoom);d.aR(l,l,1+h/d.bu)}return this._projectSurfacePointToScreen(l)}_projectSurfacePointToScreen(e){const n=d.bv();return d.aw(n,[...e,1],this._globeViewProjMatrixNoCorrection),n[0]/=n[3],n[1]/=n[3],new d.P((.5*n[0]+.5)*this.width,(.5*-n[1]+.5)*this.height)}screenPointToMercatorCoordinate(e,n){if(n){const l=n.pointCoordinate(e);if(l)return l}return d.a1.fromLngLat(this.unprojectScreenPoint(e))}screenPointToLocation(e,n){var l;return(l=this.screenPointToMercatorCoordinate(e,n))===null||l===void 0?void 0:l.toLngLat()}isPointOnMapSurface(e,n){const l=this._cameraPosition,h=this.getRayDirectionFromPixel(e);return!!this.rayPlanetIntersection(l,h)}getRayDirectionFromPixel(e){const n=d.bv();n[0]=e.x/this.width*2-1,n[1]=-1*(e.y/this.height*2-1),n[2]=1,n[3]=1,d.aw(n,n,this._globeViewProjMatrixNoCorrectionInverted),n[0]/=n[3],n[1]/=n[3],n[2]/=n[3];const l=d.bp();l[0]=n[0]-this._cameraPosition[0],l[1]=n[1]-this._cameraPosition[1],l[2]=n[2]-this._cameraPosition[2];const h=d.bp();return d.aV(h,l),h}isSurfacePointVisible(e){const n=this._cachedClippingPlane;return n[0]*e[0]+n[1]*e[1]+n[2]*e[2]+n[3]>=0}isSurfacePointOnScreen(e){if(!this.isSurfacePointVisible(e))return!1;const n=d.bv();return d.aw(n,[...e,1],this._globeViewProjMatrixNoCorrection),n[0]/=n[3],n[1]/=n[3],n[2]/=n[3],n[0]>-1&&n[0]<1&&n[1]>-1&&n[1]<1&&n[2]>-1&&n[2]<1}rayPlanetIntersection(e,n){const l=d.aX(e,n),h=d.bp(),g=d.bp();d.aR(g,n,l),d.aU(h,e,g);const v=1-d.aX(h,h);if(v<0)return null;const w=d.aX(e,e)-1,C=-l+(l<0?1:-1)*Math.sqrt(v),z=w/C,k=C;return{tMin:Math.min(z,k),tMax:Math.max(z,k)}}unprojectScreenPoint(e){const n=this._cameraPosition,l=this.getRayDirectionFromPixel(e),h=this.rayPlanetIntersection(n,l);if(h){const k=d.bp();d.aS(k,n,[l[0]*h.tMin,l[1]*h.tMin,l[2]*h.tMin]);const O=d.bp();return d.aV(O,k),gd(O)}const g=this._cachedClippingPlane,v=g[0]*l[0]+g[1]*l[1]+g[2]*l[2],w=-d.b1(g,n)/v,C=d.bp();if(w>0)d.aS(C,n,[l[0]*w,l[1]*w,l[2]*w]);else{const k=d.bp();d.aS(k,n,[2*l[0],2*l[1],2*l[2]]);const O=d.b1(this._cachedClippingPlane,k);d.aU(C,k,[this._cachedClippingPlane[0]*O,this._cachedClippingPlane[1]*O,this._cachedClippingPlane[2]*O])}const z=(function(k){const O=d.bp();return O[0]=k[0]*-k[3],O[1]=k[1]*-k[3],O[2]=k[2]*-k[3],{center:O,radius:Math.sqrt(1-k[3]*k[3])}})(g);return gd((function(k,O,I){const F=d.bp();d.aU(F,I,k);const H=d.bp();return d.bq(H,k,F,O/d.a$(F)),H})(z.center,z.radius,C))}getMatrixForModel(e,n){const l=d.S.convert(e),h=1/d.bu,g=d.b9();return d.bz(g,g,l.lng/180*Math.PI),d.b7(g,g,-l.lat/180*Math.PI),d.M(g,g,[0,0,1+n/d.bu]),d.b7(g,g,.5*Math.PI),d.N(g,g,[h,h,h]),g}getProjectionDataForCustomLayer(e=!0){const n=this.getProjectionData({overscaledTileID:new d.Z(0,0,0,0,0),applyGlobeMatrix:e});return n.tileMercatorCoords=[0,0,1,1],n}getFastPathSimpleProjectionMatrix(e){}}class bc{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(e){this._helper.setMinZoom(e)}setMaxZoom(e){this._helper.setMaxZoom(e)}setMinPitch(e){this._helper.setMinPitch(e)}setMaxPitch(e){this._helper.setMaxPitch(e)}setRenderWorldCopies(e){this._helper.setRenderWorldCopies(e)}setBearing(e){this._helper.setBearing(e)}setPitch(e){this._helper.setPitch(e)}setRoll(e){this._helper.setRoll(e)}setFov(e){this._helper.setFov(e)}setZoom(e){this._helper.setZoom(e)}setCenter(e){this._helper.setCenter(e)}setElevation(e){this._helper.setElevation(e)}setMinElevationForCurrentTile(e){this._helper.setMinElevationForCurrentTile(e)}setPadding(e){this._helper.setPadding(e)}interpolatePadding(e,n,l){return this._helper.interpolatePadding(e,n,l)}isPaddingEqual(e){return this._helper.isPaddingEqual(e)}resize(e,n,l=!0){this._helper.resize(e,n,l)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(e){this._helper.setMaxBounds(e)}setConstrain(e){this._helper.setConstrain(e)}overrideNearFarZ(e,n){this._helper.overrideNearFarZ(e,n)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(e){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),e)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}get constrain(){return this._helper.constrain}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}get isGlobeRendering(){return this._globeness>0}setTransitionState(e,n){this._globeness=e,this._globeLatitudeErrorCorrectionRadians=n,this._calcMatrices(),this._verticalPerspectiveTransform.getCoveringTilesDetailsProvider().prepareNextFrame(),this._mercatorTransform.getCoveringTilesDetailsProvider().prepareNextFrame()}get currentTransform(){return this.isGlobeRendering?this._verticalPerspectiveTransform:this._mercatorTransform}constructor(e){this._globeLatitudeErrorCorrectionRadians=0,this._globeness=1,this.defaultConstrain=(n,l)=>this.currentTransform.defaultConstrain(n,l),this._helper=new yr({calcMatrices:()=>{this._calcMatrices()},constrain:(n,l)=>this.defaultConstrain(n,l)},e),this._globeness=1,this._mercatorTransform=new Br,this._verticalPerspectiveTransform=new pu}clone(){const e=new bc;return e._globeness=this._globeness,e._globeLatitudeErrorCorrectionRadians=this._globeLatitudeErrorCorrectionRadians,e.apply(this),e}apply(e){this._helper.apply(e),this._mercatorTransform.apply(this),this._verticalPerspectiveTransform.apply(this,this._globeLatitudeErrorCorrectionRadians)}get projectionMatrix(){return this.currentTransform.projectionMatrix}get modelViewProjectionMatrix(){return this.currentTransform.modelViewProjectionMatrix}get inverseProjectionMatrix(){return this.currentTransform.inverseProjectionMatrix}get cameraPosition(){return this.currentTransform.cameraPosition}getProjectionData(e){const n=this._mercatorTransform.getProjectionData(e),l=this._verticalPerspectiveTransform.getProjectionData(e);return{mainMatrix:this.isGlobeRendering?l.mainMatrix:n.mainMatrix,clippingPlane:l.clippingPlane,tileMercatorCoords:l.tileMercatorCoords,projectionTransition:e.applyGlobeMatrix?this._globeness:0,fallbackMatrix:n.fallbackMatrix}}isLocationOccluded(e){return this.currentTransform.isLocationOccluded(e)}transformLightDirection(e){return this.currentTransform.transformLightDirection(e)}getPixelScale(){return d.bk(this._mercatorTransform.getPixelScale(),this._verticalPerspectiveTransform.getPixelScale(),this._globeness)}getCircleRadiusCorrection(){return d.bk(this._mercatorTransform.getCircleRadiusCorrection(),this._verticalPerspectiveTransform.getCircleRadiusCorrection(),this._globeness)}getPitchedTextCorrection(e,n,l){const h=this._mercatorTransform.getPitchedTextCorrection(e,n,l),g=this._verticalPerspectiveTransform.getPitchedTextCorrection(e,n,l);return d.bk(h,g,this._globeness)}projectTileCoordinates(e,n,l,h){return this.currentTransform.projectTileCoordinates(e,n,l,h)}_calcMatrices(){this._helper._width&&this._helper._height&&(this._verticalPerspectiveTransform.apply(this,this._globeLatitudeErrorCorrectionRadians),this._helper._nearZ=this._verticalPerspectiveTransform.nearZ,this._helper._farZ=this._verticalPerspectiveTransform.farZ,this._mercatorTransform.apply(this,!0,this.isGlobeRendering),this._helper._nearZ=this._mercatorTransform.nearZ,this._helper._farZ=this._mercatorTransform.farZ)}calculateFogMatrix(e){return this.currentTransform.calculateFogMatrix(e)}getVisibleUnwrappedCoordinates(e){return this.currentTransform.getVisibleUnwrappedCoordinates(e)}getCameraFrustum(){return this.currentTransform.getCameraFrustum()}getClippingPlane(){return this.currentTransform.getClippingPlane()}getCoveringTilesDetailsProvider(){return this.currentTransform.getCoveringTilesDetailsProvider()}recalculateZoomAndCenter(e){this._mercatorTransform.recalculateZoomAndCenter(e),this._verticalPerspectiveTransform.recalculateZoomAndCenter(e)}maxPitchScaleFactor(){return this._mercatorTransform.maxPitchScaleFactor()}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){return this._helper.getCameraLngLat()}lngLatToCameraDepth(e,n){return this.currentTransform.lngLatToCameraDepth(e,n)}populateCache(e){this._mercatorTransform.populateCache(e),this._verticalPerspectiveTransform.populateCache(e)}getBounds(){return this.currentTransform.getBounds()}calculateCenterFromCameraLngLatAlt(e,n,l,h){return this._helper.calculateCenterFromCameraLngLatAlt(e,n,l,h)}setLocationAtPoint(e,n){if(!this.isGlobeRendering)return this._mercatorTransform.setLocationAtPoint(e,n),void this.apply(this._mercatorTransform);this._verticalPerspectiveTransform.setLocationAtPoint(e,n),this.apply(this._verticalPerspectiveTransform)}locationToScreenPoint(e,n){return this.currentTransform.locationToScreenPoint(e,n)}screenPointToMercatorCoordinate(e,n){return this.currentTransform.screenPointToMercatorCoordinate(e,n)}screenPointToLocation(e,n){return this.currentTransform.screenPointToLocation(e,n)}isPointOnMapSurface(e,n){return this.currentTransform.isPointOnMapSurface(e,n)}getRayDirectionFromPixel(e){return this._verticalPerspectiveTransform.getRayDirectionFromPixel(e)}getMatrixForModel(e,n){return this.currentTransform.getMatrixForModel(e,n)}getProjectionDataForCustomLayer(e=!0){const n=this._mercatorTransform.getProjectionDataForCustomLayer(e);if(!this.isGlobeRendering)return n;const l=this._verticalPerspectiveTransform.getProjectionDataForCustomLayer(e);return l.fallbackMatrix=n.mainMatrix,l}getFastPathSimpleProjectionMatrix(e){return this.currentTransform.getFastPathSimpleProjectionMatrix(e)}}class In{get useGlobeControls(){return!0}handlePanInertia(e,n){const l=_d(e,n);return Math.abs(l.lng-n.center.lng)>180&&(l.lng=n.center.lng+179.5*Math.sign(l.lng-n.center.lng)),{easingCenter:l,easingOffset:new d.P(0,0)}}handleMapControlsRollPitchBearingZoom(e,n){const l=e.around,h=n.screenPointToLocation(l);e.bearingDelta&&n.setBearing(n.bearing+e.bearingDelta),e.pitchDelta&&n.setPitch(n.pitch+e.pitchDelta),e.rollDelta&&n.setRoll(n.roll+e.rollDelta);const g=n.zoom;e.zoomDelta&&n.setZoom(n.zoom+e.zoomDelta);const v=n.zoom-g;if(v===0)return;const w=d.bA(n.center.lng,h.lng),C=w/(Math.abs(w/180)+1),z=d.bA(n.center.lat,h.lat),k=n.getRayDirectionFromPixel(l),O=n.cameraPosition,I=-1*d.aX(O,k),F=d.bp();d.aS(F,O,[k[0]*I,k[1]*I,k[2]*I]);const H=d.aZ(F)-1,K=Math.exp(.5*-Math.max(H-.3,0)),W=cs(n.worldSize,n.center.lat)/Math.min(n.width,n.height),J=d.bn(W,.9,.5,1,.25),ie=(1-d.ah(-v))*Math.min(K,J),oe=n.center.lat,te=n.zoom,le=new d.S(n.center.lng+C*ie,d.ae(n.center.lat+z*ie,-d.af,d.af));n.setLocationAtPoint(h,l);const ue=n.center,ae=d.bn(Math.abs(w),45,85,0,1),fe=d.bn(W,.75,.35,0,1),Ae=Math.pow(Math.max(ae,fe),.25),we=d.bA(ue.lng,le.lng),Se=d.bA(ue.lat,le.lat);n.setCenter(new d.S(ue.lng+we*Ae,ue.lat+Se*Ae).wrap()),n.setZoom(te+Or(oe,n.center.lat))}handleMapControlsPan(e,n,l){if(!e.panDelta)return;const h=n.center.lat,g=n.zoom;n.setCenter(_d(e.panDelta,n).wrap()),n.setZoom(g+Or(h,n.center.lat))}cameraForBoxAndBearing(e,n,l,h,g){const v=ls(e,n,l,h,g),w=n.left/g.width*2-1,C=(g.width-n.right)/g.width*2-1,z=n.top/g.height*-2+1,k=(g.height-n.bottom)/g.height*-2+1,O=d.bA(l.getWest(),l.getEast())<0,I=O?l.getEast():l.getWest(),F=O?l.getWest():l.getEast(),H=Math.max(l.getNorth(),l.getSouth()),K=Math.min(l.getNorth(),l.getSouth()),W=I+.5*d.bA(I,F),J=H+.5*d.bA(H,K),ie=g.clone();ie.setCenter(v.center),ie.setBearing(v.bearing),ie.setPitch(0),ie.setRoll(0),ie.setZoom(v.zoom);const oe=ie.modelViewProjectionMatrix,te=[br(l.getNorthWest()),br(l.getNorthEast()),br(l.getSouthWest()),br(l.getSouthEast()),br(new d.S(F,J)),br(new d.S(I,J)),br(new d.S(W,H)),br(new d.S(W,K))],le=br(v.center);let ue=Number.POSITIVE_INFINITY;for(const ae of te)w<0&&(ue=In.getLesserNonNegativeNonNull(ue,In.solveVectorScale(ae,le,oe,"x",w))),C>0&&(ue=In.getLesserNonNegativeNonNull(ue,In.solveVectorScale(ae,le,oe,"x",C))),z>0&&(ue=In.getLesserNonNegativeNonNull(ue,In.solveVectorScale(ae,le,oe,"y",z))),k<0&&(ue=In.getLesserNonNegativeNonNull(ue,In.solveVectorScale(ae,le,oe,"y",k)));if(Number.isFinite(ue)&&ue!==0)return v.zoom=ie.zoom+d.ak(ue),v;qr()}handleJumpToCenterZoom(e,n){const l=e.center.lat,h=e.constrain(n.center?d.S.convert(n.center):e.center,e.zoom).center;e.setCenter(h.wrap());const g=n.zoom!==void 0?+n.zoom:e.zoom+Or(l,h.lat);e.zoom!==g&&e.setZoom(g)}handleEaseTo(e,n){const l=e.zoom,h=e.center,g=e.padding,v={roll:e.roll,pitch:e.pitch,bearing:e.bearing},w={roll:n.roll===void 0?e.roll:n.roll,pitch:n.pitch===void 0?e.pitch:n.pitch,bearing:n.bearing===void 0?e.bearing:n.bearing},C=n.zoom!==void 0,z=!e.isPaddingEqual(n.padding);let k=!1;const O=n.center?d.S.convert(n.center):h,I=e.constrain(O,l).center;cr(e,I);const F=e.clone();F.setCenter(I),F.setZoom(C?+n.zoom:l+Or(h.lat,O.lat)),F.setBearing(n.bearing);const H=new d.P(d.ae(e.centerPoint.x+n.offsetAsPoint.x,0,e.width),d.ae(e.centerPoint.y+n.offsetAsPoint.y,0,e.height));F.setLocationAtPoint(I,H);const K=(n.offset&&n.offsetAsPoint.mag())>0?F.center:I,W=C?+n.zoom:l+Or(h.lat,K.lat),J=l+Or(h.lat,0),ie=W+Or(K.lat,0),oe=d.bA(h.lng,K.lng),te=d.bA(h.lat,K.lat),le=d.ah(ie-J);return k=W!==l,{easeFunc:ue=>{if(d.be(v,w)||ao({startEulerAngles:v,endEulerAngles:w,tr:e,k:ue,useSlerp:v.roll!=w.roll}),z&&e.interpolatePadding(g,n.padding,ue),n.around)d.w("Easing around a point is not supported under globe projection."),e.setLocationAtPoint(n.around,n.aroundPoint);else{const ae=ie>J?Math.min(2,le):Math.max(.5,le),fe=Math.pow(ae,1-ue),Ae=ba(h,oe,te,ue*fe);e.setCenter(Ae.wrap())}if(k){const ae=d.C.number(J,ie,ue)+Or(0,e.center.lat);e.setZoom(ae)}},isZooming:k,elevationCenter:K}}handleFlyTo(e,n){const l=n.zoom!==void 0,h=e.center,g=e.zoom,v=e.padding,w=!e.isPaddingEqual(n.padding),C=e.constrain(d.S.convert(n.center||n.locationAtOffset),g).center,z=l?+n.zoom:e.zoom+Or(e.center.lat,C.lat),k=e.clone();k.setCenter(C),k.setZoom(z),k.setBearing(n.bearing);const O=new d.P(d.ae(e.centerPoint.x+n.offsetAsPoint.x,0,e.width),d.ae(e.centerPoint.y+n.offsetAsPoint.y,0,e.height));k.setLocationAtPoint(C,O);const I=k.center;cr(e,I);const F=(function(te,le,ue){const ae=br(le),fe=br(ue),Ae=d.aX(ae,fe),we=Math.acos(Ae),Se=hu(te);return we/(2*Math.PI)*Se})(e,h,I),H=g+Or(h.lat,0),K=z+Or(I.lat,0),W=d.ah(K-H);let J;if(typeof n.minZoom=="number"){const te=+n.minZoom+Or(I.lat,0),le=Math.min(te,H,K)+Or(0,I.lat),ue=e.constrain(I,le).zoom+Or(I.lat,0);J=d.ah(ue-H)}const ie=d.bA(h.lng,I.lng),oe=d.bA(h.lat,I.lat);return{easeFunc:(te,le,ue,ae)=>{const fe=ba(h,ie,oe,ue);w&&e.interpolatePadding(v,n.padding,te);const Ae=te===1?I:fe;e.setCenter(Ae.wrap());const we=H+d.ak(le);e.setZoom(te===1?z:we+Or(0,Ae.lat))},scaleOfZoom:W,targetCenter:I,scaleOfMinZoom:J,pixelPathLength:F}}static solveVectorScale(e,n,l,h,g){const v=h==="x"?[l[0],l[4],l[8],l[12]]:[l[1],l[5],l[9],l[13]],w=[l[3],l[7],l[11],l[15]],C=e[0]*v[0]+e[1]*v[1]+e[2]*v[2],z=e[0]*w[0]+e[1]*w[1]+e[2]*w[2],k=n[0]*v[0]+n[1]*v[1]+n[2]*v[2],O=n[0]*w[0]+n[1]*w[1]+n[2]*w[2];return k+g*z===C+g*O||w[3]*(C-k)+v[3]*(O-z)+C*O==k*z?null:(k+v[3]-g*O-g*w[3])/(k-C-g*O+g*z)}static getLesserNonNegativeNonNull(e,n){return n!==null&&n>=0&&n<e?n:e}}class yd{constructor(e){this._globe=e,this._mercatorCameraHelper=new $i,this._verticalPerspectiveCameraHelper=new In}get useGlobeControls(){return this._globe.useGlobeRendering}get currentHelper(){return this.useGlobeControls?this._verticalPerspectiveCameraHelper:this._mercatorCameraHelper}handlePanInertia(e,n){return this.currentHelper.handlePanInertia(e,n)}handleMapControlsRollPitchBearingZoom(e,n){return this.currentHelper.handleMapControlsRollPitchBearingZoom(e,n)}handleMapControlsPan(e,n,l){this.currentHelper.handleMapControlsPan(e,n,l)}cameraForBoxAndBearing(e,n,l,h,g){return this.currentHelper.cameraForBoxAndBearing(e,n,l,h,g)}handleJumpToCenterZoom(e,n){this.currentHelper.handleJumpToCenterZoom(e,n)}handleEaseTo(e,n){return this.currentHelper.handleEaseTo(e,n)}handleFlyTo(e,n){return this.currentHelper.handleFlyTo(e,n)}}const fu=(p,e)=>d.y(p,e&&e.filter((n=>n.identifier!=="source.canvas"))),Cp=d.bE();class Bl extends d.E{constructor(e,n={}){var l,h;super(),this._rtlPluginLoaded=()=>{for(const v in this.sourceCaches){const w=this.sourceCaches[v].getSource().type;w!=="vector"&&w!=="geojson"||this.sourceCaches[v].reload()}},this.map=e,this.dispatcher=new Oi(si(),e._getMapId()),this.dispatcher.registerMessageHandler("GG",((v,w)=>this.getGlyphs(v,w))),this.dispatcher.registerMessageHandler("GI",((v,w)=>this.getImages(v,w))),this.dispatcher.registerMessageHandler("GDA",((v,w)=>this.getDashes(v,w))),this.imageManager=new oa,this.imageManager.setEventedParent(this);const g=((l=e._container)===null||l===void 0?void 0:l.lang)||typeof document<"u"&&((h=document.documentElement)===null||h===void 0?void 0:h.lang)||void 0;this.glyphManager=new Ar(e._requestManager,n.localIdeographFontFamily,g),this.lineAtlas=new me(256,512),this.crossTileSymbolIndex=new ss,this._spritesImagesIds={},this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory=new d.bF,this._loaded=!1,this._availableImages=[],this._globalState={},this._resetUpdates(),this.dispatcher.broadcast("SR",d.bG()),Co().on(Na,this._rtlPluginLoaded),this.on("data",(v=>{if(v.dataType!=="source"||v.sourceDataType!=="metadata")return;const w=this.sourceCaches[v.sourceId];if(!w)return;const C=w.getSource();if(C&&C.vectorLayerIds)for(const z in this._layers){const k=this._layers[z];k.source===C.id&&this._validateLayer(k)}}))}setGlobalStateProperty(e,n){var l,h,g;this._checkLoaded();const v=n===null?(g=(h=(l=this.stylesheet.state)===null||l===void 0?void 0:l[e])===null||h===void 0?void 0:h.default)!==null&&g!==void 0?g:null:n;if(d.bH(v,this._globalState[e]))return this;this._globalState[e]=v,this._applyGlobalStateChanges([e])}getGlobalState(){return this._globalState}setGlobalState(e){this._checkLoaded();const n=[];for(const l in e)!d.bH(this._globalState[l],e[l].default)&&(n.push(l),this._globalState[l]=e[l].default);this._applyGlobalStateChanges(n)}_applyGlobalStateChanges(e){if(e.length===0)return;const n=new Set,l={};for(const h of e){l[h]=this._globalState[h];for(const g in this._layers){const v=this._layers[g],w=v.getLayoutAffectingGlobalStateRefs(),C=v.getPaintAffectingGlobalStateRefs();if(w.has(h)&&n.add(v.source),C.has(h))for(const{name:z,value:k}of C.get(h))this._updatePaintProperty(v,z,k)}}this.dispatcher.broadcast("UGS",l);for(const h in this.sourceCaches)n.has(h)&&(this._reloadSource(h),this._changed=!0)}loadURL(e,n={},l){this.fire(new d.l("dataloading",{dataType:"style"})),n.validate=typeof n.validate!="boolean"||n.validate;const h=this.map._requestManager.transformRequest(e,"Style");this._loadStyleRequest=new AbortController;const g=this._loadStyleRequest;d.j(h,this._loadStyleRequest).then((v=>{this._loadStyleRequest=null,this._load(v.data,n,l)})).catch((v=>{this._loadStyleRequest=null,v&&!g.signal.aborted&&this.fire(new d.k(v))}))}loadJSON(e,n={},l){this.fire(new d.l("dataloading",{dataType:"style"})),this._frameRequest=new AbortController,xt.frameAsync(this._frameRequest).then((()=>{this._frameRequest=null,n.validate=n.validate!==!1,this._load(e,n,l)})).catch((()=>{}))}loadEmpty(){this.fire(new d.l("dataloading",{dataType:"style"})),this._load(Cp,{validate:!1})}_load(e,n,l){var h,g;let v=n.transformStyle?n.transformStyle(l,e):e;if(!n.validate||!fu(this,d.z(v))){v=Object.assign({},v),this._loaded=!0,this.stylesheet=v;for(const w in v.sources)this.addSource(w,v.sources[w],{validate:!1});v.sprite?this._loadSprite(v.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(v.glyphs),this._createLayers(),this.light=new zt(this.stylesheet.light),this._setProjectionInternal(((h=this.stylesheet.projection)===null||h===void 0?void 0:h.type)||"mercator"),this.sky=new vi(this.stylesheet.sky),this.map.setTerrain((g=this.stylesheet.terrain)!==null&&g!==void 0?g:null),this.fire(new d.l("data",{dataType:"style"})),this.fire(new d.l("style.load"))}}_createLayers(){var e,n,l;const h=d.bI(this.stylesheet.layers);this.setGlobalState((e=this.stylesheet.state)!==null&&e!==void 0?e:null),this.dispatcher.broadcast("SL",h),this._order=h.map((g=>g.id)),this._layers={},this._serializedLayers=null;for(const g of h){const v=d.bJ(g,this._globalState);if(v.setEventedParent(this,{layer:{id:g.id}}),this._layers[g.id]=v,d.bK(v)&&this.sourceCaches[v.source]){const w=(l=(n=g.paint)===null||n===void 0?void 0:n["raster-fade-duration"])!==null&&l!==void 0?l:v.paint.get("raster-fade-duration");this.sourceCaches[v.source].setRasterFadeDuration(w)}}}_loadSprite(e,n=!1,l=void 0){let h;this.imageManager.setLoaded(!1),this._spriteRequest=new AbortController,(function(g,v,w,C){return d._(this,void 0,void 0,(function*(){const z=Mr(g),k=w>1?"@2x":"",O={},I={};for(const{id:F,url:H}of z){const K=v.transformRequest(va(H,k,".json"),"SpriteJSON");O[F]=d.j(K,C);const W=v.transformRequest(va(H,k,".png"),"SpriteImage");I[F]=ki.getImage(W,C)}return yield Promise.all([...Object.values(O),...Object.values(I)]),(function(F,H){return d._(this,void 0,void 0,(function*(){const K={};for(const W in F){K[W]={};const J=xt.getImageCanvasContext((yield H[W]).data),ie=(yield F[W]).data;for(const oe in ie){const{width:te,height:le,x:ue,y:ae,sdf:fe,pixelRatio:Ae,stretchX:we,stretchY:Se,content:Ee,textFitWidth:Qe,textFitHeight:Ke}=ie[oe];K[W][oe]={data:null,pixelRatio:Ae,sdf:fe,stretchX:we,stretchY:Se,content:Ee,textFitWidth:Qe,textFitHeight:Ke,spriteData:{width:te,height:le,x:ue,y:ae,context:J}}}}return K}))})(O,I)}))})(e,this.map._requestManager,this.map.getPixelRatio(),this._spriteRequest).then((g=>{if(this._spriteRequest=null,g)for(const v in g){this._spritesImagesIds[v]=[];const w=this._spritesImagesIds[v]?this._spritesImagesIds[v].filter((C=>!(C in g))):[];for(const C of w)this.imageManager.removeImage(C),this._changedImages[C]=!0;for(const C in g[v]){const z=v==="default"?C:`${v}:${C}`;this._spritesImagesIds[v].push(z),z in this.imageManager.images?this.imageManager.updateImage(z,g[v][C],!1):this.imageManager.addImage(z,g[v][C]),n&&(this._changedImages[z]=!0)}}})).catch((g=>{this._spriteRequest=null,h=g,this.fire(new d.k(h))})).finally((()=>{this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),n&&(this._changed=!0),this.dispatcher.broadcast("SI",this._availableImages),this.fire(new d.l("data",{dataType:"style"})),l&&l(h)}))}_unloadSprite(){for(const e of Object.values(this._spritesImagesIds).flat())this.imageManager.removeImage(e),this._changedImages[e]=!0;this._spritesImagesIds={},this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new d.l("data",{dataType:"style"}))}_validateLayer(e){const n=this.sourceCaches[e.source];if(!n)return;const l=e.sourceLayer;if(!l)return;const h=n.getSource();(h.type==="geojson"||h.vectorLayerIds&&h.vectorLayerIds.indexOf(l)===-1)&&this.fire(new d.k(new Error(`Source layer "${l}" does not exist on source "${h.id}" as specified by style layer "${e.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const e in this.sourceCaches)if(!this.sourceCaches[e].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeByIds(e,n=!1){const l=this._serializedAllLayers();if(!e||e.length===0)return Object.values(n?d.bL(l):l);const h=[];for(const g of e)if(l[g]){const v=n?d.bL(l[g]):l[g];h.push(v)}return h}_serializedAllLayers(){let e=this._serializedLayers;if(e)return e;e=this._serializedLayers={};const n=Object.keys(this._layers);for(const l of n){const h=this._layers[l];h.type!=="custom"&&(e[l]=h.serialize())}return e}hasTransitions(){var e,n,l;if(!((e=this.light)===null||e===void 0)&&e.hasTransition()||!((n=this.sky)===null||n===void 0)&&n.hasTransition()||!((l=this.projection)===null||l===void 0)&&l.hasTransition())return!0;for(const h in this.sourceCaches)if(this.sourceCaches[h].hasTransition())return!0;for(const h in this._layers)if(this._layers[h].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(e){if(!this._loaded)return;const n=this._changed;if(n){const h=Object.keys(this._updatedLayers),g=Object.keys(this._removedLayers);(h.length||g.length)&&this._updateWorkerLayers(h,g);for(const v in this._updatedSources){const w=this._updatedSources[v];if(w==="reload")this._reloadSource(v);else{if(w!=="clear")throw new Error(`Invalid action ${w}`);this._clearSource(v)}}this._updateTilesForChangedImages(),this._updateTilesForChangedGlyphs();for(const v in this._updatedPaintProps)this._layers[v].updateTransitions(e);this.light.updateTransitions(e),this.sky.updateTransitions(e),this._resetUpdates()}const l={};for(const h in this.sourceCaches){const g=this.sourceCaches[h];l[h]=g.used,g.used=!1}for(const h of this._order){const g=this._layers[h];g.recalculate(e,this._availableImages),!g.isHidden(e.zoom)&&g.source&&(this.sourceCaches[g.source].used=!0)}for(const h in l){const g=this.sourceCaches[h];!!l[h]!=!!g.used&&g.fire(new d.l("data",{sourceDataType:"visibility",dataType:"source",sourceId:h}))}this.light.recalculate(e),this.sky.recalculate(e),this.projection.recalculate(e),this.z=e.zoom,n&&this.fire(new d.l("data",{dataType:"style"}))}_updateTilesForChangedImages(){const e=Object.keys(this._changedImages);if(e.length){for(const n in this.sourceCaches)this.sourceCaches[n].reloadTilesForDependencies(["icons","patterns"],e);this._changedImages={}}}_updateTilesForChangedGlyphs(){if(this._glyphsDidChange){for(const e in this.sourceCaches)this.sourceCaches[e].reloadTilesForDependencies(["glyphs"],[""]);this._glyphsDidChange=!1}}_updateWorkerLayers(e,n){this.dispatcher.broadcast("UL",{layers:this._serializeByIds(e,!1),removedIds:n})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={},this._glyphsDidChange=!1}setState(e,n={}){var l;this._checkLoaded();const h=this.serialize();if(e=n.transformStyle?n.transformStyle(h,e):e,((l=n.validate)===null||l===void 0||l)&&fu(this,d.z(e)))return!1;(e=d.bL(e)).layers=d.bI(e.layers);const g=d.bM(h,e),v=this._getOperationsToPerform(g);if(v.unimplemented.length>0)throw new Error(`Unimplemented: ${v.unimplemented.join(", ")}.`);if(v.operations.length===0)return!1;for(const w of v.operations)w();return this.stylesheet=e,this._serializedLayers=null,!0}_getOperationsToPerform(e){const n=[],l=[];for(const h of e)switch(h.command){case"setCenter":case"setZoom":case"setBearing":case"setPitch":case"setRoll":continue;case"addLayer":n.push((()=>this.addLayer.apply(this,h.args)));break;case"removeLayer":n.push((()=>this.removeLayer.apply(this,h.args)));break;case"setPaintProperty":n.push((()=>this.setPaintProperty.apply(this,h.args)));break;case"setLayoutProperty":n.push((()=>this.setLayoutProperty.apply(this,h.args)));break;case"setFilter":n.push((()=>this.setFilter.apply(this,h.args)));break;case"addSource":n.push((()=>this.addSource.apply(this,h.args)));break;case"removeSource":n.push((()=>this.removeSource.apply(this,h.args)));break;case"setLayerZoomRange":n.push((()=>this.setLayerZoomRange.apply(this,h.args)));break;case"setLight":n.push((()=>this.setLight.apply(this,h.args)));break;case"setGeoJSONSourceData":n.push((()=>this.setGeoJSONSourceData.apply(this,h.args)));break;case"setGlyphs":n.push((()=>this.setGlyphs.apply(this,h.args)));break;case"setSprite":n.push((()=>this.setSprite.apply(this,h.args)));break;case"setTerrain":n.push((()=>this.map.setTerrain.apply(this,h.args)));break;case"setSky":n.push((()=>this.setSky.apply(this,h.args)));break;case"setProjection":this.setProjection.apply(this,h.args);break;case"setGlobalState":n.push((()=>this.setGlobalState.apply(this,h.args)));break;case"setTransition":n.push((()=>{}));break;default:l.push(h.command)}return{operations:n,unimplemented:l}}addImage(e,n){if(this.getImage(e))return this.fire(new d.k(new Error(`An image named "${e}" already exists.`)));this.imageManager.addImage(e,n),this._afterImageUpdated(e)}updateImage(e,n){this.imageManager.updateImage(e,n)}getImage(e){return this.imageManager.getImage(e)}removeImage(e){if(!this.getImage(e))return this.fire(new d.k(new Error(`An image named "${e}" does not exist.`)));this.imageManager.removeImage(e),this._afterImageUpdated(e)}_afterImageUpdated(e){this._availableImages=this.imageManager.listImages(),this._changedImages[e]=!0,this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new d.l("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(e,n,l={}){if(this._checkLoaded(),this.sourceCaches[e]!==void 0)throw new Error(`Source "${e}" already exists.`);if(!n.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(n).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(n.type)>=0&&this._validate(d.z.source,`sources.${e}`,n,null,l))return;this.map&&this.map._collectResourceTiming&&(n.collectResourceTiming=!0);const h=this.sourceCaches[e]=new ci(e,n,this.dispatcher);h.style=this,h.setEventedParent(this,(()=>({isSourceLoaded:h.loaded(),source:h.serialize(),sourceId:e}))),h.onAdd(this.map),this._changed=!0}removeSource(e){if(this._checkLoaded(),this.sourceCaches[e]===void 0)throw new Error("There is no source with this ID");for(const l in this._layers)if(this._layers[l].source===e)return this.fire(new d.k(new Error(`Source "${e}" cannot be removed while layer "${l}" is using it.`)));const n=this.sourceCaches[e];delete this.sourceCaches[e],delete this._updatedSources[e],n.fire(new d.l("data",{sourceDataType:"metadata",dataType:"source",sourceId:e})),n.setEventedParent(null),n.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(e,n){if(this._checkLoaded(),this.sourceCaches[e]===void 0)throw new Error(`There is no source with this ID=${e}`);const l=this.sourceCaches[e].getSource();if(l.type!=="geojson")throw new Error(`geojsonSource.type is ${l.type}, which is !== 'geojson`);l.setData(n),this._changed=!0}getSource(e){return this.sourceCaches[e]&&this.sourceCaches[e].getSource()}addLayer(e,n,l={}){this._checkLoaded();const h=e.id;if(this.getLayer(h))return void this.fire(new d.k(new Error(`Layer "${h}" already exists on this map.`)));let g;if(e.type==="custom"){if(fu(this,d.bN(e)))return;g=d.bJ(e,this._globalState)}else{if("source"in e&&typeof e.source=="object"&&(this.addSource(h,e.source),e=d.bL(e),e=d.e(e,{source:h})),this._validate(d.z.layer,`layers.${h}`,e,{arrayIndex:-1},l))return;g=d.bJ(e,this._globalState),this._validateLayer(g),g.setEventedParent(this,{layer:{id:h}})}const v=n?this._order.indexOf(n):this._order.length;if(n&&v===-1)this.fire(new d.k(new Error(`Cannot add layer "${h}" before non-existing layer "${n}".`)));else{if(this._order.splice(v,0,h),this._layerOrderChanged=!0,this._layers[h]=g,this._removedLayers[h]&&g.source&&g.type!=="custom"){const w=this._removedLayers[h];delete this._removedLayers[h],w.type!==g.type?this._updatedSources[g.source]="clear":(this._updatedSources[g.source]="reload",this.sourceCaches[g.source].pause())}this._updateLayer(g),g.onAdd&&g.onAdd(this.map)}}moveLayer(e,n){if(this._checkLoaded(),this._changed=!0,!this._layers[e])return void this.fire(new d.k(new Error(`The layer '${e}' does not exist in the map's style and cannot be moved.`)));if(e===n)return;const l=this._order.indexOf(e);this._order.splice(l,1);const h=n?this._order.indexOf(n):this._order.length;n&&h===-1?this.fire(new d.k(new Error(`Cannot move layer "${e}" before non-existing layer "${n}".`))):(this._order.splice(h,0,e),this._layerOrderChanged=!0)}removeLayer(e){this._checkLoaded();const n=this._layers[e];if(!n)return void this.fire(new d.k(new Error(`Cannot remove non-existing layer "${e}".`)));n.setEventedParent(null);const l=this._order.indexOf(e);this._order.splice(l,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[e]=n,delete this._layers[e],this._serializedLayers&&delete this._serializedLayers[e],delete this._updatedLayers[e],delete this._updatedPaintProps[e],n.onRemove&&n.onRemove(this.map)}getLayer(e){return this._layers[e]}getLayersOrder(){return[...this._order]}hasLayer(e){return e in this._layers}setLayerZoomRange(e,n,l){this._checkLoaded();const h=this.getLayer(e);h?h.minzoom===n&&h.maxzoom===l||(n!=null&&(h.minzoom=n),l!=null&&(h.maxzoom=l),this._updateLayer(h)):this.fire(new d.k(new Error(`Cannot set the zoom range of non-existing layer "${e}".`)))}setFilter(e,n,l={}){this._checkLoaded();const h=this.getLayer(e);if(h){if(!d.bH(h.filter,n))return n==null?(h.setFilter(void 0),void this._updateLayer(h)):void(this._validate(d.z.filter,`layers.${h.id}.filter`,n,null,l)||(h.setFilter(d.bL(n)),this._updateLayer(h)))}else this.fire(new d.k(new Error(`Cannot filter non-existing layer "${e}".`)))}getFilter(e){return d.bL(this.getLayer(e).filter)}setLayoutProperty(e,n,l,h={}){this._checkLoaded();const g=this.getLayer(e);g?d.bH(g.getLayoutProperty(n),l)||(g.setLayoutProperty(n,l,h),this._updateLayer(g)):this.fire(new d.k(new Error(`Cannot style non-existing layer "${e}".`)))}getLayoutProperty(e,n){const l=this.getLayer(e);if(l)return l.getLayoutProperty(n);this.fire(new d.k(new Error(`Cannot get style of non-existing layer "${e}".`)))}setPaintProperty(e,n,l,h={}){this._checkLoaded();const g=this.getLayer(e);g?d.bH(g.getPaintProperty(n),l)||this._updatePaintProperty(g,n,l,h):this.fire(new d.k(new Error(`Cannot style non-existing layer "${e}".`)))}_updatePaintProperty(e,n,l,h={}){e.setPaintProperty(n,l,h)&&this._updateLayer(e),d.bK(e)&&n==="raster-fade-duration"&&this.sourceCaches[e.source].setRasterFadeDuration(l),this._changed=!0,this._updatedPaintProps[e.id]=!0,this._serializedLayers=null}getPaintProperty(e,n){return this.getLayer(e).getPaintProperty(n)}setFeatureState(e,n){this._checkLoaded();const l=e.source,h=e.sourceLayer,g=this.sourceCaches[l];if(g===void 0)return void this.fire(new d.k(new Error(`The source '${l}' does not exist in the map's style.`)));const v=g.getSource().type;v==="geojson"&&h?this.fire(new d.k(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):v!=="vector"||h?(e.id===void 0&&this.fire(new d.k(new Error("The feature id parameter must be provided."))),g.setFeatureState(h,e.id,n)):this.fire(new d.k(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(e,n){this._checkLoaded();const l=e.source,h=this.sourceCaches[l];if(h===void 0)return void this.fire(new d.k(new Error(`The source '${l}' does not exist in the map's style.`)));const g=h.getSource().type,v=g==="vector"?e.sourceLayer:void 0;g!=="vector"||v?n&&typeof e.id!="string"&&typeof e.id!="number"?this.fire(new d.k(new Error("A feature id is required to remove its specific state property."))):h.removeFeatureState(v,e.id,n):this.fire(new d.k(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(e){this._checkLoaded();const n=e.source,l=e.sourceLayer,h=this.sourceCaches[n];if(h!==void 0)return h.getSource().type!=="vector"||l?(e.id===void 0&&this.fire(new d.k(new Error("The feature id parameter must be provided."))),h.getFeatureState(l,e.id)):void this.fire(new d.k(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new d.k(new Error(`The source '${n}' does not exist in the map's style.`)))}getTransition(){return d.e({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){if(!this._loaded)return;const e=d.bO(this.sourceCaches,(g=>g.serialize())),n=this._serializeByIds(this._order,!0),l=this.map.getTerrain()||void 0,h=this.stylesheet;return d.bP({version:h.version,name:h.name,metadata:h.metadata,light:h.light,sky:h.sky,center:h.center,zoom:h.zoom,bearing:h.bearing,pitch:h.pitch,sprite:h.sprite,glyphs:h.glyphs,transition:h.transition,projection:h.projection,sources:e,layers:n,terrain:l},(g=>g!==void 0))}_updateLayer(e){this._updatedLayers[e.id]=!0,e.source&&!this._updatedSources[e.source]&&this.sourceCaches[e.source].getSource().type!=="raster"&&(this._updatedSources[e.source]="reload",this.sourceCaches[e.source].pause()),this._serializedLayers=null,this._changed=!0}_flattenAndSortRenderedFeatures(e){const n=v=>this._layers[v].type==="fill-extrusion",l={},h=[];for(let v=this._order.length-1;v>=0;v--){const w=this._order[v];if(n(w)){l[w]=v;for(const C of e){const z=C[w];if(z)for(const k of z)h.push(k)}}}h.sort(((v,w)=>w.intersectionZ-v.intersectionZ));const g=[];for(let v=this._order.length-1;v>=0;v--){const w=this._order[v];if(n(w))for(let C=h.length-1;C>=0;C--){const z=h[C].feature;if(l[z.layer.id]<v)break;g.push(z),h.pop()}else for(const C of e){const z=C[w];if(z)for(const k of z)g.push(k.feature)}}return g}queryRenderedFeatures(e,n,l){n&&n.filter&&this._validate(d.z.filter,"queryRenderedFeatures.filter",n.filter,null,n);const h={};if(n&&n.layers){if(!(Array.isArray(n.layers)||n.layers instanceof Set))return this.fire(new d.k(new Error("parameters.layers must be an Array or a Set of strings"))),[];for(const z of n.layers){const k=this._layers[z];if(!k)return this.fire(new d.k(new Error(`The layer '${z}' does not exist in the map's style and cannot be queried for features.`))),[];h[k.source]=!0}}const g=[];n.availableImages=this._availableImages;const v=this._serializedAllLayers(),w=n.layers instanceof Set?n.layers:Array.isArray(n.layers)?new Set(n.layers):null,C=Object.assign(Object.assign({},n),{layers:w,globalState:this._globalState});for(const z in this.sourceCaches)n.layers&&!h[z]||g.push(es(this.sourceCaches[z],this._layers,v,e,C,l,this.map.terrain?(k,O,I)=>this.map.terrain.getElevation(k,O,I):void 0));return this.placement&&g.push((function(z,k,O,I,F,H,K){const W={},J=H.queryRenderedSymbols(I),ie=[];for(const oe of Object.keys(J).map(Number))ie.push(K[oe]);ie.sort(ya);for(const oe of ie){const te=oe.featureIndex.lookupSymbolFeatures(J[oe.bucketInstanceId],k,oe.bucketIndex,oe.sourceLayerIndex,{filterSpec:F.filter,globalState:F.globalState},F.layers,F.availableImages,z);for(const le in te){const ue=W[le]=W[le]||[],ae=te[le];ae.sort(((fe,Ae)=>{const we=oe.featureSortOrder;if(we){const Se=we.indexOf(fe.featureIndex);return we.indexOf(Ae.featureIndex)-Se}return Ae.featureIndex-fe.featureIndex}));for(const fe of ae)ue.push(fe)}}return(function(oe,te,le){for(const ue in oe)for(const ae of oe[ue])ts(ae,le[te[ue].source]);return oe})(W,z,O)})(this._layers,v,this.sourceCaches,e,C,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(g)}querySourceFeatures(e,n){n?.filter&&this._validate(d.z.filter,"querySourceFeatures.filter",n.filter,null,n);const l=this.sourceCaches[e];return l?(function(h,g){const v=h.getRenderableIds().map((z=>h.getTileByID(z))),w=[],C={};for(let z=0;z<v.length;z++){const k=v[z],O=k.tileID.canonical.key;C[O]||(C[O]=!0,k.querySourceFeatures(w,g))}return w})(l,n?Object.assign(Object.assign({},n),{globalState:this._globalState}):{globalState:this._globalState}):[]}getLight(){return this.light.getLight()}setLight(e,n={}){this._checkLoaded();const l=this.light.getLight();let h=!1;for(const v in e)if(!d.bH(e[v],l[v])){h=!0;break}if(!h)return;const g={now:dt(),transition:d.e({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(e,n),this.light.updateTransitions(g)}getProjection(){var e;return(e=this.stylesheet)===null||e===void 0?void 0:e.projection}setProjection(e){if(this._checkLoaded(),this.projection){if(this.projection.name===e.type)return;this.projection.destroy(),delete this.projection}this.stylesheet.projection=e,this._setProjectionInternal(e.type)}getSky(){var e;return(e=this.stylesheet)===null||e===void 0?void 0:e.sky}setSky(e,n={}){this._checkLoaded();const l=this.getSky();let h=!1;if(!e&&!l)return;if(e&&!l)h=!0;else if(!e&&l)h=!0;else for(const v in e)if(!d.bH(e[v],l[v])){h=!0;break}if(!h)return;const g={now:dt(),transition:d.e({duration:300,delay:0},this.stylesheet.transition)};this.stylesheet.sky=e,this.sky.setSky(e,n),this.sky.updateTransitions(g)}_setProjectionInternal(e){const n=(function(l,h){const g={constrain:h};if(Array.isArray(l)){const v=new uu({type:l});return{projection:v,transform:new bc(g),cameraHelper:new yd(v)}}switch(l){case"mercator":return{projection:new Fs,transform:new Br(g),cameraHelper:new $i};case"globe":{const v=new uu({type:["interpolate",["linear"],["zoom"],11,"vertical-perspective",12,"mercator"]});return{projection:v,transform:new bc(g),cameraHelper:new yd(v)}}case"vertical-perspective":return{projection:new Us,transform:new pu(g),cameraHelper:new In};default:return d.w(`Unknown projection name: ${l}. Falling back to mercator projection.`),{projection:new Fs,transform:new Br(g),cameraHelper:new $i}}})(e,this.map.transformConstrain);this.projection=n.projection,this.map.migrateProjection(n.transform,n.cameraHelper);for(const l in this.sourceCaches)this.sourceCaches[l].reload()}_validate(e,n,l,h,g={}){return(!g||g.validate!==!1)&&fu(this,e.call(d.z,d.e({key:n,style:this.serialize(),value:l,styleSpec:d.v},h)))}_remove(e=!0){this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._loadStyleRequest&&(this._loadStyleRequest.abort(),this._loadStyleRequest=null),this._spriteRequest&&(this._spriteRequest.abort(),this._spriteRequest=null),Co().off(Na,this._rtlPluginLoaded);for(const n in this._layers)this._layers[n].setEventedParent(null);for(const n in this.sourceCaches){const l=this.sourceCaches[n];l.setEventedParent(null),l.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),e&&this.dispatcher.broadcast("RM",void 0),this.dispatcher.remove(e)}_clearSource(e){this.sourceCaches[e].clearTiles()}_reloadSource(e){this.sourceCaches[e].resume(),this.sourceCaches[e].reload()}_updateSources(e){for(const n in this.sourceCaches)this.sourceCaches[n].update(e,this.map.terrain)}_generateCollisionBoxes(){for(const e in this.sourceCaches)this._reloadSource(e)}_updatePlacement(e,n,l,h,g=!1){let v=!1,w=!1;const C={};for(const z of this._order){const k=this._layers[z];if(k.type!=="symbol")continue;if(!C[k.source]){const I=this.sourceCaches[k.source];C[k.source]=I.getRenderableIds(!0).map((F=>I.getTileByID(F))).sort(((F,H)=>H.tileID.overscaledZ-F.tileID.overscaledZ||(F.tileID.isLessThan(H.tileID)?-1:1)))}const O=this.crossTileSymbolIndex.addLayer(k,C[k.source],e.center.lng);v=v||O}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((g=g||this._layerOrderChanged||l===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(dt(),e.zoom))&&(this.pauseablePlacement=new os(e,this.map.terrain,this._order,g,n,l,h,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,C),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(dt()),w=!0),v&&this.pauseablePlacement.placement.setStale()),w||v)for(const z of this._order){const k=this._layers[z];k.type==="symbol"&&this.placement.updateLayerOpacities(k,C[k.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(dt())}_releaseSymbolFadeTiles(){for(const e in this.sourceCaches)this.sourceCaches[e].releaseSymbolFadeTiles()}getImages(e,n){return d._(this,void 0,void 0,(function*(){const l=yield this.imageManager.getImages(n.icons);this._updateTilesForChangedImages();const h=this.sourceCaches[n.source];return h&&h.setDependencies(n.tileID.key,n.type,n.icons),l}))}getGlyphs(e,n){return d._(this,void 0,void 0,(function*(){const l=yield this.glyphManager.getGlyphs(n.stacks),h=this.sourceCaches[n.source];return h&&h.setDependencies(n.tileID.key,n.type,[""]),l}))}getGlyphsUrl(){return this.stylesheet.glyphs||null}setGlyphs(e,n={}){this._checkLoaded(),e&&this._validate(d.z.glyphs,"glyphs",e,null,n)||(this._glyphsDidChange=!0,this.stylesheet.glyphs=e,this.glyphManager.entries={},this.glyphManager.setURL(e))}getDashes(e,n){return d._(this,void 0,void 0,(function*(){const l={};for(const[h,g]of Object.entries(n.dashes))l[h]=this.lineAtlas.getDash(g.dasharray,g.round);return l}))}addSprite(e,n,l={},h){this._checkLoaded();const g=[{id:e,url:n}],v=[...Mr(this.stylesheet.sprite),...g];this._validate(d.z.sprite,"sprite",v,null,l)||(this.stylesheet.sprite=v,this._loadSprite(g,!0,h))}removeSprite(e){this._checkLoaded();const n=Mr(this.stylesheet.sprite);if(n.find((l=>l.id===e))){if(this._spritesImagesIds[e])for(const l of this._spritesImagesIds[e])this.imageManager.removeImage(l),this._changedImages[l]=!0;n.splice(n.findIndex((l=>l.id===e)),1),this.stylesheet.sprite=n.length>0?n:void 0,delete this._spritesImagesIds[e],this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new d.l("data",{dataType:"style"}))}else this.fire(new d.k(new Error(`Sprite "${e}" doesn't exists on this map.`)))}getSprite(){return Mr(this.stylesheet.sprite)}setSprite(e,n={},l){this._checkLoaded(),e&&this._validate(d.z.sprite,"sprite",e,null,n)||(this.stylesheet.sprite=e,e?this._loadSprite(e,!0,l):(this._unloadSprite(),l&&l(null)))}}var uh=d.aJ([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class mu{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(e,n,l,h,g,v,w,C,z){this.context=e;let k=this.boundPaintVertexBuffers.length!==h.length;for(let O=0;!k&&O<h.length;O++)this.boundPaintVertexBuffers[O]!==h[O]&&(k=!0);!this.vao||this.boundProgram!==n||this.boundLayoutVertexBuffer!==l||k||this.boundIndexBuffer!==g||this.boundVertexOffset!==v||this.boundDynamicVertexBuffer!==w||this.boundDynamicVertexBuffer2!==C||this.boundDynamicVertexBuffer3!==z?this.freshBind(n,l,h,g,v,w,C,z):(e.bindVertexArray.set(this.vao),w&&w.bind(),g&&g.dynamicDraw&&g.bind(),C&&C.bind(),z&&z.bind())}freshBind(e,n,l,h,g,v,w,C){const z=e.numAttributes,k=this.context,O=k.gl;this.vao&&this.destroy(),this.vao=k.createVertexArray(),k.bindVertexArray.set(this.vao),this.boundProgram=e,this.boundLayoutVertexBuffer=n,this.boundPaintVertexBuffers=l,this.boundIndexBuffer=h,this.boundVertexOffset=g,this.boundDynamicVertexBuffer=v,this.boundDynamicVertexBuffer2=w,this.boundDynamicVertexBuffer3=C,n.enableAttributes(O,e);for(const I of l)I.enableAttributes(O,e);v&&v.enableAttributes(O,e),w&&w.enableAttributes(O,e),C&&C.enableAttributes(O,e),n.bind(),n.setVertexAttribPointers(O,e,g);for(const I of l)I.bind(),I.setVertexAttribPointers(O,e,g);v&&(v.bind(),v.setVertexAttribPointers(O,e,g)),h&&h.bind(),w&&(w.bind(),w.setVertexAttribPointers(O,e,g)),C&&(C.bind(),C.setVertexAttribPointers(O,e,g)),k.currentNumAttributes=z}destroy(){this.vao&&(this.context.deleteVertexArray(this.vao),this.vao=null)}}const hh=(p,e,n,l,h)=>({u_texture:0,u_ele_delta:p,u_fog_matrix:e,u_fog_color:n?n.properties.get("fog-color"):d.bf.white,u_fog_ground_blend:n?n.properties.get("fog-ground-blend"):1,u_fog_ground_blend_opacity:h?0:n?n.calculateFogBlendOpacity(l):0,u_horizon_color:n?n.properties.get("horizon-color"):d.bf.white,u_horizon_fog_blend:n?n.properties.get("horizon-fog-blend"):1,u_is_globe_mode:h?1:0}),dh={mainMatrix:"u_projection_matrix",tileMercatorCoords:"u_projection_tile_mercator_coords",clippingPlane:"u_projection_clipping_plane",projectionTransition:"u_projection_transition",fallbackMatrix:"u_projection_fallback_matrix"};function wa(p){const e=[];for(let n=0;n<p.length;n++){if(p[n]===null)continue;const l=p[n].split(" ");e.push(l.pop())}return e}class xc{constructor(e,n,l,h,g,v,w,C,z=[]){const k=e.gl;this.program=k.createProgram();const O=wa(n.staticAttributes),I=l?l.getBinderAttributes():[],F=O.concat(I),H=hn.prelude.staticUniforms?wa(hn.prelude.staticUniforms):[],K=w.staticUniforms?wa(w.staticUniforms):[],W=n.staticUniforms?wa(n.staticUniforms):[],J=l?l.getBinderUniforms():[],ie=H.concat(K).concat(W).concat(J),oe=[];for(const we of ie)oe.indexOf(we)<0&&oe.push(we);const te=l?l.defines():[];La(k)&&te.unshift("#version 300 es"),g&&te.push("#define OVERDRAW_INSPECTOR;"),v&&te.push("#define TERRAIN3D;"),C&&te.push(C),z&&te.push(...z);let le=te.concat(hn.prelude.fragmentSource,w.fragmentSource,n.fragmentSource).join(`
`),ue=te.concat(hn.prelude.vertexSource,w.vertexSource,n.vertexSource).join(`
`);La(k)||(le=(function(we){return we.replace(/\bin\s/g,"varying ").replace("out highp vec4 fragColor;","").replace(/fragColor/g,"gl_FragColor").replace(/texture\(/g,"texture2D(")})(le),ue=(function(we){return we.replace(/\bin\s/g,"attribute ").replace(/\bout\s/g,"varying ").replace(/texture\(/g,"texture2D(")})(ue));const ae=k.createShader(k.FRAGMENT_SHADER);if(k.isContextLost())return void(this.failedToCreate=!0);if(k.shaderSource(ae,le),k.compileShader(ae),!k.getShaderParameter(ae,k.COMPILE_STATUS))throw new Error(`Could not compile fragment shader: ${k.getShaderInfoLog(ae)}`);k.attachShader(this.program,ae);const fe=k.createShader(k.VERTEX_SHADER);if(k.isContextLost())return void(this.failedToCreate=!0);if(k.shaderSource(fe,ue),k.compileShader(fe),!k.getShaderParameter(fe,k.COMPILE_STATUS))throw new Error(`Could not compile vertex shader: ${k.getShaderInfoLog(fe)}`);k.attachShader(this.program,fe),this.attributes={};const Ae={};this.numAttributes=F.length;for(let we=0;we<this.numAttributes;we++)F[we]&&(k.bindAttribLocation(this.program,we,F[we]),this.attributes[F[we]]=we);if(k.linkProgram(this.program),!k.getProgramParameter(this.program,k.LINK_STATUS))throw new Error(`Program failed to link: ${k.getProgramInfoLog(this.program)}`);k.deleteShader(fe),k.deleteShader(ae);for(let we=0;we<oe.length;we++){const Se=oe[we];if(Se&&!Ae[Se]){const Ee=k.getUniformLocation(this.program,Se);Ee&&(Ae[Se]=Ee)}}this.fixedUniforms=h(e,Ae),this.terrainUniforms=((we,Se)=>({u_depth:new d.bQ(we,Se.u_depth),u_terrain:new d.bQ(we,Se.u_terrain),u_terrain_dim:new d.bg(we,Se.u_terrain_dim),u_terrain_matrix:new d.bS(we,Se.u_terrain_matrix),u_terrain_unpack:new d.bT(we,Se.u_terrain_unpack),u_terrain_exaggeration:new d.bg(we,Se.u_terrain_exaggeration)}))(e,Ae),this.projectionUniforms=((we,Se)=>({u_projection_matrix:new d.bS(we,Se.u_projection_matrix),u_projection_tile_mercator_coords:new d.bT(we,Se.u_projection_tile_mercator_coords),u_projection_clipping_plane:new d.bT(we,Se.u_projection_clipping_plane),u_projection_transition:new d.bg(we,Se.u_projection_transition),u_projection_fallback_matrix:new d.bS(we,Se.u_projection_fallback_matrix)}))(e,Ae),this.binderUniforms=l?l.getUniforms(e,Ae):[]}draw(e,n,l,h,g,v,w,C,z,k,O,I,F,H,K,W,J,ie,oe){const te=e.gl;if(this.failedToCreate)return;if(e.program.set(this.program),e.setDepthMode(l),e.setStencilMode(h),e.setColorMode(g),e.setCullFace(v),C){e.activeTexture.set(te.TEXTURE2),te.bindTexture(te.TEXTURE_2D,C.depthTexture),e.activeTexture.set(te.TEXTURE3),te.bindTexture(te.TEXTURE_2D,C.texture);for(const ue in this.terrainUniforms)this.terrainUniforms[ue].set(C[ue])}if(z)for(const ue in z)this.projectionUniforms[dh[ue]].set(z[ue]);if(w)for(const ue in this.fixedUniforms)this.fixedUniforms[ue].set(w[ue]);W&&W.setUniforms(e,this.binderUniforms,H,{zoom:K});let le=0;switch(n){case te.LINES:le=2;break;case te.TRIANGLES:le=3;break;case te.LINE_STRIP:le=1}for(const ue of F.get()){const ae=ue.vaos||(ue.vaos={});(ae[k]||(ae[k]=new mu)).bind(e,this,O,W?W.getPaintVertexBuffers():[],I,ue.vertexOffset,J,ie,oe),te.drawElements(n,ue.primitiveLength*le,te.UNSIGNED_SHORT,ue.primitiveOffset*le*2)}}}function gu(p,e,n){const l=1/d.aC(n,1,e.transform.tileZoom),h=Math.pow(2,n.tileID.overscaledZ),g=n.tileSize*Math.pow(2,e.transform.tileZoom)/h,v=g*(n.tileID.canonical.x+n.tileID.wrap*h),w=g*n.tileID.canonical.y;return{u_image:0,u_texsize:n.imageAtlasTexture.size,u_scale:[l,p.fromScale,p.toScale],u_fade:p.t,u_pixel_coord_upper:[v>>16,w>>16],u_pixel_coord_lower:[65535&v,65535&w]}}const Gs=(p,e,n,l)=>{const h=p.style.light,g=h.properties.get("position"),v=[g.x,g.y,g.z],w=d.bW();h.properties.get("anchor")==="viewport"&&d.bX(w,p.transform.bearingInRadians),d.bY(v,v,w);const C=p.transform.transformLightDirection(v),z=h.properties.get("color");return{u_lightpos:v,u_lightpos_globe:C,u_lightintensity:h.properties.get("intensity"),u_lightcolor:[z.r,z.g,z.b],u_vertical_gradient:+e,u_opacity:n,u_fill_translate:l}},Ol=(p,e,n,l,h,g,v)=>d.e(Gs(p,e,n,l),gu(g,p,v),{u_height_factor:-Math.pow(2,h.overscaledZ)/v.tileSize/8}),ph=(p,e,n,l)=>d.e(gu(e,p,n),{u_fill_translate:l}),wc=(p,e)=>({u_world:p,u_fill_translate:e}),bd=(p,e,n,l,h)=>d.e(ph(p,e,n,h),{u_world:l}),Rn=(p,e,n,l,h)=>{const g=p.transform;let v,w,C=0;if(n.paint.get("circle-pitch-alignment")==="map"){const z=d.aC(e,1,g.zoom);v=!0,w=[z,z],C=z/(d.$*Math.pow(2,e.tileID.overscaledZ))*2*Math.PI*h}else v=!1,w=g.pixelsToGLUnits;return{u_camera_to_center_distance:g.cameraToCenterDistance,u_scale_with_map:+(n.paint.get("circle-pitch-scale")==="map"),u_pitch_with_map:+v,u_device_pixel_ratio:p.pixelRatio,u_extrude_scale:w,u_globe_extrude_scale:C,u_translate:l}},Sp=p=>({u_pixel_extrude_scale:[1/p.width,1/p.height]}),xd=p=>({u_viewport_size:[p.width,p.height]}),wd=(p,e=1)=>({u_color:p,u_overlay:0,u_overlay_scale:e}),_u=(p,e,n,l)=>{const h=d.aC(p,1,e)/(d.$*Math.pow(2,p.tileID.overscaledZ))*2*Math.PI*l;return{u_extrude_scale:d.aC(p,1,e),u_intensity:n,u_globe_extrude_scale:h}},Cc=(p,e,n,l)=>{const h=d.L();d.bZ(h,0,p.width,p.height,0,0,1);const g=p.context.gl;return{u_matrix:h,u_world:[g.drawingBufferWidth,g.drawingBufferHeight],u_image:n,u_color_ramp:l,u_opacity:e.paint.get("heatmap-opacity")}},jl=(p,e,n)=>{const l=n.paint.get("hillshade-accent-color");let h;switch(n.paint.get("hillshade-method")){case"basic":h=4;break;case"combined":h=1;break;case"igor":h=2;break;case"multidirectional":h=3;break;default:h=0}const g=n.getIlluminationProperties();for(let v=0;v<g.directionRadians.length;v++)n.paint.get("hillshade-illumination-anchor")==="viewport"&&(g.directionRadians[v]+=p.transform.bearingInRadians);return{u_image:0,u_latrange:Cd(0,e.tileID),u_exaggeration:n.paint.get("hillshade-exaggeration"),u_altitudes:g.altitudeRadians,u_azimuths:g.directionRadians,u_accent:l,u_method:h,u_highlights:g.highlightColor,u_shadows:g.shadowColor}},Vl=(p,e)=>{const n=e.stride,l=d.L();return d.bZ(l,0,d.$,-d.$,0,0,1),d.M(l,l,[0,-d.$,0]),{u_matrix:l,u_image:1,u_dimension:[n,n],u_zoom:p.overscaledZ,u_unpack:e.getUnpackVector()}};function Cd(p,e){const n=Math.pow(2,e.canonical.z),l=e.canonical.y;return[new d.a1(0,l/n).toLngLat().lat,new d.a1(0,(l+1)/n).toLngLat().lat]}const Sc=(p,e,n=0)=>({u_image:0,u_unpack:e.getUnpackVector(),u_dimension:[e.stride,e.stride],u_elevation_stops:1,u_color_stops:4,u_color_ramp_size:n,u_opacity:p.paint.get("color-relief-opacity")}),Bn=(p,e,n,l)=>{const h=p.transform;return{u_translation:mh(p,e,n),u_ratio:l/d.aC(e,1,h.zoom),u_device_pixel_ratio:p.pixelRatio,u_units_to_pixels:[1/h.pixelsToGLUnits[0],1/h.pixelsToGLUnits[1]]}},fh=(p,e,n,l,h)=>d.e(Bn(p,e,n,l),{u_image:0,u_image_height:h}),vu=(p,e,n,l,h)=>{const g=p.transform,v=Xs(e,g);return{u_translation:mh(p,e,n),u_texsize:e.imageAtlasTexture.size,u_ratio:l/d.aC(e,1,g.zoom),u_device_pixel_ratio:p.pixelRatio,u_image:0,u_scale:[v,h.fromScale,h.toScale],u_fade:h.t,u_units_to_pixels:[1/g.pixelsToGLUnits[0],1/g.pixelsToGLUnits[1]]}},qs=(p,e,n,l,h)=>{const g=Xs(e,p.transform);return d.e(Bn(p,e,n,l),{u_tileratio:g,u_crossfade_from:h.fromScale,u_crossfade_to:h.toScale,u_image:0,u_mix:h.t,u_lineatlas_width:p.lineAtlas.width,u_lineatlas_height:p.lineAtlas.height})},Sd=(p,e,n,l,h,g)=>{const v=Xs(e,p.transform);return d.e(Bn(p,e,n,l),{u_image:0,u_image_height:g,u_tileratio:v,u_crossfade_from:h.fromScale,u_crossfade_to:h.toScale,u_image_dash:1,u_mix:h.t,u_lineatlas_width:p.lineAtlas.width,u_lineatlas_height:p.lineAtlas.height})};function Xs(p,e){return 1/d.aC(p,1,e.tileZoom)}function mh(p,e,n){return d.aD(p.transform,e,n.paint.get("line-translate"),n.paint.get("line-translate-anchor"))}const Tp=(p,e,n,l,h)=>{return{u_tl_parent:p,u_scale_parent:e,u_buffer_scale:1,u_fade_t:n.mix,u_opacity:n.opacity*l.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:l.paint.get("raster-brightness-min"),u_brightness_high:l.paint.get("raster-brightness-max"),u_saturation_factor:(v=l.paint.get("raster-saturation"),v>0?1-1/(1.001-v):-v),u_contrast_factor:(g=l.paint.get("raster-contrast"),g>0?1/(1-g):1+g),u_spin_weights:Td(l.paint.get("raster-hue-rotate")),u_coords_top:[h[0].x,h[0].y,h[1].x,h[1].y],u_coords_bottom:[h[3].x,h[3].y,h[2].x,h[2].y]};var g,v};function Td(p){p*=Math.PI/180;const e=Math.sin(p),n=Math.cos(p);return[(2*n+1)/3,(-Math.sqrt(3)*e-n+1)/3,(Math.sqrt(3)*e-n+1)/3]}const gh=(p,e,n,l,h,g,v,w,C,z,k,O,I)=>{const F=v.transform;return{u_is_size_zoom_constant:+(p==="constant"||p==="source"),u_is_size_feature_constant:+(p==="constant"||p==="camera"),u_size_t:e?e.uSizeT:0,u_size:e?e.uSize:0,u_camera_to_center_distance:F.cameraToCenterDistance,u_pitch:F.pitch/360*2*Math.PI,u_rotate_symbol:+n,u_aspect_ratio:F.width/F.height,u_fade_change:v.options.fadeDuration?v.symbolFadeChange:1,u_label_plane_matrix:w,u_coord_matrix:C,u_is_text:+k,u_pitch_with_map:+l,u_is_along_line:h,u_is_variable_anchor:g,u_texsize:O,u_texture:0,u_translation:z,u_pitched_scale:I}},_h=(p,e,n,l,h,g,v,w,C,z,k,O,I,F)=>{const H=v.transform;return d.e(gh(p,e,n,l,h,g,v,w,C,z,k,O,F),{u_gamma_scale:l?Math.cos(H.pitch*Math.PI/180)*H.cameraToCenterDistance:1,u_device_pixel_ratio:v.pixelRatio,u_is_halo:1})},vh=(p,e,n,l,h,g,v,w,C,z,k,O,I)=>d.e(_h(p,e,n,l,h,g,v,w,C,z,!0,k,0,I),{u_texsize_icon:O,u_texture_icon:1}),Ia=(p,e)=>({u_opacity:p,u_color:e}),us=(p,e,n,l,h)=>d.e((function(g,v,w,C){const z=w.imageManager.getPattern(g.from.toString()),k=w.imageManager.getPattern(g.to.toString()),{width:O,height:I}=w.imageManager.getPixelSize(),F=Math.pow(2,C.tileID.overscaledZ),H=C.tileSize*Math.pow(2,w.transform.tileZoom)/F,K=H*(C.tileID.canonical.x+C.tileID.wrap*F),W=H*C.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:z.tl,u_pattern_br_a:z.br,u_pattern_tl_b:k.tl,u_pattern_br_b:k.br,u_texsize:[O,I],u_mix:v.t,u_pattern_size_a:z.displaySize,u_pattern_size_b:k.displaySize,u_scale_a:v.fromScale,u_scale_b:v.toScale,u_tile_units_to_pixels:1/d.aC(C,1,w.transform.tileZoom),u_pixel_coord_upper:[K>>16,W>>16],u_pixel_coord_lower:[65535&K,65535&W]}})(n,h,e,l),{u_opacity:p}),On=(p,e)=>{},yu={fillExtrusion:(p,e)=>({u_lightpos:new d.bU(p,e.u_lightpos),u_lightpos_globe:new d.bU(p,e.u_lightpos_globe),u_lightintensity:new d.bg(p,e.u_lightintensity),u_lightcolor:new d.bU(p,e.u_lightcolor),u_vertical_gradient:new d.bg(p,e.u_vertical_gradient),u_opacity:new d.bg(p,e.u_opacity),u_fill_translate:new d.bV(p,e.u_fill_translate)}),fillExtrusionPattern:(p,e)=>({u_lightpos:new d.bU(p,e.u_lightpos),u_lightpos_globe:new d.bU(p,e.u_lightpos_globe),u_lightintensity:new d.bg(p,e.u_lightintensity),u_lightcolor:new d.bU(p,e.u_lightcolor),u_vertical_gradient:new d.bg(p,e.u_vertical_gradient),u_height_factor:new d.bg(p,e.u_height_factor),u_opacity:new d.bg(p,e.u_opacity),u_fill_translate:new d.bV(p,e.u_fill_translate),u_image:new d.bQ(p,e.u_image),u_texsize:new d.bV(p,e.u_texsize),u_pixel_coord_upper:new d.bV(p,e.u_pixel_coord_upper),u_pixel_coord_lower:new d.bV(p,e.u_pixel_coord_lower),u_scale:new d.bU(p,e.u_scale),u_fade:new d.bg(p,e.u_fade)}),fill:(p,e)=>({u_fill_translate:new d.bV(p,e.u_fill_translate)}),fillPattern:(p,e)=>({u_image:new d.bQ(p,e.u_image),u_texsize:new d.bV(p,e.u_texsize),u_pixel_coord_upper:new d.bV(p,e.u_pixel_coord_upper),u_pixel_coord_lower:new d.bV(p,e.u_pixel_coord_lower),u_scale:new d.bU(p,e.u_scale),u_fade:new d.bg(p,e.u_fade),u_fill_translate:new d.bV(p,e.u_fill_translate)}),fillOutline:(p,e)=>({u_world:new d.bV(p,e.u_world),u_fill_translate:new d.bV(p,e.u_fill_translate)}),fillOutlinePattern:(p,e)=>({u_world:new d.bV(p,e.u_world),u_image:new d.bQ(p,e.u_image),u_texsize:new d.bV(p,e.u_texsize),u_pixel_coord_upper:new d.bV(p,e.u_pixel_coord_upper),u_pixel_coord_lower:new d.bV(p,e.u_pixel_coord_lower),u_scale:new d.bU(p,e.u_scale),u_fade:new d.bg(p,e.u_fade),u_fill_translate:new d.bV(p,e.u_fill_translate)}),circle:(p,e)=>({u_camera_to_center_distance:new d.bg(p,e.u_camera_to_center_distance),u_scale_with_map:new d.bQ(p,e.u_scale_with_map),u_pitch_with_map:new d.bQ(p,e.u_pitch_with_map),u_extrude_scale:new d.bV(p,e.u_extrude_scale),u_device_pixel_ratio:new d.bg(p,e.u_device_pixel_ratio),u_globe_extrude_scale:new d.bg(p,e.u_globe_extrude_scale),u_translate:new d.bV(p,e.u_translate)}),collisionBox:(p,e)=>({u_pixel_extrude_scale:new d.bV(p,e.u_pixel_extrude_scale)}),collisionCircle:(p,e)=>({u_viewport_size:new d.bV(p,e.u_viewport_size)}),debug:(p,e)=>({u_color:new d.bR(p,e.u_color),u_overlay:new d.bQ(p,e.u_overlay),u_overlay_scale:new d.bg(p,e.u_overlay_scale)}),depth:On,clippingMask:On,heatmap:(p,e)=>({u_extrude_scale:new d.bg(p,e.u_extrude_scale),u_intensity:new d.bg(p,e.u_intensity),u_globe_extrude_scale:new d.bg(p,e.u_globe_extrude_scale)}),heatmapTexture:(p,e)=>({u_matrix:new d.bS(p,e.u_matrix),u_world:new d.bV(p,e.u_world),u_image:new d.bQ(p,e.u_image),u_color_ramp:new d.bQ(p,e.u_color_ramp),u_opacity:new d.bg(p,e.u_opacity)}),hillshade:(p,e)=>({u_image:new d.bQ(p,e.u_image),u_latrange:new d.bV(p,e.u_latrange),u_exaggeration:new d.bg(p,e.u_exaggeration),u_altitudes:new d.b$(p,e.u_altitudes),u_azimuths:new d.b$(p,e.u_azimuths),u_accent:new d.bR(p,e.u_accent),u_method:new d.bQ(p,e.u_method),u_shadows:new d.b_(p,e.u_shadows),u_highlights:new d.b_(p,e.u_highlights)}),hillshadePrepare:(p,e)=>({u_matrix:new d.bS(p,e.u_matrix),u_image:new d.bQ(p,e.u_image),u_dimension:new d.bV(p,e.u_dimension),u_zoom:new d.bg(p,e.u_zoom),u_unpack:new d.bT(p,e.u_unpack)}),colorRelief:(p,e)=>({u_image:new d.bQ(p,e.u_image),u_unpack:new d.bT(p,e.u_unpack),u_dimension:new d.bV(p,e.u_dimension),u_elevation_stops:new d.bQ(p,e.u_elevation_stops),u_color_stops:new d.bQ(p,e.u_color_stops),u_color_ramp_size:new d.bQ(p,e.u_color_ramp_size),u_opacity:new d.bg(p,e.u_opacity)}),line:(p,e)=>({u_translation:new d.bV(p,e.u_translation),u_ratio:new d.bg(p,e.u_ratio),u_device_pixel_ratio:new d.bg(p,e.u_device_pixel_ratio),u_units_to_pixels:new d.bV(p,e.u_units_to_pixels)}),lineGradient:(p,e)=>({u_translation:new d.bV(p,e.u_translation),u_ratio:new d.bg(p,e.u_ratio),u_device_pixel_ratio:new d.bg(p,e.u_device_pixel_ratio),u_units_to_pixels:new d.bV(p,e.u_units_to_pixels),u_image:new d.bQ(p,e.u_image),u_image_height:new d.bg(p,e.u_image_height)}),linePattern:(p,e)=>({u_translation:new d.bV(p,e.u_translation),u_texsize:new d.bV(p,e.u_texsize),u_ratio:new d.bg(p,e.u_ratio),u_device_pixel_ratio:new d.bg(p,e.u_device_pixel_ratio),u_image:new d.bQ(p,e.u_image),u_units_to_pixels:new d.bV(p,e.u_units_to_pixels),u_scale:new d.bU(p,e.u_scale),u_fade:new d.bg(p,e.u_fade)}),lineSDF:(p,e)=>({u_translation:new d.bV(p,e.u_translation),u_ratio:new d.bg(p,e.u_ratio),u_device_pixel_ratio:new d.bg(p,e.u_device_pixel_ratio),u_units_to_pixels:new d.bV(p,e.u_units_to_pixels),u_image:new d.bQ(p,e.u_image),u_mix:new d.bg(p,e.u_mix),u_tileratio:new d.bg(p,e.u_tileratio),u_crossfade_from:new d.bg(p,e.u_crossfade_from),u_crossfade_to:new d.bg(p,e.u_crossfade_to),u_lineatlas_width:new d.bg(p,e.u_lineatlas_width),u_lineatlas_height:new d.bg(p,e.u_lineatlas_height)}),lineGradientSDF:(p,e)=>({u_translation:new d.bV(p,e.u_translation),u_ratio:new d.bg(p,e.u_ratio),u_device_pixel_ratio:new d.bg(p,e.u_device_pixel_ratio),u_units_to_pixels:new d.bV(p,e.u_units_to_pixels),u_image:new d.bQ(p,e.u_image),u_image_height:new d.bg(p,e.u_image_height),u_tileratio:new d.bg(p,e.u_tileratio),u_crossfade_from:new d.bg(p,e.u_crossfade_from),u_crossfade_to:new d.bg(p,e.u_crossfade_to),u_image_dash:new d.bQ(p,e.u_image_dash),u_mix:new d.bg(p,e.u_mix),u_lineatlas_width:new d.bg(p,e.u_lineatlas_width),u_lineatlas_height:new d.bg(p,e.u_lineatlas_height)}),raster:(p,e)=>({u_tl_parent:new d.bV(p,e.u_tl_parent),u_scale_parent:new d.bg(p,e.u_scale_parent),u_buffer_scale:new d.bg(p,e.u_buffer_scale),u_fade_t:new d.bg(p,e.u_fade_t),u_opacity:new d.bg(p,e.u_opacity),u_image0:new d.bQ(p,e.u_image0),u_image1:new d.bQ(p,e.u_image1),u_brightness_low:new d.bg(p,e.u_brightness_low),u_brightness_high:new d.bg(p,e.u_brightness_high),u_saturation_factor:new d.bg(p,e.u_saturation_factor),u_contrast_factor:new d.bg(p,e.u_contrast_factor),u_spin_weights:new d.bU(p,e.u_spin_weights),u_coords_top:new d.bT(p,e.u_coords_top),u_coords_bottom:new d.bT(p,e.u_coords_bottom)}),symbolIcon:(p,e)=>({u_is_size_zoom_constant:new d.bQ(p,e.u_is_size_zoom_constant),u_is_size_feature_constant:new d.bQ(p,e.u_is_size_feature_constant),u_size_t:new d.bg(p,e.u_size_t),u_size:new d.bg(p,e.u_size),u_camera_to_center_distance:new d.bg(p,e.u_camera_to_center_distance),u_pitch:new d.bg(p,e.u_pitch),u_rotate_symbol:new d.bQ(p,e.u_rotate_symbol),u_aspect_ratio:new d.bg(p,e.u_aspect_ratio),u_fade_change:new d.bg(p,e.u_fade_change),u_label_plane_matrix:new d.bS(p,e.u_label_plane_matrix),u_coord_matrix:new d.bS(p,e.u_coord_matrix),u_is_text:new d.bQ(p,e.u_is_text),u_pitch_with_map:new d.bQ(p,e.u_pitch_with_map),u_is_along_line:new d.bQ(p,e.u_is_along_line),u_is_variable_anchor:new d.bQ(p,e.u_is_variable_anchor),u_texsize:new d.bV(p,e.u_texsize),u_texture:new d.bQ(p,e.u_texture),u_translation:new d.bV(p,e.u_translation),u_pitched_scale:new d.bg(p,e.u_pitched_scale)}),symbolSDF:(p,e)=>({u_is_size_zoom_constant:new d.bQ(p,e.u_is_size_zoom_constant),u_is_size_feature_constant:new d.bQ(p,e.u_is_size_feature_constant),u_size_t:new d.bg(p,e.u_size_t),u_size:new d.bg(p,e.u_size),u_camera_to_center_distance:new d.bg(p,e.u_camera_to_center_distance),u_pitch:new d.bg(p,e.u_pitch),u_rotate_symbol:new d.bQ(p,e.u_rotate_symbol),u_aspect_ratio:new d.bg(p,e.u_aspect_ratio),u_fade_change:new d.bg(p,e.u_fade_change),u_label_plane_matrix:new d.bS(p,e.u_label_plane_matrix),u_coord_matrix:new d.bS(p,e.u_coord_matrix),u_is_text:new d.bQ(p,e.u_is_text),u_pitch_with_map:new d.bQ(p,e.u_pitch_with_map),u_is_along_line:new d.bQ(p,e.u_is_along_line),u_is_variable_anchor:new d.bQ(p,e.u_is_variable_anchor),u_texsize:new d.bV(p,e.u_texsize),u_texture:new d.bQ(p,e.u_texture),u_gamma_scale:new d.bg(p,e.u_gamma_scale),u_device_pixel_ratio:new d.bg(p,e.u_device_pixel_ratio),u_is_halo:new d.bQ(p,e.u_is_halo),u_translation:new d.bV(p,e.u_translation),u_pitched_scale:new d.bg(p,e.u_pitched_scale)}),symbolTextAndIcon:(p,e)=>({u_is_size_zoom_constant:new d.bQ(p,e.u_is_size_zoom_constant),u_is_size_feature_constant:new d.bQ(p,e.u_is_size_feature_constant),u_size_t:new d.bg(p,e.u_size_t),u_size:new d.bg(p,e.u_size),u_camera_to_center_distance:new d.bg(p,e.u_camera_to_center_distance),u_pitch:new d.bg(p,e.u_pitch),u_rotate_symbol:new d.bQ(p,e.u_rotate_symbol),u_aspect_ratio:new d.bg(p,e.u_aspect_ratio),u_fade_change:new d.bg(p,e.u_fade_change),u_label_plane_matrix:new d.bS(p,e.u_label_plane_matrix),u_coord_matrix:new d.bS(p,e.u_coord_matrix),u_is_text:new d.bQ(p,e.u_is_text),u_pitch_with_map:new d.bQ(p,e.u_pitch_with_map),u_is_along_line:new d.bQ(p,e.u_is_along_line),u_is_variable_anchor:new d.bQ(p,e.u_is_variable_anchor),u_texsize:new d.bV(p,e.u_texsize),u_texsize_icon:new d.bV(p,e.u_texsize_icon),u_texture:new d.bQ(p,e.u_texture),u_texture_icon:new d.bQ(p,e.u_texture_icon),u_gamma_scale:new d.bg(p,e.u_gamma_scale),u_device_pixel_ratio:new d.bg(p,e.u_device_pixel_ratio),u_is_halo:new d.bQ(p,e.u_is_halo),u_translation:new d.bV(p,e.u_translation),u_pitched_scale:new d.bg(p,e.u_pitched_scale)}),background:(p,e)=>({u_opacity:new d.bg(p,e.u_opacity),u_color:new d.bR(p,e.u_color)}),backgroundPattern:(p,e)=>({u_opacity:new d.bg(p,e.u_opacity),u_image:new d.bQ(p,e.u_image),u_pattern_tl_a:new d.bV(p,e.u_pattern_tl_a),u_pattern_br_a:new d.bV(p,e.u_pattern_br_a),u_pattern_tl_b:new d.bV(p,e.u_pattern_tl_b),u_pattern_br_b:new d.bV(p,e.u_pattern_br_b),u_texsize:new d.bV(p,e.u_texsize),u_mix:new d.bg(p,e.u_mix),u_pattern_size_a:new d.bV(p,e.u_pattern_size_a),u_pattern_size_b:new d.bV(p,e.u_pattern_size_b),u_scale_a:new d.bg(p,e.u_scale_a),u_scale_b:new d.bg(p,e.u_scale_b),u_pixel_coord_upper:new d.bV(p,e.u_pixel_coord_upper),u_pixel_coord_lower:new d.bV(p,e.u_pixel_coord_lower),u_tile_units_to_pixels:new d.bg(p,e.u_tile_units_to_pixels)}),terrain:(p,e)=>({u_texture:new d.bQ(p,e.u_texture),u_ele_delta:new d.bg(p,e.u_ele_delta),u_fog_matrix:new d.bS(p,e.u_fog_matrix),u_fog_color:new d.bR(p,e.u_fog_color),u_fog_ground_blend:new d.bg(p,e.u_fog_ground_blend),u_fog_ground_blend_opacity:new d.bg(p,e.u_fog_ground_blend_opacity),u_horizon_color:new d.bR(p,e.u_horizon_color),u_horizon_fog_blend:new d.bg(p,e.u_horizon_fog_blend),u_is_globe_mode:new d.bg(p,e.u_is_globe_mode)}),terrainDepth:(p,e)=>({u_ele_delta:new d.bg(p,e.u_ele_delta)}),terrainCoords:(p,e)=>({u_texture:new d.bQ(p,e.u_texture),u_terrain_coords_id:new d.bg(p,e.u_terrain_coords_id),u_ele_delta:new d.bg(p,e.u_ele_delta)}),projectionErrorMeasurement:(p,e)=>({u_input:new d.bg(p,e.u_input),u_output_expected:new d.bg(p,e.u_output_expected)}),atmosphere:(p,e)=>({u_sun_pos:new d.bU(p,e.u_sun_pos),u_atmosphere_blend:new d.bg(p,e.u_atmosphere_blend),u_globe_position:new d.bU(p,e.u_globe_position),u_globe_radius:new d.bg(p,e.u_globe_radius),u_inv_proj_matrix:new d.bS(p,e.u_inv_proj_matrix)}),sky:(p,e)=>({u_sky_color:new d.bR(p,e.u_sky_color),u_horizon_color:new d.bR(p,e.u_horizon_color),u_horizon:new d.bV(p,e.u_horizon),u_horizon_normal:new d.bV(p,e.u_horizon_normal),u_sky_horizon_blend:new d.bg(p,e.u_sky_horizon_blend),u_sky_blend:new d.bg(p,e.u_sky_blend)})};class bu{constructor(e,n,l){this.context=e;const h=e.gl;this.buffer=h.createBuffer(),this.dynamicDraw=!!l,this.context.unbindVAO(),e.bindElementBuffer.set(this.buffer),h.bufferData(h.ELEMENT_ARRAY_BUFFER,n.arrayBuffer,this.dynamicDraw?h.DYNAMIC_DRAW:h.STATIC_DRAW),this.dynamicDraw||delete n.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(e){const n=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),n.bufferSubData(n.ELEMENT_ARRAY_BUFFER,0,e.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const xu={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class wu{constructor(e,n,l,h){this.length=n.length,this.attributes=l,this.itemSize=n.bytesPerElement,this.dynamicDraw=h,this.context=e;const g=e.gl;this.buffer=g.createBuffer(),e.bindVertexBuffer.set(this.buffer),g.bufferData(g.ARRAY_BUFFER,n.arrayBuffer,this.dynamicDraw?g.DYNAMIC_DRAW:g.STATIC_DRAW),this.dynamicDraw||delete n.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(e){if(e.length!==this.length)throw new Error(`Length of new data is ${e.length}, which doesn't match current length of ${this.length}`);const n=this.context.gl;this.bind(),n.bufferSubData(n.ARRAY_BUFFER,0,e.arrayBuffer)}enableAttributes(e,n){for(let l=0;l<this.attributes.length;l++){const h=n.attributes[this.attributes[l].name];h!==void 0&&e.enableVertexAttribArray(h)}}setVertexAttribPointers(e,n,l){for(let h=0;h<this.attributes.length;h++){const g=this.attributes[h],v=n.attributes[g.name];v!==void 0&&e.vertexAttribPointer(v,g.components,e[xu[g.type]],!1,this.itemSize,g.offset+this.itemSize*(l||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class di{constructor(e){this.gl=e.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(e){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class fn extends di{getDefault(){return d.bf.transparent}set(e){const n=this.current;(e.r!==n.r||e.g!==n.g||e.b!==n.b||e.a!==n.a||this.dirty)&&(this.gl.clearColor(e.r,e.g,e.b,e.a),this.current=e,this.dirty=!1)}}class Tc extends di{getDefault(){return 1}set(e){(e!==this.current||this.dirty)&&(this.gl.clearDepth(e),this.current=e,this.dirty=!1)}}class Mc extends di{getDefault(){return 0}set(e){(e!==this.current||this.dirty)&&(this.gl.clearStencil(e),this.current=e,this.dirty=!1)}}class yh extends di{getDefault(){return[!0,!0,!0,!0]}set(e){const n=this.current;(e[0]!==n[0]||e[1]!==n[1]||e[2]!==n[2]||e[3]!==n[3]||this.dirty)&&(this.gl.colorMask(e[0],e[1],e[2],e[3]),this.current=e,this.dirty=!1)}}class Md extends di{getDefault(){return!0}set(e){(e!==this.current||this.dirty)&&(this.gl.depthMask(e),this.current=e,this.dirty=!1)}}class Ys extends di{getDefault(){return 255}set(e){(e!==this.current||this.dirty)&&(this.gl.stencilMask(e),this.current=e,this.dirty=!1)}}class Qs extends di{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(e){const n=this.current;(e.func!==n.func||e.ref!==n.ref||e.mask!==n.mask||this.dirty)&&(this.gl.stencilFunc(e.func,e.ref,e.mask),this.current=e,this.dirty=!1)}}class bh extends di{getDefault(){const e=this.gl;return[e.KEEP,e.KEEP,e.KEEP]}set(e){const n=this.current;(e[0]!==n[0]||e[1]!==n[1]||e[2]!==n[2]||this.dirty)&&(this.gl.stencilOp(e[0],e[1],e[2]),this.current=e,this.dirty=!1)}}class xh extends di{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;const n=this.gl;e?n.enable(n.STENCIL_TEST):n.disable(n.STENCIL_TEST),this.current=e,this.dirty=!1}}class no extends di{getDefault(){return[0,1]}set(e){const n=this.current;(e[0]!==n[0]||e[1]!==n[1]||this.dirty)&&(this.gl.depthRange(e[0],e[1]),this.current=e,this.dirty=!1)}}class Ac extends di{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;const n=this.gl;e?n.enable(n.DEPTH_TEST):n.disable(n.DEPTH_TEST),this.current=e,this.dirty=!1}}class Ec extends di{getDefault(){return this.gl.LESS}set(e){(e!==this.current||this.dirty)&&(this.gl.depthFunc(e),this.current=e,this.dirty=!1)}}class Cu extends di{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;const n=this.gl;e?n.enable(n.BLEND):n.disable(n.BLEND),this.current=e,this.dirty=!1}}class Ks extends di{getDefault(){const e=this.gl;return[e.ONE,e.ZERO]}set(e){const n=this.current;(e[0]!==n[0]||e[1]!==n[1]||this.dirty)&&(this.gl.blendFunc(e[0],e[1]),this.current=e,this.dirty=!1)}}class zc extends di{getDefault(){return d.bf.transparent}set(e){const n=this.current;(e.r!==n.r||e.g!==n.g||e.b!==n.b||e.a!==n.a||this.dirty)&&(this.gl.blendColor(e.r,e.g,e.b,e.a),this.current=e,this.dirty=!1)}}class $l extends di{getDefault(){return this.gl.FUNC_ADD}set(e){(e!==this.current||this.dirty)&&(this.gl.blendEquation(e),this.current=e,this.dirty=!1)}}class Ua extends di{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;const n=this.gl;e?n.enable(n.CULL_FACE):n.disable(n.CULL_FACE),this.current=e,this.dirty=!1}}class wh extends di{getDefault(){return this.gl.BACK}set(e){(e!==this.current||this.dirty)&&(this.gl.cullFace(e),this.current=e,this.dirty=!1)}}class Su extends di{getDefault(){return this.gl.CCW}set(e){(e!==this.current||this.dirty)&&(this.gl.frontFace(e),this.current=e,this.dirty=!1)}}class Za extends di{getDefault(){return null}set(e){(e!==this.current||this.dirty)&&(this.gl.useProgram(e),this.current=e,this.dirty=!1)}}class oo extends di{getDefault(){return this.gl.TEXTURE0}set(e){(e!==this.current||this.dirty)&&(this.gl.activeTexture(e),this.current=e,this.dirty=!1)}}class Ca extends di{getDefault(){const e=this.gl;return[0,0,e.drawingBufferWidth,e.drawingBufferHeight]}set(e){const n=this.current;(e[0]!==n[0]||e[1]!==n[1]||e[2]!==n[2]||e[3]!==n[3]||this.dirty)&&(this.gl.viewport(e[0],e[1],e[2],e[3]),this.current=e,this.dirty=!1)}}class Po extends di{getDefault(){return null}set(e){if(e===this.current&&!this.dirty)return;const n=this.gl;n.bindFramebuffer(n.FRAMEBUFFER,e),this.current=e,this.dirty=!1}}class Ws extends di{getDefault(){return null}set(e){if(e===this.current&&!this.dirty)return;const n=this.gl;n.bindRenderbuffer(n.RENDERBUFFER,e),this.current=e,this.dirty=!1}}class Js extends di{getDefault(){return null}set(e){if(e===this.current&&!this.dirty)return;const n=this.gl;n.bindTexture(n.TEXTURE_2D,e),this.current=e,this.dirty=!1}}class Pc extends di{getDefault(){return null}set(e){if(e===this.current&&!this.dirty)return;const n=this.gl;n.bindBuffer(n.ARRAY_BUFFER,e),this.current=e,this.dirty=!1}}class hs extends di{getDefault(){return null}set(e){const n=this.gl;n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,e),this.current=e,this.dirty=!1}}class mn extends di{getDefault(){return null}set(e){var n;if(e===this.current&&!this.dirty)return;const l=this.gl;La(l)?l.bindVertexArray(e):(n=l.getExtension("OES_vertex_array_object"))===null||n===void 0||n.bindVertexArrayOES(e),this.current=e,this.dirty=!1}}class Ch extends di{getDefault(){return 4}set(e){if(e===this.current&&!this.dirty)return;const n=this.gl;n.pixelStorei(n.UNPACK_ALIGNMENT,e),this.current=e,this.dirty=!1}}class Fl extends di{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;const n=this.gl;n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e),this.current=e,this.dirty=!1}}class Nt extends di{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;const n=this.gl;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,e),this.current=e,this.dirty=!1}}class Nl extends di{constructor(e,n){super(e),this.context=e,this.parent=n}getDefault(){return null}}class Ha extends Nl{setDirty(){this.dirty=!0}set(e){if(e===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const n=this.gl;n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,e,0),this.current=e,this.dirty=!1}}class Tu extends Nl{set(e){if(e===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const n=this.gl;n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.RENDERBUFFER,e),this.current=e,this.dirty=!1}}class Ga extends Nl{set(e){if(e===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const n=this.gl;n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.RENDERBUFFER,e),this.current=e,this.dirty=!1}}const Sh="Framebuffer is not complete";class Mu{constructor(e,n,l,h,g){this.context=e,this.width=n,this.height=l;const v=e.gl,w=this.framebuffer=v.createFramebuffer();if(this.colorAttachment=new Ha(e,w),h)this.depthAttachment=g?new Ga(e,w):new Tu(e,w);else if(g)throw new Error("Stencil cannot be set without depth");if(v.checkFramebufferStatus(v.FRAMEBUFFER)!==v.FRAMEBUFFER_COMPLETE)throw new Error(Sh)}destroy(){const e=this.context.gl,n=this.colorAttachment.get();if(n&&e.deleteTexture(n),this.depthAttachment){const l=this.depthAttachment.get();l&&e.deleteRenderbuffer(l)}e.deleteFramebuffer(this.framebuffer)}}class ds{constructor(e){var n,l;if(this.gl=e,this.clearColor=new fn(this),this.clearDepth=new Tc(this),this.clearStencil=new Mc(this),this.colorMask=new yh(this),this.depthMask=new Md(this),this.stencilMask=new Ys(this),this.stencilFunc=new Qs(this),this.stencilOp=new bh(this),this.stencilTest=new xh(this),this.depthRange=new no(this),this.depthTest=new Ac(this),this.depthFunc=new Ec(this),this.blend=new Cu(this),this.blendFunc=new Ks(this),this.blendColor=new zc(this),this.blendEquation=new $l(this),this.cullFace=new Ua(this),this.cullFaceSide=new wh(this),this.frontFace=new Su(this),this.program=new Za(this),this.activeTexture=new oo(this),this.viewport=new Ca(this),this.bindFramebuffer=new Po(this),this.bindRenderbuffer=new Ws(this),this.bindTexture=new Js(this),this.bindVertexBuffer=new Pc(this),this.bindElementBuffer=new hs(this),this.bindVertexArray=new mn(this),this.pixelStoreUnpack=new Ch(this),this.pixelStoreUnpackPremultiplyAlpha=new Fl(this),this.pixelStoreUnpackFlipY=new Nt(this),this.extTextureFilterAnisotropic=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=e.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.maxTextureSize=e.getParameter(e.MAX_TEXTURE_SIZE),La(e)){this.HALF_FLOAT=e.HALF_FLOAT;const h=e.getExtension("EXT_color_buffer_half_float");this.RGBA16F=(n=e.RGBA16F)!==null&&n!==void 0?n:h?.RGBA16F_EXT,this.RGB16F=(l=e.RGB16F)!==null&&l!==void 0?l:h?.RGB16F_EXT,e.getExtension("EXT_color_buffer_float")}else{e.getExtension("EXT_color_buffer_half_float"),e.getExtension("OES_texture_half_float_linear");const h=e.getExtension("OES_texture_half_float");this.HALF_FLOAT=h?.HALF_FLOAT_OES}}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArray.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(e,n){return new bu(this,e,n)}createVertexBuffer(e,n,l){return new wu(this,e,n,l)}createRenderbuffer(e,n,l){const h=this.gl,g=h.createRenderbuffer();return this.bindRenderbuffer.set(g),h.renderbufferStorage(h.RENDERBUFFER,e,n,l),this.bindRenderbuffer.set(null),g}createFramebuffer(e,n,l,h){return new Mu(this,e,n,l,h)}clear({color:e,depth:n,stencil:l}){const h=this.gl;let g=0;e&&(g|=h.COLOR_BUFFER_BIT,this.clearColor.set(e),this.colorMask.set([!0,!0,!0,!0])),n!==void 0&&(g|=h.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(n),this.depthMask.set(!0)),l!==void 0&&(g|=h.STENCIL_BUFFER_BIT,this.clearStencil.set(l),this.stencilMask.set(255)),h.clear(g)}setCullFace(e){e.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(e.mode),this.frontFace.set(e.frontFace))}setDepthMode(e){e.func!==this.gl.ALWAYS||e.mask?(this.depthTest.set(!0),this.depthFunc.set(e.func),this.depthMask.set(e.mask),this.depthRange.set(e.range)):this.depthTest.set(!1)}setStencilMode(e){e.test.func!==this.gl.ALWAYS||e.mask?(this.stencilTest.set(!0),this.stencilMask.set(e.mask),this.stencilOp.set([e.fail,e.depthFail,e.pass]),this.stencilFunc.set({func:e.test.func,ref:e.ref,mask:e.test.mask})):this.stencilTest.set(!1)}setColorMode(e){d.bH(e.blendFunction,Ci.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(e.blendFunction),this.blendColor.set(e.blendColor)),this.colorMask.set(e.mask)}createVertexArray(){var e;return La(this.gl)?this.gl.createVertexArray():(e=this.gl.getExtension("OES_vertex_array_object"))===null||e===void 0?void 0:e.createVertexArrayOES()}deleteVertexArray(e){var n;return La(this.gl)?this.gl.deleteVertexArray(e):(n=this.gl.getExtension("OES_vertex_array_object"))===null||n===void 0?void 0:n.deleteVertexArrayOES(e)}unbindVAO(){this.bindVertexArray.set(null)}}let Ul;function kc(p,e,n,l,h){const g=p.context,v=p.transform,w=g.gl,C=p.useProgram("collisionBox"),z=[];let k=0,O=0;for(let J=0;J<l.length;J++){const ie=l[J],oe=e.getTile(ie).getBucket(n);if(!oe)continue;const te=h?oe.textCollisionBox:oe.iconCollisionBox,le=oe.collisionCircleArray;le.length>0&&(z.push({circleArray:le,circleOffset:O,coord:ie}),k+=le.length/4,O=k),te&&C.draw(g,w.LINES,St.disabled,Vt.disabled,p.colorModeForRenderPass(),Kt.disabled,Sp(p.transform),p.style.map.terrain&&p.style.map.terrain.getTerrainData(ie),v.getProjectionData({overscaledTileID:ie,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),n.id,te.layoutVertexBuffer,te.indexBuffer,te.segments,null,p.transform.zoom,null,null,te.collisionVertexBuffer)}if(!h||!z.length)return;const I=p.useProgram("collisionCircle"),F=new d.c0;F.resize(4*k),F._trim();let H=0;for(const J of z)for(let ie=0;ie<J.circleArray.length/4;ie++){const oe=4*ie,te=J.circleArray[oe+0],le=J.circleArray[oe+1],ue=J.circleArray[oe+2],ae=J.circleArray[oe+3];F.emplace(H++,te,le,ue,ae,0),F.emplace(H++,te,le,ue,ae,1),F.emplace(H++,te,le,ue,ae,2),F.emplace(H++,te,le,ue,ae,3)}(!Ul||Ul.length<2*k)&&(Ul=(function(J){const ie=2*J,oe=new d.c2;oe.resize(ie),oe._trim();for(let te=0;te<ie;te++){const le=6*te;oe.uint16[le+0]=4*te+0,oe.uint16[le+1]=4*te+1,oe.uint16[le+2]=4*te+2,oe.uint16[le+3]=4*te+2,oe.uint16[le+4]=4*te+3,oe.uint16[le+5]=4*te+0}return oe})(k));const K=g.createIndexBuffer(Ul,!0),W=g.createVertexBuffer(F,d.c1.members,!0);for(const J of z){const ie=xd(p.transform);I.draw(g,w.TRIANGLES,St.disabled,Vt.disabled,p.colorModeForRenderPass(),Kt.disabled,ie,p.style.map.terrain&&p.style.map.terrain.getTerrainData(J.coord),null,n.id,W,K,d.aM.simpleSegment(0,2*J.circleOffset,J.circleArray.length,J.circleArray.length/2),null,p.transform.zoom,null,null,null)}W.destroy(),K.destroy()}const Zl=d.ai(new Float32Array(16));function Dc(p,e,n,l,h,g){const{horizontalAlign:v,verticalAlign:w}=d.aH(p);return new d.P((-(v-.5)*e/h+l[0])*g,(-(w-.5)*n/h+l[1])*g)}function Sa(p,e,n,l,h,g){const v=e.tileAnchorPoint.add(new d.P(e.translation[0],e.translation[1]));if(e.pitchWithMap){let w=l.mult(g);n||(w=w.rotate(-h));const C=v.add(w);return sa(C.x,C.y,e.pitchedLabelPlaneMatrix,e.getElevation).point}if(n){const w=Mt(e.tileAnchorPoint.x+1,e.tileAnchorPoint.y,e).point.sub(p),C=Math.atan(w.y/w.x)+(w.x<0?Math.PI:0);return p.add(l.rotate(C))}return p.add(l)}function ps(p,e,n,l,h,g,v,w,C,z,k,O){const I=p.text.placedSymbolArray,F=p.text.dynamicLayoutVertexArray,H=p.icon.dynamicLayoutVertexArray,K={};F.clear();for(let W=0;W<I.length;W++){const J=I.get(W),ie=J.hidden||!J.crossTileID||p.allowVerticalPlacement&&!J.placedOrientation?null:l[J.crossTileID];if(ie){const oe=new d.P(J.anchorX,J.anchorY),te={getElevation:O,width:h.width,height:h.height,pitchedLabelPlaneMatrix:g,pitchWithMap:n,transform:h,tileAnchorPoint:oe,translation:z,unwrappedTileID:k},le=n?Pn(oe.x,oe.y,te):Mt(oe.x,oe.y,te),ue=ka(h.cameraToCenterDistance,le.signedDistanceFromCamera);let ae=d.ap(p.textSizeData,w,J)*ue/d.aB;n&&(ae*=p.tilePixelRatio/v);const{width:fe,height:Ae,anchor:we,textOffset:Se,textBoxScale:Ee}=ie,Qe=Dc(we,fe,Ae,Se,Ee,ae),Ke=h.getPitchedTextCorrection(oe.x+z[0],oe.y+z[1],k),Ne=Sa(le.point,te,e,Qe,-h.bearingInRadians,Ke),lt=p.allowVerticalPlacement&&J.placedOrientation===d.ao.vertical?Math.PI/2:0;for(let Tt=0;Tt<J.numGlyphs;Tt++)d.av(F,Ne,lt);C&&J.associatedIconIndex>=0&&(K[J.associatedIconIndex]={shiftedAnchor:Ne,angle:lt})}else io(J.numGlyphs,F)}if(C){H.clear();const W=p.icon.placedSymbolArray;for(let J=0;J<W.length;J++){const ie=W.get(J);if(ie.hidden)io(ie.numGlyphs,H);else{const oe=K[J];if(oe)for(let te=0;te<ie.numGlyphs;te++)d.av(H,oe.shiftedAnchor,oe.angle);else io(ie.numGlyphs,H)}}p.icon.dynamicLayoutVertexBuffer.updateData(H)}p.text.dynamicLayoutVertexBuffer.updateData(F)}function el(p,e,n){return n.iconsInText&&e?"symbolTextAndIcon":p?"symbolSDF":"symbolIcon"}function fs(p,e,n,l,h,g,v,w,C,z,k,O,I){const F=p.context,H=F.gl,K=p.transform,W=w==="map",J=C==="map",ie=w!=="viewport"&&n.layout.get("symbol-placement")!=="point",oe=W&&!J&&!ie,te=!n.layout.get("symbol-sort-key").isConstant();let le=!1;const ue=p.getDepthModeForSublayer(0,St.ReadOnly),ae=n._unevaluatedLayout.hasValue("text-variable-anchor")||n._unevaluatedLayout.hasValue("text-variable-anchor-offset"),fe=[],Ae=K.getCircleRadiusCorrection();for(const we of l){const Se=e.getTile(we),Ee=Se.getBucket(n);if(!Ee)continue;const Qe=h?Ee.text:Ee.icon;if(!Qe||!Qe.segments.get().length||!Qe.hasVisibleVertices)continue;const Ke=Qe.programConfigurations.get(n.id),Ne=h||Ee.sdfIcons,lt=h?Ee.textSizeData:Ee.iconSizeData,Tt=J||K.pitch!==0,li=p.useProgram(el(Ne,h,Ee),Ke),Ei=d.an(lt,K.zoom),Li=p.style.map.terrain&&p.style.map.terrain.getTerrainData(we);let Ut,Ii,zr,Wi,Vr=[0,0],ur=null;if(h)Ii=Se.glyphAtlasTexture,zr=H.LINEAR,Ut=Se.glyphAtlasTexture.size,Ee.iconsInText&&(Vr=Se.imageAtlasTexture.size,ur=Se.imageAtlasTexture,Wi=Tt||p.options.rotating||p.options.zooming||lt.kind==="composite"||lt.kind==="camera"?H.LINEAR:H.NEAREST);else{const xr=n.layout.get("icon-size").constantOr(0)!==1||Ee.iconsNeedLinear;Ii=Se.imageAtlasTexture,zr=Ne||p.options.rotating||p.options.zooming||xr||Tt?H.LINEAR:H.NEAREST,Ut=Se.imageAtlasTexture.size}const mr=d.aC(Se,1,p.transform.zoom),Pr=lr(W,p.transform,mr),jo=d.L();d.aq(jo,Pr);const Vo=Fe(J,W,p.transform,mr),$o=d.aD(K,Se,g,v),Fo=K.getProjectionData({overscaledTileID:we,applyGlobeMatrix:!I,applyTerrainMatrix:!0}),Es=ae&&Ee.hasTextData(),Nc=n.layout.get("icon-text-fit")!=="none"&&Es&&Ee.hasIconData();if(ie){const xr=p.style.map.terrain?(Ba,hr)=>p.style.map.terrain.getElevation(we,Ba,hr):null,Qr=n.layout.get("text-rotation-alignment")==="map";Xe(Ee,p,h,Pr,jo,J,z,Qr,we.toUnwrapped(),K.width,K.height,$o,xr)}const fo=h&&ae||Nc,da=ie||fo?Zl:J?Pr:p.transform.clipSpaceToPixelsMatrix,ea=Ne&&n.paint.get(h?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let yn;yn=Ne?Ee.iconsInText?vh(lt.kind,Ei,oe,J,ie,fo,p,da,Vo,$o,Ut,Vr,Ae):_h(lt.kind,Ei,oe,J,ie,fo,p,da,Vo,$o,h,Ut,0,Ae):gh(lt.kind,Ei,oe,J,ie,fo,p,da,Vo,$o,h,Ut,Ae);const hl={program:li,buffers:Qe,uniformValues:yn,projectionData:Fo,atlasTexture:Ii,atlasTextureIcon:ur,atlasInterpolation:zr,atlasInterpolationIcon:Wi,isSDF:Ne,hasHalo:ea};if(te&&Ee.canOverlap){le=!0;const xr=Qe.segments.get();for(const Qr of xr)fe.push({segments:new d.aM([Qr]),sortKey:Qr.sortKey,state:hl,terrainData:Li})}else fe.push({segments:Qe.segments,sortKey:0,state:hl,terrainData:Li})}le&&fe.sort(((we,Se)=>we.sortKey-Se.sortKey));for(const we of fe){const Se=we.state;if(F.activeTexture.set(H.TEXTURE0),Se.atlasTexture.bind(Se.atlasInterpolation,H.CLAMP_TO_EDGE),Se.atlasTextureIcon&&(F.activeTexture.set(H.TEXTURE1),Se.atlasTextureIcon&&Se.atlasTextureIcon.bind(Se.atlasInterpolationIcon,H.CLAMP_TO_EDGE)),Se.isSDF){const Ee=Se.uniformValues;Se.hasHalo&&(Ee.u_is_halo=1,ko(Se.buffers,we.segments,n,p,Se.program,ue,k,O,Ee,Se.projectionData,we.terrainData)),Ee.u_is_halo=0}ko(Se.buffers,we.segments,n,p,Se.program,ue,k,O,Se.uniformValues,Se.projectionData,we.terrainData)}}function ko(p,e,n,l,h,g,v,w,C,z,k){const O=l.context;h.draw(O,O.gl.TRIANGLES,g,v,w,Kt.backCCW,C,k,z,n.id,p.layoutVertexBuffer,p.indexBuffer,e,n.paint,l.transform.zoom,p.programConfigurations.get(n.id),p.dynamicLayoutVertexBuffer,p.opacityVertexBuffer)}function Ta(p,e,n,l,h){const g=p.context,v=g.gl,w=Vt.disabled,C=new Ci([v.ONE,v.ONE],d.bf.transparent,[!0,!0,!0,!0]),z=e.getBucket(n);if(!z)return;const k=l.key;let O=n.heatmapFbos.get(k);O||(O=jn(g,e.tileSize,e.tileSize),n.heatmapFbos.set(k,O)),g.bindFramebuffer.set(O.framebuffer),g.viewport.set([0,0,e.tileSize,e.tileSize]),g.clear({color:d.bf.transparent});const I=z.programConfigurations.get(n.id),F=p.useProgram("heatmap",I,!h),H=p.transform.getProjectionData({overscaledTileID:e.tileID,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),K=p.style.map.terrain.getTerrainData(l);F.draw(g,v.TRIANGLES,St.disabled,w,C,Kt.disabled,_u(e,p.transform.zoom,n.paint.get("heatmap-intensity"),1),K,H,n.id,z.layoutVertexBuffer,z.indexBuffer,z.segments,n.paint,p.transform.zoom,I)}function Jr(p,e,n,l,h){const g=p.context,v=g.gl,w=p.transform;g.setColorMode(p.colorModeForRenderPass());const C=Vn(g,e),z=n.key,k=e.heatmapFbos.get(z);if(!k)return;g.activeTexture.set(v.TEXTURE0),v.bindTexture(v.TEXTURE_2D,k.colorAttachment.get()),g.activeTexture.set(v.TEXTURE1),C.bind(v.LINEAR,v.CLAMP_TO_EDGE);const O=w.getProjectionData({overscaledTileID:n,applyTerrainMatrix:h,applyGlobeMatrix:!l});p.useProgram("heatmapTexture").draw(g,v.TRIANGLES,St.disabled,Vt.disabled,p.colorModeForRenderPass(),Kt.disabled,Cc(p,e,0,1),null,O,e.id,p.rasterBoundsBuffer,p.quadTriangleIndexBuffer,p.rasterBoundsSegments,e.paint,w.zoom),k.destroy(),e.heatmapFbos.delete(z)}function jn(p,e,n){var l,h;const g=p.gl,v=g.createTexture();g.bindTexture(g.TEXTURE_2D,v),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_S,g.CLAMP_TO_EDGE),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_T,g.CLAMP_TO_EDGE),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MIN_FILTER,g.LINEAR),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MAG_FILTER,g.LINEAR);const w=(l=p.HALF_FLOAT)!==null&&l!==void 0?l:g.UNSIGNED_BYTE,C=(h=p.RGBA16F)!==null&&h!==void 0?h:g.RGBA;g.texImage2D(g.TEXTURE_2D,0,C,e,n,0,g.RGBA,w,null);const z=p.createFramebuffer(e,n,!1,!1);return z.colorAttachment.set(v),z}function Vn(p,e){return e.colorRampTexture||(e.colorRampTexture=new d.T(p,e.colorRamp,p.gl.RGBA)),e.colorRampTexture}function Ma(p,e,n,l,h,g,v,w){let C=256;if(h.stepInterpolant){const z=e.getSource().maxzoom,k=v.canonical.z===z?Math.ceil(1<<p.transform.maxZoom-v.canonical.z):1;C=d.ae(d.c4(g.maxLineLength/d.$*1024*k),256,n.maxTextureSize)}return w.gradient=d.c5({expression:h.gradientExpression(),evaluationKey:"lineProgress",resolution:C,image:w.gradient||void 0,clips:g.lineClipsArray}),w.texture?w.texture.update(w.gradient):w.texture=new d.T(n,w.gradient,l.RGBA),w.version=h.gradientVersion,w.texture}function Do(p,e,n,l,h){p.activeTexture.set(e.TEXTURE0),n.imageAtlasTexture.bind(e.LINEAR,e.CLAMP_TO_EDGE),l.updatePaintBuffers(h)}function Th(p,e,n,l,h,g){(h||p.lineAtlas.dirty)&&(e.activeTexture.set(n.TEXTURE0),p.lineAtlas.bind(e)),l.updatePaintBuffers(g)}function Hl(p,e,n,l,h,g,v){const w=g.gradients[h.id];let C=w.texture;h.gradientVersion!==w.version&&(C=Ma(p,e,n,l,h,g,v,w)),n.activeTexture.set(l.TEXTURE0),C.bind(h.stepInterpolant?l.NEAREST:l.LINEAR,l.CLAMP_TO_EDGE)}function Lc(p,e,n,l,h,g,v,w,C){const z=g.gradients[h.id];let k=z.texture;h.gradientVersion!==z.version&&(k=Ma(p,e,n,l,h,g,v,z)),n.activeTexture.set(l.TEXTURE0),k.bind(h.stepInterpolant?l.NEAREST:l.LINEAR,l.CLAMP_TO_EDGE),n.activeTexture.set(l.TEXTURE1),p.lineAtlas.bind(n),w.updatePaintBuffers(C)}function Au(p,e,n,l,h){if(!n||!l||!l.imageAtlas)return;const g=l.imageAtlas.patternPositions;let v=g[n.to.toString()],w=g[n.from.toString()];if(!v&&w&&(v=w),!w&&v&&(w=v),!v||!w){const C=h.getPaintProperty(e);v=g[C],w=g[C]}v&&w&&p.setConstantPatternPositions(v,w)}function jr(p,e,n,l,h,g,v,w){const C=p.context.gl,z="fill-pattern",k=n.paint.get(z),O=k&&k.constantOr(1),I=n.getCrossfadeParameters();let F,H,K,W,J;const ie=p.transform,oe=n.paint.get("fill-translate"),te=n.paint.get("fill-translate-anchor");v?(H=O&&!n.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",F=C.LINES):(H=O?"fillPattern":"fill",F=C.TRIANGLES);const le=k.constantOr(null);for(const ue of l){const ae=e.getTile(ue);if(O&&!ae.patternsLoaded())continue;const fe=ae.getBucket(n);if(!fe)continue;const Ae=fe.programConfigurations.get(n.id),we=p.useProgram(H,Ae),Se=p.style.map.terrain&&p.style.map.terrain.getTerrainData(ue);O&&(p.context.activeTexture.set(C.TEXTURE0),ae.imageAtlasTexture.bind(C.LINEAR,C.CLAMP_TO_EDGE),Ae.updatePaintBuffers(I)),Au(Ae,z,le,ae,n);const Ee=ie.getProjectionData({overscaledTileID:ue,applyGlobeMatrix:!w,applyTerrainMatrix:!0}),Qe=d.aD(ie,ae,oe,te);if(v){W=fe.indexBuffer2,J=fe.segments2;const Ne=[C.drawingBufferWidth,C.drawingBufferHeight];K=H==="fillOutlinePattern"&&O?bd(p,I,ae,Ne,Qe):wc(Ne,Qe)}else W=fe.indexBuffer,J=fe.segments,K=O?ph(p,I,ae,Qe):{u_fill_translate:Qe};const Ke=p.stencilModeForClipping(ue);we.draw(p.context,F,h,Ke,g,Kt.backCCW,K,Se,Ee,n.id,fe.layoutVertexBuffer,W,J,n.paint,p.transform.zoom,Ae)}}function Si(p,e,n,l,h,g,v,w){const C=p.context,z=C.gl,k="fill-extrusion-pattern",O=n.paint.get(k),I=O.constantOr(1),F=n.getCrossfadeParameters(),H=n.paint.get("fill-extrusion-opacity"),K=O.constantOr(null),W=p.transform;for(const J of l){const ie=e.getTile(J),oe=ie.getBucket(n);if(!oe)continue;const te=p.style.map.terrain&&p.style.map.terrain.getTerrainData(J),le=oe.programConfigurations.get(n.id),ue=p.useProgram(I?"fillExtrusionPattern":"fillExtrusion",le);I&&(p.context.activeTexture.set(z.TEXTURE0),ie.imageAtlasTexture.bind(z.LINEAR,z.CLAMP_TO_EDGE),le.updatePaintBuffers(F));const ae=W.getProjectionData({overscaledTileID:J,applyGlobeMatrix:!w,applyTerrainMatrix:!0});Au(le,k,K,ie,n);const fe=d.aD(W,ie,n.paint.get("fill-extrusion-translate"),n.paint.get("fill-extrusion-translate-anchor")),Ae=n.paint.get("fill-extrusion-vertical-gradient"),we=I?Ol(p,Ae,H,fe,J,F,ie):Gs(p,Ae,H,fe);ue.draw(C,C.gl.TRIANGLES,h,g,v,Kt.backCCW,we,te,ae,n.id,oe.layoutVertexBuffer,oe.indexBuffer,oe.segments,n.paint,p.transform.zoom,le,p.style.map.terrain&&oe.centroidVertexBuffer)}}function ri(p,e,n,l,h,g,v,w,C){var z;const k=p.style.projection,O=p.context,I=p.transform,F=O.gl,H=[`#define NUM_ILLUMINATION_SOURCES ${n.paint.get("hillshade-highlight-color").values.length}`],K=p.useProgram("hillshade",null,!1,H),W=!p.options.moving;for(const J of l){const ie=e.getTile(J),oe=ie.fbo;if(!oe)continue;const te=k.getMeshFromTileID(O,J.canonical,w,!0,"raster"),le=(z=p.style.map.terrain)===null||z===void 0?void 0:z.getTerrainData(J);O.activeTexture.set(F.TEXTURE0),F.bindTexture(F.TEXTURE_2D,oe.colorAttachment.get());const ue=I.getProjectionData({overscaledTileID:J,aligned:W,applyGlobeMatrix:!C,applyTerrainMatrix:!0});K.draw(O,F.TRIANGLES,g,h[J.overscaledZ],v,Kt.backCCW,jl(p,ie,n),le,ue,n.id,te.vertexBuffer,te.indexBuffer,te.segments)}}function so(p,e,n,l,h,g,v,w,C){var z;const k=p.style.projection,O=p.context,I=p.transform,F=O.gl,H=p.useProgram("colorRelief"),K=!p.options.moving;let W=!0,J=0;for(const ie of l){const oe=e.getTile(ie),te=oe.dem;if(W){const we=F.getParameter(F.MAX_TEXTURE_SIZE),{elevationTexture:Se,colorTexture:Ee}=n.getColorRampTextures(O,we,te.getUnpackVector());O.activeTexture.set(F.TEXTURE1),Se.bind(F.NEAREST,F.CLAMP_TO_EDGE),O.activeTexture.set(F.TEXTURE4),Ee.bind(F.LINEAR,F.CLAMP_TO_EDGE),W=!1,J=Se.size[0]}if(!te||!te.data)continue;const le=te.stride,ue=te.getPixels();if(O.activeTexture.set(F.TEXTURE0),O.pixelStoreUnpackPremultiplyAlpha.set(!1),oe.demTexture=oe.demTexture||p.getTileTexture(le),oe.demTexture){const we=oe.demTexture;we.update(ue,{premultiply:!1}),we.bind(F.LINEAR,F.CLAMP_TO_EDGE)}else oe.demTexture=new d.T(O,ue,F.RGBA,{premultiply:!1}),oe.demTexture.bind(F.LINEAR,F.CLAMP_TO_EDGE);const ae=k.getMeshFromTileID(O,ie.canonical,w,!0,"raster"),fe=(z=p.style.map.terrain)===null||z===void 0?void 0:z.getTerrainData(ie),Ae=I.getProjectionData({overscaledTileID:ie,aligned:K,applyGlobeMatrix:!C,applyTerrainMatrix:!0});H.draw(O,F.TRIANGLES,g,h[ie.overscaledZ],v,Kt.backCCW,Sc(n,oe.dem,J),fe,Ae,n.id,ae.vertexBuffer,ae.indexBuffer,ae.segments)}}const Aa=[new d.P(0,0),new d.P(d.$,0),new d.P(d.$,d.$),new d.P(0,d.$)];function Fi(p,e,n,l,h,g,v,w,C=!1,z=!1){const k=l[l.length-1].overscaledZ,O=p.context,I=O.gl,F=p.useProgram("raster"),H=p.transform,K=p.style.projection,W=p.colorModeForRenderPass(),J=!p.options.moving,ie=n.paint.get("raster-opacity"),oe=n.paint.get("raster-resampling"),te=n.paint.get("raster-fade-duration"),le=!!p.style.map.terrain;for(const ue of l){const ae=p.getDepthModeForSublayer(ue.overscaledZ-k,ie===1?St.ReadWrite:St.ReadOnly,I.LESS),fe=e.getTile(ue),Ae=oe==="nearest"?I.NEAREST:I.LINEAR;O.activeTexture.set(I.TEXTURE0),fe.texture.bind(Ae,I.CLAMP_TO_EDGE,I.LINEAR_MIPMAP_NEAREST),O.activeTexture.set(I.TEXTURE1);const{parentTile:we,parentScaleBy:Se,parentTopLeft:Ee,fadeValues:Qe}=Ra(fe,e,te,le);fe.fadeOpacity=Qe.tileOpacity,we?(we.fadeOpacity=Qe.parentTileOpacity,we.texture.bind(Ae,I.CLAMP_TO_EDGE,I.LINEAR_MIPMAP_NEAREST)):fe.texture.bind(Ae,I.CLAMP_TO_EDGE,I.LINEAR_MIPMAP_NEAREST),fe.texture.useMipmap&&O.extTextureFilterAnisotropic&&p.transform.pitch>20&&I.texParameterf(I.TEXTURE_2D,O.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,O.extTextureFilterAnisotropicMax);const Ke=p.style.map.terrain&&p.style.map.terrain.getTerrainData(ue),Ne=H.getProjectionData({overscaledTileID:ue,aligned:J,applyGlobeMatrix:!z,applyTerrainMatrix:!0}),lt=Tp(Ee,Se,Qe.fadeMix,n,w),Tt=K.getMeshFromTileID(O,ue.canonical,g,v,"raster");F.draw(O,I.TRIANGLES,ae,h?h[ue.overscaledZ]:Vt.disabled,W,C?Kt.frontCCW:Kt.backCCW,lt,Ke,Ne,n.id,Tt.vertexBuffer,Tt.indexBuffer,Tt.segments)}}function Ra(p,e,n,l){const h={parentTile:null,parentScaleBy:1,parentTopLeft:[0,0],fadeValues:{tileOpacity:1,parentTileOpacity:1,fadeMix:{opacity:1,mix:0}}};if(n===0||l)return h;if(p.fadingParentID){const g=e._getLoadedTile(p.fadingParentID);if(!g)return h;const v=Math.pow(2,g.tileID.overscaledZ-p.tileID.overscaledZ),w=[p.tileID.canonical.x*v%1,p.tileID.canonical.y*v%1],C=(function(z,k,O){const I=dt(),F=(I-k.timeAdded)/O,H=z.fadingDirection===U.Incoming,K=d.ae((I-z.timeAdded)/O,0,1),W=d.ae(1-F,0,1),J=H?K:W;return{tileOpacity:J,parentTileOpacity:H?W:K,fadeMix:{opacity:1,mix:1-J}}})(p,g,n);return{parentTile:g,parentScaleBy:v,parentTopLeft:w,fadeValues:C}}if(p.selfFading){const g=(function(v,w){const C=(dt()-v.timeAdded)/w,z=d.ae(C,0,1);return{tileOpacity:z,fadeMix:{opacity:z,mix:0}}})(p,n);return{parentTile:null,parentScaleBy:1,parentTopLeft:[0,0],fadeValues:g}}return h}const qa=new d.bf(1,0,0,1),Eu=new d.bf(0,1,0,1),Lo=new d.bf(0,0,1,1),ms=new d.bf(1,0,1,1),gs=new d.bf(0,1,1,1);function _s(p,e,n,l){gn(p,0,e+n/2,p.transform.width,n,l)}function vs(p,e,n,l){gn(p,e-n/2,0,n,p.transform.height,l)}function gn(p,e,n,l,h,g){const v=p.context,w=v.gl;w.enable(w.SCISSOR_TEST),w.scissor(e*p.pixelRatio,n*p.pixelRatio,l*p.pixelRatio,h*p.pixelRatio),v.clear({color:g}),w.disable(w.SCISSOR_TEST)}function lo(p,e,n){const l=p.context,h=l.gl,g=p.useProgram("debug"),v=St.disabled,w=Vt.disabled,C=p.colorModeForRenderPass(),z="$debug",k=p.style.map.terrain&&p.style.map.terrain.getTerrainData(n);l.activeTexture.set(h.TEXTURE0);const O=e.getTileByID(n.key).latestRawTileData,I=Math.floor((O&&O.byteLength||0)/1024),F=e.getTile(n).tileSize,H=512/Math.min(F,512)*(n.overscaledZ/p.transform.zoom)*.5;let K=n.canonical.toString();n.overscaledZ!==n.canonical.z&&(K+=` => ${n.overscaledZ}`),(function(J,ie){J.initDebugOverlayCanvas();const oe=J.debugOverlayCanvas,te=J.context.gl,le=J.debugOverlayCanvas.getContext("2d");le.clearRect(0,0,oe.width,oe.height),le.shadowColor="white",le.shadowBlur=2,le.lineWidth=1.5,le.strokeStyle="white",le.textBaseline="top",le.font="bold 36px Open Sans, sans-serif",le.fillText(ie,5,5),le.strokeText(ie,5,5),J.debugOverlayTexture.update(oe),J.debugOverlayTexture.bind(te.LINEAR,te.CLAMP_TO_EDGE)})(p,`${K} ${I}kB`);const W=p.transform.getProjectionData({overscaledTileID:n,applyGlobeMatrix:!0,applyTerrainMatrix:!0});g.draw(l,h.TRIANGLES,v,w,Ci.alphaBlended,Kt.disabled,wd(d.bf.transparent,H),null,W,z,p.debugBuffer,p.quadTriangleIndexBuffer,p.debugSegments),g.draw(l,h.LINE_STRIP,v,w,C,Kt.disabled,wd(d.bf.red),k,W,z,p.debugBuffer,p.tileBorderIndexBuffer,p.debugSegments)}function co(p,e,n,l){const{isRenderingGlobe:h}=l,g=p.context,v=g.gl,w=p.transform,C=p.colorModeForRenderPass(),z=p.getDepthModeFor3D(),k=p.useProgram("terrain");g.bindFramebuffer.set(null),g.viewport.set([0,0,p.width,p.height]);for(const O of n){const I=e.getTerrainMesh(O.tileID),F=p.renderToTexture.getTexture(O),H=e.getTerrainData(O.tileID);g.activeTexture.set(v.TEXTURE0),v.bindTexture(v.TEXTURE_2D,F.texture);const K=e.getMeshFrameDelta(w.zoom),W=w.calculateFogMatrix(O.tileID.toUnwrapped()),J=hh(K,W,p.style.sky,w.pitch,h),ie=w.getProjectionData({overscaledTileID:O.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0});k.draw(g,v.TRIANGLES,z,Vt.disabled,C,Kt.backCCW,J,H,ie,"terrain",I.vertexBuffer,I.indexBuffer,I.segments)}}function $n(p,e){if(!e.mesh){const n=new d.aL;n.emplaceBack(-1,-1),n.emplaceBack(1,-1),n.emplaceBack(1,1),n.emplaceBack(-1,1);const l=new d.aN;l.emplaceBack(0,1,2),l.emplaceBack(0,2,3),e.mesh=new Dn(p.createVertexBuffer(n,It.members),p.createIndexBuffer(l),d.aM.simpleSegment(0,0,n.length,l.length))}return e.mesh}class zu{constructor(e,n){this.context=new ds(e),this.transform=n,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:d.ai(new Float64Array(16)),renderTime:0},this.setup(),this.numSublayers=ci.maxUnderzooming+ci.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new ss}resize(e,n,l){if(this.width=Math.floor(e*l),this.height=Math.floor(n*l),this.pixelRatio=l,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const h of this.style._order)this.style._layers[h].resize()}setup(){const e=this.context,n=new d.aL;n.emplaceBack(0,0),n.emplaceBack(d.$,0),n.emplaceBack(0,d.$),n.emplaceBack(d.$,d.$),this.tileExtentBuffer=e.createVertexBuffer(n,It.members),this.tileExtentSegments=d.aM.simpleSegment(0,0,4,2);const l=new d.aL;l.emplaceBack(0,0),l.emplaceBack(d.$,0),l.emplaceBack(0,d.$),l.emplaceBack(d.$,d.$),this.debugBuffer=e.createVertexBuffer(l,It.members),this.debugSegments=d.aM.simpleSegment(0,0,4,5);const h=new d.c7;h.emplaceBack(0,0,0,0),h.emplaceBack(d.$,0,d.$,0),h.emplaceBack(0,d.$,0,d.$),h.emplaceBack(d.$,d.$,d.$,d.$),this.rasterBoundsBuffer=e.createVertexBuffer(h,uh.members),this.rasterBoundsSegments=d.aM.simpleSegment(0,0,4,2);const g=new d.aL;g.emplaceBack(0,0),g.emplaceBack(d.$,0),g.emplaceBack(0,d.$),g.emplaceBack(d.$,d.$),this.rasterBoundsBufferPosOnly=e.createVertexBuffer(g,It.members),this.rasterBoundsSegmentsPosOnly=d.aM.simpleSegment(0,0,4,5);const v=new d.aL;v.emplaceBack(0,0),v.emplaceBack(1,0),v.emplaceBack(0,1),v.emplaceBack(1,1),this.viewportBuffer=e.createVertexBuffer(v,It.members),this.viewportSegments=d.aM.simpleSegment(0,0,4,2);const w=new d.c8;w.emplaceBack(0),w.emplaceBack(1),w.emplaceBack(3),w.emplaceBack(2),w.emplaceBack(0),this.tileBorderIndexBuffer=e.createIndexBuffer(w);const C=new d.aN;C.emplaceBack(1,0,2),C.emplaceBack(1,2,3),this.quadTriangleIndexBuffer=e.createIndexBuffer(C);const z=this.context.gl;this.stencilClearMode=new Vt({func:z.ALWAYS,mask:0},0,255,z.ZERO,z.ZERO,z.ZERO),this.tileExtentMesh=new Dn(this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}clearStencil(){const e=this.context,n=e.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const l=d.L();d.bZ(l,0,this.width,this.height,0,0,1),d.N(l,l,[n.drawingBufferWidth,n.drawingBufferHeight,0]);const h={mainMatrix:l,tileMercatorCoords:[0,0,1,1],clippingPlane:[0,0,0,0],projectionTransition:0,fallbackMatrix:l};this.useProgram("clippingMask",null,!0).draw(e,n.TRIANGLES,St.disabled,this.stencilClearMode,Ci.disabled,Kt.disabled,null,null,h,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(e,n,l){if(this.currentStencilSource===e.source||!e.isTileClipped()||!n||!n.length)return;this.currentStencilSource=e.source,this.nextStencilID+n.length>256&&this.clearStencil();const h=this.context;h.setColorMode(Ci.disabled),h.setDepthMode(St.disabled);const g={};for(const v of n)g[v.key]=this.nextStencilID++;this._renderTileMasks(g,n,l,!0),this._renderTileMasks(g,n,l,!1),this._tileClippingMaskIDs=g}_renderTileMasks(e,n,l,h){const g=this.context,v=g.gl,w=this.style.projection,C=this.transform,z=this.useProgram("clippingMask");for(const k of n){const O=e[k.key],I=this.style.map.terrain&&this.style.map.terrain.getTerrainData(k),F=w.getMeshFromTileID(this.context,k.canonical,h,!0,"stencil"),H=C.getProjectionData({overscaledTileID:k,applyGlobeMatrix:!l,applyTerrainMatrix:!0});z.draw(g,v.TRIANGLES,St.disabled,new Vt({func:v.ALWAYS,mask:0},O,255,v.KEEP,v.KEEP,v.REPLACE),Ci.disabled,l?Kt.disabled:Kt.backCCW,null,I,H,"$clipping",F.vertexBuffer,F.indexBuffer,F.segments)}}_renderTilesDepthBuffer(){const e=this.context,n=e.gl,l=this.style.projection,h=this.transform,g=this.useProgram("depth"),v=this.getDepthModeFor3D(),w=gt(h,{tileSize:h.tileSize});for(const C of w){const z=this.style.map.terrain&&this.style.map.terrain.getTerrainData(C),k=l.getMeshFromTileID(this.context,C.canonical,!0,!0,"raster"),O=h.getProjectionData({overscaledTileID:C,applyGlobeMatrix:!0,applyTerrainMatrix:!0});g.draw(e,n.TRIANGLES,v,Vt.disabled,Ci.disabled,Kt.backCCW,null,z,O,"$clipping",k.vertexBuffer,k.indexBuffer,k.segments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const e=this.nextStencilID++,n=this.context.gl;return new Vt({func:n.NOTEQUAL,mask:255},e,255,n.KEEP,n.KEEP,n.REPLACE)}stencilModeForClipping(e){const n=this.context.gl;return new Vt({func:n.EQUAL,mask:255},this._tileClippingMaskIDs[e.key],0,n.KEEP,n.KEEP,n.REPLACE)}getStencilConfigForOverlapAndUpdateStencilID(e){const n=this.context.gl,l=e.sort(((v,w)=>w.overscaledZ-v.overscaledZ)),h=l[l.length-1].overscaledZ,g=l[0].overscaledZ-h+1;if(g>1){this.currentStencilSource=void 0,this.nextStencilID+g>256&&this.clearStencil();const v={};for(let w=0;w<g;w++)v[w+h]=new Vt({func:n.GEQUAL,mask:255},w+this.nextStencilID,255,n.KEEP,n.KEEP,n.REPLACE);return this.nextStencilID+=g,[v,l]}return[{[h]:Vt.disabled},l]}stencilConfigForOverlapTwoPass(e){const n=this.context.gl,l=e.sort(((v,w)=>w.overscaledZ-v.overscaledZ)),h=l[l.length-1].overscaledZ,g=l[0].overscaledZ-h+1;if(this.clearStencil(),g>1){const v={},w={};for(let C=0;C<g;C++)v[C+h]=new Vt({func:n.GREATER,mask:255},g+1+C,255,n.KEEP,n.KEEP,n.REPLACE),w[C+h]=new Vt({func:n.GREATER,mask:255},1+C,255,n.KEEP,n.KEEP,n.REPLACE);return this.nextStencilID=2*g+1,[v,w,l]}return this.nextStencilID=3,[{[h]:new Vt({func:n.GREATER,mask:255},2,255,n.KEEP,n.KEEP,n.REPLACE)},{[h]:new Vt({func:n.GREATER,mask:255},1,255,n.KEEP,n.KEEP,n.REPLACE)},l]}colorModeForRenderPass(){const e=this.context.gl;return this._showOverdrawInspector?new Ci([e.CONSTANT_COLOR,e.ONE],new d.bf(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?Ci.unblended:Ci.alphaBlended}getDepthModeForSublayer(e,n,l){if(!this.opaquePassEnabledForLayer())return St.disabled;const h=1-((1+this.currentLayer)*this.numSublayers+e)*this.depthEpsilon;return new St(l||this.context.gl.LEQUAL,n,[h,h])}getDepthModeFor3D(){return new St(this.context.gl.LEQUAL,St.ReadWrite,this.depthRangeFor3D)}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(e,n){var l,h;this.style=e,this.options=n,this.lineAtlas=e.lineAtlas,this.imageManager=e.imageManager,this.glyphManager=e.glyphManager,this.symbolFadeChange=e.placement.symbolFadeChange(dt()),this.imageManager.beginFrame();const g=this.style._order,v=this.style.sourceCaches,w={},C={},z={},k={isRenderingToTexture:!1,isRenderingGlobe:((l=e.projection)===null||l===void 0?void 0:l.transitionState)>0};for(const I in v){const F=v[I];F.used&&F.prepare(this.context),w[I]=F.getVisibleCoordinates(!1),C[I]=w[I].slice().reverse(),z[I]=F.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let I=0;I<g.length;I++)if(this.style._layers[g[I]].is3D()){this.opaquePassCutoff=I;break}this.maybeDrawDepthAndCoords(!1),this.renderToTexture&&(this.renderToTexture.prepareForRender(this.style,this.transform.zoom),this.opaquePassCutoff=0),this.renderPass="offscreen";for(const I of g){const F=this.style._layers[I];if(!F.hasOffscreenPass()||F.isHidden(this.transform.zoom))continue;const H=C[F.source];(F.type==="custom"||H.length)&&this.renderLayer(this,v[F.source],F,H,k)}if((h=this.style.projection)===null||h===void 0||h.updateGPUdependent({context:this.context,useProgram:I=>this.useProgram(I)}),this.context.viewport.set([0,0,this.width,this.height]),this.context.bindFramebuffer.set(null),this.context.clear({color:n.showOverdrawInspector?d.bf.black:d.bf.transparent,depth:1}),this.clearStencil(),this.style.sky&&(function(I,F){const H=I.context,K=H.gl,W=((ue,ae,fe)=>{const Ae=Math.cos(ae.rollInRadians),we=Math.sin(ae.rollInRadians),Se=ve(ae),Ee=ae.getProjectionData({overscaledTileID:null,applyGlobeMatrix:!0,applyTerrainMatrix:!0}).projectionTransition;return{u_sky_color:ue.properties.get("sky-color"),u_horizon_color:ue.properties.get("horizon-color"),u_horizon:[(ae.width/2-Se*we)*fe,(ae.height/2+Se*Ae)*fe],u_horizon_normal:[-we,Ae],u_sky_horizon_blend:ue.properties.get("sky-horizon-blend")*ae.height/2*fe,u_sky_blend:Ee}})(F,I.style.map.transform,I.pixelRatio),J=new St(K.LEQUAL,St.ReadWrite,[0,1]),ie=Vt.disabled,oe=I.colorModeForRenderPass(),te=I.useProgram("sky"),le=$n(H,F);te.draw(H,K.TRIANGLES,J,ie,oe,Kt.disabled,W,null,void 0,"sky",le.vertexBuffer,le.indexBuffer,le.segments)})(this,this.style.sky),this._showOverdrawInspector=n.showOverdrawInspector,this.depthRangeFor3D=[0,1-(e._order.length+2)*this.numSublayers*this.depthEpsilon],!this.renderToTexture)for(this.renderPass="opaque",this.currentLayer=g.length-1;this.currentLayer>=0;this.currentLayer--){const I=this.style._layers[g[this.currentLayer]],F=v[I.source],H=w[I.source];this._renderTileClippingMasks(I,H,!1),this.renderLayer(this,F,I,H,k)}this.renderPass="translucent";let O=!1;for(this.currentLayer=0;this.currentLayer<g.length;this.currentLayer++){const I=this.style._layers[g[this.currentLayer]],F=v[I.source];if(this.renderToTexture&&this.renderToTexture.renderLayer(I,k))continue;this.opaquePassEnabledForLayer()||O||(O=!0,k.isRenderingGlobe&&!this.style.map.terrain&&this._renderTilesDepthBuffer());const H=(I.type==="symbol"?z:C)[I.source];this._renderTileClippingMasks(I,w[I.source],!!this.renderToTexture),this.renderLayer(this,F,I,H,k)}if(k.isRenderingGlobe&&(function(I,F,H){const K=I.context,W=K.gl,J=I.useProgram("atmosphere"),ie=new St(W.LEQUAL,St.ReadOnly,[0,1]),oe=I.transform,te=(function(Ee,Qe){const Ke=Ee.properties.get("position"),Ne=[-Ke.x,-Ke.y,-Ke.z],lt=d.ai(new Float64Array(16));return Ee.properties.get("anchor")==="map"&&(d.b6(lt,lt,Qe.rollInRadians),d.b7(lt,lt,-Qe.pitchInRadians),d.b6(lt,lt,Qe.bearingInRadians),d.b7(lt,lt,Qe.center.lat*Math.PI/180),d.bz(lt,lt,-Qe.center.lng*Math.PI/180)),d.c6(Ne,Ne,lt),Ne})(H,I.transform),le=oe.getProjectionData({overscaledTileID:null,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),ue=F.properties.get("atmosphere-blend")*le.projectionTransition;if(ue===0)return;const ae=cs(oe.worldSize,oe.center.lat),fe=oe.inverseProjectionMatrix,Ae=new Float64Array(4);Ae[3]=1,d.aw(Ae,Ae,oe.modelViewProjectionMatrix),Ae[0]/=Ae[3],Ae[1]/=Ae[3],Ae[2]/=Ae[3],Ae[3]=1,d.aw(Ae,Ae,fe),Ae[0]/=Ae[3],Ae[1]/=Ae[3],Ae[2]/=Ae[3],Ae[3]=1;const we=((Ee,Qe,Ke,Ne,lt)=>({u_sun_pos:Ee,u_atmosphere_blend:Qe,u_globe_position:Ke,u_globe_radius:Ne,u_inv_proj_matrix:lt}))(te,ue,[Ae[0],Ae[1],Ae[2]],ae,fe),Se=$n(K,F);J.draw(K,W.TRIANGLES,ie,Vt.disabled,Ci.alphaBlended,Kt.disabled,we,null,null,"atmosphere",Se.vertexBuffer,Se.indexBuffer,Se.segments)})(this,this.style.sky,this.style.light),this.options.showTileBoundaries){const I=(function(F,H){let K=null;const W=Object.values(F._layers).flatMap((te=>te.source&&!te.isHidden(H)?[F.sourceCaches[te.source]]:[])),J=W.filter((te=>te.getSource().type==="vector")),ie=W.filter((te=>te.getSource().type!=="vector")),oe=te=>{(!K||K.getSource().maxzoom<te.getSource().maxzoom)&&(K=te)};return J.forEach((te=>oe(te))),K||ie.forEach((te=>oe(te))),K})(this.style,this.transform.zoom);I&&(function(F,H,K){for(let W=0;W<K.length;W++)lo(F,H,K[W])})(this,I,I.getVisibleCoordinates())}this.options.showPadding&&(function(I){const F=I.transform.padding;_s(I,I.transform.height-(F.top||0),3,qa),_s(I,F.bottom||0,3,Eu),vs(I,F.left||0,3,Lo),vs(I,I.transform.width-(F.right||0),3,ms);const H=I.transform.centerPoint;(function(K,W,J,ie){gn(K,W-1,J-10,2,20,ie),gn(K,W-10,J-1,20,2,ie)})(I,H.x,I.transform.height-H.y,gs)})(this),this.context.setDefault()}maybeDrawDepthAndCoords(e){if(!this.style||!this.style.map||!this.style.map.terrain)return;const n=this.terrainFacilitator.matrix,l=this.transform.modelViewProjectionMatrix;let h=this.terrainFacilitator.dirty;h||(h=e?!d.c9(n,l):!d.ca(n,l)),h||(h=this.style.map.terrain.sourceCache.anyTilesAfterTime(this.terrainFacilitator.renderTime)),h&&(d.cb(n,l),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,(function(g,v){const w=g.context,C=w.gl,z=g.transform,k=Ci.unblended,O=new St(C.LEQUAL,St.ReadWrite,[0,1]),I=v.sourceCache.getRenderableTiles(),F=g.useProgram("terrainDepth");w.bindFramebuffer.set(v.getFramebuffer("depth").framebuffer),w.viewport.set([0,0,g.width/devicePixelRatio,g.height/devicePixelRatio]),w.clear({color:d.bf.transparent,depth:1});for(const H of I){const K=v.getTerrainMesh(H.tileID),W=v.getTerrainData(H.tileID),J=z.getProjectionData({overscaledTileID:H.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0}),ie={u_ele_delta:v.getMeshFrameDelta(z.zoom)};F.draw(w,C.TRIANGLES,O,Vt.disabled,k,Kt.backCCW,ie,W,J,"terrain",K.vertexBuffer,K.indexBuffer,K.segments)}w.bindFramebuffer.set(null),w.viewport.set([0,0,g.width,g.height])})(this,this.style.map.terrain),(function(g,v){const w=g.context,C=w.gl,z=g.transform,k=Ci.unblended,O=new St(C.LEQUAL,St.ReadWrite,[0,1]),I=v.getCoordsTexture(),F=v.sourceCache.getRenderableTiles(),H=g.useProgram("terrainCoords");w.bindFramebuffer.set(v.getFramebuffer("coords").framebuffer),w.viewport.set([0,0,g.width/devicePixelRatio,g.height/devicePixelRatio]),w.clear({color:d.bf.transparent,depth:1}),v.coordsIndex=[];for(const K of F){const W=v.getTerrainMesh(K.tileID),J=v.getTerrainData(K.tileID);w.activeTexture.set(C.TEXTURE0),C.bindTexture(C.TEXTURE_2D,I.texture);const ie={u_terrain_coords_id:(255-v.coordsIndex.length)/255,u_texture:0,u_ele_delta:v.getMeshFrameDelta(z.zoom)},oe=z.getProjectionData({overscaledTileID:K.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0});H.draw(w,C.TRIANGLES,O,Vt.disabled,k,Kt.backCCW,ie,J,oe,"terrain",W.vertexBuffer,W.indexBuffer,W.segments),v.coordsIndex.push(K.tileID.key)}w.bindFramebuffer.set(null),w.viewport.set([0,0,g.width,g.height])})(this,this.style.map.terrain))}renderLayer(e,n,l,h,g){l.isHidden(this.transform.zoom)||(l.type==="background"||l.type==="custom"||(h||[]).length)&&(this.id=l.id,d.cc(l)?(function(v,w,C,z,k,O){if(v.renderPass!=="translucent")return;const{isRenderingToTexture:I}=O,F=Vt.disabled,H=v.colorModeForRenderPass();(C._unevaluatedLayout.hasValue("text-variable-anchor")||C._unevaluatedLayout.hasValue("text-variable-anchor-offset"))&&(function(K,W,J,ie,oe,te,le,ue,ae){const fe=W.transform,Ae=W.style.map.terrain,we=oe==="map",Se=te==="map";for(const Ee of K){const Qe=ie.getTile(Ee),Ke=Qe.getBucket(J);if(!Ke||!Ke.text||!Ke.text.segments.get().length)continue;const Ne=d.an(Ke.textSizeData,fe.zoom),lt=d.aC(Qe,1,W.transform.zoom),Tt=lr(we,W.transform,lt),li=J.layout.get("icon-text-fit")!=="none"&&Ke.hasIconData();if(Ne){const Ei=Math.pow(2,fe.zoom-Qe.tileID.overscaledZ),Li=Ae?(Ut,Ii)=>Ae.getElevation(Ee,Ut,Ii):null;ps(Ke,we,Se,ae,fe,Tt,Ei,Ne,li,d.aD(fe,Qe,le,ue),Ee.toUnwrapped(),Li)}}})(z,v,C,w,C.layout.get("text-rotation-alignment"),C.layout.get("text-pitch-alignment"),C.paint.get("text-translate"),C.paint.get("text-translate-anchor"),k),C.paint.get("icon-opacity").constantOr(1)!==0&&fs(v,w,C,z,!1,C.paint.get("icon-translate"),C.paint.get("icon-translate-anchor"),C.layout.get("icon-rotation-alignment"),C.layout.get("icon-pitch-alignment"),C.layout.get("icon-keep-upright"),F,H,I),C.paint.get("text-opacity").constantOr(1)!==0&&fs(v,w,C,z,!0,C.paint.get("text-translate"),C.paint.get("text-translate-anchor"),C.layout.get("text-rotation-alignment"),C.layout.get("text-pitch-alignment"),C.layout.get("text-keep-upright"),F,H,I),w.map.showCollisionBoxes&&(kc(v,w,C,z,!0),kc(v,w,C,z,!1))})(e,n,l,h,this.style.placement.variableOffsets,g):d.cd(l)?(function(v,w,C,z,k){if(v.renderPass!=="translucent")return;const{isRenderingToTexture:O}=k,I=C.paint.get("circle-opacity"),F=C.paint.get("circle-stroke-width"),H=C.paint.get("circle-stroke-opacity"),K=!C.layout.get("circle-sort-key").isConstant();if(I.constantOr(1)===0&&(F.constantOr(1)===0||H.constantOr(1)===0))return;const W=v.context,J=W.gl,ie=v.transform,oe=v.getDepthModeForSublayer(0,St.ReadOnly),te=Vt.disabled,le=v.colorModeForRenderPass(),ue=[],ae=ie.getCircleRadiusCorrection();for(let fe=0;fe<z.length;fe++){const Ae=z[fe],we=w.getTile(Ae),Se=we.getBucket(C);if(!Se)continue;const Ee=C.paint.get("circle-translate"),Qe=C.paint.get("circle-translate-anchor"),Ke=d.aD(ie,we,Ee,Qe),Ne=Se.programConfigurations.get(C.id),lt=v.useProgram("circle",Ne),Tt=Se.layoutVertexBuffer,li=Se.indexBuffer,Ei=v.style.map.terrain&&v.style.map.terrain.getTerrainData(Ae),Li={programConfiguration:Ne,program:lt,layoutVertexBuffer:Tt,indexBuffer:li,uniformValues:Rn(v,we,C,Ke,ae),terrainData:Ei,projectionData:ie.getProjectionData({overscaledTileID:Ae,applyGlobeMatrix:!O,applyTerrainMatrix:!0})};if(K){const Ut=Se.segments.get();for(const Ii of Ut)ue.push({segments:new d.aM([Ii]),sortKey:Ii.sortKey,state:Li})}else ue.push({segments:Se.segments,sortKey:0,state:Li})}K&&ue.sort(((fe,Ae)=>fe.sortKey-Ae.sortKey));for(const fe of ue){const{programConfiguration:Ae,program:we,layoutVertexBuffer:Se,indexBuffer:Ee,uniformValues:Qe,terrainData:Ke,projectionData:Ne}=fe.state;we.draw(W,J.TRIANGLES,oe,te,le,Kt.backCCW,Qe,Ke,Ne,C.id,Se,Ee,fe.segments,C.paint,v.transform.zoom,Ae)}})(e,n,l,h,g):d.ce(l)?(function(v,w,C,z,k){if(C.paint.get("heatmap-opacity")===0)return;const O=v.context,{isRenderingToTexture:I,isRenderingGlobe:F}=k;if(v.style.map.terrain){for(const H of z){const K=w.getTile(H);w.hasRenderableParent(H)||(v.renderPass==="offscreen"?Ta(v,K,C,H,F):v.renderPass==="translucent"&&Jr(v,C,H,I,F))}O.viewport.set([0,0,v.width,v.height])}else v.renderPass==="offscreen"?(function(H,K,W,J){const ie=H.context,oe=ie.gl,te=H.transform,le=Vt.disabled,ue=new Ci([oe.ONE,oe.ONE],d.bf.transparent,[!0,!0,!0,!0]);(function(ae,fe,Ae){const we=ae.gl;ae.activeTexture.set(we.TEXTURE1),ae.viewport.set([0,0,fe.width/4,fe.height/4]);let Se=Ae.heatmapFbos.get(d.c3);Se?(we.bindTexture(we.TEXTURE_2D,Se.colorAttachment.get()),ae.bindFramebuffer.set(Se.framebuffer)):(Se=jn(ae,fe.width/4,fe.height/4),Ae.heatmapFbos.set(d.c3,Se))})(ie,H,W),ie.clear({color:d.bf.transparent});for(let ae=0;ae<J.length;ae++){const fe=J[ae];if(K.hasRenderableParent(fe))continue;const Ae=K.getTile(fe),we=Ae.getBucket(W);if(!we)continue;const Se=we.programConfigurations.get(W.id),Ee=H.useProgram("heatmap",Se),Qe=te.getProjectionData({overscaledTileID:fe,applyGlobeMatrix:!0,applyTerrainMatrix:!1}),Ke=te.getCircleRadiusCorrection();Ee.draw(ie,oe.TRIANGLES,St.disabled,le,ue,Kt.backCCW,_u(Ae,te.zoom,W.paint.get("heatmap-intensity"),Ke),null,Qe,W.id,we.layoutVertexBuffer,we.indexBuffer,we.segments,W.paint,te.zoom,Se)}ie.viewport.set([0,0,H.width,H.height])})(v,w,C,z):v.renderPass==="translucent"&&(function(H,K){const W=H.context,J=W.gl;W.setColorMode(H.colorModeForRenderPass());const ie=K.heatmapFbos.get(d.c3);ie&&(W.activeTexture.set(J.TEXTURE0),J.bindTexture(J.TEXTURE_2D,ie.colorAttachment.get()),W.activeTexture.set(J.TEXTURE1),Vn(W,K).bind(J.LINEAR,J.CLAMP_TO_EDGE),H.useProgram("heatmapTexture").draw(W,J.TRIANGLES,St.disabled,Vt.disabled,H.colorModeForRenderPass(),Kt.disabled,Cc(H,K,0,1),null,null,K.id,H.viewportBuffer,H.quadTriangleIndexBuffer,H.viewportSegments,K.paint,H.transform.zoom))})(v,C)})(e,n,l,h,g):d.cf(l)?(function(v,w,C,z,k){if(v.renderPass!=="translucent")return;const{isRenderingToTexture:O}=k,I=C.paint.get("line-opacity"),F=C.paint.get("line-width");if(I.constantOr(1)===0||F.constantOr(1)===0)return;const H=v.getDepthModeForSublayer(0,St.ReadOnly),K=v.colorModeForRenderPass(),W=C.paint.get("line-dasharray"),J=W.constantOr(1),ie=C.paint.get("line-pattern"),oe=ie.constantOr(1),te=C.paint.get("line-gradient"),le=C.getCrossfadeParameters();let ue;ue=oe?"linePattern":J&&te?"lineGradientSDF":J?"lineSDF":te?"lineGradient":"line";const ae=v.context,fe=ae.gl,Ae=v.transform;let we=!0;for(const Se of z){const Ee=w.getTile(Se);if(oe&&!Ee.patternsLoaded())continue;const Qe=Ee.getBucket(C);if(!Qe)continue;const Ke=Qe.programConfigurations.get(C.id),Ne=v.context.program.get(),lt=v.useProgram(ue,Ke),Tt=we||lt.program!==Ne,li=v.style.map.terrain&&v.style.map.terrain.getTerrainData(Se),Ei=ie.constantOr(null),Li=W&&W.constantOr(null);if(Ei&&Ee.imageAtlas){const Vr=Ee.imageAtlas,ur=Vr.patternPositions[Ei.to.toString()],mr=Vr.patternPositions[Ei.from.toString()];ur&&mr&&Ke.setConstantPatternPositions(ur,mr)}else if(Li){const Vr=C.layout.get("line-cap")==="round",ur=v.lineAtlas.getDash(Li.to,Vr),mr=v.lineAtlas.getDash(Li.from,Vr);Ke.setConstantDashPositions(ur,mr)}const Ut=Ae.getProjectionData({overscaledTileID:Se,applyGlobeMatrix:!O,applyTerrainMatrix:!0}),Ii=Ae.getPixelScale();let zr;oe?(zr=vu(v,Ee,C,Ii,le),Do(ae,fe,Ee,Ke,le)):J&&te?(zr=Sd(v,Ee,C,Ii,le,Qe.lineClipsArray.length),Lc(v,w,ae,fe,C,Qe,Se,Ke,le)):J?(zr=qs(v,Ee,C,Ii,le),Th(v,ae,fe,Ke,Tt,le)):te?(zr=fh(v,Ee,C,Ii,Qe.lineClipsArray.length),Hl(v,w,ae,fe,C,Qe,Se)):zr=Bn(v,Ee,C,Ii);const Wi=v.stencilModeForClipping(Se);lt.draw(ae,fe.TRIANGLES,H,Wi,K,Kt.disabled,zr,li,Ut,C.id,Qe.layoutVertexBuffer,Qe.indexBuffer,Qe.segments,C.paint,v.transform.zoom,Ke,Qe.layoutVertexBuffer2),we=!1}})(e,n,l,h,g):d.cg(l)?(function(v,w,C,z,k){const O=C.paint.get("fill-color"),I=C.paint.get("fill-opacity");if(I.constantOr(1)===0)return;const{isRenderingToTexture:F}=k,H=v.colorModeForRenderPass(),K=C.paint.get("fill-pattern"),W=v.opaquePassEnabledForLayer()&&!K.constantOr(1)&&O.constantOr(d.bf.transparent).a===1&&I.constantOr(0)===1?"opaque":"translucent";if(v.renderPass===W){const J=v.getDepthModeForSublayer(1,v.renderPass==="opaque"?St.ReadWrite:St.ReadOnly);jr(v,w,C,z,J,H,!1,F)}if(v.renderPass==="translucent"&&C.paint.get("fill-antialias")){const J=v.getDepthModeForSublayer(C.getPaintProperty("fill-outline-color")?2:0,St.ReadOnly);jr(v,w,C,z,J,H,!0,F)}})(e,n,l,h,g):d.ch(l)?(function(v,w,C,z,k){const O=C.paint.get("fill-extrusion-opacity");if(O===0)return;const{isRenderingToTexture:I}=k;if(v.renderPass==="translucent"){const F=new St(v.context.gl.LEQUAL,St.ReadWrite,v.depthRangeFor3D);if(O!==1||C.paint.get("fill-extrusion-pattern").constantOr(1))Si(v,w,C,z,F,Vt.disabled,Ci.disabled,I),Si(v,w,C,z,F,v.stencilModeFor3D(),v.colorModeForRenderPass(),I);else{const H=v.colorModeForRenderPass();Si(v,w,C,z,F,Vt.disabled,H,I)}}})(e,n,l,h,g):d.ci(l)?(function(v,w,C,z,k){if(v.renderPass!=="offscreen"&&v.renderPass!=="translucent")return;const{isRenderingToTexture:O}=k,I=v.context,F=v.style.projection.useSubdivision,H=v.getDepthModeForSublayer(0,St.ReadOnly),K=v.colorModeForRenderPass();if(v.renderPass==="offscreen")(function(W,J,ie,oe,te,le,ue){const ae=W.context,fe=ae.gl;for(const Ae of ie){const we=J.getTile(Ae),Se=we.dem;if(!Se||!Se.data||!we.needsHillshadePrepare)continue;const Ee=Se.dim,Qe=Se.stride,Ke=Se.getPixels();if(ae.activeTexture.set(fe.TEXTURE1),ae.pixelStoreUnpackPremultiplyAlpha.set(!1),we.demTexture=we.demTexture||W.getTileTexture(Qe),we.demTexture){const lt=we.demTexture;lt.update(Ke,{premultiply:!1}),lt.bind(fe.NEAREST,fe.CLAMP_TO_EDGE)}else we.demTexture=new d.T(ae,Ke,fe.RGBA,{premultiply:!1}),we.demTexture.bind(fe.NEAREST,fe.CLAMP_TO_EDGE);ae.activeTexture.set(fe.TEXTURE0);let Ne=we.fbo;if(!Ne){const lt=new d.T(ae,{width:Ee,height:Ee,data:null},fe.RGBA);lt.bind(fe.LINEAR,fe.CLAMP_TO_EDGE),Ne=we.fbo=ae.createFramebuffer(Ee,Ee,!0,!1),Ne.colorAttachment.set(lt.texture)}ae.bindFramebuffer.set(Ne.framebuffer),ae.viewport.set([0,0,Ee,Ee]),W.useProgram("hillshadePrepare").draw(ae,fe.TRIANGLES,te,le,ue,Kt.disabled,Vl(we.tileID,Se),null,null,oe.id,W.rasterBoundsBuffer,W.quadTriangleIndexBuffer,W.rasterBoundsSegments),we.needsHillshadePrepare=!1}})(v,w,z,C,H,Vt.disabled,K),I.viewport.set([0,0,v.width,v.height]);else if(v.renderPass==="translucent")if(F){const[W,J,ie]=v.stencilConfigForOverlapTwoPass(z);ri(v,w,C,ie,W,H,K,!1,O),ri(v,w,C,ie,J,H,K,!0,O)}else{const[W,J]=v.getStencilConfigForOverlapAndUpdateStencilID(z);ri(v,w,C,J,W,H,K,!1,O)}})(e,n,l,h,g):d.cj(l)?(function(v,w,C,z,k){if(v.renderPass!=="translucent"||!z.length)return;const{isRenderingToTexture:O}=k,I=v.style.projection.useSubdivision,F=v.getDepthModeForSublayer(0,St.ReadOnly),H=v.colorModeForRenderPass();if(I){const[K,W,J]=v.stencilConfigForOverlapTwoPass(z);so(v,w,C,J,K,F,H,!1,O),so(v,w,C,J,W,F,H,!0,O)}else{const[K,W]=v.getStencilConfigForOverlapAndUpdateStencilID(z);so(v,w,C,W,K,F,H,!1,O)}})(e,n,l,h,g):d.bK(l)?(function(v,w,C,z,k){if(v.renderPass!=="translucent"||C.paint.get("raster-opacity")===0||!z.length)return;const{isRenderingToTexture:O}=k,I=w.getSource(),F=v.style.projection.useSubdivision;if(I instanceof zn)Fi(v,w,C,z,null,!1,!1,I.tileCoords,I.flippedWindingOrder,O);else if(F){const[H,K,W]=v.stencilConfigForOverlapTwoPass(z);Fi(v,w,C,W,H,!1,!0,Aa,!1,O),Fi(v,w,C,W,K,!0,!0,Aa,!1,O)}else{const[H,K]=v.getStencilConfigForOverlapAndUpdateStencilID(z);Fi(v,w,C,K,H,!1,!0,Aa,!1,O)}})(e,n,l,h,g):d.ck(l)?(function(v,w,C,z,k){const O=C.paint.get("background-color"),I=C.paint.get("background-opacity");if(I===0)return;const{isRenderingToTexture:F}=k,H=v.context,K=H.gl,W=v.style.projection,J=v.transform,ie=J.tileSize,oe=C.paint.get("background-pattern");if(v.isPatternMissing(oe))return;const te=!oe&&O.a===1&&I===1&&v.opaquePassEnabledForLayer()?"opaque":"translucent";if(v.renderPass!==te)return;const le=Vt.disabled,ue=v.getDepthModeForSublayer(0,te==="opaque"?St.ReadWrite:St.ReadOnly),ae=v.colorModeForRenderPass(),fe=v.useProgram(oe?"backgroundPattern":"background"),Ae=z||gt(J,{tileSize:ie,terrain:v.style.map.terrain});oe&&(H.activeTexture.set(K.TEXTURE0),v.imageManager.bind(v.context));const we=C.getCrossfadeParameters();for(const Se of Ae){const Ee=J.getProjectionData({overscaledTileID:Se,applyGlobeMatrix:!F,applyTerrainMatrix:!0}),Qe=oe?us(I,v,oe,{tileID:Se,tileSize:ie},we):Ia(I,O),Ke=v.style.map.terrain&&v.style.map.terrain.getTerrainData(Se),Ne=W.getMeshFromTileID(H,Se.canonical,!1,!0,"raster");fe.draw(H,K.TRIANGLES,ue,le,ae,Kt.backCCW,Qe,Ke,Ee,C.id,Ne.vertexBuffer,Ne.indexBuffer,Ne.segments)}})(e,0,l,h,g):d.cl(l)&&(function(v,w,C,z){const{isRenderingGlobe:k}=z,O=v.context,I=C.implementation,F=v.style.projection,H=v.transform,K=H.getProjectionDataForCustomLayer(k),W={farZ:H.farZ,nearZ:H.nearZ,fov:H.fov*Math.PI/180,modelViewProjectionMatrix:H.modelViewProjectionMatrix,projectionMatrix:H.projectionMatrix,shaderData:{variantName:F.shaderVariantName,vertexShaderPrelude:`const float PI = 3.141592653589793;
uniform mat4 u_projection_matrix;
${F.shaderPreludeCode.vertexSource}`,define:F.shaderDefine},defaultProjectionData:K},J=I.renderingMode?I.renderingMode:"2d";if(v.renderPass==="offscreen"){const ie=I.prerender;ie&&(v.setCustomLayerDefaults(),O.setColorMode(v.colorModeForRenderPass()),ie.call(I,O.gl,W),O.setDirty(),v.setBaseState())}else if(v.renderPass==="translucent"){v.setCustomLayerDefaults(),O.setColorMode(v.colorModeForRenderPass()),O.setStencilMode(Vt.disabled);const ie=J==="3d"?v.getDepthModeFor3D():v.getDepthModeForSublayer(0,St.ReadOnly);O.setDepthMode(ie),I.render(O.gl,W),O.setDirty(),v.setBaseState(),O.bindFramebuffer.set(null)}})(e,0,l,g))}saveTileTexture(e){const n=this._tileTextures[e.size[0]];n?n.push(e):this._tileTextures[e.size[0]]=[e]}getTileTexture(e){const n=this._tileTextures[e];return n&&n.length>0?n.pop():null}isPatternMissing(e){if(!e)return!1;if(!e.from||!e.to)return!0;const n=this.imageManager.getPattern(e.from.toString()),l=this.imageManager.getPattern(e.to.toString());return!n||!l}useProgram(e,n,l=!1,h=[]){this.cache=this.cache||{};const g=!!this.style.map.terrain,v=this.style.projection,w=l?hn.projectionMercator:v.shaderPreludeCode,C=l?dn:v.shaderDefine,z=e+(n?n.cacheKey:"")+`/${l?cu:v.shaderVariantName}`+(this._showOverdrawInspector?"/overdraw":"")+(g?"/terrain":"")+(h?`/${h.join("/")}`:"");return this.cache[z]||(this.cache[z]=new xc(this.context,hn[e],n,yu[e],this._showOverdrawInspector,g,w,C,h)),this.cache[z]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const e=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(e.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new d.T(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}overLimit(){const{drawingBufferWidth:e,drawingBufferHeight:n}=this.context.gl;return this.width!==e||this.height!==n}}function Ic(p,e){let n,l=!1,h=null,g=null;const v=()=>{h=null,l&&(p.apply(g,n),h=setTimeout(v,e),l=!1)};return(...w)=>(l=!0,g=this,n=w,h||v(),h)}class Xa{constructor(e){this._getCurrentHash=()=>{const n=window.location.hash.replace("#","");if(this._hashName){let l;return n.split("&").map((h=>h.split("="))).forEach((h=>{h[0]===this._hashName&&(l=h)})),(l&&l[1]||"").split("/")}return n.split("/")},this._onHashChange=()=>{const n=this._getCurrentHash();if(!this._isValidHash(n))return!1;const l=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(n[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+n[2],+n[1]],zoom:+n[0],bearing:l,pitch:+(n[4]||0)}),!0},this._updateHashUnthrottled=()=>{const n=window.location.href.replace(/(#.*)?$/,this.getHashString());window.history.replaceState(window.history.state,null,n)},this._removeHash=()=>{const n=this._getCurrentHash();if(n.length===0)return;const l=n.join("/");let h=l;h.split("&").length>0&&(h=h.split("&")[0]),this._hashName&&(h=`${this._hashName}=${l}`);let g=window.location.hash.replace(h,"");g.startsWith("#&")?g=g.slice(0,1)+g.slice(2):g==="#"&&(g="");let v=window.location.href.replace(/(#.+)?$/,g);v=v.replace("&&","&"),window.history.replaceState(window.history.state,null,v)},this._updateHash=Ic(this._updateHashUnthrottled,300),this._hashName=e&&encodeURIComponent(e)}addTo(e){return this._map=e,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),this._removeHash(),delete this._map,this}getHashString(e){const n=this._map.getCenter(),l=Math.round(100*this._map.getZoom())/100,h=Math.ceil((l*Math.LN2+Math.log(512/360/.5))/Math.LN10),g=Math.pow(10,h),v=Math.round(n.lng*g)/g,w=Math.round(n.lat*g)/g,C=this._map.getBearing(),z=this._map.getPitch();let k="";if(k+=e?`/${v}/${w}/${l}`:`${l}/${w}/${v}`,(C||z)&&(k+="/"+Math.round(10*C)/10),z&&(k+=`/${Math.round(z)}`),this._hashName){const O=this._hashName;let I=!1;const F=window.location.hash.slice(1).split("&").map((H=>{const K=H.split("=")[0];return K===O?(I=!0,`${K}=${k}`):H})).filter((H=>H));return I||F.push(`${O}=${k}`),`#${F.join("&")}`}return`#${k}`}_isValidHash(e){if(e.length<3||e.some(isNaN))return!1;try{new d.S(+e[2],+e[1])}catch{return!1}const n=+e[0],l=+(e[3]||0),h=+(e[4]||0);return n>=this._map.getMinZoom()&&n<=this._map.getMaxZoom()&&l>=-180&&l<=180&&h>=this._map.getMinPitch()&&h<=this._map.getMaxPitch()}}const Io={linearity:.3,easing:d.cm(0,0,.3,1)},ys=d.e({deceleration:2500,maxSpeed:1400},Io),Xr=d.e({deceleration:20,maxSpeed:1400},Io),Rc=d.e({deceleration:1e3,maxSpeed:360},Io),Mh=d.e({deceleration:1e3,maxSpeed:90},Io),Ad=d.e({deceleration:1e3,maxSpeed:360},Io);class Ed{constructor(e){this._map=e,this.clear()}clear(){this._inertiaBuffer=[]}record(e){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:dt(),settings:e})}_drainInertiaBuffer(){const e=this._inertiaBuffer,n=dt();for(;e.length>0&&n-e[0].time>160;)e.shift()}_onMoveEnd(e){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const n={zoom:0,bearing:0,pitch:0,roll:0,pan:new d.P(0,0),pinchAround:void 0,around:void 0};for(const{settings:g}of this._inertiaBuffer)n.zoom+=g.zoomDelta||0,n.bearing+=g.bearingDelta||0,n.pitch+=g.pitchDelta||0,n.roll+=g.rollDelta||0,g.panDelta&&n.pan._add(g.panDelta),g.around&&(n.around=g.around),g.pinchAround&&(n.pinchAround=g.pinchAround);const l=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,h={};if(n.pan.mag()){const g=Ni(n.pan.mag(),l,d.e({},ys,e||{})),v=n.pan.mult(g.amount/n.pan.mag()),w=this._map.cameraHelper.handlePanInertia(v,this._map.transform);h.center=w.easingCenter,h.offset=w.easingOffset,Gl(h,g)}if(n.zoom){const g=Ni(n.zoom,l,Xr);h.zoom=this._map.transform.zoom+g.amount,Gl(h,g)}if(n.bearing){const g=Ni(n.bearing,l,Rc);h.bearing=this._map.transform.bearing+d.ae(g.amount,-179,179),Gl(h,g)}if(n.pitch){const g=Ni(n.pitch,l,Mh);h.pitch=this._map.transform.pitch+g.amount,Gl(h,g)}if(n.roll){const g=Ni(n.roll,l,Ad);h.roll=this._map.transform.roll+d.ae(g.amount,-179,179),Gl(h,g)}if(h.zoom||h.bearing){const g=n.pinchAround===void 0?n.around:n.pinchAround;h.around=g?this._map.unproject(g):this._map.getCenter()}return this.clear(),d.e(h,{noMoveStart:!0})}}function Gl(p,e){(!p.duration||p.duration<e.duration)&&(p.duration=e.duration,p.easing=e.easing)}function Ni(p,e,n){const{maxSpeed:l,linearity:h,deceleration:g}=n,v=d.ae(p*h/(e/1e3),-l,l),w=Math.abs(v)/(g*h);return{easing:n.easing,duration:1e3*w,amount:v*(w/2)}}class ca extends d.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(e,n,l,h={}){l=l instanceof MouseEvent?l:new MouseEvent(e,l);const g=Ce.mousePos(n.getCanvas(),l),v=n.unproject(g);super(e,d.e({point:g,lngLat:v,originalEvent:l},h)),this._defaultPrevented=!1,this.target=n}}class Er extends d.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(e,n,l){const h=e==="touchend"?l.changedTouches:l.touches,g=Ce.touchPos(n.getCanvasContainer(),h),v=g.map((C=>n.unproject(C))),w=g.reduce(((C,z,k,O)=>C.add(z.div(O.length))),new d.P(0,0));super(e,{points:g,point:w,lngLats:v,lngLat:n.unproject(w),originalEvent:l}),this._defaultPrevented=!1}}class ua extends d.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(e,n,l){super(e,{originalEvent:l}),this._defaultPrevented=!1}}class Pu{constructor(e,n){this._map=e,this._clickTolerance=n.clickTolerance}reset(){delete this._mousedownPos}wheel(e){return this._firePreventable(new ua(e.type,this._map,e))}mousedown(e,n){return this._mousedownPos=n,this._firePreventable(new ca(e.type,this._map,e))}mouseup(e){this._map.fire(new ca(e.type,this._map,e))}click(e,n){this._mousedownPos&&this._mousedownPos.dist(n)>=this._clickTolerance||this._map.fire(new ca(e.type,this._map,e))}dblclick(e){return this._firePreventable(new ca(e.type,this._map,e))}mouseover(e){this._map.fire(new ca(e.type,this._map,e))}mouseout(e){this._map.fire(new ca(e.type,this._map,e))}touchstart(e){return this._firePreventable(new Er(e.type,this._map,e))}touchmove(e){this._map.fire(new Er(e.type,this._map,e))}touchend(e){this._map.fire(new Er(e.type,this._map,e))}touchcancel(e){this._map.fire(new Er(e.type,this._map,e))}_firePreventable(e){if(this._map.fire(e),e.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class ha{constructor(e){this._map=e}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(e){this._map.fire(new ca(e.type,this._map,e))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new ca("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(e){this._delayContextMenu?this._contextMenuEvent=e:this._ignoreContextMenu||this._map.fire(new ca(e.type,this._map,e)),this._map.listens("contextmenu")&&e.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Ea{constructor(e){this._map=e}get transform(){return this._map._requestedCameraState||this._map.transform}get center(){return{lng:this.transform.center.lng,lat:this.transform.center.lat}}get zoom(){return this.transform.zoom}get pitch(){return this.transform.pitch}get bearing(){return this.transform.bearing}unproject(e){return this.transform.screenPointToLocation(d.P.convert(e),this._map.terrain)}}class zd{constructor(e,n){this._map=e,this._tr=new Ea(e),this._el=e.getCanvasContainer(),this._container=e.getContainer(),this._clickTolerance=n.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(e,n){this.isEnabled()&&e.shiftKey&&e.button===0&&(Ce.disableDrag(),this._startPos=this._lastPos=n,this._active=!0)}mousemoveWindow(e,n){if(!this._active)return;const l=n;if(this._lastPos.equals(l)||!this._box&&l.dist(this._startPos)<this._clickTolerance)return;const h=this._startPos;this._lastPos=l,this._box||(this._box=Ce.create("div","maplibregl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair"),this._fireEvent("boxzoomstart",e));const g=Math.min(h.x,l.x),v=Math.max(h.x,l.x),w=Math.min(h.y,l.y),C=Math.max(h.y,l.y);Ce.setTransform(this._box,`translate(${g}px,${w}px)`),this._box.style.width=v-g+"px",this._box.style.height=C-w+"px"}mouseupWindow(e,n){if(!this._active||e.button!==0)return;const l=this._startPos,h=n;if(this.reset(),Ce.suppressClick(),l.x!==h.x||l.y!==h.y)return this._map.fire(new d.l("boxzoomend",{originalEvent:e})),{cameraAnimation:g=>g.fitScreenCoordinates(l,h,this._tr.bearing,{linear:!0})};this._fireEvent("boxzoomcancel",e)}keydown(e){this._active&&e.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",e))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair"),this._box&&(Ce.remove(this._box),this._box=null),Ce.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(e,n){return this._map.fire(new d.l(e,{originalEvent:n}))}}function ku(p,e){if(p.length!==e.length)throw new Error(`The number of touches and points are not equal - touches ${p.length}, points ${e.length}`);const n={};for(let l=0;l<p.length;l++)n[p[l].identifier]=e[l];return n}class Mp{constructor(e){this.reset(),this.numTouches=e.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(e,n,l){(this.centroid||l.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=e.timeStamp),l.length===this.numTouches&&(this.centroid=(function(h){const g=new d.P(0,0);for(const v of h)g._add(v);return g.div(h.length)})(n),this.touches=ku(l,n)))}touchmove(e,n,l){if(this.aborted||!this.centroid)return;const h=ku(l,n);for(const g in this.touches){const v=h[g];(!v||v.dist(this.touches[g])>30)&&(this.aborted=!0)}}touchend(e,n,l){if((!this.centroid||e.timeStamp-this.startTime>500)&&(this.aborted=!0),l.length===0){const h=!this.aborted&&this.centroid;if(this.reset(),h)return h}}}class Du{constructor(e){this.singleTap=new Mp(e),this.numTaps=e.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(e,n,l){this.singleTap.touchstart(e,n,l)}touchmove(e,n,l){this.singleTap.touchmove(e,n,l)}touchend(e,n,l){const h=this.singleTap.touchend(e,n,l);if(h){const g=e.timeStamp-this.lastTime<500,v=!this.lastTap||this.lastTap.dist(h)<30;if(g&&v||this.reset(),this.count++,this.lastTime=e.timeStamp,this.lastTap=h,this.count===this.numTaps)return this.reset(),h}}}class bs{constructor(e){this._tr=new Ea(e),this._zoomIn=new Du({numTouches:1,numTaps:2}),this._zoomOut=new Du({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(e,n,l){this._zoomIn.touchstart(e,n,l),this._zoomOut.touchstart(e,n,l)}touchmove(e,n,l){this._zoomIn.touchmove(e,n,l),this._zoomOut.touchmove(e,n,l)}touchend(e,n,l){const h=this._zoomIn.touchend(e,n,l),g=this._zoomOut.touchend(e,n,l),v=this._tr;return h?(this._active=!0,e.preventDefault(),setTimeout((()=>this.reset()),0),{cameraAnimation:w=>w.easeTo({duration:300,zoom:v.zoom+1,around:v.unproject(h)},{originalEvent:e})}):g?(this._active=!0,e.preventDefault(),setTimeout((()=>this.reset()),0),{cameraAnimation:w=>w.easeTo({duration:300,zoom:v.zoom-1,around:v.unproject(g)},{originalEvent:e})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Fn{constructor(e){this._enabled=!!e.enable,this._moveStateManager=e.moveStateManager,this._clickTolerance=e.clickTolerance||1,this._moveFunction=e.move,this._activateOnStart=!!e.activateOnStart,e.assignEvents(this),this.reset()}reset(e){this._active=!1,this._moved=!1,delete this._lastPoint,this._moveStateManager.endMove(e)}_move(...e){const n=this._moveFunction(...e);if(n.bearingDelta||n.pitchDelta||n.rollDelta||n.around||n.panDelta)return this._active=!0,n}dragStart(e,n){this.isEnabled()&&!this._lastPoint&&this._moveStateManager.isValidStartEvent(e)&&(this._moveStateManager.startMove(e),this._lastPoint=Array.isArray(n)?n[0]:n,this._activateOnStart&&this._lastPoint&&(this._active=!0))}dragMove(e,n){if(!this.isEnabled())return;const l=this._lastPoint;if(!l)return;if(e.preventDefault(),!this._moveStateManager.isValidMoveEvent(e))return void this.reset(e);const h=Array.isArray(n)?n[0]:n;return!this._moved&&h.dist(l)<this._clickTolerance?void 0:(this._moved=!0,this._lastPoint=h,this._move(l,h))}dragEnd(e){this.isEnabled()&&this._lastPoint&&this._moveStateManager.isValidEndEvent(e)&&(this._moved&&Ce.suppressClick(),this.reset(e))}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}getClickTolerance(){return this._clickTolerance}}const _n=0,st=2,tl={[_n]:1,[st]:2};class Ro{constructor(e){this._correctEvent=e.checkCorrectEvent}startMove(e){const n=Ce.mouseButton(e);this._eventButton=n}endMove(e){delete this._eventButton}isValidStartEvent(e){return this._correctEvent(e)}isValidMoveEvent(e){return!(function(n,l){const h=tl[l];return n.buttons===void 0||(n.buttons&h)!==h})(e,this._eventButton)}isValidEndEvent(e){return Ce.mouseButton(e)===this._eventButton}}class Bc{constructor(){this._firstTouch=void 0}_isOneFingerTouch(e){return e.targetTouches.length===1}_isSameTouchEvent(e){return e.targetTouches[0].identifier===this._firstTouch}startMove(e){this._firstTouch=e.targetTouches[0].identifier}endMove(e){delete this._firstTouch}isValidStartEvent(e){return this._isOneFingerTouch(e)}isValidMoveEvent(e){return this._isOneFingerTouch(e)&&this._isSameTouchEvent(e)}isValidEndEvent(e){return this._isOneFingerTouch(e)&&this._isSameTouchEvent(e)}}class xs{constructor(e=new Ro({checkCorrectEvent:()=>!0}),n=new Bc){this.mouseMoveStateManager=e,this.oneFingerTouchMoveStateManager=n}_executeRelevantHandler(e,n,l){return e instanceof MouseEvent?n(e):typeof TouchEvent<"u"&&e instanceof TouchEvent?l(e):void 0}startMove(e){this._executeRelevantHandler(e,(n=>this.mouseMoveStateManager.startMove(n)),(n=>this.oneFingerTouchMoveStateManager.startMove(n)))}endMove(e){this._executeRelevantHandler(e,(n=>this.mouseMoveStateManager.endMove(n)),(n=>this.oneFingerTouchMoveStateManager.endMove(n)))}isValidStartEvent(e){return this._executeRelevantHandler(e,(n=>this.mouseMoveStateManager.isValidStartEvent(n)),(n=>this.oneFingerTouchMoveStateManager.isValidStartEvent(n)))}isValidMoveEvent(e){return this._executeRelevantHandler(e,(n=>this.mouseMoveStateManager.isValidMoveEvent(n)),(n=>this.oneFingerTouchMoveStateManager.isValidMoveEvent(n)))}isValidEndEvent(e){return this._executeRelevantHandler(e,(n=>this.mouseMoveStateManager.isValidEndEvent(n)),(n=>this.oneFingerTouchMoveStateManager.isValidEndEvent(n)))}}const Bo=p=>{p.mousedown=p.dragStart,p.mousemoveWindow=p.dragMove,p.mouseup=p.dragEnd,p.contextmenu=e=>{e.preventDefault()}};class Lu{constructor(e,n){this._clickTolerance=e.clickTolerance||1,this._map=n,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new d.P(0,0)}_shouldBePrevented(e){return e<(this._map.cooperativeGestures.isEnabled()?2:1)}touchstart(e,n,l){return this._calculateTransform(e,n,l)}touchmove(e,n,l){if(this._active){if(!this._shouldBePrevented(l.length))return e.preventDefault(),this._calculateTransform(e,n,l);this._map.cooperativeGestures.notifyGestureBlocked("touch_pan",e)}}touchend(e,n,l){this._calculateTransform(e,n,l),this._active&&this._shouldBePrevented(l.length)&&this.reset()}touchcancel(){this.reset()}_calculateTransform(e,n,l){l.length>0&&(this._active=!0);const h=ku(l,n),g=new d.P(0,0),v=new d.P(0,0);let w=0;for(const z in h){const k=h[z],O=this._touches[z];O&&(g._add(k),v._add(k.sub(O)),w++,h[z]=k)}if(this._touches=h,this._shouldBePrevented(w)||!v.mag())return;const C=v.div(w);return this._sum._add(C),this._sum.mag()<this._clickTolerance?void 0:{around:g.div(w),panDelta:C}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class $t{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}touchstart(e,n,l){this._firstTwoTouches||l.length<2||(this._firstTwoTouches=[l[0].identifier,l[1].identifier],this._start([n[0],n[1]]))}touchmove(e,n,l){if(!this._firstTwoTouches)return;e.preventDefault();const[h,g]=this._firstTwoTouches,v=vn(l,n,h),w=vn(l,n,g);if(!v||!w)return;const C=this._aroundCenter?null:v.add(w).div(2);return this._move([v,w],C,e)}touchend(e,n,l){if(!this._firstTwoTouches)return;const[h,g]=this._firstTwoTouches,v=vn(l,n,h),w=vn(l,n,g);v&&w||(this._active&&Ce.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(e){this._enabled=!0,this._aroundCenter=!!e&&e.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}}function vn(p,e,n){for(let l=0;l<p.length;l++)if(p[l].identifier===n)return e[l]}function Ah(p,e){return Math.log(p/e)/Math.LN2}class Oc extends $t{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(e){this._startDistance=this._distance=e[0].dist(e[1])}_move(e,n){const l=this._distance;if(this._distance=e[0].dist(e[1]),this._active||!(Math.abs(Ah(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Ah(this._distance,l),pinchAround:n}}}function il(p,e){return 180*p.angleWith(e)/Math.PI}class ql extends $t{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(e){this._startVector=this._vector=e[0].sub(e[1]),this._minDiameter=e[0].dist(e[1])}_move(e,n,l){const h=this._vector;if(this._vector=e[0].sub(e[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:il(this._vector,h),pinchAround:n}}_isBelowThreshold(e){this._minDiameter=Math.min(this._minDiameter,e.mag());const n=25/(Math.PI*this._minDiameter)*360,l=il(e,this._startVector);return Math.abs(l)<n}}function rl(p){return Math.abs(p.y)>Math.abs(p.x)}class ws extends $t{constructor(e){super(),this._currentTouchCount=0,this._map=e}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(e,n,l){super.touchstart(e,n,l),this._currentTouchCount=l.length}_start(e){this._lastPoints=e,rl(e[0].sub(e[1]))&&(this._valid=!1)}_move(e,n,l){if(this._map.cooperativeGestures.isEnabled()&&this._currentTouchCount<3)return;const h=e[0].sub(this._lastPoints[0]),g=e[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(h,g,l.timeStamp),this._valid?(this._lastPoints=e,this._active=!0,{pitchDelta:(h.y+g.y)/2*-.5}):void 0}gestureBeginsVertically(e,n,l){if(this._valid!==void 0)return this._valid;const h=e.mag()>=2,g=n.mag()>=2;if(!h&&!g)return;if(!h||!g)return this._firstMove===void 0&&(this._firstMove=l),l-this._firstMove<100&&void 0;const v=e.y>0==n.y>0;return rl(e)&&rl(n)&&v}}const jc={panStep:100,bearingStep:15,pitchStep:10};class Eh{constructor(e){this._tr=new Ea(e);const n=jc;this._panStep=n.panStep,this._bearingStep=n.bearingStep,this._pitchStep=n.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(e){if(e.altKey||e.ctrlKey||e.metaKey)return;let n=0,l=0,h=0,g=0,v=0;switch(e.keyCode){case 61:case 107:case 171:case 187:n=1;break;case 189:case 109:case 173:n=-1;break;case 37:e.shiftKey?l=-1:(e.preventDefault(),g=-1);break;case 39:e.shiftKey?l=1:(e.preventDefault(),g=1);break;case 38:e.shiftKey?h=1:(e.preventDefault(),v=-1);break;case 40:e.shiftKey?h=-1:(e.preventDefault(),v=1);break;default:return}return this._rotationDisabled&&(l=0,h=0),{cameraAnimation:w=>{const C=this._tr;w.easeTo({duration:300,easeId:"keyboardHandler",easing:Cs,zoom:n?Math.round(C.zoom)+n*(e.shiftKey?2:1):C.zoom,bearing:C.bearing+l*this._bearingStep,pitch:C.pitch+h*this._pitchStep,offset:[-g*this._panStep,-v*this._panStep],center:C.center},{originalEvent:e})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function Cs(p){return p*(2-p)}const zh=4.000244140625,Ss=1/450;class Nn{constructor(e,n){this._onTimeout=l=>{this._type="wheel",this._delta-=this._lastValue,this._active||this._start(l)},this._map=e,this._tr=new Ea(e),this._triggerRenderFrame=n,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=Ss}setZoomRate(e){this._defaultZoomRate=e}setWheelZoomRate(e){this._wheelZoomRate=e}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(e){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!e&&e.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}_shouldBePrevented(e){return!!this._map.cooperativeGestures.isEnabled()&&!(e.ctrlKey||this._map.cooperativeGestures.isBypassed(e))}wheel(e){if(!this.isEnabled())return;if(this._shouldBePrevented(e))return void this._map.cooperativeGestures.notifyGestureBlocked("wheel_zoom",e);let n=e.deltaMode===WheelEvent.DOM_DELTA_LINE?40*e.deltaY:e.deltaY;const l=dt(),h=l-(this._lastWheelEventTime||0);this._lastWheelEventTime=l,n!==0&&n%zh==0?this._type="wheel":n!==0&&Math.abs(n)<4?this._type="trackpad":h>400?(this._type=null,this._lastValue=n,this._timeout=setTimeout(this._onTimeout,40,e)):this._type||(this._type=Math.abs(h*n)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,n+=this._lastValue)),e.shiftKey&&n&&(n/=4),this._type&&(this._lastWheelEvent=e,this._delta-=n,this._active||this._start(e)),e.preventDefault()}_start(e){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const n=Ce.mousePos(this._map.getCanvas(),e),l=this._tr;this._aroundPoint=this._aroundCenter?l.transform.locationToScreenPoint(d.S.convert(l.center)):n,this._frameId||(this._frameId=!0,this._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const e=this._tr.transform;if(typeof this._lastExpectedZoom=="number"){const w=e.zoom-this._lastExpectedZoom;typeof this._startZoom=="number"&&(this._startZoom+=w),typeof this._targetZoom=="number"&&(this._targetZoom+=w)}if(this._delta!==0){const w=this._type==="wheel"&&Math.abs(this._delta)>zh?this._wheelZoomRate:this._defaultZoomRate;let C=2/(1+Math.exp(-Math.abs(this._delta*w)));this._delta<0&&C!==0&&(C=1/C);const z=typeof this._targetZoom!="number"?e.scale:d.ah(this._targetZoom);this._targetZoom=e.constrain(e.getCameraLngLat(),d.ak(z*C)).zoom,this._type==="wheel"&&(this._startZoom=e.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const n=typeof this._targetZoom!="number"?e.zoom:this._targetZoom,l=this._startZoom,h=this._easing;let g,v=!1;if(this._type==="wheel"&&l&&h){const w=dt()-this._lastWheelEventTime,C=Math.min((w+5)/200,1),z=h(C);g=d.C.number(l,n,z),C<1?this._frameId||(this._frameId=!0):v=!0}else g=n,v=!0;return this._active=!0,v&&(this._active=!1,this._finishTimeout=setTimeout((()=>{this._zooming=!1,this._triggerRenderFrame(),delete this._targetZoom,delete this._lastExpectedZoom,delete this._finishTimeout}),200)),this._lastExpectedZoom=g,{noInertia:!0,needsRenderFrame:!v,zoomDelta:g-e.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(e){let n=d.co;if(this._prevEase){const l=this._prevEase,h=(dt()-l.start)/l.duration,g=l.easing(h+.01)-l.easing(h),v=.27/Math.sqrt(g*g+1e-4)*.01,w=Math.sqrt(.0729-v*v);n=d.cm(v,w,.25,1)}return this._prevEase={start:dt(),duration:e,easing:n},n}reset(){this._active=!1,this._zooming=!1,delete this._targetZoom,delete this._lastExpectedZoom,this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout)}}class bi{constructor(e,n){this._clickZoom=e,this._tapZoom=n}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class Ts{constructor(e){this._tr=new Ea(e),this.reset()}reset(){this._active=!1}dblclick(e,n){return e.preventDefault(),{cameraAnimation:l=>{l.easeTo({duration:300,zoom:this._tr.zoom+(e.shiftKey?-1:1),around:this._tr.unproject(n)},{originalEvent:e})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Un{constructor(){this._tap=new Du({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,delete this._tapPoint,this._tap.reset()}touchstart(e,n,l){if(!this._swipePoint)if(this._tapTime){const h=n[0],g=e.timeStamp-this._tapTime<500,v=this._tapPoint.dist(h)<30;g&&v?l.length>0&&(this._swipePoint=h,this._swipeTouch=l[0].identifier):this.reset()}else this._tap.touchstart(e,n,l)}touchmove(e,n,l){if(this._tapTime){if(this._swipePoint){if(l[0].identifier!==this._swipeTouch)return;const h=n[0],g=h.y-this._swipePoint.y;return this._swipePoint=h,e.preventDefault(),this._active=!0,{zoomDelta:g/128}}}else this._tap.touchmove(e,n,l)}touchend(e,n,l){if(this._tapTime)this._swipePoint&&l.length===0&&this.reset();else{const h=this._tap.touchend(e,n,l);h&&(this._tapTime=e.timeStamp,this._tapPoint=h)}}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Ms{constructor(e,n,l){this._el=e,this._mousePan=n,this._touchPan=l}enable(e){this._inertiaOptions=e||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class Vc{constructor(e,n,l,h){this._pitchWithRotate=e.pitchWithRotate,this._rollEnabled=e.rollEnabled,this._mouseRotate=n,this._mousePitch=l,this._mouseRoll=h}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable(),this._rollEnabled&&this._mouseRoll.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable(),this._mouseRoll.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())&&(!this._rollEnabled||this._mouseRoll.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()||this._mouseRoll.isActive()}}class $c{constructor(e,n,l,h){this._el=e,this._touchZoom=n,this._touchRotate=l,this._tapDragZoom=h,this._rotationDisabled=!1,this._enabled=!0}enable(e){this._touchZoom.enable(e),this._rotationDisabled||this._touchRotate.enable(e),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}class al{constructor(e,n){this._bypassKey=navigator.userAgent.indexOf("Mac")!==-1?"metaKey":"ctrlKey",this._map=e,this._options=n,this._enabled=!1}isActive(){return!1}reset(){}_setupUI(){if(this._container)return;const e=this._map.getCanvasContainer();e.classList.add("maplibregl-cooperative-gestures"),this._container=Ce.create("div","maplibregl-cooperative-gesture-screen",e);let n=this._map._getUIString("CooperativeGesturesHandler.WindowsHelpText");this._bypassKey==="metaKey"&&(n=this._map._getUIString("CooperativeGesturesHandler.MacHelpText"));const l=this._map._getUIString("CooperativeGesturesHandler.MobileHelpText"),h=document.createElement("div");h.className="maplibregl-desktop-message",h.textContent=n,this._container.appendChild(h);const g=document.createElement("div");g.className="maplibregl-mobile-message",g.textContent=l,this._container.appendChild(g),this._container.setAttribute("aria-hidden","true")}_destroyUI(){this._container&&(Ce.remove(this._container),this._map.getCanvasContainer().classList.remove("maplibregl-cooperative-gestures")),delete this._container}enable(){this._setupUI(),this._enabled=!0}disable(){this._enabled=!1,this._destroyUI()}isEnabled(){return this._enabled}isBypassed(e){return e[this._bypassKey]}notifyGestureBlocked(e,n){this._enabled&&(this._map.fire(new d.l("cooperativegestureprevented",{gestureType:e,originalEvent:n})),this._container.classList.add("maplibregl-show"),setTimeout((()=>{this._container.classList.remove("maplibregl-show")}),100))}}const As=p=>p.zoom||p.drag||p.roll||p.pitch||p.rotate;class Zn extends d.l{}function nl(p){return p.panDelta&&p.panDelta.mag()||p.zoomDelta||p.bearingDelta||p.pitchDelta||p.rollDelta}class ut{constructor(e,n){this.handleWindowEvent=h=>{this.handleEvent(h,`${h.type}Window`)},this.handleEvent=(h,g)=>{if(h.type==="blur")return void this.stop(!0);this._updatingCamera=!0;const v=h.type==="renderFrame"?void 0:h,w={needsRenderFrame:!1},C={},z={};for(const{handlerName:I,handler:F,allowed:H}of this._handlers){if(!F.isEnabled())continue;let K;if(this._blockedByActive(z,H,I))F.reset();else if(F[g||h.type]){if(d.cp(h,g||h.type)){const W=Ce.mousePos(this._map.getCanvas(),h);K=F[g||h.type](h,W)}else if(d.cq(h,g||h.type)){const W=this._getMapTouches(h.touches),J=Ce.touchPos(this._map.getCanvas(),W);K=F[g||h.type](h,J,W)}else d.cr(g||h.type)||(K=F[g||h.type](h));this.mergeHandlerResult(w,C,K,I,v),K&&K.needsRenderFrame&&this._triggerRenderFrame()}(K||F.isActive())&&(z[I]=F)}const k={};for(const I in this._previousActiveHandlers)z[I]||(k[I]=v);this._previousActiveHandlers=z,(Object.keys(k).length||nl(w))&&(this._changes.push([w,C,k]),this._triggerRenderFrame()),(Object.keys(z).length||nl(w))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:O}=w;O&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],O(this._map))},this._map=e,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Ed(e),this._bearingSnap=n.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(n);const l=this._el;this._listeners=[[l,"touchstart",{passive:!0}],[l,"touchmove",{passive:!1}],[l,"touchend",void 0],[l,"touchcancel",void 0],[l,"mousedown",void 0],[l,"mousemove",void 0],[l,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[l,"mouseover",void 0],[l,"mouseout",void 0],[l,"dblclick",void 0],[l,"click",void 0],[l,"keydown",{capture:!1}],[l,"keyup",void 0],[l,"wheel",{passive:!1}],[l,"contextmenu",void 0],[window,"blur",void 0]];for(const[h,g,v]of this._listeners)Ce.addEventListener(h,g,h===document?this.handleWindowEvent:this.handleEvent,v)}destroy(){for(const[e,n,l]of this._listeners)Ce.removeEventListener(e,n,e===document?this.handleWindowEvent:this.handleEvent,l)}_addDefaultHandlers(e){const n=this._map,l=n.getCanvasContainer();this._add("mapEvent",new Pu(n,e));const h=n.boxZoom=new zd(n,e);this._add("boxZoom",h),e.interactive&&e.boxZoom&&h.enable();const g=n.cooperativeGestures=new al(n,e.cooperativeGestures);this._add("cooperativeGestures",g),e.cooperativeGestures&&g.enable();const v=new bs(n),w=new Ts(n);n.doubleClickZoom=new bi(w,v),this._add("tapZoom",v),this._add("clickZoom",w),e.interactive&&e.doubleClickZoom&&n.doubleClickZoom.enable();const C=new Un;this._add("tapDragZoom",C);const z=n.touchPitch=new ws(n);this._add("touchPitch",z),e.interactive&&e.touchPitch&&n.touchPitch.enable(e.touchPitch);const k=()=>n.project(n.getCenter()),O=(function({enable:te,clickTolerance:le,aroundCenter:ue=!0,minPixelCenterThreshold:ae=100,rotateDegreesPerPixelMoved:fe=.8},Ae){const we=new Ro({checkCorrectEvent:Se=>Ce.mouseButton(Se)===0&&Se.ctrlKey||Ce.mouseButton(Se)===2&&!Se.ctrlKey});return new Fn({clickTolerance:le,move:(Se,Ee)=>{const Qe=Ae();if(ue&&Math.abs(Qe.y-Se.y)>ae)return{bearingDelta:d.cn(new d.P(Se.x,Ee.y),Ee,Qe)};let Ke=(Ee.x-Se.x)*fe;return ue&&Ee.y<Qe.y&&(Ke=-Ke),{bearingDelta:Ke}},moveStateManager:we,enable:te,assignEvents:Bo})})(e,k),I=(function({enable:te,clickTolerance:le,pitchDegreesPerPixelMoved:ue=-.5}){const ae=new Ro({checkCorrectEvent:fe=>Ce.mouseButton(fe)===0&&fe.ctrlKey||Ce.mouseButton(fe)===2});return new Fn({clickTolerance:le,move:(fe,Ae)=>({pitchDelta:(Ae.y-fe.y)*ue}),moveStateManager:ae,enable:te,assignEvents:Bo})})(e),F=(function({enable:te,clickTolerance:le,rollDegreesPerPixelMoved:ue=.3},ae){const fe=new Ro({checkCorrectEvent:Ae=>Ce.mouseButton(Ae)===2&&Ae.ctrlKey});return new Fn({clickTolerance:le,move:(Ae,we)=>{const Se=ae();let Ee=(we.x-Ae.x)*ue;return we.y<Se.y&&(Ee=-Ee),{rollDelta:Ee}},moveStateManager:fe,enable:te,assignEvents:Bo})})(e,k);n.dragRotate=new Vc(e,O,I,F),this._add("mouseRotate",O,["mousePitch"]),this._add("mousePitch",I,["mouseRotate","mouseRoll"]),this._add("mouseRoll",F,["mousePitch"]),e.interactive&&e.dragRotate&&n.dragRotate.enable();const H=(function({enable:te,clickTolerance:le}){const ue=new Ro({checkCorrectEvent:ae=>Ce.mouseButton(ae)===0&&!ae.ctrlKey});return new Fn({clickTolerance:le,move:(ae,fe)=>({around:fe,panDelta:fe.sub(ae)}),activateOnStart:!0,moveStateManager:ue,enable:te,assignEvents:Bo})})(e),K=new Lu(e,n);n.dragPan=new Ms(l,H,K),this._add("mousePan",H),this._add("touchPan",K,["touchZoom","touchRotate"]),e.interactive&&e.dragPan&&n.dragPan.enable(e.dragPan);const W=new ql,J=new Oc;n.touchZoomRotate=new $c(l,J,W,C),this._add("touchRotate",W,["touchPan","touchZoom"]),this._add("touchZoom",J,["touchPan","touchRotate"]),e.interactive&&e.touchZoomRotate&&n.touchZoomRotate.enable(e.touchZoomRotate),this._add("blockableMapEvent",new ha(n));const ie=n.scrollZoom=new Nn(n,(()=>this._triggerRenderFrame()));this._add("scrollZoom",ie,["mousePan"]),e.interactive&&e.scrollZoom&&n.scrollZoom.enable(e.scrollZoom);const oe=n.keyboard=new Eh(n);this._add("keyboard",oe),e.interactive&&e.keyboard&&n.keyboard.enable()}_add(e,n,l){this._handlers.push({handlerName:e,handler:n,allowed:l}),this._handlersById[e]=n}stop(e){if(!this._updatingCamera){for(const{handler:n}of this._handlers)n.reset();this._inertia.clear(),this._fireEvents({},{},e),this._changes=[]}}isActive(){for(const{handler:e}of this._handlers)if(e.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!As(this._eventsInProgress)||this.isZooming()}_blockedByActive(e,n,l){for(const h in e)if(h!==l&&(!n||n.indexOf(h)<0))return!0;return!1}_getMapTouches(e){const n=[];for(const l of e)this._el.contains(l.target)&&n.push(l);return n}mergeHandlerResult(e,n,l,h,g){if(!l)return;d.e(e,l);const v={handlerName:h,originalEvent:l.originalEvent||g};l.zoomDelta!==void 0&&(n.zoom=v),l.panDelta!==void 0&&(n.drag=v),l.rollDelta!==void 0&&(n.roll=v),l.pitchDelta!==void 0&&(n.pitch=v),l.bearingDelta!==void 0&&(n.rotate=v)}_applyChanges(){const e={},n={},l={};for(const[h,g,v]of this._changes)h.panDelta&&(e.panDelta=(e.panDelta||new d.P(0,0))._add(h.panDelta)),h.zoomDelta&&(e.zoomDelta=(e.zoomDelta||0)+h.zoomDelta),h.bearingDelta&&(e.bearingDelta=(e.bearingDelta||0)+h.bearingDelta),h.pitchDelta&&(e.pitchDelta=(e.pitchDelta||0)+h.pitchDelta),h.rollDelta&&(e.rollDelta=(e.rollDelta||0)+h.rollDelta),h.around!==void 0&&(e.around=h.around),h.pinchAround!==void 0&&(e.pinchAround=h.pinchAround),h.noInertia&&(e.noInertia=h.noInertia),d.e(n,g),d.e(l,v);this._updateMapTransform(e,n,l),this._changes=[]}_updateMapTransform(e,n,l){const h=this._map,g=h._getTransformForUpdate(),v=h.terrain;if(!(nl(e)||v&&this._terrainMovement))return this._fireEvents(n,l,!0);h._stop(!0);let{panDelta:w,zoomDelta:C,bearingDelta:z,pitchDelta:k,rollDelta:O,around:I,pinchAround:F}=e;F!==void 0&&(I=F),I=I||h.transform.centerPoint,v&&!g.isPointOnMapSurface(I)&&(I=g.centerPoint);const H={panDelta:w,zoomDelta:C,rollDelta:O,pitchDelta:k,bearingDelta:z,around:I};this._map.cameraHelper.useGlobeControls&&!g.isPointOnMapSurface(I)&&(I=g.centerPoint);const K=I.distSqr(g.centerPoint)<.01?g.center:g.screenPointToLocation(w?I.sub(w):I);this._handleMapControls({terrain:v,tr:g,deltasForHelper:H,preZoomAroundLoc:K,combinedEventsInProgress:n,panDelta:w}),h._applyUpdatedTransform(g),this._map._update(),e.noInertia||this._inertia.record(e),this._fireEvents(n,l,!0)}_handleMapControls({terrain:e,tr:n,deltasForHelper:l,preZoomAroundLoc:h,combinedEventsInProgress:g,panDelta:v}){const w=this._map.cameraHelper;if(w.handleMapControlsRollPitchBearingZoom(l,n),e)return w.useGlobeControls?(this._terrainMovement||!g.drag&&!g.zoom||(this._terrainMovement=!0,this._map._elevationFreeze=!0),void w.handleMapControlsPan(l,n,h)):this._terrainMovement||!g.drag&&!g.zoom?void(g.drag&&this._terrainMovement&&v?n.setCenter(n.screenPointToLocation(n.centerPoint.sub(v))):w.handleMapControlsPan(l,n,h)):(this._terrainMovement=!0,this._map._elevationFreeze=!0,void w.handleMapControlsPan(l,n,h));w.handleMapControlsPan(l,n,h)}_fireEvents(e,n,l){const h=As(this._eventsInProgress),g=As(e),v={};for(const O in e){const{originalEvent:I}=e[O];this._eventsInProgress[O]||(v[`${O}start`]=I),this._eventsInProgress[O]=e[O]}!h&&g&&this._fireEvent("movestart",g.originalEvent);for(const O in v)this._fireEvent(O,v[O]);g&&this._fireEvent("move",g.originalEvent);for(const O in e){const{originalEvent:I}=e[O];this._fireEvent(O,I)}const w={};let C;for(const O in this._eventsInProgress){const{handlerName:I,originalEvent:F}=this._eventsInProgress[O];this._handlersById[I].isActive()||(delete this._eventsInProgress[O],C=n[I]||F,w[`${O}end`]=C)}for(const O in w)this._fireEvent(O,w[O]);const z=As(this._eventsInProgress),k=(h||g)&&!z;if(k&&this._terrainMovement){this._map._elevationFreeze=!1,this._terrainMovement=!1;const O=this._map._getTransformForUpdate();this._map.getCenterClampedToGround()&&O.recalculateZoomAndCenter(this._map.terrain),this._map._applyUpdatedTransform(O)}if(l&&k){this._updatingCamera=!0;const O=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),I=F=>F!==0&&-this._bearingSnap<F&&F<this._bearingSnap;!O||!O.essential&&xt.prefersReducedMotion?(this._map.fire(new d.l("moveend",{originalEvent:C})),I(this._map.getBearing())&&this._map.resetNorth()):(I(O.bearing||this._map.getBearing())&&(O.bearing=0),O.freezeElevation=!0,this._map.easeTo(O,{originalEvent:C})),this._updatingCamera=!1}}_fireEvent(e,n){this._map.fire(new d.l(e,n?{originalEvent:n}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add((e=>{delete this._frameId,this.handleEvent(new Zn("renderFrame",{timeStamp:e})),this._applyChanges()}))}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}class yt extends d.E{constructor(e,n,l){super(),this._renderFrameCallback=()=>{const h=Math.min((dt()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(h)),h<1&&this._easeFrameId?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},this._moving=!1,this._zooming=!1,this.transform=e,this._bearingSnap=l.bearingSnap,this.cameraHelper=n,this.on("moveend",(()=>{delete this._requestedCameraState}))}migrateProjection(e,n){e.apply(this.transform),this.transform=e,this.cameraHelper=n}getCenter(){return new d.S(this.transform.center.lng,this.transform.center.lat)}setCenter(e,n){return this.jumpTo({center:e},n)}getCenterElevation(){return this.transform.elevation}setCenterElevation(e,n){return this.jumpTo({elevation:e},n),this}getCenterClampedToGround(){return this._centerClampedToGround}setCenterClampedToGround(e){this._centerClampedToGround=e}panBy(e,n,l){return e=d.P.convert(e).mult(-1),this.panTo(this.transform.center,d.e({offset:e},n),l)}panTo(e,n,l){return this.easeTo(d.e({center:e},n),l)}getZoom(){return this.transform.zoom}setZoom(e,n){return this.jumpTo({zoom:e},n),this}zoomTo(e,n,l){return this.easeTo(d.e({zoom:e},n),l)}zoomIn(e,n){return this.zoomTo(this.getZoom()+1,e,n),this}zoomOut(e,n){return this.zoomTo(this.getZoom()-1,e,n),this}getVerticalFieldOfView(){return this.transform.fov}setVerticalFieldOfView(e,n){return e!=this.transform.fov&&(this.transform.setFov(e),this.fire(new d.l("movestart",n)).fire(new d.l("move",n)).fire(new d.l("moveend",n))),this}getBearing(){return this.transform.bearing}setBearing(e,n){return this.jumpTo({bearing:e},n),this}getPadding(){return this.transform.padding}setPadding(e,n){return this.jumpTo({padding:e},n),this}rotateTo(e,n,l){return this.easeTo(d.e({bearing:e},n),l)}resetNorth(e,n){return this.rotateTo(0,d.e({duration:1e3},e),n),this}resetNorthPitch(e,n){return this.easeTo(d.e({bearing:0,pitch:0,roll:0,duration:1e3},e),n),this}snapToNorth(e,n){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(e,n):this}getPitch(){return this.transform.pitch}setPitch(e,n){return this.jumpTo({pitch:e},n),this}getRoll(){return this.transform.roll}setRoll(e,n){return this.jumpTo({roll:e},n),this}cameraForBounds(e,n){e=Di.convert(e).adjustAntiMeridian();const l=n&&n.bearing||0;return this._cameraForBoxAndBearing(e.getNorthWest(),e.getSouthEast(),l,n)}_cameraForBoxAndBearing(e,n,l,h){const g={top:0,bottom:0,right:0,left:0};if(typeof(h=d.e({padding:g,offset:[0,0],maxZoom:this.transform.maxZoom},h)).padding=="number"){const z=h.padding;h.padding={top:z,bottom:z,right:z,left:z}}const v=d.e(g,h.padding);h.padding=v;const w=this.transform,C=new Di(e,n);return this.cameraHelper.cameraForBoxAndBearing(h,v,C,l,w)}fitBounds(e,n,l){return this._fitInternal(this.cameraForBounds(e,n),n,l)}fitScreenCoordinates(e,n,l,h,g){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.screenPointToLocation(d.P.convert(e)),this.transform.screenPointToLocation(d.P.convert(n)),l,h),h,g)}_fitInternal(e,n,l){return e?(delete(n=d.e(e,n)).padding,n.linear?this.easeTo(n,l):this.flyTo(n,l)):this}jumpTo(e,n){this.stop();const l=this._getTransformForUpdate();let h=!1,g=!1,v=!1;const w=l.zoom;this.cameraHelper.handleJumpToCenterZoom(l,e);const C=l.zoom!==w;return"elevation"in e&&l.elevation!==+e.elevation&&l.setElevation(+e.elevation),"bearing"in e&&l.bearing!==+e.bearing&&(h=!0,l.setBearing(+e.bearing)),"pitch"in e&&l.pitch!==+e.pitch&&(g=!0,l.setPitch(+e.pitch)),"roll"in e&&l.roll!==+e.roll&&(v=!0,l.setRoll(+e.roll)),e.padding==null||l.isPaddingEqual(e.padding)||l.setPadding(e.padding),this._applyUpdatedTransform(l),this.fire(new d.l("movestart",n)).fire(new d.l("move",n)),C&&this.fire(new d.l("zoomstart",n)).fire(new d.l("zoom",n)).fire(new d.l("zoomend",n)),h&&this.fire(new d.l("rotatestart",n)).fire(new d.l("rotate",n)).fire(new d.l("rotateend",n)),g&&this.fire(new d.l("pitchstart",n)).fire(new d.l("pitch",n)).fire(new d.l("pitchend",n)),v&&this.fire(new d.l("rollstart",n)).fire(new d.l("roll",n)).fire(new d.l("rollend",n)),this.fire(new d.l("moveend",n))}calculateCameraOptionsFromTo(e,n,l,h=0){const g=d.a1.fromLngLat(e,n),v=d.a1.fromLngLat(l,h),w=v.x-g.x,C=v.y-g.y,z=v.z-g.z,k=Math.hypot(w,C,z);if(k===0)throw new Error("Can't calculate camera options with same From and To");const O=Math.hypot(w,C),I=d.ak(this.transform.cameraToCenterDistance/k/this.transform.tileSize),F=180*Math.atan2(w,-C)/Math.PI;let H=180*Math.acos(O/k)/Math.PI;return H=z<0?90-H:90+H,{center:v.toLngLat(),elevation:h,zoom:I,pitch:H,bearing:F}}calculateCameraOptionsFromCameraLngLatAltRotation(e,n,l,h,g){const v=this.transform.calculateCenterFromCameraLngLatAlt(e,n,l,h);return{center:v.center,elevation:v.elevation,zoom:v.zoom,bearing:l,pitch:h,roll:g}}easeTo(e,n){this._stop(!1,e.easeId),((e=d.e({offset:[0,0],duration:500,easing:d.co},e)).animate===!1||!e.essential&&xt.prefersReducedMotion)&&(e.duration=0);const l=this._getTransformForUpdate(),h=this.getBearing(),g=l.pitch,v=l.roll,w="bearing"in e?this._normalizeBearing(e.bearing,h):h,C="pitch"in e?+e.pitch:g,z="roll"in e?this._normalizeBearing(e.roll,v):v,k="padding"in e?e.padding:l.padding,O=d.P.convert(e.offset);let I,F;e.around&&(I=d.S.convert(e.around),F=l.locationToScreenPoint(I));const H={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching,rolling:this._rolling},K=this.cameraHelper.handleEaseTo(l,{bearing:w,pitch:C,roll:z,padding:k,around:I,aroundPoint:F,offsetAsPoint:O,offset:e.offset,zoom:e.zoom,center:e.center});return this._rotating=this._rotating||h!==w,this._pitching=this._pitching||C!==g,this._rolling=this._rolling||z!==v,this._padding=!l.isPaddingEqual(k),this._zooming=this._zooming||K.isZooming,this._easeId=e.easeId,this._prepareEase(n,e.noMoveStart,H),this.terrain&&this._prepareElevation(K.elevationCenter),this._ease((W=>{K.easeFunc(W),this.terrain&&!e.freezeElevation&&this._updateElevation(W),this._applyUpdatedTransform(l),this._fireMoveEvents(n)}),(W=>{this.terrain&&e.freezeElevation&&this._finalizeElevation(),this._afterEase(n,W)}),e),this}_prepareEase(e,n,l={}){this._moving=!0,n||l.moving||this.fire(new d.l("movestart",e)),this._zooming&&!l.zooming&&this.fire(new d.l("zoomstart",e)),this._rotating&&!l.rotating&&this.fire(new d.l("rotatestart",e)),this._pitching&&!l.pitching&&this.fire(new d.l("pitchstart",e)),this._rolling&&!l.rolling&&this.fire(new d.l("rollstart",e))}_prepareElevation(e){this._elevationCenter=e,this._elevationStart=this.transform.elevation,this._elevationTarget=this.terrain.getElevationForLngLatZoom(e,this.transform.tileZoom),this._elevationFreeze=!0}_updateElevation(e){this._elevationStart!==void 0&&this._elevationCenter!==void 0||this._prepareElevation(this.transform.center),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom));const n=this.terrain.getElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);if(e<1&&n!==this._elevationTarget){const l=this._elevationTarget-this._elevationStart;this._elevationStart+=e*(l-(n-(l*e+this._elevationStart))/(1-e)),this._elevationTarget=n}this.transform.setElevation(d.C.number(this._elevationStart,this._elevationTarget,e))}_finalizeElevation(){this._elevationFreeze=!1,this.getCenterClampedToGround()&&this.transform.recalculateZoomAndCenter(this.terrain)}_getTransformForUpdate(){return this.transformCameraUpdate||this.terrain?(this._requestedCameraState||(this._requestedCameraState=this.transform.clone()),this._requestedCameraState):this.transform}_elevateCameraIfInsideTerrain(e){if(!this.terrain&&e.elevation>=0&&e.pitch<=90)return{};const n=e.getCameraLngLat(),l=e.getCameraAltitude(),h=this.terrain?this.terrain.getElevationForLngLatZoom(n,e.zoom):0;if(l<h){const g=this.calculateCameraOptionsFromTo(n,h,e.center,e.elevation);return{pitch:g.pitch,zoom:g.zoom}}return{}}_applyUpdatedTransform(e){const n=[];if(n.push((h=>this._elevateCameraIfInsideTerrain(h))),this.transformCameraUpdate&&n.push((h=>this.transformCameraUpdate(h))),!n.length)return;const l=e.clone();for(const h of n){const g=l.clone(),{center:v,zoom:w,roll:C,pitch:z,bearing:k,elevation:O}=h(g);v&&g.setCenter(v),O!==void 0&&g.setElevation(O),w!==void 0&&g.setZoom(w),C!==void 0&&g.setRoll(C),z!==void 0&&g.setPitch(z),k!==void 0&&g.setBearing(k),l.apply(g)}this.transform.apply(l)}_fireMoveEvents(e){this.fire(new d.l("move",e)),this._zooming&&this.fire(new d.l("zoom",e)),this._rotating&&this.fire(new d.l("rotate",e)),this._pitching&&this.fire(new d.l("pitch",e)),this._rolling&&this.fire(new d.l("roll",e))}_afterEase(e,n){if(this._easeId&&n&&this._easeId===n)return;delete this._easeId;const l=this._zooming,h=this._rotating,g=this._pitching,v=this._rolling;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._rolling=!1,this._padding=!1,l&&this.fire(new d.l("zoomend",e)),h&&this.fire(new d.l("rotateend",e)),g&&this.fire(new d.l("pitchend",e)),v&&this.fire(new d.l("rollend",e)),this.fire(new d.l("moveend",e))}flyTo(e,n){if(!e.essential&&xt.prefersReducedMotion){const Ee=d.Q(e,["center","zoom","bearing","pitch","roll","elevation","padding"]);return this.jumpTo(Ee,n)}this.stop(),e=d.e({offset:[0,0],speed:1.2,curve:1.42,easing:d.co},e);const l=this._getTransformForUpdate(),h=l.bearing,g=l.pitch,v=l.roll,w=l.padding,C="bearing"in e?this._normalizeBearing(e.bearing,h):h,z="pitch"in e?+e.pitch:g,k="roll"in e?this._normalizeBearing(e.roll,v):v,O="padding"in e?e.padding:l.padding,I=d.P.convert(e.offset);let F=l.centerPoint.add(I);const H=l.screenPointToLocation(F),K=this.cameraHelper.handleFlyTo(l,{bearing:C,pitch:z,roll:k,padding:O,locationAtOffset:H,offsetAsPoint:I,center:e.center,minZoom:e.minZoom,zoom:e.zoom});let W=e.curve;const J=Math.max(l.width,l.height),ie=J/K.scaleOfZoom,oe=K.pixelPathLength;typeof K.scaleOfMinZoom=="number"&&(W=Math.sqrt(J/K.scaleOfMinZoom/oe*2));const te=W*W;function le(Ee){const Qe=(ie*ie-J*J+(Ee?-1:1)*te*te*oe*oe)/(2*(Ee?ie:J)*te*oe);return Math.log(Math.sqrt(Qe*Qe+1)-Qe)}function ue(Ee){return(Math.exp(Ee)-Math.exp(-Ee))/2}function ae(Ee){return(Math.exp(Ee)+Math.exp(-Ee))/2}const fe=le(!1);let Ae=function(Ee){return ae(fe)/ae(fe+W*Ee)},we=function(Ee){return J*((ae(fe)*(ue(Qe=fe+W*Ee)/ae(Qe))-ue(fe))/te)/oe;var Qe},Se=(le(!0)-fe)/W;if(Math.abs(oe)<2e-6||!isFinite(Se)){if(Math.abs(J-ie)<1e-6)return this.easeTo(e,n);const Ee=ie<J?-1:1;Se=Math.abs(Math.log(ie/J))/W,we=()=>0,Ae=Qe=>Math.exp(Ee*W*Qe)}return e.duration="duration"in e?+e.duration:1e3*Se/("screenSpeed"in e?+e.screenSpeed/W:+e.speed),e.maxDuration&&e.duration>e.maxDuration&&(e.duration=0),this._zooming=!0,this._rotating=h!==C,this._pitching=z!==g,this._rolling=k!==v,this._padding=!l.isPaddingEqual(O),this._prepareEase(n,!1),this.terrain&&this._prepareElevation(K.targetCenter),this._ease((Ee=>{const Qe=Ee*Se,Ke=1/Ae(Qe),Ne=we(Qe);this._rotating&&l.setBearing(d.C.number(h,C,Ee)),this._pitching&&l.setPitch(d.C.number(g,z,Ee)),this._rolling&&l.setRoll(d.C.number(v,k,Ee)),this._padding&&(l.interpolatePadding(w,O,Ee),F=l.centerPoint.add(I)),K.easeFunc(Ee,Ke,Ne,F),this.terrain&&!e.freezeElevation&&this._updateElevation(Ee),this._applyUpdatedTransform(l),this._fireMoveEvents(n)}),(()=>{this.terrain&&e.freezeElevation&&this._finalizeElevation(),this._afterEase(n)}),e),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(e,n){var l;if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const h=this._onEaseEnd;delete this._onEaseEnd,h.call(this,n)}return e||(l=this.handlers)===null||l===void 0||l.stop(!1),this}_ease(e,n,l){l.animate===!1||l.duration===0?(e(1),n()):(this._easeStart=dt(),this._easeOptions=l,this._onEaseFrame=e,this._onEaseEnd=n,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_normalizeBearing(e,n){e=d.aO(e,-180,180);const l=Math.abs(e-n);return Math.abs(e-360-n)<l&&(e-=360),Math.abs(e+360-n)<l&&(e+=360),e}queryTerrainElevation(e){return this.terrain?this.terrain.getElevationForLngLatZoom(d.S.convert(e),this.transform.tileZoom):null}}const ol={compact:!0,customAttribution:'<a href="https://maplibre.org/" target="_blank">MapLibre</a>'};class Fc{constructor(e=ol){this._toggleAttribution=()=>{this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show")):(this._container.classList.add("maplibregl-compact-show"),this._container.removeAttribute("open")))},this._updateData=n=>{!n||n.sourceDataType!=="metadata"&&n.sourceDataType!=="visibility"&&n.dataType!=="style"&&n.type!=="terrain"||this._updateAttributions()},this._updateCompact=()=>{this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","maplibregl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show"))},this._updateCompactMinimize=()=>{this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show")},this.options=e}getDefaultPosition(){return"bottom-right"}onAdd(e){return this._map=e,this._compact=this.options.compact,this._container=Ce.create("details","maplibregl-ctrl maplibregl-ctrl-attrib"),this._compactButton=Ce.create("summary","maplibregl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=Ce.create("div","maplibregl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){Ce.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(e,n){const l=this._map._getUIString(`AttributionControl.${n}`);e.title=l,e.setAttribute("aria-label",l)}_updateAttributions(){if(!this._map.style)return;let e=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?e=e.concat(this.options.customAttribution.map((h=>typeof h!="string"?"":h))):typeof this.options.customAttribution=="string"&&e.push(this.options.customAttribution)),this._map.style.stylesheet){const h=this._map.style.stylesheet;this.styleOwner=h.owner,this.styleId=h.id}const n=this._map.style.sourceCaches;for(const h in n){const g=n[h];if(g.used||g.usedForTerrain){const v=g.getSource();v.attribution&&e.indexOf(v.attribution)<0&&e.push(v.attribution)}}e=e.filter((h=>String(h).trim())),e.sort(((h,g)=>h.length-g.length)),e=e.filter(((h,g)=>{for(let v=g+1;v<e.length;v++)if(e[v].indexOf(h)>=0)return!1;return!0}));const l=e.join(" | ");l!==this._attribHTML&&(this._attribHTML=l,e.length?(this._innerContainer.innerHTML=Ce.sanitize(l),this._container.classList.remove("maplibregl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty"),this._updateCompact(),this._editLink=null)}}class sl{constructor(e={}){this._updateCompact=()=>{const n=this._container.children;if(n.length){const l=n[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&l.classList.add("maplibregl-compact"):l.classList.remove("maplibregl-compact")}},this.options=e}getDefaultPosition(){return"bottom-left"}onAdd(e){this._map=e,this._compact=this.options&&this.options.compact,this._container=Ce.create("div","maplibregl-ctrl");const n=Ce.create("a","maplibregl-ctrl-logo");return n.target="_blank",n.rel="noopener nofollow",n.href="https://maplibre.org/",n.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),n.setAttribute("rel","noopener nofollow"),this._container.appendChild(n),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){Ce.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}}class Ui{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(e){const n=++this._id;return this._queue.push({callback:e,id:n,cancelled:!1}),n}remove(e){const n=this._currentlyRunning,l=n?this._queue.concat(n):this._queue;for(const h of l)if(h.id===e)return void(h.cancelled=!0)}run(e=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const n=this._currentlyRunning=this._queue;this._queue=[];for(const l of n)if(!l.cancelled&&(l.callback(e),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}var Ya=d.aJ([{name:"a_pos3d",type:"Int16",components:3}]);class Yr extends d.E{constructor(e){super(),this._lastTilesetChange=dt(),this.sourceCache=e,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.minzoom=0,this.maxzoom=22,this.deltaZoom=1,this.tileSize=e._source.tileSize*2**this.deltaZoom,e.usedForTerrain=!0,e.tileSize=this.tileSize}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null}update(e,n){this.sourceCache.update(e,n),this._renderableTilesKeys=[];const l={};for(const h of gt(e,{tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:n,calculateTileZoom:this.sourceCache._source.calculateTileZoom}))l[h.key]=!0,this._renderableTilesKeys.push(h.key),this._tiles[h.key]||(h.terrainRttPosMatrix32f=new Float64Array(16),d.bZ(h.terrainRttPosMatrix32f,0,d.$,d.$,0,0,1),this._tiles[h.key]=new Z(h,this.tileSize),this._lastTilesetChange=dt());for(const h in this._tiles)l[h]||delete this._tiles[h]}freeRtt(e){for(const n in this._tiles){const l=this._tiles[n];(!e||l.tileID.equals(e)||l.tileID.isChildOf(e)||e.isChildOf(l.tileID))&&(l.rtt=[])}}getRenderableTiles(){return this._renderableTilesKeys.map((e=>this.getTileByID(e)))}getTileByID(e){return this._tiles[e]}getTerrainCoords(e,n){return n?this._getTerrainCoordsForTileRanges(e,n):this._getTerrainCoordsForRegularTile(e)}_getTerrainCoordsForRegularTile(e){const n={};for(const l of this._renderableTilesKeys){const h=this._tiles[l].tileID,g=e.clone(),v=d.ba();if(h.canonical.equals(e.canonical))d.bZ(v,0,d.$,d.$,0,0,1);else if(h.canonical.isChildOf(e.canonical)){const w=h.canonical.z-e.canonical.z,C=h.canonical.x-(h.canonical.x>>w<<w),z=h.canonical.y-(h.canonical.y>>w<<w),k=d.$>>w;d.bZ(v,0,k,k,0,0,1),d.M(v,v,[-C*k,-z*k,0])}else{if(!e.canonical.isChildOf(h.canonical))continue;{const w=e.canonical.z-h.canonical.z,C=e.canonical.x-(e.canonical.x>>w<<w),z=e.canonical.y-(e.canonical.y>>w<<w),k=d.$>>w;d.bZ(v,0,d.$,d.$,0,0,1),d.M(v,v,[C*k,z*k,0]),d.N(v,v,[1/2**w,1/2**w,0])}}g.terrainRttPosMatrix32f=new Float32Array(v),n[l]=g}return n}_getTerrainCoordsForTileRanges(e,n){const l={};for(const h of this._renderableTilesKeys){const g=this._tiles[h].tileID;if(!this._isWithinTileRanges(g,n))continue;const v=e.clone(),w=d.ba();if(g.canonical.z===e.canonical.z){const C=e.canonical.x-g.canonical.x,z=e.canonical.y-g.canonical.y;d.bZ(w,0,d.$,d.$,0,0,1),d.M(w,w,[C*d.$,z*d.$,0])}else if(g.canonical.z>e.canonical.z){const C=g.canonical.z-e.canonical.z,z=g.canonical.x-(g.canonical.x>>C<<C),k=g.canonical.y-(g.canonical.y>>C<<C),O=e.canonical.x-(g.canonical.x>>C),I=e.canonical.y-(g.canonical.y>>C),F=d.$>>C;d.bZ(w,0,F,F,0,0,1),d.M(w,w,[-z*F+O*d.$,-k*F+I*d.$,0])}else{const C=e.canonical.z-g.canonical.z,z=e.canonical.x-(e.canonical.x>>C<<C),k=e.canonical.y-(e.canonical.y>>C<<C),O=(e.canonical.x>>C)-g.canonical.x,I=(e.canonical.y>>C)-g.canonical.y,F=d.$<<C;d.bZ(w,0,F,F,0,0,1),d.M(w,w,[z*d.$+O*F,k*d.$+I*F,0])}v.terrainRttPosMatrix32f=new Float32Array(w),l[h]=v}return l}getSourceTile(e,n){const l=this.sourceCache._source;let h=e.overscaledZ-this.deltaZoom;if(h>l.maxzoom&&(h=l.maxzoom),h<l.minzoom)return null;this._sourceTileCache[e.key]||(this._sourceTileCache[e.key]=e.scaledTo(h).key);let g=this.sourceCache.getTileByID(this._sourceTileCache[e.key]);if((!g||!g.dem)&&n)for(;h>=l.minzoom&&(!g||!g.dem);)g=this.sourceCache.getTileByID(e.scaledTo(h--).key);return g}anyTilesAfterTime(e=Date.now()){return this._lastTilesetChange>=e}_isWithinTileRanges(e,n){return n[e.canonical.z]&&e.canonical.x>=n[e.canonical.z].minTileX&&e.canonical.x<=n[e.canonical.z].maxTileX&&e.canonical.y>=n[e.canonical.z].minTileY&&e.canonical.y<=n[e.canonical.z].maxTileY}}class Iu{constructor(e,n,l){this._meshCache={},this.painter=e,this.sourceCache=new Yr(n),this.options=l,this.exaggeration=typeof l.exaggeration=="number"?l.exaggeration:1,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024}getDEMElevation(e,n,l,h=d.$){var g;if(!(n>=0&&n<h&&l>=0&&l<h))return 0;const v=this.getTerrainData(e),w=(g=v.tile)===null||g===void 0?void 0:g.dem;if(!w)return 0;const C=d.cs([],[n/h*d.$,l/h*d.$],v.u_terrain_matrix),z=[C[0]*w.dim,C[1]*w.dim],k=Math.floor(z[0]),O=Math.floor(z[1]),I=z[0]-k,F=z[1]-O;return w.get(k,O)*(1-I)*(1-F)+w.get(k+1,O)*I*(1-F)+w.get(k,O+1)*(1-I)*F+w.get(k+1,O+1)*I*F}getElevationForLngLatZoom(e,n){if(!d.ct(n,e.wrap()))return 0;const{tileID:l,mercatorX:h,mercatorY:g}=this._getOverscaledTileIDFromLngLatZoom(e,n);return this.getElevation(l,h%d.$,g%d.$,d.$)}getElevation(e,n,l,h=d.$){return this.getDEMElevation(e,n,l,h)*this.exaggeration}getTerrainData(e){if(!this._emptyDemTexture){const h=this.painter.context,g=new d.R({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new d.T(h,g,h.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new d.T(h,new d.R({width:1,height:1}),h.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(h.gl.NEAREST,h.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=d.ai([])}const n=this.sourceCache.getSourceTile(e,!0);if(n&&n.dem&&(!n.demTexture||n.needsTerrainPrepare)){const h=this.painter.context;n.demTexture=this.painter.getTileTexture(n.dem.stride),n.demTexture?n.demTexture.update(n.dem.getPixels(),{premultiply:!1}):n.demTexture=new d.T(h,n.dem.getPixels(),h.gl.RGBA,{premultiply:!1}),n.demTexture.bind(h.gl.NEAREST,h.gl.CLAMP_TO_EDGE),n.needsTerrainPrepare=!1}const l=n&&n+n.tileID.key+e.key;if(l&&!this._demMatrixCache[l]){const h=this.sourceCache.sourceCache._source.maxzoom;let g=e.canonical.z-n.tileID.canonical.z;e.overscaledZ>e.canonical.z&&(e.canonical.z>=h?g=e.canonical.z-h:d.w("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const v=e.canonical.x-(e.canonical.x>>g<<g),w=e.canonical.y-(e.canonical.y>>g<<g),C=d.cu(new Float64Array(16),[1/(d.$<<g),1/(d.$<<g),0]);d.M(C,C,[v*d.$,w*d.$,0]),this._demMatrixCache[e.key]={matrix:C,coord:e}}return{u_depth:2,u_terrain:3,u_terrain_dim:n&&n.dem&&n.dem.dim||1,u_terrain_matrix:l?this._demMatrixCache[e.key].matrix:this._emptyDemMatrix,u_terrain_unpack:n&&n.dem&&n.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_exaggeration:this.exaggeration,texture:(n&&n.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:n}}getFramebuffer(e){const n=this.painter,l=n.width/devicePixelRatio,h=n.height/devicePixelRatio;return!this._fbo||this._fbo.width===l&&this._fbo.height===h||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new d.T(n.context,{width:l,height:h,data:null},n.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(n.context.gl.NEAREST,n.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new d.T(n.context,{width:l,height:h,data:null},n.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(n.context.gl.NEAREST,n.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=n.context.createFramebuffer(l,h,!0,!1),this._fbo.depthAttachment.set(n.context.createRenderbuffer(n.context.gl.DEPTH_COMPONENT16,l,h))),this._fbo.colorAttachment.set(e==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const e=this.painter.context;if(this._coordsTexture)return this._coordsTexture;const n=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let g=0,v=0;g<this._coordsTextureSize;g++)for(let w=0;w<this._coordsTextureSize;w++,v+=4)n[v+0]=255&w,n[v+1]=255&g,n[v+2]=w>>8<<4|g>>8,n[v+3]=0;const l=new d.R({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(n.buffer)),h=new d.T(e,l,e.gl.RGBA,{premultiply:!1});return h.bind(e.gl.NEAREST,e.gl.CLAMP_TO_EDGE),this._coordsTexture=h,h}pointCoordinate(e){this.painter.maybeDrawDepthAndCoords(!0);const n=new Uint8Array(4),l=this.painter.context,h=l.gl,g=Math.round(e.x*this.painter.pixelRatio/devicePixelRatio),v=Math.round(e.y*this.painter.pixelRatio/devicePixelRatio),w=Math.round(this.painter.height/devicePixelRatio);l.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),h.readPixels(g,w-v-1,1,1,h.RGBA,h.UNSIGNED_BYTE,n),l.bindFramebuffer.set(null);const C=n[0]+(n[2]>>4<<8),z=n[1]+((15&n[2])<<8),k=this.coordsIndex[255-n[3]],O=k&&this.sourceCache.getTileByID(k);if(!O)return null;const I=this._coordsTextureSize,F=(1<<O.tileID.canonical.z)*I;return new d.a1((O.tileID.canonical.x*I+C)/F+O.tileID.wrap,(O.tileID.canonical.y*I+z)/F,this.getElevation(O.tileID,C,z,I))}depthAtPoint(e){const n=new Uint8Array(4),l=this.painter.context,h=l.gl;return l.bindFramebuffer.set(this.getFramebuffer("depth").framebuffer),h.readPixels(e.x,this.painter.height/devicePixelRatio-e.y-1,1,1,h.RGBA,h.UNSIGNED_BYTE,n),l.bindFramebuffer.set(null),(n[0]/16777216+n[1]/65536+n[2]/256+n[3])/256}getTerrainMesh(e){var n;const l=((n=this.painter.style.projection)===null||n===void 0?void 0:n.transitionState)>0,h=l&&e.canonical.y===0,g=l&&e.canonical.y===(1<<e.canonical.z)-1,v=`m_${h?"n":""}_${g?"s":""}`;if(this._meshCache[v])return this._meshCache[v];const w=this.painter.context,C=new d.cv,z=new d.aN,k=this.meshSize,O=d.$/k,I=k*k;for(let ae=0;ae<=k;ae++)for(let fe=0;fe<=k;fe++)C.emplaceBack(fe*O,ae*O,0);for(let ae=0;ae<I;ae+=k+1)for(let fe=0;fe<k;fe++)z.emplaceBack(fe+ae,k+fe+ae+1,k+fe+ae+2),z.emplaceBack(fe+ae,k+fe+ae+2,fe+ae+1);const F=C.length,H=F+(k+1),K=(k+1)*k,W=h?d.bh:0,J=h?0:1,ie=g?d.bi:d.$,oe=g?0:1;for(let ae=0;ae<=k;ae++)C.emplaceBack(ae*O,W,J);for(let ae=0;ae<=k;ae++)C.emplaceBack(ae*O,ie,oe);for(let ae=0;ae<k;ae++)z.emplaceBack(K+ae,H+ae,H+ae+1),z.emplaceBack(K+ae,H+ae+1,K+ae+1),z.emplaceBack(0+ae,F+ae+1,F+ae),z.emplaceBack(0+ae,0+ae+1,F+ae+1);const te=C.length,le=te+2*(k+1);for(const ae of[0,1])for(let fe=0;fe<=k;fe++)for(const Ae of[0,1])C.emplaceBack(ae*d.$,fe*O,Ae);for(let ae=0;ae<2*k;ae+=2)z.emplaceBack(te+ae,te+ae+1,te+ae+3),z.emplaceBack(te+ae,te+ae+3,te+ae+2),z.emplaceBack(le+ae,le+ae+3,le+ae+1),z.emplaceBack(le+ae,le+ae+2,le+ae+3);const ue=new Dn(w.createVertexBuffer(C,Ya.members),w.createIndexBuffer(z),d.aM.simpleSegment(0,0,C.length,z.length));return this._meshCache[v]=ue,ue}getMeshFrameDelta(e){return 2*Math.PI*d.bu/Math.pow(2,Math.max(e,0))/5}getMinTileElevationForLngLatZoom(e,n){var l;const{tileID:h}=this._getOverscaledTileIDFromLngLatZoom(e,n);return(l=this.getMinMaxElevation(h).minElevation)!==null&&l!==void 0?l:0}getMinMaxElevation(e){const n=this.getTerrainData(e).tile,l={minElevation:null,maxElevation:null};return n&&n.dem&&(l.minElevation=n.dem.min*this.exaggeration,l.maxElevation=n.dem.max*this.exaggeration),l}_getOverscaledTileIDFromLngLatZoom(e,n){const l=d.a1.fromLngLat(e.wrap()),h=(1<<n)*d.$,g=l.x*h,v=l.y*h,w=Math.floor(g/d.$),C=Math.floor(v/d.$);return{tileID:new d.Z(n,0,n,w,C),mercatorX:g,mercatorY:v}}}class Pd{constructor(e,n,l){this._context=e,this._size=n,this._tileSize=l,this._objects=[],this._recentlyUsed=[],this._stamp=0}destruct(){for(const e of this._objects)e.texture.destroy(),e.fbo.destroy()}_createObject(e){const n=this._context.createFramebuffer(this._tileSize,this._tileSize,!0,!0),l=new d.T(this._context,{width:this._tileSize,height:this._tileSize,data:null},this._context.gl.RGBA);return l.bind(this._context.gl.LINEAR,this._context.gl.CLAMP_TO_EDGE),this._context.extTextureFilterAnisotropic&&this._context.gl.texParameterf(this._context.gl.TEXTURE_2D,this._context.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,this._context.extTextureFilterAnisotropicMax),n.depthAttachment.set(this._context.createRenderbuffer(this._context.gl.DEPTH_STENCIL,this._tileSize,this._tileSize)),n.colorAttachment.set(l.texture),{id:e,fbo:n,texture:l,stamp:-1,inUse:!1}}getObjectForId(e){return this._objects[e]}useObject(e){e.inUse=!0,this._recentlyUsed=this._recentlyUsed.filter((n=>e.id!==n)),this._recentlyUsed.push(e.id)}stampObject(e){e.stamp=++this._stamp}getOrCreateFreeObject(){for(const n of this._recentlyUsed)if(!this._objects[n].inUse)return this._objects[n];if(this._objects.length>=this._size)throw new Error("No free RenderPool available, call freeAllObjects() required!");const e=this._createObject(this._objects.length);return this._objects.push(e),e}freeObject(e){e.inUse=!1}freeAllObjects(){for(const e of this._objects)this.freeObject(e)}isFull(){return!(this._objects.length<this._size)&&this._objects.some((e=>!e.inUse))===!1}}const Qa={background:!0,fill:!0,line:!0,raster:!0,hillshade:!0,"color-relief":!0};class Ka{constructor(e,n){this.painter=e,this.terrain=n,this.pool=new Pd(e.context,30,n.sourceCache.tileSize*n.qualityFactor)}destruct(){this.pool.destruct()}getTexture(e){return this.pool.getObjectForId(e.rtt[this._stacks.length-1].id).texture}prepareForRender(e,n){this._stacks=[],this._prevType=null,this._rttTiles=[],this._renderableTiles=this.terrain.sourceCache.getRenderableTiles(),this._renderableLayerIds=e._order.filter((l=>!e._layers[l].isHidden(n))),this._coordsAscending={};for(const l in e.sourceCaches){this._coordsAscending[l]={};const h=e.sourceCaches[l].getVisibleCoordinates(),g=e.sourceCaches[l].getSource(),v=g instanceof zn?g.terrainTileRanges:null;for(const w of h){const C=this.terrain.sourceCache.getTerrainCoords(w,v);for(const z in C)this._coordsAscending[l][z]||(this._coordsAscending[l][z]=[]),this._coordsAscending[l][z].push(C[z])}}this._coordsAscendingStr={};for(const l of e._order){const h=e._layers[l],g=h.source;if(Qa[h.type]&&!this._coordsAscendingStr[g]){this._coordsAscendingStr[g]={};for(const v in this._coordsAscending[g])this._coordsAscendingStr[g][v]=this._coordsAscending[g][v].map((w=>w.key)).sort().join()}}for(const l of this._renderableTiles)for(const h in this._coordsAscendingStr){const g=this._coordsAscendingStr[h][l.tileID.key];g&&g!==l.rttCoords[h]&&(l.rtt=[])}}renderLayer(e,n){if(e.isHidden(this.painter.transform.zoom))return!1;const l=Object.assign(Object.assign({},n),{isRenderingToTexture:!0}),h=e.type,g=this.painter,v=this._renderableLayerIds[this._renderableLayerIds.length-1]===e.id;if(Qa[h]&&(this._prevType&&Qa[this._prevType]||this._stacks.push([]),this._prevType=h,this._stacks[this._stacks.length-1].push(e.id),!v))return!0;if(Qa[this._prevType]||Qa[h]&&v){this._prevType=h;const w=this._stacks.length-1,C=this._stacks[w]||[];for(const z of this._renderableTiles){if(this.pool.isFull()&&(co(this.painter,this.terrain,this._rttTiles,l),this._rttTiles=[],this.pool.freeAllObjects()),this._rttTiles.push(z),z.rtt[w]){const O=this.pool.getObjectForId(z.rtt[w].id);if(O.stamp===z.rtt[w].stamp){this.pool.useObject(O);continue}}const k=this.pool.getOrCreateFreeObject();this.pool.useObject(k),this.pool.stampObject(k),z.rtt[w]={id:k.id,stamp:k.stamp},g.context.bindFramebuffer.set(k.fbo.framebuffer),g.context.clear({color:d.bf.transparent,stencil:0}),g.currentStencilSource=void 0;for(let O=0;O<C.length;O++){const I=g.style._layers[C[O]],F=I.source?this._coordsAscending[I.source][z.tileID.key]:[z.tileID];g.context.viewport.set([0,0,k.fbo.width,k.fbo.height]),g._renderTileClippingMasks(I,F,!0),g.renderLayer(g,g.style.sourceCaches[I.source],I,F,l),I.source&&(z.rttCoords[I.source]=this._coordsAscendingStr[I.source][z.tileID.key])}}return co(this.painter,this.terrain,this._rttTiles,l),this._rttTiles=[],this.pool.freeAllObjects(),Qa[h]}return!1}}const Ki={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"MapLibre logo","Map.Title":"Map","Marker.Title":"Map marker","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","Popup.Close":"Close popup","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","GlobeControl.Enable":"Enable globe","GlobeControl.Disable":"Disable globe","TerrainControl.Enable":"Enable terrain","TerrainControl.Disable":"Disable terrain","CooperativeGesturesHandler.WindowsHelpText":"Use Ctrl + scroll to zoom the map","CooperativeGesturesHandler.MacHelpText":"Use  + scroll to zoom the map","CooperativeGesturesHandler.MobileHelpText":"Use two fingers to move the map"},Zi=ye,xi={hash:!1,interactive:!0,bearingSnap:7,attributionControl:ol,maplibreLogo:!1,refreshExpiredTiles:!0,canvasContextAttributes:{antialias:!1,preserveDrawingBuffer:!1,powerPreference:"high-performance",failIfMajorPerformanceCaveat:!1,desynchronized:!1,contextType:void 0},scrollZoom:!0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,trackResize:!0,center:[0,0],elevation:0,zoom:0,bearing:0,pitch:0,roll:0,renderWorldCopies:!0,maxTileCacheSize:null,maxTileCacheZoomLevels:d.a.MAX_TILE_CACHE_ZOOM_LEVELS,transformRequest:null,transformCameraUpdate:null,transformConstrain:null,fadeDuration:300,crossSourceCollisions:!0,clickTolerance:3,localIdeographFontFamily:"sans-serif",pitchWithRotate:!0,rollEnabled:!1,validateStyle:!0,maxCanvasSize:[4096,4096],cancelPendingTileRequestsWhileZooming:!0,centerClampedToGround:!0},Qt={showCompass:!0,showZoom:!0,visualizePitch:!1,visualizeRoll:!0};class gi{constructor(e,n,l=!1){this.mousedown=g=>{this.startMove(g,Ce.mousePos(this.element,g)),Ce.addEventListener(window,"mousemove",this.mousemove),Ce.addEventListener(window,"mouseup",this.mouseup)},this.mousemove=g=>{this.move(g,Ce.mousePos(this.element,g))},this.mouseup=g=>{this._rotatePitchHandler.dragEnd(g),this.offTemp()},this.touchstart=g=>{g.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=Ce.touchPos(this.element,g.targetTouches)[0],this.startMove(g,this._startPos),Ce.addEventListener(window,"touchmove",this.touchmove,{passive:!1}),Ce.addEventListener(window,"touchend",this.touchend))},this.touchmove=g=>{g.targetTouches.length!==1?this.reset():(this._lastPos=Ce.touchPos(this.element,g.targetTouches)[0],this.move(g,this._lastPos))},this.touchend=g=>{g.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),delete this._startPos,delete this._lastPos,this.offTemp()},this.reset=()=>{this._rotatePitchHandler.reset(),delete this._startPos,delete this._lastPos,this.offTemp()},this._clickTolerance=10,this.element=n;const h=new xs;this._rotatePitchHandler=new Fn({clickTolerance:3,move:(g,v)=>{const w=n.getBoundingClientRect(),C=new d.P((w.bottom-w.top)/2,(w.right-w.left)/2);return{bearingDelta:d.cn(new d.P(g.x,v.y),v,C),pitchDelta:l?-.5*(v.y-g.y):void 0}},moveStateManager:h,enable:!0,assignEvents:()=>{}}),this.map=e,Ce.addEventListener(n,"mousedown",this.mousedown),Ce.addEventListener(n,"touchstart",this.touchstart,{passive:!1}),Ce.addEventListener(n,"touchcancel",this.reset)}startMove(e,n){this._rotatePitchHandler.dragStart(e,n),Ce.disableDrag()}move(e,n){const l=this.map,{bearingDelta:h,pitchDelta:g}=this._rotatePitchHandler.dragMove(e,n)||{};h&&l.setBearing(l.getBearing()+h),g&&l.setPitch(l.getPitch()+g)}off(){const e=this.element;Ce.removeEventListener(e,"mousedown",this.mousedown),Ce.removeEventListener(e,"touchstart",this.touchstart,{passive:!1}),Ce.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),Ce.removeEventListener(window,"touchend",this.touchend),Ce.removeEventListener(e,"touchcancel",this.reset),this.offTemp()}offTemp(){Ce.enableDrag(),Ce.removeEventListener(window,"mousemove",this.mousemove),Ce.removeEventListener(window,"mouseup",this.mouseup),Ce.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),Ce.removeEventListener(window,"touchend",this.touchend)}}let Ai;function ll(p,e,n,l=!1){if(l||!n.getCoveringTilesDetailsProvider().allowWorldCopies())return p?.wrap();const h=new d.S(p.lng,p.lat);if(p=new d.S(p.lng,p.lat),e){const g=new d.S(p.lng-360,p.lat),v=new d.S(p.lng+360,p.lat),w=n.locationToScreenPoint(p).distSqr(e);n.locationToScreenPoint(g).distSqr(e)<w?p=g:n.locationToScreenPoint(v).distSqr(e)<w&&(p=v)}for(;Math.abs(p.lng-n.center.lng)>180;){const g=n.locationToScreenPoint(p);if(g.x>=0&&g.y>=0&&g.x<=n.width&&g.y<=n.height)break;p.lng>n.center.lng?p.lng-=360:p.lng+=360}return p.lng!==h.lng&&n.isPointOnMapSurface(n.locationToScreenPoint(p))?p:h}const uo={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function ho(p,e,n){const l=p.classList;for(const h in uo)l.remove(`maplibregl-${n}-anchor-${h}`);l.add(`maplibregl-${n}-anchor-${e}`)}class po extends d.E{constructor(e){if(super(),this._onKeyPress=n=>{const l=n.code,h=n.charCode||n.keyCode;l!=="Space"&&l!=="Enter"&&h!==32&&h!==13||this.togglePopup()},this._onMapClick=n=>{const l=n.originalEvent.target,h=this._element;this._popup&&(l===h||h.contains(l))&&this.togglePopup()},this._update=n=>{if(!this._map)return;const l=this._map.loaded()&&!this._map.isMoving();(n?.type==="terrain"||n?.type==="render"&&!l)&&this._map.once("render",this._update),this._lngLat=ll(this._lngLat,this._flatPos,this._map.transform),this._flatPos=this._pos=this._map.project(this._lngLat)._add(this._offset),this._map.terrain&&(this._flatPos=this._map.transform.locationToScreenPoint(this._lngLat)._add(this._offset));let h="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?h=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(h=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let g="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?g="rotateX(0deg)":this._pitchAlignment==="map"&&(g=`rotateX(${this._map.getPitch()}deg)`),this._subpixelPositioning||n&&n.type!=="moveend"||(this._pos=this._pos.round()),Ce.setTransform(this._element,`${uo[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${g} ${h}`),xt.frameAsync(new AbortController).then((()=>{this._updateOpacity(n&&n.type==="moveend")})).catch((()=>{}))},this._onMove=n=>{if(!this._isDragging){const l=this._clickTolerance||this._map._clickTolerance;this._isDragging=n.point.dist(this._pointerdownPos)>=l}this._isDragging&&(this._pos=n.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new d.l("dragstart"))),this.fire(new d.l("drag")))},this._onUp=()=>{this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new d.l("dragend")),this._state="inactive"},this._addDragHandler=n=>{this._element.contains(n.originalEvent.target)&&(n.preventDefault(),this._positionDelta=n.point.sub(this._pos).add(this._offset),this._pointerdownPos=n.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},this._anchor=e&&e.anchor||"center",this._color=e&&e.color||"#3FB1CE",this._scale=e&&e.scale||1,this._draggable=e&&e.draggable||!1,this._clickTolerance=e&&e.clickTolerance||0,this._subpixelPositioning=e&&e.subpixelPositioning||!1,this._isDragging=!1,this._state="inactive",this._rotation=e&&e.rotation||0,this._rotationAlignment=e&&e.rotationAlignment||"auto",this._pitchAlignment=e&&e.pitchAlignment&&e.pitchAlignment!=="auto"?e.pitchAlignment:this._rotationAlignment,this.setOpacity(e?.opacity,e?.opacityWhenCovered),e&&e.element)this._element=e.element,this._offset=d.P.convert(e&&e.offset||[0,0]);else{this._defaultMarker=!0,this._element=Ce.create("div");const n=Ce.createNS("http://www.w3.org/2000/svg","svg"),l=41,h=27;n.setAttributeNS(null,"display","block"),n.setAttributeNS(null,"height",`${l}px`),n.setAttributeNS(null,"width",`${h}px`),n.setAttributeNS(null,"viewBox",`0 0 ${h} ${l}`);const g=Ce.createNS("http://www.w3.org/2000/svg","g");g.setAttributeNS(null,"stroke","none"),g.setAttributeNS(null,"stroke-width","1"),g.setAttributeNS(null,"fill","none"),g.setAttributeNS(null,"fill-rule","evenodd");const v=Ce.createNS("http://www.w3.org/2000/svg","g");v.setAttributeNS(null,"fill-rule","nonzero");const w=Ce.createNS("http://www.w3.org/2000/svg","g");w.setAttributeNS(null,"transform","translate(3.0, 29.0)"),w.setAttributeNS(null,"fill","#000000");const C=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const J of C){const ie=Ce.createNS("http://www.w3.org/2000/svg","ellipse");ie.setAttributeNS(null,"opacity","0.04"),ie.setAttributeNS(null,"cx","10.5"),ie.setAttributeNS(null,"cy","5.80029008"),ie.setAttributeNS(null,"rx",J.rx),ie.setAttributeNS(null,"ry",J.ry),w.appendChild(ie)}const z=Ce.createNS("http://www.w3.org/2000/svg","g");z.setAttributeNS(null,"fill",this._color);const k=Ce.createNS("http://www.w3.org/2000/svg","path");k.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),z.appendChild(k);const O=Ce.createNS("http://www.w3.org/2000/svg","g");O.setAttributeNS(null,"opacity","0.25"),O.setAttributeNS(null,"fill","#000000");const I=Ce.createNS("http://www.w3.org/2000/svg","path");I.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),O.appendChild(I);const F=Ce.createNS("http://www.w3.org/2000/svg","g");F.setAttributeNS(null,"transform","translate(6.0, 7.0)"),F.setAttributeNS(null,"fill","#FFFFFF");const H=Ce.createNS("http://www.w3.org/2000/svg","g");H.setAttributeNS(null,"transform","translate(8.0, 8.0)");const K=Ce.createNS("http://www.w3.org/2000/svg","circle");K.setAttributeNS(null,"fill","#000000"),K.setAttributeNS(null,"opacity","0.25"),K.setAttributeNS(null,"cx","5.5"),K.setAttributeNS(null,"cy","5.5"),K.setAttributeNS(null,"r","5.4999962");const W=Ce.createNS("http://www.w3.org/2000/svg","circle");W.setAttributeNS(null,"fill","#FFFFFF"),W.setAttributeNS(null,"cx","5.5"),W.setAttributeNS(null,"cy","5.5"),W.setAttributeNS(null,"r","5.4999962"),H.appendChild(K),H.appendChild(W),v.appendChild(w),v.appendChild(z),v.appendChild(O),v.appendChild(F),v.appendChild(H),n.appendChild(v),n.setAttributeNS(null,"height",l*this._scale+"px"),n.setAttributeNS(null,"width",h*this._scale+"px"),this._element.appendChild(n),this._offset=d.P.convert(e&&e.offset||[0,-14])}if(this._element.classList.add("maplibregl-marker"),this._element.addEventListener("dragstart",(n=>{n.preventDefault()})),this._element.addEventListener("mousedown",(n=>{n.preventDefault()})),ho(this._element,this._anchor,"marker"),e&&e.className)for(const n of e.className.split(" "))this._element.classList.add(n);this._popup=null}addTo(e){return this.remove(),this._map=e,this._element.hasAttribute("aria-label")||this._element.setAttribute("aria-label",e._getUIString("Marker.Title")),this._element.hasAttribute("role")||this._element.setAttribute("role","button"),e.getCanvasContainer().appendChild(this._element),e.on("move",this._update),e.on("moveend",this._update),e.on("terrain",this._update),e.on("projectiontransition",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("terrain",this._update),this._map.off("projectiontransition",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),Ce.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(e){return this._lngLat=d.S.convert(e),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(e){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),e){if(!("offset"in e.options)){const h=Math.abs(13.5)/Math.SQRT2;e.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[h,-1*(38.1-13.5+h)],"bottom-right":[-h,-1*(38.1-13.5+h)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=e,this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}setSubpixelPositioning(e){return this._subpixelPositioning=e,this}getPopup(){return this._popup}togglePopup(){const e=this._popup;return this._element.style.opacity===this._opacityWhenCovered?this:e?(e.isOpen()?e.remove():(e.setLngLat(this._lngLat),e.addTo(this._map)),this):this}_updateOpacity(e=!1){var n,l;const h=(n=this._map)===null||n===void 0?void 0:n.terrain,g=this._map.transform.isLocationOccluded(this._lngLat);if(!h||g){const F=g?this._opacityWhenCovered:this._opacity;return void(this._element.style.opacity!==F&&(this._element.style.opacity=F))}if(e)this._opacityTimeout=null;else{if(this._opacityTimeout)return;this._opacityTimeout=setTimeout((()=>{this._opacityTimeout=null}),100)}const v=this._map,w=v.terrain.depthAtPoint(this._pos),C=v.terrain.getElevationForLngLatZoom(this._lngLat,v.transform.tileZoom);if(v.transform.lngLatToCameraDepth(this._lngLat,C)-w<.006)return void(this._element.style.opacity=this._opacity);const z=-this._offset.y/v.transform.pixelsPerMeter,k=Math.sin(v.getPitch()*Math.PI/180)*z,O=v.terrain.depthAtPoint(new d.P(this._pos.x,this._pos.y-this._offset.y)),I=v.transform.lngLatToCameraDepth(this._lngLat,C+k)-O>.006;!((l=this._popup)===null||l===void 0)&&l.isOpen()&&I&&this._popup.remove(),this._element.style.opacity=I?this._opacityWhenCovered:this._opacity}getOffset(){return this._offset}setOffset(e){return this._offset=d.P.convert(e),this._update(),this}addClassName(e){this._element.classList.add(e)}removeClassName(e){this._element.classList.remove(e)}toggleClassName(e){return this._element.classList.toggle(e)}setDraggable(e){return this._draggable=!!e,this._map&&(e?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(e){return this._rotation=e||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(e){return this._rotationAlignment=e||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(e){return this._pitchAlignment=e&&e!=="auto"?e:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}setOpacity(e,n){return(this._opacity===void 0||e===void 0&&n===void 0)&&(this._opacity="1",this._opacityWhenCovered="0.2"),e!==void 0&&(this._opacity=e),n!==void 0&&(this._opacityWhenCovered=n),this._map&&this._updateOpacity(!0),this}}const cl={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let Hn=0,ul=!1;const tr={maxWidth:100,unit:"metric"};function Xl(p,e,n){const l=n&&n.maxWidth||100,h=p._container.clientHeight/2,g=p._container.clientWidth/2,v=p.unproject([g-l/2,h]),w=p.unproject([g+l/2,h]),C=Math.round(p.project(w).x-p.project(v).x),z=Math.min(l,C,p._container.clientWidth),k=v.distanceTo(w);if(n&&n.unit==="imperial"){const O=3.2808*k;O>5280?Oo(e,z,O/5280,p._getUIString("ScaleControl.Miles")):Oo(e,z,O,p._getUIString("ScaleControl.Feet"))}else n&&n.unit==="nautical"?Oo(e,z,k/1852,p._getUIString("ScaleControl.NauticalMiles")):k>=1e3?Oo(e,z,k/1e3,p._getUIString("ScaleControl.Kilometers")):Oo(e,z,k,p._getUIString("ScaleControl.Meters"))}function Oo(p,e,n,l){const h=(function(g){const v=Math.pow(10,`${Math.floor(g)}`.length-1);let w=g/v;return w=w>=10?10:w>=5?5:w>=3?3:w>=2?2:w>=1?1:(function(C){const z=Math.pow(10,Math.ceil(-Math.log(C)/Math.LN10));return Math.round(C*z)/z})(w),v*w})(n);p.style.width=e*(h/n)+"px",p.innerHTML=`${h}&nbsp;${l}`}const Ru={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px",subpixelPositioning:!1,locationOccludedOpacity:void 0},Bu=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function Ou(p){if(p){if(typeof p=="number"){const e=Math.round(Math.abs(p)/Math.SQRT2);return{center:new d.P(0,0),top:new d.P(0,p),"top-left":new d.P(e,e),"top-right":new d.P(-e,e),bottom:new d.P(0,-p),"bottom-left":new d.P(e,-e),"bottom-right":new d.P(-e,-e),left:new d.P(p,0),right:new d.P(-p,0)}}if(p instanceof d.P||Array.isArray(p)){const e=d.P.convert(p);return{center:e,top:e,"top-left":e,"top-right":e,bottom:e,"bottom-left":e,"bottom-right":e,left:e,right:e}}return{center:d.P.convert(p.center||[0,0]),top:d.P.convert(p.top||[0,0]),"top-left":d.P.convert(p["top-left"]||[0,0]),"top-right":d.P.convert(p["top-right"]||[0,0]),bottom:d.P.convert(p.bottom||[0,0]),"bottom-left":d.P.convert(p["bottom-left"]||[0,0]),"bottom-right":d.P.convert(p["bottom-right"]||[0,0]),left:d.P.convert(p.left||[0,0]),right:d.P.convert(p.right||[0,0])}}return Ou(new d.P(0,0))}const Yl=ye;M.AJAXError=d.cz,M.Event=d.l,M.Evented=d.E,M.LngLat=d.S,M.MercatorCoordinate=d.a1,M.Point=d.P,M.addProtocol=d.cA,M.config=d.a,M.removeProtocol=d.cB,M.AttributionControl=Fc,M.BoxZoomHandler=zd,M.CanvasSource=eo,M.CooperativeGesturesHandler=al,M.DoubleClickZoomHandler=bi,M.DragPanHandler=Ms,M.DragRotateHandler=Vc,M.EdgeInsets=fr,M.FullscreenControl=class extends d.E{constructor(p={}){super(),this._onFullscreenChange=()=>{var e;let n=window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement;for(;!((e=n?.shadowRoot)===null||e===void 0)&&e.fullscreenElement;)n=n.shadowRoot.fullscreenElement;n===this._container!==this._fullscreen&&this._handleFullscreenChange()},this._onClickFullscreen=()=>{this._isFullscreen()?this._exitFullscreen():this._requestFullscreen()},this._fullscreen=!1,p&&p.container&&(p.container instanceof HTMLElement?this._container=p.container:d.w("Full screen control 'container' must be a DOM element.")),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(p){return this._map=p,this._container||(this._container=this._map.getContainer()),this._controlContainer=Ce.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),this._controlContainer}onRemove(){Ce.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._onFullscreenChange)}_setupUI(){const p=this._fullscreenButton=Ce.create("button","maplibregl-ctrl-fullscreen",this._controlContainer);Ce.create("span","maplibregl-ctrl-icon",p).setAttribute("aria-hidden","true"),p.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._onFullscreenChange)}_updateTitle(){const p=this._getTitle();this._fullscreenButton.setAttribute("aria-label",p),this._fullscreenButton.title=p}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_handleFullscreenChange(){this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._updateTitle(),this._fullscreen?(this.fire(new d.l("fullscreenstart")),this._prevCooperativeGesturesEnabled=this._map.cooperativeGestures.isEnabled(),this._map.cooperativeGestures.disable()):(this.fire(new d.l("fullscreenend")),this._prevCooperativeGesturesEnabled&&this._map.cooperativeGestures.enable())}_exitFullscreen(){window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen?window.document.webkitCancelFullScreen():this._togglePseudoFullScreen()}_requestFullscreen(){this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen?this._container.webkitRequestFullscreen():this._togglePseudoFullScreen()}_togglePseudoFullScreen(){this._container.classList.toggle("maplibregl-pseudo-fullscreen"),this._handleFullscreenChange(),this._map.resize()}},M.GeoJSONSource=is,M.GeolocateControl=class extends d.E{constructor(p){super(),this._onSuccess=e=>{if(this._map){if(this._isOutOfMapMaxBounds(e))return this._setErrorState(),this.fire(new d.l("outofmaxbounds",e)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=e,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(e),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(e),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale"),this.fire(new d.l("geolocate",e)),this._finish()}},this._updateCamera=e=>{const n=new d.S(e.coords.longitude,e.coords.latitude),l=e.coords.accuracy,h=this._map.getBearing(),g=d.e({bearing:h},this.options.fitBoundsOptions),v=Di.fromLngLat(n,l);this._map.fitBounds(v,g,{geolocateSource:!0})},this._updateMarker=e=>{if(e){const n=new d.S(e.coords.longitude,e.coords.latitude);this._accuracyCircleMarker.setLngLat(n).addTo(this._map),this._userLocationDotMarker.setLngLat(n).addTo(this._map),this._accuracy=e.coords.accuracy,this._updateCircleRadiusIfNeeded()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},this._onUpdate=()=>{this._updateCircleRadiusIfNeeded()},this._onError=e=>{if(this._map){if(e.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const n=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=n,this._geolocateButton.setAttribute("aria-label",n),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(e.code===3&&ul)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale"),this.fire(new d.l("error",e)),this._finish()}},this._finish=()=>{this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},this._setupUI=()=>{this._map&&(this._container.addEventListener("contextmenu",(e=>e.preventDefault())),this._geolocateButton=Ce.create("button","maplibregl-ctrl-geolocate",this._container),Ce.create("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",this._geolocateButton.disabled=!0)},this._finishSetupUI=e=>{if(this._map){if(e===!1){d.w("Geolocation support is not available so the GeolocateControl will be disabled.");const n=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=n,this._geolocateButton.setAttribute("aria-label",n)}else{const n=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.disabled=!1,this._geolocateButton.title=n,this._geolocateButton.setAttribute("aria-label",n)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=Ce.create("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new po({element:this._dotElement}),this._circleElement=Ce.create("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new po({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onUpdate),this._map.on("move",this._onUpdate),this._map.on("rotate",this._onUpdate),this._map.on("pitch",this._onUpdate)),this._geolocateButton.addEventListener("click",(()=>this.trigger())),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",(n=>{const l=n?.[0]instanceof ResizeObserverEntry;n.geolocateSource||this._watchState!=="ACTIVE_LOCK"||l||this._map.isZooming()||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new d.l("trackuserlocationend")),this.fire(new d.l("userlocationlostfocus")))}))}},this.options=d.e({},cl,p)}onAdd(p){return this._map=p,this._container=Ce.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),(function(){return d._(this,arguments,void 0,(function*(e=!1){if(Ai!==void 0&&!e)return Ai;if(window.navigator.permissions===void 0)return Ai=!!window.navigator.geolocation,Ai;try{Ai=(yield window.navigator.permissions.query({name:"geolocation"})).state!=="denied"}catch{Ai=!!window.navigator.geolocation}return Ai}))})().then((e=>this._finishSetupUI(e))),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),Ce.remove(this._container),this._map.off("zoom",this._onUpdate),this._map.off("move",this._onUpdate),this._map.off("rotate",this._onUpdate),this._map.off("pitch",this._onUpdate),this._map=void 0,Hn=0,ul=!1}_isOutOfMapMaxBounds(p){const e=this._map.getMaxBounds(),n=p.coords;return e&&(n.longitude<e.getWest()||n.longitude>e.getEast()||n.latitude<e.getSouth()||n.latitude>e.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":case"BACKGROUND_ERROR":case"OFF":case void 0:break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_updateCircleRadiusIfNeeded(){const p=this._userLocationDotMarker.getLngLat();if(!(this.options.showUserLocation&&this.options.showAccuracyCircle&&this._accuracy&&p))return;const e=this._map.project(p),n=this._map.unproject([e.x+100,e.y]),l=p.distanceTo(n)/100,h=2*this._accuracy/l;this._circleElement.style.width=`${h.toFixed(2)}px`,this._circleElement.style.height=`${h.toFixed(2)}px`}trigger(){if(!this._setup)return d.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new d.l("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":Hn--,ul=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this.fire(new d.l("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new d.l("trackuserlocationstart")),this.fire(new d.l("userlocationfocus"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let p;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),Hn++,Hn>1?(p={maximumAge:6e5,timeout:0},ul=!0):(p=this.options.positionOptions,ul=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,p)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},M.GlobeControl=class{constructor(){this._toggleProjection=()=>{var p;const e=(p=this._map.getProjection())===null||p===void 0?void 0:p.type;this._map.setProjection(e!=="mercator"&&e?{type:"mercator"}:{type:"globe"}),this._updateGlobeIcon()},this._updateGlobeIcon=()=>{var p;this._globeButton.classList.remove("maplibregl-ctrl-globe"),this._globeButton.classList.remove("maplibregl-ctrl-globe-enabled"),((p=this._map.getProjection())===null||p===void 0?void 0:p.type)==="globe"?(this._globeButton.classList.add("maplibregl-ctrl-globe-enabled"),this._globeButton.title=this._map._getUIString("GlobeControl.Disable")):(this._globeButton.classList.add("maplibregl-ctrl-globe"),this._globeButton.title=this._map._getUIString("GlobeControl.Enable"))}}onAdd(p){return this._map=p,this._container=Ce.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._globeButton=Ce.create("button","maplibregl-ctrl-globe",this._container),Ce.create("span","maplibregl-ctrl-icon",this._globeButton).setAttribute("aria-hidden","true"),this._globeButton.type="button",this._globeButton.addEventListener("click",this._toggleProjection),this._updateGlobeIcon(),this._map.on("styledata",this._updateGlobeIcon),this._container}onRemove(){Ce.remove(this._container),this._map.off("styledata",this._updateGlobeIcon),this._globeButton.removeEventListener("click",this._toggleProjection),this._map=void 0}},M.Hash=Xa,M.ImageSource=zn,M.KeyboardHandler=Eh,M.LngLatBounds=Di,M.LogoControl=sl,M.Map=class extends yt{constructor(p){var e,n;d.cw.mark(d.cx.create);const l=Object.assign(Object.assign(Object.assign({},xi),p),{canvasContextAttributes:Object.assign(Object.assign({},xi.canvasContextAttributes),p.canvasContextAttributes)});if(l.minZoom!=null&&l.maxZoom!=null&&l.minZoom>l.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(l.minPitch!=null&&l.maxPitch!=null&&l.minPitch>l.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(l.minPitch!=null&&l.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(l.maxPitch!=null&&l.maxPitch>180)throw new Error("maxPitch must be less than or equal to 180");const h=new Br,g=new $i;if(l.minZoom!==void 0&&h.setMinZoom(l.minZoom),l.maxZoom!==void 0&&h.setMaxZoom(l.maxZoom),l.minPitch!==void 0&&h.setMinPitch(l.minPitch),l.maxPitch!==void 0&&h.setMaxPitch(l.maxPitch),l.renderWorldCopies!==void 0&&h.setRenderWorldCopies(l.renderWorldCopies),l.transformConstrain!==null&&h.setConstrain(l.transformConstrain),super(h,g,{bearingSnap:l.bearingSnap}),this._idleTriggered=!1,this._crossFadingFactor=1,this._renderTaskQueue=new Ui,this._controls=[],this._mapId=d.a7(),this._contextLost=w=>{w.preventDefault(),this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this.fire(new d.l("webglcontextlost",{originalEvent:w}))},this._contextRestored=w=>{this._setupPainter(),this.resize(),this._update(),this.fire(new d.l("webglcontextrestored",{originalEvent:w}))},this._onMapScroll=w=>{if(w.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},this._onWindowOnline=()=>{this._update()},this._interactive=l.interactive,this._maxTileCacheSize=l.maxTileCacheSize,this._maxTileCacheZoomLevels=l.maxTileCacheZoomLevels,this._canvasContextAttributes=Object.assign({},l.canvasContextAttributes),this._trackResize=l.trackResize===!0,this._bearingSnap=l.bearingSnap,this._centerClampedToGround=l.centerClampedToGround,this._refreshExpiredTiles=l.refreshExpiredTiles===!0,this._fadeDuration=l.fadeDuration,this._crossSourceCollisions=l.crossSourceCollisions===!0,this._collectResourceTiming=l.collectResourceTiming===!0,this._locale=Object.assign(Object.assign({},Ki),l.locale),this._clickTolerance=l.clickTolerance,this._overridePixelRatio=l.pixelRatio,this._maxCanvasSize=l.maxCanvasSize,this.transformCameraUpdate=l.transformCameraUpdate,this.transformConstrain=l.transformConstrain,this.cancelPendingTileRequestsWhileZooming=l.cancelPendingTileRequestsWhileZooming===!0,this._imageQueueHandle=ki.addThrottleControl((()=>this.isMoving())),this._requestManager=new ii(l.transformRequest),typeof l.container=="string"){if(this._container=document.getElementById(l.container),!this._container)throw new Error(`Container '${l.container}' not found.`)}else{if(!(l.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=l.container}if(l.maxBounds&&this.setMaxBounds(l.maxBounds),this._setupContainer(),this._setupPainter(),this.on("move",(()=>this._update(!1))),this.on("moveend",(()=>this._update(!1))),this.on("zoom",(()=>this._update(!0))),this.on("terrain",(()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)})),this.once("idle",(()=>{this._idleTriggered=!0})),typeof window<"u"){addEventListener("online",this._onWindowOnline,!1);let w=!1;const C=Ic((z=>{this._trackResize&&!this._removed&&(this.resize(z),this.redraw())}),50);this._resizeObserver=new ResizeObserver((z=>{w?C(z):w=!0})),this._resizeObserver.observe(this._container)}this.handlers=new ut(this,l),this._hash=l.hash&&new Xa(typeof l.hash=="string"&&l.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:l.center,elevation:l.elevation,zoom:l.zoom,bearing:l.bearing,pitch:l.pitch,roll:l.roll}),l.bounds&&(this.resize(),this.fitBounds(l.bounds,d.e({},l.fitBoundsOptions,{duration:0}))));const v=typeof l.style=="string"||((n=(e=l.style)===null||e===void 0?void 0:e.projection)===null||n===void 0?void 0:n.type)!=="globe";this.resize(null,v),this._localIdeographFontFamily=l.localIdeographFontFamily,this._validateStyle=l.validateStyle,l.style&&this.setStyle(l.style,{localIdeographFontFamily:l.localIdeographFontFamily}),l.attributionControl&&this.addControl(new Fc(typeof l.attributionControl=="boolean"?void 0:l.attributionControl)),l.maplibreLogo&&this.addControl(new sl,l.logoPosition),this.on("style.load",(()=>{if(v||this._resizeTransform(),this.transform.unmodified){const w=d.Q(this.style.stylesheet,["center","zoom","bearing","pitch","roll"]);this.jumpTo(w)}})),this.on("data",(w=>{this._update(w.dataType==="style"),this.fire(new d.l(`${w.dataType}data`,w))})),this.on("dataloading",(w=>{this.fire(new d.l(`${w.dataType}dataloading`,w))})),this.on("dataabort",(w=>{this.fire(new d.l("sourcedataabort",w))}))}_getMapId(){return this._mapId}setGlobalStateProperty(p,e){return this.style.setGlobalStateProperty(p,e),this._update(!0)}getGlobalState(){return this.style.getGlobalState()}addControl(p,e){if(e===void 0&&(e=p.getDefaultPosition?p.getDefaultPosition():"top-right"),!p||!p.onAdd)return this.fire(new d.k(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const n=p.onAdd(this);this._controls.push(p);const l=this._controlPositions[e];return e.indexOf("bottom")!==-1?l.insertBefore(n,l.firstChild):l.appendChild(n),this}removeControl(p){if(!p||!p.onRemove)return this.fire(new d.k(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const e=this._controls.indexOf(p);return e>-1&&this._controls.splice(e,1),p.onRemove(this),this}hasControl(p){return this._controls.indexOf(p)>-1}coveringTiles(p){return gt(this.transform,p)}calculateCameraOptionsFromTo(p,e,n,l){return l==null&&this.terrain&&(l=this.terrain.getElevationForLngLatZoom(n,this.transform.tileZoom)),super.calculateCameraOptionsFromTo(p,e,n,l)}resize(p,e=!0){const[n,l]=this._containerDimensions(),h=this._getClampedPixelRatio(n,l);if(this._resizeCanvas(n,l,h),this.painter.resize(n,l,h),this.painter.overLimit()){const v=this.painter.context.gl;this._maxCanvasSize=[v.drawingBufferWidth,v.drawingBufferHeight];const w=this._getClampedPixelRatio(n,l);this._resizeCanvas(n,l,w),this.painter.resize(n,l,w)}this._resizeTransform(e);const g=!this._moving;return g&&(this.stop(),this.fire(new d.l("movestart",p)).fire(new d.l("move",p))),this.fire(new d.l("resize",p)),g&&this.fire(new d.l("moveend",p)),this}_resizeTransform(p=!0){var e;const[n,l]=this._containerDimensions();this.transform.resize(n,l,p),(e=this._requestedCameraState)===null||e===void 0||e.resize(n,l,p)}_getClampedPixelRatio(p,e){const{0:n,1:l}=this._maxCanvasSize,h=this.getPixelRatio(),g=p*h,v=e*h;return Math.min(g>n?n/g:1,v>l?l/v:1)*h}getPixelRatio(){var p;return(p=this._overridePixelRatio)!==null&&p!==void 0?p:devicePixelRatio}setPixelRatio(p){this._overridePixelRatio=p,this.resize()}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(p){return this.transform.setMaxBounds(Di.convert(p)),this._update()}setMinZoom(p){if((p=p??-2)>=-2&&p<=this.transform.maxZoom)return this.transform.setMinZoom(p),this._update(),this.getZoom()<p&&this.setZoom(p),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(p){if((p=p??22)>=this.transform.minZoom)return this.transform.setMaxZoom(p),this._update(),this.getZoom()>p&&this.setZoom(p),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(p){if((p=p??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(p>=0&&p<=this.transform.maxPitch)return this.transform.setMinPitch(p),this._update(),this.getPitch()<p&&this.setPitch(p),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(p){if((p=p??60)>180)throw new Error("maxPitch must be less than or equal to 180");if(p>=this.transform.minPitch)return this.transform.setMaxPitch(p),this._update(),this.getPitch()>p&&this.setPitch(p),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(p){return this.transform.setRenderWorldCopies(p),this._update()}setTransformConstrain(p){return this.transform.setConstrain(p),this._update()}project(p){return this.transform.locationToScreenPoint(d.S.convert(p),this.style&&this.terrain)}unproject(p){return this.transform.screenPointToLocation(d.P.convert(p),this.terrain)}isMoving(){var p;return this._moving||((p=this.handlers)===null||p===void 0?void 0:p.isMoving())}isZooming(){var p;return this._zooming||((p=this.handlers)===null||p===void 0?void 0:p.isZooming())}isRotating(){var p;return this._rotating||((p=this.handlers)===null||p===void 0?void 0:p.isRotating())}_createDelegatedListener(p,e,n){if(p==="mouseenter"||p==="mouseover"){let l=!1;return{layers:e,listener:n,delegates:{mousemove:g=>{const v=e.filter((C=>this.getLayer(C))),w=v.length!==0?this.queryRenderedFeatures(g.point,{layers:v}):[];w.length?l||(l=!0,n.call(this,new ca(p,this,g.originalEvent,{features:w}))):l=!1},mouseout:()=>{l=!1}}}}if(p==="mouseleave"||p==="mouseout"){let l=!1;return{layers:e,listener:n,delegates:{mousemove:v=>{const w=e.filter((C=>this.getLayer(C)));(w.length!==0?this.queryRenderedFeatures(v.point,{layers:w}):[]).length?l=!0:l&&(l=!1,n.call(this,new ca(p,this,v.originalEvent)))},mouseout:v=>{l&&(l=!1,n.call(this,new ca(p,this,v.originalEvent)))}}}}{const l=h=>{const g=e.filter((w=>this.getLayer(w))),v=g.length!==0?this.queryRenderedFeatures(h.point,{layers:g}):[];v.length&&(h.features=v,n.call(this,h),delete h.features)};return{layers:e,listener:n,delegates:{[p]:l}}}}_saveDelegatedListener(p,e){this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[p]=this._delegatedListeners[p]||[],this._delegatedListeners[p].push(e)}_removeDelegatedListener(p,e,n){if(!this._delegatedListeners||!this._delegatedListeners[p])return;const l=this._delegatedListeners[p];for(let h=0;h<l.length;h++){const g=l[h];if(g.listener===n&&g.layers.length===e.length&&g.layers.every((v=>e.includes(v)))){for(const v in g.delegates)this.off(v,g.delegates[v]);return void l.splice(h,1)}}}on(p,e,n){if(n===void 0)return super.on(p,e);const l=typeof e=="string"?[e]:e,h=this._createDelegatedListener(p,l,n);this._saveDelegatedListener(p,h);for(const g in h.delegates)this.on(g,h.delegates[g]);return{unsubscribe:()=>{this._removeDelegatedListener(p,l,n)}}}once(p,e,n){if(n===void 0)return super.once(p,e);const l=typeof e=="string"?[e]:e,h=this._createDelegatedListener(p,l,n);for(const g in h.delegates){const v=h.delegates[g];h.delegates[g]=(...w)=>{this._removeDelegatedListener(p,l,n),v(...w)}}this._saveDelegatedListener(p,h);for(const g in h.delegates)this.once(g,h.delegates[g]);return this}off(p,e,n){return n===void 0?super.off(p,e):(this._removeDelegatedListener(p,typeof e=="string"?[e]:e,n),this)}queryRenderedFeatures(p,e){if(!this.style)return[];let n;const l=p instanceof d.P||Array.isArray(p),h=l?p:[[0,0],[this.transform.width,this.transform.height]];if(e=e||(l?{}:p)||{},h instanceof d.P||typeof h[0]=="number")n=[d.P.convert(h)];else{const g=d.P.convert(h[0]),v=d.P.convert(h[1]);n=[g,new d.P(v.x,g.y),v,new d.P(g.x,v.y),g]}return this.style.queryRenderedFeatures(n,e,this.transform)}querySourceFeatures(p,e){return this.style.querySourceFeatures(p,e)}setStyle(p,e){return(e=d.e({},{localIdeographFontFamily:this._localIdeographFontFamily,validate:this._validateStyle},e)).diff!==!1&&e.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&p?(this._diffStyle(p,e),this):(this._localIdeographFontFamily=e.localIdeographFontFamily,this._updateStyle(p,e))}setTransformRequest(p){return this._requestManager.setTransformRequest(p),this}_getUIString(p){const e=this._locale[p];if(e==null)throw new Error(`Missing UI string '${p}'`);return e}_updateStyle(p,e){var n,l;if(e.transformStyle&&this.style&&!this.style._loaded)return void this.style.once("style.load",(()=>this._updateStyle(p,e)));const h=this.style&&e.transformStyle?this.style.serialize():void 0;return this.style&&(this.style.setEventedParent(null),this.style._remove(!p)),p?(this.style=new Bl(this,e||{}),this.style.setEventedParent(this,{style:this.style}),typeof p=="string"?this.style.loadURL(p,e,h):this.style.loadJSON(p,e,h),this):((l=(n=this.style)===null||n===void 0?void 0:n.projection)===null||l===void 0||l.destroy(),delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new Bl(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(p,e){if(typeof p=="string"){const n=this._requestManager.transformRequest(p,"Style");d.j(n,new AbortController).then((l=>{this._updateDiff(l.data,e)})).catch((l=>{l&&this.fire(new d.k(l))}))}else typeof p=="object"&&this._updateDiff(p,e)}_updateDiff(p,e){try{this.style.setState(p,e)&&this._update(!0)}catch(n){d.w(`Unable to perform style diff: ${n.message||n.error||n}.  Rebuilding the style from scratch.`),this._updateStyle(p,e)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():d.w("There is no style added to the map.")}addSource(p,e){return this._lazyInitEmptyStyle(),this.style.addSource(p,e),this._update(!0)}isSourceLoaded(p){const e=this.style&&this.style.sourceCaches[p];if(e!==void 0)return e.loaded();this.fire(new d.k(new Error(`There is no source with ID '${p}'`)))}setTerrain(p){if(this.style._checkLoaded(),this._terrainDataCallback&&this.style.off("data",this._terrainDataCallback),p){const e=this.style.sourceCaches[p.source];if(!e)throw new Error(`cannot load terrain, because there exists no source with ID: ${p.source}`);this.terrain===null&&e.reload();for(const n in this.style._layers){const l=this.style._layers[n];l.type==="hillshade"&&l.source===p.source&&d.w("You are using the same source for a hillshade layer and for 3D terrain. Please consider using two separate sources to improve rendering quality."),l.type==="color-relief"&&l.source===p.source&&d.w("You are using the same source for a color-relief layer and for 3D terrain. Please consider using two separate sources to improve rendering quality.")}this.terrain=new Iu(this.painter,e,p),this.painter.renderToTexture=new Ka(this.painter,this.terrain),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this._terrainDataCallback=n=>{var l;n.dataType==="style"?this.terrain.sourceCache.freeRtt():n.dataType==="source"&&n.tile&&(n.sourceId!==p.source||this._elevationFreeze||(this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this._centerClampedToGround&&this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))),((l=n.source)===null||l===void 0?void 0:l.type)==="image"?this.terrain.sourceCache.freeRtt():this.terrain.sourceCache.freeRtt(n.tile.tileID))},this.style.on("data",this._terrainDataCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.painter.renderToTexture&&this.painter.renderToTexture.destruct(),this.painter.renderToTexture=null,this.transform.setMinElevationForCurrentTile(0),this._centerClampedToGround&&this.transform.setElevation(0);return this.fire(new d.l("terrain",{terrain:p})),this}getTerrain(){var p,e;return(e=(p=this.terrain)===null||p===void 0?void 0:p.options)!==null&&e!==void 0?e:null}areTilesLoaded(){const p=this.style&&this.style.sourceCaches;for(const e in p){const n=p[e]._tiles;for(const l in n){const h=n[l];if(h.state!=="loaded"&&h.state!=="errored")return!1}}return!0}removeSource(p){return this.style.removeSource(p),this._update(!0)}getSource(p){return this.style.getSource(p)}setSourceTileLodParams(p,e,n){if(n){const l=this.getSource(n);if(!l)throw new Error(`There is no source with ID "${n}", cannot set LOD parameters`);l.calculateTileZoom=be(Math.max(1,p),Math.max(1,e))}else for(const l in this.style.sourceCaches)this.style.sourceCaches[l].getSource().calculateTileZoom=be(Math.max(1,p),Math.max(1,e));return this._update(!0),this}refreshTiles(p,e){const n=this.style.sourceCaches[p];if(!n)throw new Error(`There is no source cache with ID "${p}", cannot refresh tile`);e===void 0?n.reload(!0):n.refreshTiles(e.map((l=>new d.a4(l.z,l.x,l.y))))}addImage(p,e,n={}){const{pixelRatio:l=1,sdf:h=!1,stretchX:g,stretchY:v,content:w,textFitWidth:C,textFitHeight:z}=n;if(this._lazyInitEmptyStyle(),!(e instanceof HTMLImageElement||d.b(e))){if(e.width===void 0||e.height===void 0)return this.fire(new d.k(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:k,height:O,data:I}=e,F=e;return this.style.addImage(p,{data:new d.R({width:k,height:O},new Uint8Array(I)),pixelRatio:l,stretchX:g,stretchY:v,content:w,textFitWidth:C,textFitHeight:z,sdf:h,version:0,userImage:F}),F.onAdd&&F.onAdd(this,p),this}}{const{width:k,height:O,data:I}=xt.getImageData(e);this.style.addImage(p,{data:new d.R({width:k,height:O},I),pixelRatio:l,stretchX:g,stretchY:v,content:w,textFitWidth:C,textFitHeight:z,sdf:h,version:0})}}updateImage(p,e){const n=this.style.getImage(p);if(!n)return this.fire(new d.k(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const l=e instanceof HTMLImageElement||d.b(e)?xt.getImageData(e):e,{width:h,height:g,data:v}=l;if(h===void 0||g===void 0)return this.fire(new d.k(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(h!==n.data.width||g!==n.data.height)return this.fire(new d.k(new Error("The width and height of the updated image must be that same as the previous version of the image")));const w=!(e instanceof HTMLImageElement||d.b(e));return n.data.replace(v,w),this.style.updateImage(p,n),this}getImage(p){return this.style.getImage(p)}hasImage(p){return p?!!this.style.getImage(p):(this.fire(new d.k(new Error("Missing required image id"))),!1)}removeImage(p){this.style.removeImage(p)}loadImage(p){return ki.getImage(this._requestManager.transformRequest(p,"Image"),new AbortController)}listImages(){return this.style.listImages()}addLayer(p,e){return this._lazyInitEmptyStyle(),this.style.addLayer(p,e),this._update(!0)}moveLayer(p,e){return this.style.moveLayer(p,e),this._update(!0)}removeLayer(p){return this.style.removeLayer(p),this._update(!0)}getLayer(p){return this.style.getLayer(p)}getLayersOrder(){return this.style.getLayersOrder()}setLayerZoomRange(p,e,n){return this.style.setLayerZoomRange(p,e,n),this._update(!0)}setFilter(p,e,n={}){return this.style.setFilter(p,e,n),this._update(!0)}getFilter(p){return this.style.getFilter(p)}setPaintProperty(p,e,n,l={}){return this.style.setPaintProperty(p,e,n,l),this._update(!0)}getPaintProperty(p,e){return this.style.getPaintProperty(p,e)}setLayoutProperty(p,e,n,l={}){return this.style.setLayoutProperty(p,e,n,l),this._update(!0)}getLayoutProperty(p,e){return this.style.getLayoutProperty(p,e)}setGlyphs(p,e={}){return this._lazyInitEmptyStyle(),this.style.setGlyphs(p,e),this._update(!0)}getGlyphs(){return this.style.getGlyphsUrl()}addSprite(p,e,n={}){return this._lazyInitEmptyStyle(),this.style.addSprite(p,e,n,(l=>{l||this._update(!0)})),this}removeSprite(p){return this._lazyInitEmptyStyle(),this.style.removeSprite(p),this._update(!0)}getSprite(){return this.style.getSprite()}setSprite(p,e={}){return this._lazyInitEmptyStyle(),this.style.setSprite(p,e,(n=>{n||this._update(!0)})),this}setLight(p,e={}){return this._lazyInitEmptyStyle(),this.style.setLight(p,e),this._update(!0)}getLight(){return this.style.getLight()}setSky(p,e={}){return this._lazyInitEmptyStyle(),this.style.setSky(p,e),this._update(!0)}getSky(){return this.style.getSky()}setFeatureState(p,e){return this.style.setFeatureState(p,e),this._update()}removeFeatureState(p,e){return this.style.removeFeatureState(p,e),this._update()}getFeatureState(p){return this.style.getFeatureState(p)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let p=0,e=0;return this._container&&(p=this._container.clientWidth||400,e=this._container.clientHeight||300),[p,e]}_setupContainer(){const p=this._container;p.classList.add("maplibregl-map");const e=this._canvasContainer=Ce.create("div","maplibregl-canvas-container",p);this._interactive&&e.classList.add("maplibregl-interactive"),this._canvas=Ce.create("canvas","maplibregl-canvas",e),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex",this._interactive?"0":"-1"),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region");const n=this._containerDimensions(),l=this._getClampedPixelRatio(n[0],n[1]);this._resizeCanvas(n[0],n[1],l);const h=this._controlContainer=Ce.create("div","maplibregl-control-container",p),g=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach((v=>{g[v]=Ce.create("div",`maplibregl-ctrl-${v} `,h)})),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(p,e,n){this._canvas.width=Math.floor(n*p),this._canvas.height=Math.floor(n*e),this._canvas.style.width=`${p}px`,this._canvas.style.height=`${e}px`}_setupPainter(){const p=Object.assign(Object.assign({},this._canvasContextAttributes),{alpha:!0,depth:!0,stencil:!0,premultipliedAlpha:!0});let e=null;this._canvas.addEventListener("webglcontextcreationerror",(l=>{e={requestedAttributes:p},l&&(e.statusMessage=l.statusMessage,e.type=l.type)}),{once:!0});let n=null;if(n=this._canvasContextAttributes.contextType?this._canvas.getContext(this._canvasContextAttributes.contextType,p):this._canvas.getContext("webgl2",p)||this._canvas.getContext("webgl",p),!n){const l="Failed to initialize WebGL";throw e?(e.message=l,new Error(JSON.stringify(e))):new Error(l)}this.painter=new zu(n,this.transform),aa.testSupport(n)}migrateProjection(p,e){super.migrateProjection(p,e),this.painter.transform=p,this.fire(new d.l("projectiontransition",{newProjection:this.style.projection.name}))}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(p){return this.style&&this.style._loaded?(this._styleDirty=this._styleDirty||p,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(p){return this._update(),this._renderTaskQueue.add(p)}_cancelRenderFrame(p){this._renderTaskQueue.remove(p)}_render(p){var e,n,l,h,g;const v=this._idleTriggered?this._fadeDuration:0,w=((e=this.style.projection)===null||e===void 0?void 0:e.transitionState)>0;if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(p),this._removed)return;let C=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const O=this.transform.zoom,I=dt();this.style.zoomHistory.update(O,I);const F=new d.F(O,{now:I,fadeDuration:v,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),H=F.crossFadingFactor();H===1&&H===this._crossFadingFactor||(C=!0,this._crossFadingFactor=H),this.style.update(F)}const z=((n=this.style.projection)===null||n===void 0?void 0:n.transitionState)>0!==w;(l=this.style.projection)===null||l===void 0||l.setErrorQueryLatitudeDegrees(this.transform.center.lat),this.transform.setTransitionState((h=this.style.projection)===null||h===void 0?void 0:h.transitionState,(g=this.style.projection)===null||g===void 0?void 0:g.latitudeErrorCorrectionRadians),this.style&&(this._sourcesDirty||z)&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.terrain?(this.terrain.sourceCache.update(this.transform,this.terrain),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),!this._elevationFreeze&&this._centerClampedToGround&&this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))):(this.transform.setMinElevationForCurrentTile(0),this._centerClampedToGround&&this.transform.setElevation(0)),this._placementDirty=this.style&&this.style._updatePlacement(this.transform,this.showCollisionBoxes,v,this._crossSourceCollisions,z),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:v,showPadding:this.showPadding}),this.fire(new d.l("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,d.cw.mark(d.cx.load),this.fire(new d.l("load"))),this.style&&(this.style.hasTransitions()||C)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles();const k=this._sourcesDirty||this._styleDirty||this._placementDirty;return k||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new d.l("idle")),!this._loaded||this._fullyLoaded||k||(this._fullyLoaded=!0,d.cw.mark(d.cx.fullLoad)),this}redraw(){return this.style&&(this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._render(0)),this}remove(){var p;this._hash&&this._hash.remove();for(const n of this._controls)n.onRemove(this);this._controls=[],this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window<"u"&&removeEventListener("online",this._onWindowOnline,!1),ki.removeThrottleControl(this._imageQueueHandle),(p=this._resizeObserver)===null||p===void 0||p.disconnect();const e=this.painter.context.gl.getExtension("WEBGL_lose_context");e?.loseContext&&e.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),Ce.remove(this._canvasContainer),Ce.remove(this._controlContainer),this._container.removeEventListener("scroll",this._onMapScroll,!1),this._container.classList.remove("maplibregl-map"),d.cw.clearMetrics(),this._removed=!0,this.fire(new d.l("remove"))}triggerRepaint(){this.style&&!this._frameRequest&&(this._frameRequest=new AbortController,xt.frame(this._frameRequest,(p=>{d.cw.frame(p),this._frameRequest=null;try{this._render(p)}catch(e){if(!d.cy(e)&&!(function(n){return n.message===Sh})(e))throw e}}),(()=>{})))}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(p){this._showTileBoundaries!==p&&(this._showTileBoundaries=p,this._update())}get showPadding(){return!!this._showPadding}set showPadding(p){this._showPadding!==p&&(this._showPadding=p,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(p){this._showCollisionBoxes!==p&&(this._showCollisionBoxes=p,p?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(p){this._showOverdrawInspector!==p&&(this._showOverdrawInspector=p,this._update())}get repaint(){return!!this._repaint}set repaint(p){this._repaint!==p&&(this._repaint=p,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(p){this._vertices=p,this._update()}get version(){return Zi}getCameraTargetElevation(){return this.transform.elevation}getProjection(){return this.style.getProjection()}setProjection(p){return this._lazyInitEmptyStyle(),this.style.setProjection(p),this._update(!0)}},M.MapMouseEvent=ca,M.MapTouchEvent=Er,M.MapWheelEvent=ua,M.Marker=po,M.NavigationControl=class{constructor(p){this._updateZoomButtons=()=>{const e=this._map.getZoom(),n=e===this._map.getMaxZoom(),l=e===this._map.getMinZoom();this._zoomInButton.disabled=n,this._zoomOutButton.disabled=l,this._zoomInButton.setAttribute("aria-disabled",n.toString()),this._zoomOutButton.setAttribute("aria-disabled",l.toString())},this._rotateCompassArrow=()=>{this._compassIcon.style.transform=this.options.visualizePitch&&this.options.visualizeRoll?`scale(${1/Math.pow(Math.cos(this._map.transform.pitchInRadians),.5)}) rotateZ(${-this._map.transform.roll}deg) rotateX(${this._map.transform.pitch}deg) rotateZ(${-this._map.transform.bearing}deg)`:this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitchInRadians),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${-this._map.transform.bearing}deg)`:this.options.visualizeRoll?`rotate(${-this._map.transform.bearing-this._map.transform.roll}deg)`:`rotate(${-this._map.transform.bearing}deg)`},this._setButtonTitle=(e,n)=>{const l=this._map._getUIString(`NavigationControl.${n}`);e.title=l,e.setAttribute("aria-label",l)},this.options=d.e({},Qt,p),this._container=Ce.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._container.addEventListener("contextmenu",(e=>e.preventDefault())),this.options.showZoom&&(this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in",(e=>this._map.zoomIn({},{originalEvent:e}))),Ce.create("span","maplibregl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out",(e=>this._map.zoomOut({},{originalEvent:e}))),Ce.create("span","maplibregl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(this._compass=this._createButton("maplibregl-ctrl-compass",(e=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:e}):this._map.resetNorth({},{originalEvent:e})})),this._compassIcon=Ce.create("span","maplibregl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}onAdd(p){return this._map=p,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this.options.visualizeRoll&&this._map.on("roll",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new gi(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){Ce.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this.options.visualizeRoll&&this._map.off("roll",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(p,e){const n=Ce.create("button",p,this._container);return n.type="button",n.addEventListener("click",e),n}},M.Popup=class extends d.E{constructor(p){super(),this._updateOpacity=()=>{this.options.locationOccludedOpacity!==void 0&&(this._container.style.opacity=this._map.transform.isLocationOccluded(this.getLngLat())?`${this.options.locationOccludedOpacity}`:"")},this.remove=()=>(this._content&&Ce.remove(this._content),this._container&&(Ce.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),this._map._canvasContainer.classList.remove("maplibregl-track-pointer"),delete this._map,this.fire(new d.l("close"))),this),this._onMouseUp=e=>{this._update(e.point)},this._onMouseMove=e=>{this._update(e.point)},this._onDrag=e=>{this._update(e.point)},this._update=e=>{if(!this._map||!this._lngLat&&!this._trackPointer||!this._content)return;if(!this._container){if(this._container=Ce.create("div","maplibregl-popup",this._map.getContainer()),this._tip=Ce.create("div","maplibregl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className)for(const v of this.options.className.split(" "))this._container.classList.add(v);this._closeButton&&this._closeButton.setAttribute("aria-label",this._map._getUIString("Popup.Close")),this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer")}if(this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._lngLat=ll(this._lngLat,this._flatPos,this._map.transform,this._trackPointer),this._trackPointer&&!e)return;const n=this._flatPos=this._pos=this._trackPointer&&e?e:this._map.project(this._lngLat);this._map.terrain&&(this._flatPos=this._trackPointer&&e?e:this._map.transform.locationToScreenPoint(this._lngLat));let l=this.options.anchor;const h=Ou(this.options.offset);if(!l){const v=this._container.offsetWidth,w=this._container.offsetHeight;let C;C=n.y+h.bottom.y<w?["top"]:n.y>this._map.transform.height-w?["bottom"]:[],n.x<v/2?C.push("left"):n.x>this._map.transform.width-v/2&&C.push("right"),l=C.length===0?"bottom":C.join("-")}let g=n.add(h[l]);this.options.subpixelPositioning||(g=g.round()),Ce.setTransform(this._container,`${uo[l]} translate(${g.x}px,${g.y}px)`),ho(this._container,l,"popup"),this._updateOpacity()},this._onClose=()=>{this.remove()},this.options=d.e(Object.create(Ru),p)}addTo(p){return this._map&&this.remove(),this._map=p,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")):this._map.on("move",this._update),this.fire(new d.l("open")),this}isOpen(){return!!this._map}getLngLat(){return this._lngLat}setLngLat(p){return this._lngLat=d.S.convert(p),this._pos=null,this._flatPos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._flatPos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")),this}getElement(){return this._container}setText(p){return this.setDOMContent(document.createTextNode(p))}setHTML(p){const e=document.createDocumentFragment(),n=document.createElement("body");let l;for(n.innerHTML=p;l=n.firstChild,l;)e.appendChild(l);return this.setDOMContent(e)}getMaxWidth(){var p;return(p=this._container)===null||p===void 0?void 0:p.style.maxWidth}setMaxWidth(p){return this.options.maxWidth=p,this._update(),this}setDOMContent(p){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=Ce.create("div","maplibregl-popup-content",this._container);return this._content.appendChild(p),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(p){return this._container&&this._container.classList.add(p),this}removeClassName(p){return this._container&&this._container.classList.remove(p),this}setOffset(p){return this.options.offset=p,this._update(),this}toggleClassName(p){if(this._container)return this._container.classList.toggle(p)}setSubpixelPositioning(p){this.options.subpixelPositioning=p}_createCloseButton(){this.options.closeButton&&(this._closeButton=Ce.create("button","maplibregl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const p=this._container.querySelector(Bu);p&&p.focus()}},M.RasterDEMTileSource=En,M.RasterTileSource=xo,M.ScaleControl=class{constructor(p){this._onMove=()=>{Xl(this._map,this._container,this.options)},this.setUnit=e=>{this.options.unit=e,Xl(this._map,this._container,this.options)},this.options=Object.assign(Object.assign({},tr),p)}getDefaultPosition(){return"bottom-left"}onAdd(p){return this._map=p,this._container=Ce.create("div","maplibregl-ctrl maplibregl-ctrl-scale",p.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){Ce.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}},M.ScrollZoomHandler=Nn,M.Style=Bl,M.TerrainControl=class{constructor(p){this._toggleTerrain=()=>{this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()},this._updateTerrainIcon=()=>{this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.Disable")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.Enable"))},this.options=p}onAdd(p){return this._map=p,this._container=Ce.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=Ce.create("button","maplibregl-ctrl-terrain",this._container),Ce.create("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){Ce.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}},M.TwoFingersTouchPitchHandler=ws,M.TwoFingersTouchRotateHandler=ql,M.TwoFingersTouchZoomHandler=Oc,M.TwoFingersTouchZoomRotateHandler=$c,M.VectorTileSource=Vs,M.VideoSource=rs,M.addSourceType=(p,e)=>d._(void 0,void 0,void 0,(function*(){if(Tl(p))throw new Error(`A source type called "${p}" already exists.`);((n,l)=>{Zr[n]=l})(p,e)})),M.clearPrewarmedResources=function(){const p=Dt;p&&(p.isPreloaded()&&p.numActive()===1?(p.release(Ue),Dt=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},M.createTileMesh=Ns,M.getMaxParallelImageRequests=function(){return d.a.MAX_PARALLEL_IMAGE_REQUESTS},M.getRTLTextPluginStatus=function(){return Co().getRTLTextPluginStatus()},M.getVersion=function(){return Yl},M.getWorkerCount=function(){return at.workerCount},M.getWorkerUrl=function(){return d.a.WORKER_URL},M.importScriptInWorkers=function(p){return mi().broadcast("IS",p)},M.isTimeFrozen=function(){return Ot.isFrozen()},M.prewarm=function(){si().acquire(Ue)},M.restoreNow=function(){Ot.restoreNow()},M.setMaxParallelImageRequests=function(p){d.a.MAX_PARALLEL_IMAGE_REQUESTS=p},M.setNow=function(p){Ot.setNow(p)},M.setRTLTextPlugin=function(p,e){return Co().setRTLTextPlugin(p,e)},M.setWorkerCount=function(p){at.workerCount=p},M.setWorkerUrl=function(p){d.a.WORKER_URL=p}}));var X=B;return X}))})(zm)),zm.exports}var yb=vb();const Mm=m1(yb);var bb=Object.defineProperty,xb=Object.getOwnPropertyDescriptor,J1=(R,A,B,P)=>{for(var D=P>1?void 0:P?xb(A,B):A,X=R.length-1,M;X>=0;X--)(M=R[X])&&(D=(P?M(A,B,D):M(D))||D);return P&&D&&bb(A,B,D),D};let rg=class extends Bt{constructor(){super(...arguments),this.useCssColor=!1,this.icon=Ct`<svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
<path fill-rule="evenodd" clip-rule="evenodd" d="M7 20.9607V9.56507C7.035 5.90422 9.03708 2.71382 12.0001 1C14.9629 2.71388 16.9648 5.90415 16.9998 9.56483V20.9607H7ZM15.4998 19.4607V9.57228C15.4709 6.78553 14.1013 4.31822 12.0001 2.78733C9.89863 4.31821 8.52886 6.78563 8.5 9.57253V19.4607H15.4998Z" fill="currentColor"/>
<path d="M15.4998 9.57228V19.4607H8.5V9.57253C8.52886 6.78563 9.89863 4.31821 12.0001 2.78733C14.1013 4.31822 15.4709 6.78553 15.4998 9.57228Z" fill="currentColor"/>
<path fill-rule="evenodd" clip-rule="evenodd" d="M7 20.9607V9.56507C7.035 5.90422 9.03708 2.71382 12.0001 1C14.9629 2.71388 16.9648 5.90415 16.9998 9.56483V20.9607H7ZM15.4998 19.4607V9.57228C15.4709 6.78553 14.1013 4.31822 12.0001 2.78733C9.89863 4.31821 8.52886 6.78563 8.5 9.57253V19.4607H15.4998Z" fill="currentColor"/>
</svg>
`,this.iconCss=Ct`<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
<path fill-rule="evenodd" clip-rule="evenodd" d="M7 20.9607V9.56507C7.035 5.90422 9.03708 2.71382 12.0001 1C14.9629 2.71388 16.9648 5.90415 16.9998 9.56483V20.9607H7ZM15.4998 19.4607V9.57228C15.4709 6.78553 14.1013 4.31822 12.0001 2.78733C9.89863 4.31821 8.52886 6.78563 8.5 9.57253V19.4607H15.4998Z" style="fill: var(--element-active-inverted-color)"/>
<path d="M15.4998 9.57228V19.4607H8.5V9.57253C8.52886 6.78563 9.89863 4.31821 12.0001 2.78733C14.1013 4.31822 15.4709 6.78553 15.4998 9.57228Z" style="fill: var(--element-active-inverted-color)"/>
<path fill-rule="evenodd" clip-rule="evenodd" d="M7 20.9607V9.56507C7.035 5.90422 9.03708 2.71382 12.0001 1C14.9629 2.71388 16.9648 5.90415 16.9998 9.56483V20.9607H7ZM15.4998 19.4607V9.57228C15.4709 6.78553 14.1013 4.31822 12.0001 2.78733C9.89863 4.31821 8.52886 6.78563 8.5 9.57253V19.4607H15.4998Z" style="fill: var(--element-active-color)"/>
</svg>
`}render(){return Ye`
      <div class="wrapper">${this.useCssColor?this.iconCss:this.icon}</div>
    `}};rg.styles=Ht`
    .wrapper {
      height: 100%;
      width: 100%;
      line-height: 0;
    }
    .wrapper > * {
      height: 100%;
      width: 100%;
    }
  `;J1([Ie({type:Boolean})],rg.prototype,"useCssColor",2);rg=J1([Gt("obi-vessel-type-generic-filled")],rg);var wb=Object.defineProperty,Cb=Object.getOwnPropertyDescriptor,e_=(R,A,B,P)=>{for(var D=P>1?void 0:P?Cb(A,B):A,X=R.length-1,M;X>=0;X--)(M=R[X])&&(D=(P?M(A,B,D):M(D))||D);return P&&D&&wb(A,B,D),D};let ag=class extends Bt{constructor(){super(...arguments),this.useCssColor=!1,this.icon=Ct`<svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
<path d="M12 4C16.4183 4 20 7.58172 20 12C20 16.4183 16.4183 20 12 20C7.58172 20 4 16.4183 4 12C4 7.58172 7.58172 4 12 4ZM10.958 7.39648L7.89844 16H9.75879L10.4307 13.8877H13.5742L14.2461 16H16.1064L13.0342 7.39648H10.958ZM12.1465 9.25586C12.2105 9.46386 12.2749 9.67188 12.3389 9.87988C12.4029 10.0799 12.4541 10.2441 12.4941 10.3721L13.1543 12.4355H10.874L11.5225 10.3721C11.5544 10.2841 11.5984 10.1402 11.6543 9.94043C11.7183 9.73243 11.7827 9.51599 11.8467 9.29199C11.9106 9.06012 11.962 8.86405 12.002 8.7041C12.0419 8.85607 12.0905 9.03991 12.1465 9.25586Z" fill="currentColor"/>
</svg>
`,this.iconCss=Ct`<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M12 4C16.4183 4 20 7.58172 20 12C20 16.4183 16.4183 20 12 20C7.58172 20 4 16.4183 4 12C4 7.58172 7.58172 4 12 4ZM10.958 7.39648L7.89844 16H9.75879L10.4307 13.8877H13.5742L14.2461 16H16.1064L13.0342 7.39648H10.958ZM12.1465 9.25586C12.2105 9.46386 12.2749 9.67188 12.3389 9.87988C12.4029 10.0799 12.4541 10.2441 12.4941 10.3721L13.1543 12.4355H10.874L11.5225 10.3721C11.5544 10.2841 11.5984 10.1402 11.6543 9.94043C11.7183 9.73243 11.7827 9.51599 11.8467 9.29199C11.9106 9.06012 11.962 8.86405 12.002 8.7041C12.0419 8.85607 12.0905 9.03991 12.1465 9.25586Z" style="fill: var(--element-active-color)"/>
</svg>
`}render(){return Ye`
      <div class="wrapper">${this.useCssColor?this.iconCss:this.icon}</div>
    `}};ag.styles=Ht`
    .wrapper {
      height: 100%;
      width: 100%;
      line-height: 0;
    }
    .wrapper > * {
      height: 100%;
      width: 100%;
    }
  `;e_([Ie({type:Boolean})],ag.prototype,"useCssColor",2);ag=e_([Gt("obi-own-ship-no-command-index")],ag);const Dg={day:"/roc-prototype/protomaps/styles/day.json",bright:"/roc-prototype/protomaps/styles/bright.json",dusk:"/roc-prototype/protomaps/styles/dusk.json",night:"/roc-prototype/protomaps/styles/night.json"};function Sb(R,A=!0){const P={Slow:"M8 2.25C8.41421 2.25 8.75 2.58579 8.75 3V9C8.75 9.41421 8.41421 9.75 8 9.75C7.58579 9.75 7.25 9.41421 7.25 9V3C7.25 2.58579 7.58579 2.25 8 2.25Z",Mid:"M6 2.25C6.41421 2.25 6.75 2.58579 6.75 3V9C6.75 9.41421 6.41421 9.75 6 9.75C5.58579 9.75 5.25 9.41421 5.25 9V3C5.25 2.58579 5.58579 2.25 6 2.25ZM10 2.25C10.4142 2.25 10.75 2.58579 10.75 3V9C10.75 9.41421 10.4142 9.75 10 9.75C9.58579 9.75 9.25 9.41421 9.25 9V3C9.25 2.58579 9.58579 2.25 10 2.25Z",Fast:"M4 2.25C4.41421 2.25 4.75 2.58579 4.75 3V9C4.75 9.41421 4.41421 9.75 4 9.75C3.58579 9.75 3.25 9.41421 3.25 9L3.25 3C3.25 2.58579 3.58579 2.25 4 2.25ZM8 2.25C8.41421 2.25 8.75 2.58579 8.75 3V9C8.75 9.41421 8.41421 9.75 8 9.75C7.58579 9.75 7.25 9.41421 7.25 9V3C7.25 2.58579 7.58579 2.25 8 2.25ZM12 2.25C12.4142 2.25 12.75 2.58579 12.75 3V9C12.75 9.41421 12.4142 9.75 12 9.75C11.5858 9.75 11.25 9.41421 11.25 9V3C11.25 2.58579 11.5858 2.25 12 2.25Z",Anchored:"M8.75 3.25H10.75V4.75H8.75V8.38379C8.81975 8.36184 8.88925 8.33765 8.95703 8.30957C9.26022 8.18394 9.53551 7.99964 9.76758 7.76758C9.99964 7.53551 10.1839 7.26022 10.3096 6.95703C10.4352 6.65372 10.5 6.3283 10.5 6H12C12 6.52517 11.8962 7.04506 11.6953 7.53027C11.4943 8.01558 11.1996 8.45669 10.8281 8.82812C10.4567 9.19956 10.0156 9.49429 9.53027 9.69531C9.04506 9.89624 8.52517 10 8 10C7.47483 10 6.95494 9.89624 6.46973 9.69531C5.98442 9.49429 5.54331 9.19956 5.17188 8.82812C4.80044 8.45669 4.50571 8.01558 4.30469 7.53027C4.10376 7.04506 4 6.52517 4 6H5.5C5.5 6.3283 5.56479 6.65372 5.69043 6.95703C5.81606 7.26022 6.00036 7.53551 6.23242 7.76758C6.46449 7.99964 6.73978 8.18394 7.04297 8.30957C7.11075 8.33765 7.18025 8.36184 7.25 8.38379V4.75H5.25V3.25H7.25V1.25H8.75V3.25Z",Stopped:"M8 1C10.7614 1 13 3.23858 13 6C13 8.76142 10.7614 11 8 11C5.23858 11 3 8.76142 3 6C3 3.23858 5.23858 1 8 1ZM8 2.5C6.067 2.5 4.5 4.067 4.5 6C4.5 7.933 6.067 9.5 8 9.5C9.933 9.5 11.5 7.933 11.5 6C11.5 4.067 9.933 2.5 8 2.5Z"}[R];if(!P)throw new Error(`Unknown mode: ${R}`);return`<svg width="16" height="12" viewBox="0 0 16 12" xmlns="http://www.w3.org/2000/svg" fill="none" role="img" aria-label="${R}">
    <path d="${P}" fill="${A?"currentColor":"#535353"}"/>
  </svg>`}const Tb=(R,A,B)=>{const P=document.createElement("div");P.className="vessel-marker",P.style.width="64px",P.style.height="64px";const D=R.slice(-1),X=`
    <div class="vessel-wrap">
      <!-- rotating bottom icon only -->
      <div class="rotating-wrap" style="transform: rotate(${A}deg);">
        <obi-vessel-type-generic-filled
          class="vessel-icon bottom"
          useCssColor="true"
          use-css-color
        ></obi-vessel-type-generic-filled>
        
        <!-- centered mode icon with Y offset -->
        <div class="vessel-mode-icon" style="--mode-offset-y: 14px;">
          ${Sb(B,!0)}
        </div>

      </div>

      <!-- static top icon with text overlay -->
      <div class="static-wrap">
        <obi-own-ship-no-command-generic
          class="vessel-icon top"
          useCssColor="true"
          use-css-color
        ></obi-own-ship-no-command-generic>
        <span class="vessel-text">${D}</span>
      </div>
    </div>
  `;return P.innerHTML=X,P},Mb=({className:R,palette:A="day"})=>{const B=Fa.useRef(null),P=Fa.useRef(null),D=Fa.useRef([]),X=[{name:"A3601",lat:55,lon:-35,heading:317,mode:"Fast"},{name:"A3602",lat:50.5,lon:-20,heading:142,mode:"Mid"},{name:"A3603",lat:60,lon:-8,heading:28,mode:"Slow"},{name:"A3604",lat:48,lon:-45,heading:203,mode:"Stopped"},{name:"A3605",lat:58.96,lon:-8.18,heading:81,mode:"Anchored"}];return Fa.useEffect(()=>{if(B.current)return P.current=new Mm.Map({container:B.current,style:Dg[A],center:[-28,52],zoom:4}),P.current.addControl(new Mm.NavigationControl({showCompass:!1})),P.current.on("load",()=>{D.current.forEach(d=>d.remove()),D.current=[];const M=new Mm.LngLatBounds;X.forEach(d=>{const ye=new Mm.Marker({element:Tb(d.name,d.heading,d.mode),anchor:"center"}).setLngLat([d.lon,d.lat]).addTo(P.current);D.current.push(ye),M.extend([d.lon,d.lat])})}),()=>{D.current.forEach(M=>M.remove()),D.current=[],P.current?.remove(),P.current=null}},[]),Fa.useEffect(()=>{if(!P.current)return;const M=Dg[A]??Dg.day;P.current.setStyle(M)},[A]),Bi.jsx("div",{ref:B,className:R,style:{height:"100%",width:"100%"}})},Ab=()=>{const[R,A]=Fa.useState(new Date().toISOString());return Fa.useEffect(()=>{(()=>{const D=(60-new Date().getSeconds())*1e3;setTimeout(()=>{A(new Date().toISOString());const X=setInterval(()=>{A(new Date().toISOString())},6e4);return()=>clearInterval(X)},D)})()},[]),R},Eb=R=>`/roc-prototype//has-logo-${R}.svg`;function zb(){const[R,A]=Fa.useState(!1),[B,P]=Fa.useState(!1),[D,X]=Fa.useState(mp.day),[M,d]=Fa.useState(100);Fa.useEffect(()=>{document.documentElement.style.setProperty("--brightness",`${M}%`)},[M]);const ye=Fa.useRef(null),ke=Ab(),ot=Ce=>{document.documentElement.setAttribute("data-obc-theme",Ce.detail.value),X(Ce.detail.value)},Je=Ce=>{const aa=Ce.detail.value,dr=Math.max(aa,5);d(dr)},xt=Fa.useMemo(()=>Eb(D),[D]),Ot=()=>{A(!R),P(!1)},dt=()=>{P(!B),A(!1)};return Bi.jsxs(Bi.Fragment,{children:[Bi.jsx("header",{children:Bi.jsx(Sv,{className:"topbar",showClock:!0,showDimmingButton:!0,appTitle:"Hglund",pageName:"Fleet Overview",dimmingButtonActivated:R,onDimmingButtonClicked:Ot,menuButtonActivated:B,onMenuButtonClicked:dt,children:Bi.jsx(Uy,{date:ke,slot:"clock"})})}),Bi.jsxs("main",{className:"app-main",children:[Bi.jsx(gb,{className:"context-menu"}),Bi.jsx(Mb,{palette:D}),B&&Bi.jsx(lb,{className:"navigation-menu",logoSrc:xt}),R&&Bi.jsx(Ny,{ref:ye,className:"brilliance",palette:D,onPaletteChanged:ot,brightnessInputVariant:G1.slider,brightness:M,brightnessMax:110,onBrightnessChanged:Je})]})]})}d_.createRoot(document.getElementById("root")).render(Bi.jsx(Fa.StrictMode,{children:Bi.jsx(zb,{})}));
